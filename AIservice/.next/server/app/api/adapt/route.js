"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/adapt/route";
exports.ids = ["app/api/adapt/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadapt%2Froute&page=%2Fapi%2Fadapt%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadapt%2Froute.ts&appDir=C%3A%5CTest%5CAIservice-infcv%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CTest%5CAIservice-infcv&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadapt%2Froute&page=%2Fapi%2Fadapt%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadapt%2Froute.ts&appDir=C%3A%5CTest%5CAIservice-infcv%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CTest%5CAIservice-infcv&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Test_AIservice_infcv_app_api_adapt_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/adapt/route.ts */ \"(rsc)/./app/api/adapt/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/adapt/route\",\n        pathname: \"/api/adapt\",\n        filename: \"route\",\n        bundlePath: \"app/api/adapt/route\"\n    },\n    resolvedPagePath: \"C:\\\\Test\\\\AIservice-infcv\\\\app\\\\api\\\\adapt\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Test_AIservice_infcv_app_api_adapt_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/adapt/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjVfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZGFwdCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWRhcHQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhZGFwdCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVGVzdCU1Q0FJc2VydmljZS1pbmZjdiU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1Rlc3QlNUNBSXNlcnZpY2UtaW5mY3YmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ0k7QUFDakY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFsY3YtbGl0ZS1qc29uLz80ZWQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFRlc3RcXFxcQUlzZXJ2aWNlLWluZmN2XFxcXGFwcFxcXFxhcGlcXFxcYWRhcHRcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FkYXB0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWRhcHRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FkYXB0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVGVzdFxcXFxBSXNlcnZpY2UtaW5mY3ZcXFxcYXBwXFxcXGFwaVxcXFxhZGFwdFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYWRhcHQvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadapt%2Froute&page=%2Fapi%2Fadapt%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadapt%2Froute.ts&appDir=C%3A%5CTest%5CAIservice-infcv%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CTest%5CAIservice-infcv&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./Integration/orchestrator.ts":
/*!*************************************!*\
  !*** ./Integration/orchestrator.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ARB_MODELS: () => (/* binding */ ARB_MODELS),\n/* harmony export */   callWithFallbackChat: () => (/* binding */ callWithFallbackChat)\n/* harmony export */ });\n// Integration/orchestrator.ts\n// 8-model fallback orchestrator for arbitration chat calls (OpenRouter-compatible)\nconst ARB_MODELS = [\n    \"qwen/qwen3-coder-30b-a3b-instruct\",\n    \"meta-llama/llama-3.3-70b-instruct\",\n    \"qwen/qwen3-235b-a22b-thinking-2507\",\n    \"qwen/qwen3-coder-flash\",\n    \"x-ai/grok-code-fast-1\",\n    \"qwen/qwen-plus-2025-07-28\",\n    \"openai/gpt-4o-mini\",\n    \"google/gemini-2.5-flash-lite-preview-09-2025\"\n];\nasync function callWithFallbackChat(opts) {\n    const { client, messages, temperature = 0.0, response_format, max_tokens, validate } = opts;\n    let lastErr = null;\n    for(let i = 0; i < ARB_MODELS.length; i++){\n        const model = ARB_MODELS[i];\n        try {\n            const req = {\n                model,\n                messages,\n                temperature\n            };\n            if (response_format) req.response_format = response_format;\n            if (typeof max_tokens === \"number\") req.max_tokens = max_tokens;\n            const completion = await client.chat.completions.create(req);\n            const text = (completion?.choices?.[0]?.message?.content || \"\").trim();\n            if (!text) throw new Error(\"empty_content\");\n            if (typeof validate === \"function\") {\n                let ok = false;\n                try {\n                    ok = !!validate(text);\n                } catch  {}\n                if (!ok) throw new Error(\"validation_failed\");\n            }\n            return {\n                text,\n                modelUsed: model,\n                index: i,\n                usage: completion?.usage\n            };\n        } catch (e) {\n            lastErr = e;\n            continue; // try next model in chain\n        }\n    }\n    const msg = lastErr instanceof Error ? lastErr.message : String(lastErr);\n    throw new Error(`All arbitration models failed. Last error: ${msg}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9JbnRlZ3JhdGlvbi9vcmNoZXN0cmF0b3IudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw4QkFBOEI7QUFDOUIsbUZBQW1GO0FBRTVFLE1BQU1BLGFBQWdDO0lBQzNDO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDRCxDQUFVO0FBSUosZUFBZUMscUJBQXFCQyxJQU8xQztJQUVDLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLGNBQWMsR0FBRyxFQUFFQyxlQUFlLEVBQUVDLFVBQVUsRUFBRUMsUUFBUSxFQUFFLEdBQUdOO0lBQ3ZGLElBQUlPLFVBQWU7SUFDbkIsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlWLFdBQVdXLE1BQU0sRUFBRUQsSUFBSztRQUMxQyxNQUFNRSxRQUFRWixVQUFVLENBQUNVLEVBQUU7UUFDM0IsSUFBSTtZQUNGLE1BQU1HLE1BQVc7Z0JBQUVEO2dCQUFPUjtnQkFBVUM7WUFBWTtZQUNoRCxJQUFJQyxpQkFBaUJPLElBQUlQLGVBQWUsR0FBR0E7WUFDM0MsSUFBSSxPQUFPQyxlQUFlLFVBQVVNLElBQUlOLFVBQVUsR0FBR0E7WUFDckQsTUFBTU8sYUFBYSxNQUFNWCxPQUFPWSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsTUFBTSxDQUFDSjtZQUN4RCxNQUFNSyxPQUFPLENBQUNKLFlBQVlLLFNBQVMsQ0FBQyxFQUFFLEVBQUVDLFNBQVNDLFdBQVcsRUFBQyxFQUFHQyxJQUFJO1lBQ3BFLElBQUksQ0FBQ0osTUFBTSxNQUFNLElBQUlLLE1BQU07WUFDM0IsSUFBSSxPQUFPZixhQUFhLFlBQVk7Z0JBQ2xDLElBQUlnQixLQUFLO2dCQUNULElBQUk7b0JBQUVBLEtBQUssQ0FBQyxDQUFDaEIsU0FBU1U7Z0JBQU8sRUFBRSxPQUFNLENBQUM7Z0JBQ3RDLElBQUksQ0FBQ00sSUFBSSxNQUFNLElBQUlELE1BQU07WUFDM0I7WUFDQSxPQUFPO2dCQUFFTDtnQkFBTU8sV0FBV2I7Z0JBQU9jLE9BQU9oQjtnQkFBR2lCLE9BQVFiLFlBQW9CYTtZQUFNO1FBQy9FLEVBQUUsT0FBT0MsR0FBRztZQUNWbkIsVUFBVW1CO1lBQ1YsVUFBVSwwQkFBMEI7UUFDdEM7SUFDRjtJQUNBLE1BQU1DLE1BQU1wQixtQkFBbUJjLFFBQVFkLFFBQVFXLE9BQU8sR0FBR1UsT0FBT3JCO0lBQ2hFLE1BQU0sSUFBSWMsTUFBTSxDQUFDLDJDQUEyQyxFQUFFTSxJQUFJLENBQUM7QUFDckUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFsY3YtbGl0ZS1qc29uLy4vSW50ZWdyYXRpb24vb3JjaGVzdHJhdG9yLnRzP2MzZDIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW50ZWdyYXRpb24vb3JjaGVzdHJhdG9yLnRzXHJcbi8vIDgtbW9kZWwgZmFsbGJhY2sgb3JjaGVzdHJhdG9yIGZvciBhcmJpdHJhdGlvbiBjaGF0IGNhbGxzIChPcGVuUm91dGVyLWNvbXBhdGlibGUpXHJcblxyXG5leHBvcnQgY29uc3QgQVJCX01PREVMUzogcmVhZG9ubHkgc3RyaW5nW10gPSBbXHJcbiAgJ3F3ZW4vcXdlbjMtY29kZXItMzBiLWEzYi1pbnN0cnVjdCcsXHJcbiAgJ21ldGEtbGxhbWEvbGxhbWEtMy4zLTcwYi1pbnN0cnVjdCcsXHJcbiAgJ3F3ZW4vcXdlbjMtMjM1Yi1hMjJiLXRoaW5raW5nLTI1MDcnLFxyXG4gICdxd2VuL3F3ZW4zLWNvZGVyLWZsYXNoJyxcclxuICAneC1haS9ncm9rLWNvZGUtZmFzdC0xJyxcclxuICAncXdlbi9xd2VuLXBsdXMtMjAyNS0wNy0yOCcsXHJcbiAgJ29wZW5haS9ncHQtNG8tbWluaScsXHJcbiAgJ2dvb2dsZS9nZW1pbmktMi41LWZsYXNoLWxpdGUtcHJldmlldy0wOS0yMDI1JyxcclxuXSBhcyBjb25zdDtcclxuXHJcbmV4cG9ydCB0eXBlIENoYXRNZXNzYWdlID0geyByb2xlOiAnc3lzdGVtJyB8ICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxsV2l0aEZhbGxiYWNrQ2hhdChvcHRzOiB7XHJcbiAgY2xpZW50OiBhbnk7IC8vIE9wZW5BSS1saWtlIGNsaWVudCBmb3IgT3BlblJvdXRlclxyXG4gIG1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdO1xyXG4gIHRlbXBlcmF0dXJlPzogbnVtYmVyO1xyXG4gIHJlc3BvbnNlX2Zvcm1hdD86IGFueTtcclxuICBtYXhfdG9rZW5zPzogbnVtYmVyO1xyXG4gIHZhbGlkYXRlPzogKHRleHQ6IHN0cmluZykgPT4gYm9vbGVhbjsgLy8gb3B0aW9uYWwgZnVuY3Rpb25hbCB2YWxpZGF0b3IgKGUuZy4sIEpTT04gcGFyc2UpXHJcbn0pOiBQcm9taXNlPHsgdGV4dDogc3RyaW5nOyBtb2RlbFVzZWQ6IHN0cmluZzsgaW5kZXg6IG51bWJlcjsgdXNhZ2U/OiBhbnkgfT5cclxue1xyXG4gIGNvbnN0IHsgY2xpZW50LCBtZXNzYWdlcywgdGVtcGVyYXR1cmUgPSAwLjAsIHJlc3BvbnNlX2Zvcm1hdCwgbWF4X3Rva2VucywgdmFsaWRhdGUgfSA9IG9wdHM7XHJcbiAgbGV0IGxhc3RFcnI6IGFueSA9IG51bGw7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBBUkJfTU9ERUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zdCBtb2RlbCA9IEFSQl9NT0RFTFNbaV07XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXE6IGFueSA9IHsgbW9kZWwsIG1lc3NhZ2VzLCB0ZW1wZXJhdHVyZSB9O1xyXG4gICAgICBpZiAocmVzcG9uc2VfZm9ybWF0KSByZXEucmVzcG9uc2VfZm9ybWF0ID0gcmVzcG9uc2VfZm9ybWF0O1xyXG4gICAgICBpZiAodHlwZW9mIG1heF90b2tlbnMgPT09ICdudW1iZXInKSByZXEubWF4X3Rva2VucyA9IG1heF90b2tlbnM7XHJcbiAgICAgIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBjbGllbnQuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUocmVxKTtcclxuICAgICAgY29uc3QgdGV4dCA9IChjb21wbGV0aW9uPy5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgfHwgJycpLnRyaW0oKTtcclxuICAgICAgaWYgKCF0ZXh0KSB0aHJvdyBuZXcgRXJyb3IoJ2VtcHR5X2NvbnRlbnQnKTtcclxuICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGxldCBvayA9IGZhbHNlO1xyXG4gICAgICAgIHRyeSB7IG9rID0gISF2YWxpZGF0ZSh0ZXh0KTsgfSBjYXRjaCB7fVxyXG4gICAgICAgIGlmICghb2spIHRocm93IG5ldyBFcnJvcigndmFsaWRhdGlvbl9mYWlsZWQnKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4geyB0ZXh0LCBtb2RlbFVzZWQ6IG1vZGVsLCBpbmRleDogaSwgdXNhZ2U6IChjb21wbGV0aW9uIGFzIGFueSk/LnVzYWdlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGxhc3RFcnIgPSBlO1xyXG4gICAgICBjb250aW51ZTsgLy8gdHJ5IG5leHQgbW9kZWwgaW4gY2hhaW5cclxuICAgIH1cclxuICB9XHJcbiAgY29uc3QgbXNnID0gbGFzdEVyciBpbnN0YW5jZW9mIEVycm9yID8gbGFzdEVyci5tZXNzYWdlIDogU3RyaW5nKGxhc3RFcnIpO1xyXG4gIHRocm93IG5ldyBFcnJvcihgQWxsIGFyYml0cmF0aW9uIG1vZGVscyBmYWlsZWQuIExhc3QgZXJyb3I6ICR7bXNnfWApO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJBUkJfTU9ERUxTIiwiY2FsbFdpdGhGYWxsYmFja0NoYXQiLCJvcHRzIiwiY2xpZW50IiwibWVzc2FnZXMiLCJ0ZW1wZXJhdHVyZSIsInJlc3BvbnNlX2Zvcm1hdCIsIm1heF90b2tlbnMiLCJ2YWxpZGF0ZSIsImxhc3RFcnIiLCJpIiwibGVuZ3RoIiwibW9kZWwiLCJyZXEiLCJjb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwidGV4dCIsImNob2ljZXMiLCJtZXNzYWdlIiwiY29udGVudCIsInRyaW0iLCJFcnJvciIsIm9rIiwibW9kZWxVc2VkIiwiaW5kZXgiLCJ1c2FnZSIsImUiLCJtc2ciLCJTdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./Integration/orchestrator.ts\n");

/***/ }),

/***/ "(rsc)/./app/api/adapt/route.ts":
/*!********************************!*\
  !*** ./app/api/adapt/route.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_parse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/parse */ \"(rsc)/./lib/parse.ts\");\n/* harmony import */ var _lib_clean__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/clean */ \"(rsc)/./lib/clean.ts\");\n/* harmony import */ var _lib_structure_ai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/structure_ai */ \"(rsc)/./lib/structure_ai.ts\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _lib_schema__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/schema */ \"(rsc)/./lib/schema.ts\");\n/* harmony import */ var _lib_sanitize__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/sanitize */ \"(rsc)/./lib/sanitize.ts\");\n/* harmony import */ var _lib_prompt__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/prompt */ \"(rsc)/./lib/prompt.ts\");\n/* harmony import */ var _lib_diff__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/lib/diff */ \"(rsc)/./lib/diff.ts\");\n/* harmony import */ var _config_models__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/config/models */ \"(rsc)/./config/models.ts\");\n/* harmony import */ var _src_hr_actionVerbs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/src/hr/actionVerbs */ \"(rsc)/./src/hr/actionVerbs.ts\");\n/* harmony import */ var _Integration_orchestrator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/Integration/orchestrator */ \"(rsc)/./Integration/orchestrator.ts\");\n\n\n\n\n\n\n\n\n\n\n// Configuration OpenAI sera créée dynamiquement\n\n\n// Taille maximale du fichier (5MB)\nconst MAX_FILE_SIZE = 5 * 1024 * 1024;\n// Cache mémoire simple pour la structuration clean_cv (clé: SHA-256 du cvText)\nconst cleanCache = new Map();\n// Heuristics to detect if an experience item is likely an education/training (top-level)\nfunction isLikelyEducationEntry(e) {\n    const s = [\n        e?.company,\n        e?.title,\n        e?.location,\n        e?.description\n    ].filter(Boolean).join(\" \").toLowerCase();\n    const eduTerms = [\n        \"universit\",\n        \"university\",\n        \"\\xe9cole\",\n        \"ecole\",\n        \"school\",\n        \"college\",\n        \"institut\",\n        \"institute\",\n        \"iut\",\n        \"insa\",\n        \"polytech\",\n        \"ens\",\n        \"ensta\",\n        \"enac\",\n        \"mines\",\n        \"centrale\",\n        \"sorbonne\",\n        \"paris-saclay\",\n        \"hec\",\n        \"h\\xe9c\",\n        \"em lyon\",\n        \"essec\",\n        \"licence\",\n        \"license\",\n        \"bachelor\",\n        \"master\",\n        \"msc\",\n        \"m.sc\",\n        \"mba\",\n        \"phd\",\n        \"doctorat\",\n        \"bts\",\n        \"dut\",\n        \"cap\",\n        \"deug\",\n        \"dea\",\n        \"dipl\",\n        \"dipl\\xf4me\",\n        \"diplome\",\n        \"formation\",\n        \"certificat\",\n        \"certificate\",\n        \"certification\",\n        \"bootcamp\",\n        \"mooc\",\n        \"coursera\",\n        \"edx\",\n        \"udemy\",\n        \"openclassrooms\"\n    ];\n    return eduTerms.some((k)=>s.includes(k));\n}\n// Revert translated fields back to original language when detected\nfunction enforceOriginalLanguageCV(result, before, origLang) {\n    try {\n        const sameOrUnknown = (s)=>{\n            const dl = detectLangLoose(String(s || \"\"));\n            return dl === \"unknown\" || dl === String(origLang || \"\").toLowerCase();\n        };\n        // Experience fields\n        const bexp = Array.isArray(before?.experience) ? before.experience : [];\n        const aexp = Array.isArray(result?.experience) ? result.experience : [];\n        const n = Math.min(bexp.length, aexp.length);\n        for(let i = 0; i < n; i++){\n            const b = bexp[i] || {};\n            const a = aexp[i] || {};\n            if (!sameOrUnknown(a.title) && b.title) a.title = b.title;\n            if (!sameOrUnknown(a.company) && b.company) a.company = b.company;\n            if (!sameOrUnknown(a.location) && b.location) a.location = b.location;\n            const bBul = Array.isArray(b.bullets) ? b.bullets : [];\n            const aBul = Array.isArray(a.bullets) ? a.bullets : [];\n            const m = Math.min(bBul.length, aBul.length);\n            for(let j = 0; j < m; j++){\n                if (!sameOrUnknown(aBul[j]) && bBul[j]) aBul[j] = bBul[j];\n            }\n            if (Array.isArray(a.bullets)) a.bullets = aBul;\n        }\n        // Projects\n        const bproj = Array.isArray(before?.projects) ? before.projects : [];\n        const aproj = Array.isArray(result?.projects) ? result.projects : [];\n        const pn = Math.min(bproj.length, aproj.length);\n        for(let i = 0; i < pn; i++){\n            const b = bproj[i] || {};\n            const a = aproj[i] || {};\n            if (!sameOrUnknown(a.name) && b.name) a.name = b.name;\n            const bBul = Array.isArray(b.bullets) ? b.bullets : [];\n            const aBul = Array.isArray(a.bullets) ? a.bullets : [];\n            const m = Math.min(bBul.length, aBul.length);\n            for(let j = 0; j < m; j++){\n                if (!sameOrUnknown(aBul[j]) && bBul[j]) aBul[j] = bBul[j];\n            }\n            if (Array.isArray(a.bullets)) a.bullets = aBul;\n        }\n        // Education\n        const bedu = Array.isArray(before?.education) ? before.education : [];\n        const aedu = Array.isArray(result?.education) ? result.education : [];\n        const en = Math.min(bedu.length, aedu.length);\n        for(let i = 0; i < en; i++){\n            const b = bedu[i] || {};\n            const a = aedu[i] || {};\n            if (!sameOrUnknown(a.school) && b.school) a.school = b.school;\n            if (!sameOrUnknown(a.degree) && b.degree) a.degree = b.degree;\n            if (!sameOrUnknown(a.location) && b.location) a.location = b.location;\n        }\n    } catch  {}\n}\n// Loose language detector (scripts + simple stopwords)\nfunction detectLangLoose(text) {\n    const t = String(text || \"\").toLowerCase();\n    if (!t.trim()) return \"unknown\";\n    if (/[\\u0600-\\u06FF]/.test(text)) return \"ar\";\n    if (/[\\u4E00-\\u9FFF]/.test(text)) return \"zh\";\n    if (/[\\u3040-\\u30FF]/.test(text)) return \"ja\";\n    if (/[\\uAC00-\\uD7AF]/.test(text)) return \"ko\";\n    const langs = {\n        fr: [\n            \" le \",\n            \" la \",\n            \" les \",\n            \" des \",\n            \" et \",\n            \" \\xe0 \",\n            \" ou \",\n            \" exp\\xe9rience \",\n            \" comp\\xe9tence \",\n            \" profil \"\n        ],\n        en: [\n            \" the \",\n            \" and \",\n            \" to \",\n            \" or \",\n            \" experience \",\n            \" skills \",\n            \" profile \",\n            \" developer \",\n            \" engineer \"\n        ],\n        es: [\n            \" el \",\n            \" la \",\n            \" los \",\n            \" las \",\n            \" de \",\n            \" y \",\n            \" para \",\n            \" experiencia \",\n            \" perfil \",\n            \" desarrollador \"\n        ],\n        it: [\n            \" il \",\n            \" la \",\n            \" lo \",\n            \" le \",\n            \" di \",\n            \" e \",\n            \" per \",\n            \" esperienza \",\n            \" profilo \",\n            \" sviluppatore \"\n        ],\n        de: [\n            \" der \",\n            \" die \",\n            \" das \",\n            \" und \",\n            \" f\\xfcr \",\n            \" erfahrung \",\n            \" profil \",\n            \" entwickler \"\n        ],\n        pt: [\n            \" o \",\n            \" a \",\n            \" os \",\n            \" as \",\n            \" de \",\n            \" e \",\n            \" para \",\n            \" experi\\xeancia \",\n            \" perfil \",\n            \" desenvolvedor \"\n        ],\n        nl: [\n            \" de \",\n            \" het \",\n            \" en \",\n            \" voor \",\n            \" ervaring \",\n            \" profiel \",\n            \" ontwikkelaar \"\n        ],\n        tr: [\n            \" ve \",\n            \" i\\xe7in \",\n            \" deneyim \",\n            \" profil \",\n            \" geliştirici \",\n            \" m\\xfchendis \"\n        ]\n    };\n    let best = \"unknown\";\n    let bestScore = 0;\n    for (const [code, words] of Object.entries(langs)){\n        const score = words.reduce((acc, w)=>acc + (t.includes(w) ? 1 : 0), 0);\n        if (score > bestScore) {\n            bestScore = score;\n            best = code;\n        }\n    }\n    return best;\n}\n// Map an experience-like object to an education record (remove bullets) (top-level)\nfunction mapExperienceToEducation(e) {\n    const pick = (x)=>typeof x === \"string\" ? x.trim() : \"\";\n    const hasEduWord = (str)=>isLikelyEducationEntry({\n            company: \"\",\n            title: str\n        });\n    const company = pick(e?.company);\n    const title = pick(e?.title);\n    let school = \"\";\n    let degree = undefined;\n    if (hasEduWord(company) || company.length >= title.length) school = company || title;\n    else school = title || company;\n    const degreeTerms = [\n        \"licence\",\n        \"license\",\n        \"bachelor\",\n        \"master\",\n        \"msc\",\n        \"mba\",\n        \"phd\",\n        \"doctorat\",\n        \"bts\",\n        \"dut\",\n        \"cap\"\n    ];\n    const tLow = title.toLowerCase();\n    const found = degreeTerms.find((d)=>tLow.includes(d));\n    if (found) degree = title;\n    const startDate = pick(e?.startDate);\n    const endDate = pick(e?.endDate);\n    const rec = {\n        school: school || company || title\n    };\n    if (degree) rec.degree = degree;\n    if (startDate || endDate) {\n        const sep = \" – \";\n        rec.dates = [\n            startDate || \"\",\n            endDate || \"\"\n        ].filter((x, i)=>i === 0 ? x !== \"\" : true).join(sep).trim();\n        if (!rec.dates) delete rec.dates;\n    }\n    return rec;\n}\n// Construit le Clean CV et remonte l'usage (tokens) si structuration IA utilisée\nasync function buildCleanCv(cvText) {\n    const key = (0,crypto__WEBPACK_IMPORTED_MODULE_4__.createHash)(\"sha256\").update(cvText).digest(\"hex\");\n    if (cleanCache.has(key)) {\n        return {\n            clean: cleanCache.get(key),\n            source: \"cache\"\n        };\n    }\n    let clean;\n    let usage;\n    let model;\n    let source = \"deterministic\";\n    // Si clé IA de structuration OpenRouter présente, tenter l'IA d'abord\n    if (process.env.OPENROUTER_KEY_PDF_TO_JSON) {\n        try {\n            const ai = await (0,_lib_structure_ai__WEBPACK_IMPORTED_MODULE_3__.structureCvTextWithAI)(cvText);\n            clean = ai.structured;\n            usage = ai.usage;\n            model = ai.model;\n            source = \"ai\";\n        } catch (e) {\n            console.warn(\"AI structuring failed, falling back to deterministic:\", e);\n            clean = (0,_lib_clean__WEBPACK_IMPORTED_MODULE_2__.toCleanResume)(cvText);\n        }\n    } else {\n        clean = (0,_lib_clean__WEBPACK_IMPORTED_MODULE_2__.toCleanResume)(cvText);\n    }\n    cleanCache.set(key, clean);\n    return {\n        clean,\n        source,\n        usage,\n        model\n    };\n}\n// Helper: sort experiences anti-chronologically (newest first) using endDate (YYYY-MM or \"Present\") then startDate\nfunction ymToNum(ym) {\n    if (!ym) return null;\n    if (ym === \"Present\") return 9999 * 12 + 12; // sentinel for current role\n    const m = /^([0-9]{4})-([0-9]{2})$/.exec(String(ym));\n    if (!m) return null;\n    const year = parseInt(m[1], 10);\n    const month = parseInt(m[2], 10);\n    if (!Number.isFinite(year) || !Number.isFinite(month) || month < 1 || month > 12) return null;\n    return year * 12 + month;\n}\nfunction sortExperienceAntiChrono(exps) {\n    if (!Array.isArray(exps)) return exps;\n    const withIndex = exps.map((e, idx)=>({\n            e,\n            idx\n        }));\n    withIndex.sort((a, b)=>{\n        const ae = a.e || {};\n        const be = b.e || {};\n        const aKey = ymToNum(ae.endDate) ?? ymToNum(ae.startDate);\n        const bKey = ymToNum(be.endDate) ?? ymToNum(be.startDate);\n        if (aKey != null && bKey != null) {\n            if (bKey !== aKey) return bKey - aKey; // descending: newest first\n        } else if (aKey != null) {\n            return -1; // a has a date, b not → a first\n        } else if (bKey != null) {\n            return 1; // b has a date, a not → b first\n        }\n        // fallback to original order (stable)\n        return a.idx - b.idx;\n    });\n    return withIndex.map(({ e })=>e);\n}\n// Try to salvage JSON from models that return extra text or trailing commas\nfunction parseJsonStrictOrSalvage(text) {\n    // Pre-clean: remove markdown code fences\n    let t = text.replace(/```json/gi, \"```\").replace(/```/g, \"\");\n    // 1) Strict\n    try {\n        return JSON.parse(t);\n    } catch  {}\n    // 2) Extract between first '{' and last '}'\n    const first = t.indexOf(\"{\");\n    const last = t.lastIndexOf(\"}\");\n    if (first >= 0 && last > first) {\n        let slice = t.slice(first, last + 1);\n        // Remove C-style and line comments conservatively\n        slice = slice.replace(/\\/\\*[\\s\\S]*?\\*\\//g, \"\");\n        slice = slice.replace(/(^|[\\r\\n])\\s*\\/\\/.*(?=\\r?\\n|$)/g, \"$1\");\n        try {\n            return JSON.parse(slice);\n        } catch  {}\n        // 3) Minimal cleanup: smart quotes and trailing commas\n        let cleaned = slice.replace(/[\\u201C\\u201D]/g, '\"').replace(/[\\u2018\\u2019]/g, \"'\").replace(/,\\s*([}\\]])/g, \"$1\");\n        // Again remove comments if any reappeared\n        cleaned = cleaned.replace(/\\/\\*[\\s\\S]*?\\*\\//g, \"\").replace(/(^|[\\r\\n])\\s*\\/\\/.*(?=\\r?\\n|$)/g, \"$1\");\n        try {\n            return JSON.parse(cleaned);\n        } catch  {}\n    }\n    // 4) Remove trailing commas globally and retry\n    const cleanedGlobal = t.replace(/,\\s*([}\\]])/g, \"$1\");\n    try {\n        return JSON.parse(cleanedGlobal);\n    } catch  {}\n    throw new Error(\"Unable to parse JSON\");\n}\n// Agrège les usages (tokens) par étape pour un total global\nfunction computeCostTotals(cost) {\n    const totals = {\n        prompt_tokens: 0,\n        completion_tokens: 0,\n        total_tokens: 0\n    };\n    for (const s of cost.steps){\n        const u = s?.usage;\n        if (!u) continue;\n        if (typeof u.prompt_tokens === \"number\") totals.prompt_tokens += u.prompt_tokens;\n        if (typeof u.completion_tokens === \"number\") totals.completion_tokens += u.completion_tokens;\n        if (typeof u.total_tokens === \"number\") totals.total_tokens += u.total_tokens;\n    }\n    cost.totals = totals;\n}\n// Calcule le coût USD par étape et total, à partir des tokens et du modèle\nfunction computeCostUSD(cost) {\n    const envOr = (key, def)=>{\n        const v = process.env[key];\n        const n = v ? parseFloat(v) : NaN;\n        return Number.isFinite(n) ? n : def;\n    };\n    const pricing = (model)=>{\n        const m = (model || \"\").toLowerCase();\n        // 1) Configurable per-model pricing (OpenRouter or others)\n        const cfg = (0,_config_models__WEBPACK_IMPORTED_MODULE_9__.getPricingForModel)(model || \"\");\n        if (cfg) return cfg;\n        // 2) Known OpenAI defaults with env overrides\n        if (m.includes(\"gpt-4o-mini\")) {\n            return {\n                inPerMTok: envOr(\"PRICE_GPT4O_MINI_IN_PER_MTOK\", 0.15),\n                outPerMTok: envOr(\"PRICE_GPT4O_MINI_OUT_PER_MTOK\", 0.60)\n            };\n        }\n        if (m.includes(\"gpt-4o\")) {\n            return {\n                inPerMTok: envOr(\"PRICE_GPT4O_IN_PER_MTOK\", 5.0),\n                outPerMTok: envOr(\"PRICE_GPT4O_OUT_PER_MTOK\", 15.0)\n            };\n        }\n        // 3) Fallback to default pricing\n        return (0,_config_models__WEBPACK_IMPORTED_MODULE_9__.getDefaultPricing)();\n    };\n    let totalUSD = 0;\n    for (const step of cost.steps){\n        const u = step.usage || {};\n        const override = step.price_override;\n        const hasOverride = override && typeof override.inPerMTok === \"number\" && typeof override.outPerMTok === \"number\";\n        const rates = hasOverride ? override : pricing(step.model);\n        const inUSD = (typeof u.prompt_tokens === \"number\" ? u.prompt_tokens : 0) * (rates.inPerMTok / 1000000);\n        const outUSD = (typeof u.completion_tokens === \"number\" ? u.completion_tokens : 0) * (rates.outPerMTok / 1000000);\n        step.cost_usd = +(inUSD + outUSD).toFixed(6);\n        totalUSD += step.cost_usd;\n    }\n    cost.currency = \"USD\";\n    cost.total_usd = +totalUSD.toFixed(6);\n}\n// === Judge (arbiter) helpers ===\nasync function createJudgeClient() {\n    if (!(0,_config_models__WEBPACK_IMPORTED_MODULE_9__.isJudgeEnabled)()) throw new Error(\"Juge d\\xe9sactiv\\xe9\");\n    const OpenAI = (await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/formdata-node@4.4.1\"), __webpack_require__.e(\"vendor-chunks/openai@4.104.0_zod@3.25.76\"), __webpack_require__.e(\"vendor-chunks/form-data-encoder@1.7.2\"), __webpack_require__.e(\"vendor-chunks/whatwg-url@5.0.0\"), __webpack_require__.e(\"vendor-chunks/agentkeepalive@4.6.0\"), __webpack_require__.e(\"vendor-chunks/tr46@0.0.3\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill@4.0.0-beta.3\"), __webpack_require__.e(\"vendor-chunks/node-fetch@2.7.0\"), __webpack_require__.e(\"vendor-chunks/webidl-conversions@3.0.1\"), __webpack_require__.e(\"vendor-chunks/ms@2.1.3\"), __webpack_require__.e(\"vendor-chunks/humanize-ms@1.2.1\"), __webpack_require__.e(\"vendor-chunks/event-target-shim@5.0.1\"), __webpack_require__.e(\"vendor-chunks/abort-controller@3.0.0\")]).then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/.pnpm/openai@4.104.0_zod@3.25.76/node_modules/openai/index.mjs\"))).default;\n    const model = (0,_config_models__WEBPACK_IMPORTED_MODULE_9__.getJudgeModel)();\n    const orKey = process.env.OPENROUTER_KEY_JUDGE || process.env.OPENROUTER_API_KEY_JUDGE;\n    if (!orKey) throw new Error(\"Cl\\xe9 API OpenRouter du juge manquante (OPENROUTER_KEY_JUDGE ou OPENROUTER_API_KEY_JUDGE).\");\n    const client = new OpenAI({\n        apiKey: orKey,\n        baseURL: \"https://openrouter.ai/api/v1\",\n        defaultHeaders: {\n            \"HTTP-Referer\": process.env.OPENROUTER_HTTP_REFERER || \"http://localhost:3000\",\n            \"X-Title\": process.env.OPENROUTER_APP_TITLE || \"QuickCV\"\n        }\n    });\n    return {\n        client,\n        model\n    };\n}\nasync function judgePdfToJson(cvText, cleanCv) {\n    if (!(0,_config_models__WEBPACK_IMPORTED_MODULE_9__.isJudgeEnabled)()) return null;\n    const { client, model } = await createJudgeClient();\n    const system = [\n        \"You are an expert evaluator of PDF→JSON CV structuring.\",\n        \"CRITICAL RULE: Never penalize the JSON for the absence of information that does not exist in the source (cv_text).\",\n        \"Strictly compare clean_cv (JSON) vs cv_text (source).\",\n        \"• If information is PRESENT in cv_text but MISSING from clean_cv → it is a model miss (classify under missingFromJsonButPresentInSource).\",\n        \"• If information is ABSENT from cv_text (and therefore also from the JSON) → this is NOT an error. Classify it under notPresentInSource and DO NOT put it in missingFields.\",\n        \"Provide concise EVIDENCE (≤200 characters) quoted from cv_text to support items identified as present.\",\n        \"Explain WHY the model performed well/poorly and give a price-performance appraisal.\",\n        \"Respond only with a JSON object conforming to the requested schema.\"\n    ].join(\" \");\n    const schema = [\n        \"{\",\n        '  \"qualityScore\": number (0-100),',\n        '  \"completenessScore\": number (0-100),',\n        '  \"missingFields\": string[],',\n        '  \"missingFromJsonButPresentInSource\": string[],',\n        '  \"notPresentInSource\": string[],',\n        '  \"structuralIssues\": string[],',\n        '  \"strengths\": string[],',\n        '  \"weaknesses\": string[],',\n        '  \"recommendations\": string[],',\n        '  \"analysis\": string,',\n        '  \"evidence\": Array<{ field: string; quote: string }>,',\n        '  \"sourceCoverageScore\": number (0-100),',\n        '  \"pricePerformance\": string,',\n        '  \"verdict\": \"excellent\" | \"good\" | \"fair\" | \"poor\"',\n        \"}\"\n    ].join(\"\\n\");\n    const user = JSON.stringify({\n        instruction: \"Evaluate the PDF→JSON structuring without blaming missing information that is not present in the source. Classify absences correctly and provide evidence for what is present.\",\n        cv_text: cvText,\n        clean_cv: cleanCv,\n        expected_schema: schema\n    });\n    const completion = await client.chat.completions.create({\n        model,\n        messages: [\n            {\n                role: \"system\",\n                content: system\n            },\n            {\n                role: \"user\",\n                content: user\n            }\n        ],\n        temperature: 0.2,\n        response_format: {\n            type: \"json_object\"\n        },\n        max_tokens: 600\n    });\n    const text = completion.choices[0]?.message?.content || \"{}\";\n    let parsed = {};\n    try {\n        parsed = JSON.parse(text);\n    } catch  {}\n    return {\n        evaluation: parsed,\n        usage: completion?.usage,\n        model\n    };\n}\nasync function judgeArbitrage(cvText, cleanCv, jdText, resultJson, reportObj) {\n    if (!(0,_config_models__WEBPACK_IMPORTED_MODULE_9__.isJudgeEnabled)()) return null;\n    const { client, model } = await createJudgeClient();\n    const system = [\n        \"You are an expert evaluator of CV ↔ JD arbitration.\",\n        \"CRITICAL RULE: Evaluate only on the basis of clean_cv (JSON) and jd_text. Do not blame missing information if it is not in clean_cv.\",\n        \"Instead, penalize: hallucinations, misuse or non-use of information PRESENT in clean_cv, or poor coverage of JD requirements.\",\n        \"Support EVERY important claim with concise quotations (≤200 characters) from clean_cv and/or jd_text. If no evidence is available, mark it as unsupportedCriticisms.\",\n        \"You must evaluate: report quality, relevance of changes, keyword coverage, and overall adaptation quality.\",\n        \"Also give a price-performance appraisal.\",\n        \"Respond only with a JSON object conforming to the requested schema.\"\n    ].join(\" \");\n    const schema = [\n        \"{\",\n        '  \"reportQualityScore\": number (0-100),',\n        '  \"changesQualityScore\": number (0-100),',\n        '  \"keywordCoverageScore\": number (0-100),',\n        '  \"overallFitScore\": number (0-100),',\n        '  \"strengths\": string[],',\n        '  \"weaknesses\": string[],',\n        '  \"recommendations\": string[],',\n        '  \"cvLimitations\": string[],',\n        '  \"modelIssues\": string[],',\n        '  \"unsupportedCriticisms\": string[],',\n        '  \"evidence\": Array<{ source: \"clean_cv\" | \"jd_text\"; quote: string; rationale?: string }>,',\n        '  \"pricePerformance\": string,',\n        '  \"analysis\": string,',\n        '  \"verdict\": \"excellent\" | \"good\" | \"fair\" | \"poor\"',\n        \"}\"\n    ].join(\"\\n\");\n    const user = JSON.stringify({\n        instruction: \"Evaluate the arbitration relying exclusively on clean_cv and jd_text. Do not use cv_text. Support critiques with evidence and distinguish JSON limitations vs model errors.\",\n        clean_cv: cleanCv,\n        jd_text: jdText,\n        result: resultJson,\n        report: reportObj,\n        expected_schema: schema\n    });\n    const completion = await client.chat.completions.create({\n        model,\n        messages: [\n            {\n                role: \"system\",\n                content: system\n            },\n            {\n                role: \"user\",\n                content: user\n            }\n        ],\n        temperature: 0.2,\n        response_format: {\n            type: \"json_object\"\n        },\n        max_tokens: 700\n    });\n    const text = completion.choices[0]?.message?.content || \"{}\";\n    let parsed = {};\n    try {\n        parsed = JSON.parse(text);\n    } catch  {}\n    return {\n        evaluation: parsed,\n        usage: completion?.usage,\n        model\n    };\n}\n// Route GET pour tester que l'API fonctionne\nasync function GET() {\n    console.log(\"GET /api/adapt appel\\xe9e\");\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        message: \"API /api/adapt fonctionne - cv_text ou images[] + Arbitrage\",\n        timestamp: new Date().toISOString(),\n        openrouterVisionConfigured: !!process.env.OPENROUTER_KEY_VISION,\n        openrouterArbitrageConfigured: !!process.env.OPENROUTER_KEY_ARBITRAGE,\n        openrouterStructurerConfigured: !!process.env.OPENROUTER_KEY_PDF_TO_JSON,\n        schemaLoaded: !!_lib_schema__WEBPACK_IMPORTED_MODULE_5__.ResumeJSON,\n        promptLoaded: !!_lib_prompt__WEBPACK_IMPORTED_MODULE_7__.SYSTEM_PROMPT && _lib_prompt__WEBPACK_IMPORTED_MODULE_7__.SYSTEM_PROMPT.length > 0,\n        visionParserLoaded: true\n    });\n}\nasync function POST(request) {\n    console.log(\"POST /api/adapt appel\\xe9e\");\n    try {\n        // Flags évalués après parsing du FormData (plus bas) détermineront si Arbitrage est requis\n        // Parser les données du formulaire\n        const formData = await request.formData();\n        const jdText = formData.get(\"jd_text\");\n        const cvTextField = formData.get(\"cv_text\") || \"\";\n        const imageEntries = formData.getAll(\"images[]\");\n        const returnRaw = String(formData.get(\"return_raw\") || \"\").toLowerCase() === \"1\" || String(formData.get(\"return_raw\") || \"\").toLowerCase() === \"true\";\n        const onlyClean = String(formData.get(\"only_clean\") || \"\").toLowerCase() === \"1\" || String(formData.get(\"only_clean\") || \"\").toLowerCase() === \"true\";\n        const arbOnly = String(formData.get(\"arb_only\") || \"\").toLowerCase() === \"1\" || String(formData.get(\"arb_only\") || \"\").toLowerCase() === \"true\";\n        const onlyRaw = String(formData.get(\"only_raw\") || \"\").toLowerCase() === \"1\" || String(formData.get(\"only_raw\") || \"\").toLowerCase() === \"true\";\n        const cleanCvJson = formData.get(\"clean_cv_json\");\n        // Overrides for ARBITRAGE only (UI-driven)\n        const arbModelIdRaw = formData.get(\"arb_model_id\");\n        const arbModelOverride = arbModelIdRaw && String(arbModelIdRaw).trim().length > 0 ? String(arbModelIdRaw).trim() : null;\n        const arbInPriceRaw = formData.get(\"arb_in_price_per_Mtok\");\n        const arbOutPriceRaw = formData.get(\"arb_out_price_per_Mtok\");\n        const arbPriceOverride = (()=>{\n            const pIn = arbInPriceRaw !== null ? parseFloat(String(arbInPriceRaw)) : NaN;\n            const pOut = arbOutPriceRaw !== null ? parseFloat(String(arbOutPriceRaw)) : NaN;\n            if (Number.isFinite(pIn) || Number.isFinite(pOut)) {\n                return {\n                    inPerMTok: Number.isFinite(pIn) ? pIn : 0,\n                    outPerMTok: Number.isFinite(pOut) ? pOut : 0\n                };\n            }\n            return undefined;\n        })();\n        // Compteur de coûts (tokens) par étape\n        const cost = {\n            steps: []\n        };\n        console.log(\"JD Text longueur:\", jdText?.length);\n        console.log(\"cv_text pr\\xe9sent:\", !!cvTextField, \"images[] count:\", imageEntries?.length || 0);\n        // Validation des entrées\n        if (!jdText && !onlyRaw) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Description de poste (jd_text) requise\"\n            }, {\n                status: 400\n            });\n        }\n        // Branches spéciales: Arbitrage direct sur clean_cv_json fourni\n        if (arbOnly) {\n            if (!cleanCvJson) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"arb_only activ\\xe9 mais clean_cv_json manquant\"\n                }, {\n                    status: 400\n                });\n            }\n            // JSON-only arbitrage: do not include cv_text\n            const userMessageArb = JSON.stringify({\n                clean_cv: JSON.parse(cleanCvJson),\n                jd_text: jdText.trim()\n            });\n            // Provider + modèle (OpenRouter uniquement)\n            const OpenAI = (await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/formdata-node@4.4.1\"), __webpack_require__.e(\"vendor-chunks/openai@4.104.0_zod@3.25.76\"), __webpack_require__.e(\"vendor-chunks/form-data-encoder@1.7.2\"), __webpack_require__.e(\"vendor-chunks/whatwg-url@5.0.0\"), __webpack_require__.e(\"vendor-chunks/agentkeepalive@4.6.0\"), __webpack_require__.e(\"vendor-chunks/tr46@0.0.3\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill@4.0.0-beta.3\"), __webpack_require__.e(\"vendor-chunks/node-fetch@2.7.0\"), __webpack_require__.e(\"vendor-chunks/webidl-conversions@3.0.1\"), __webpack_require__.e(\"vendor-chunks/ms@2.1.3\"), __webpack_require__.e(\"vendor-chunks/humanize-ms@1.2.1\"), __webpack_require__.e(\"vendor-chunks/event-target-shim@5.0.1\"), __webpack_require__.e(\"vendor-chunks/abort-controller@3.0.0\")]).then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/.pnpm/openai@4.104.0_zod@3.25.76/node_modules/openai/index.mjs\"))).default;\n            const useOR = true;\n            let openaiArbitrage;\n            let arbModel = arbModelOverride || (0,_config_models__WEBPACK_IMPORTED_MODULE_9__.getConfiguredModel)(\"arbitrage\") || \"gpt-4o\";\n            {\n                const key = process.env.OPENROUTER_KEY_ARBITRAGE;\n                if (!key) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"OPENROUTER_KEY_ARBITRAGE manquante\"\n                }, {\n                    status: 500\n                });\n                openaiArbitrage = new OpenAI({\n                    apiKey: key,\n                    baseURL: \"https://openrouter.ai/api/v1\",\n                    defaultHeaders: {\n                        \"HTTP-Referer\": process.env.OPENROUTER_HTTP_REFERER || \"http://localhost:3000\",\n                        \"X-Title\": process.env.OPENROUTER_APP_TITLE || \"QuickCV\"\n                    }\n                });\n            }\n            try {\n                const todayISO = new Date().toISOString().split(\"T\")[0]; // YYYY-MM-DD\n                const reportSpec = `\\n\\nTEMPORAL CONTEXT:\\nToday's date: ${todayISO}. Use this to compute experience durations and detect current roles (endDate: \"Present\").\\n\\nMANDATORY OUTPUT FORMAT (OVERRIDES PRIOR RULES):\\nReturn a single JSON object with keys:\\n- result: object STRICTLY conforming to ResumeJSON (see contract below)\\n- report: an explanation object containing:\\n   - narrative: string (6–10 sentences IN THE SAME LANGUAGE AS clean_cv.metadata.language — DO NOT translate; justify choices, cite 3–5 covered JD keywords and 2–3 missing, include 1–2 concrete bullet rewrites: before → after + reason)\\n   - fitScore: number 0–100\\n   - jdCoverage: { matchedKeywords[], missingKeywords[], partialMatches[] }\\n   - decisions: {\\n       keptExperiences[] (each item: at least sourceIndex and reason),\\n       removedExperiences[] (at least sourceIndex and reason),\\n       bulletEdits[] { sourceIndex, before, after, reason } (3–10 items max, representative sample)\\n     }\\n   - warnings[]?\\n   - languageUsed: string  // copy clean_cv.metadata.language (do not translate)\\n\\nSTRICT ResumeJSON CONTRACT (minimal skeleton) — any non-listed keys are forbidden:\\n{\\n  metadata?: { name?: string; email?: string; phone?: string; location?: string },\\n  experience: Array<{ company: string; title: string; location?: string; startDate: string; endDate?: string; bullets?: string[] }>,\\n  skills?: { languages?: string[]; frameworks?: string[]; tools?: string[]; other?: string[] },\\n  projects?: Array<{ name: string; description?: string; bullets?: string[] }>,\\n  education?: Array<{ school: string; degree?: string; startDate?: string; endDate?: string }>,\\n  certifications?: string[],\\n  languages?: string[]\\n}\\n\\nNORMALIZATION & MAPPING RULES (accept any JSON-like input):\\n- If clean_cv suggests synonyms/variants, map conservatively; never invent facts.\\n- Dates: format ISO short 'YYYY-MM'. If unknown, omit the field (do not set null).\\n- Arrays: always arrays (even empty). Never null/undefined.\\n- Strings: always strings (never objects/arrays).\\n- Types: convert/coerce intelligently (e.g., number → string if necessary).\\n- Optional fields: omit if not available; never invent.\\n\\nSTRICT JSON OUTPUT RULES:\\n- Return NO text outside JSON. No Markdown, no backticks, no comments.\\n- Output MUST start with '{' and end with '}'.\\n- Keys and strings in double quotes \\\\\"...\\\\\". No single quotes for keys/values.\\n- NO trailing commas.\\n- All keys must be quoted (JSON standard).\\n- Correctly escape internal quotes.\\n\\nMENTAL VALIDATION before returning:\\n- All experiences have valid company, title, startDate; endDate optionally 'Present' or 'YYYY-MM'.\\n- No unknown keys are added at the root level.\\n- 'result' conforms to the skeleton above.\\n\\nREQUIREMENTS: Do not invent; prioritize clean_cv over cv_text; respect experience order.\\nDo not return any text outside this JSON object.`;\n                const systemPrompt = `${_lib_prompt__WEBPACK_IMPORTED_MODULE_7__.SYSTEM_PROMPT}\\n\\nNOTE IMPORTANTE: Utilise UNIQUEMENT clean_cv (CV structuré) et jd_text. Ignore toute autre source (ne PAS utiliser de cv_text). Si une information manque, laisse-la vide ou avec un placeholder approprié, n'invente rien.${reportSpec}`;\n                const ARB_GUIDELINES = `\\n\\n=== ATS & Readability Norms (complement, do not change JSON format) ===\\nGoal: normalize and optimize the CV for human readability + ATS compatibility, without inventing information. If a datum is missing, leave a clear placeholder (do not invent).\\n\\nUniversal rules (apply to JSON when relevant, otherwise as recommendations in report.narrative):\\n- Experiences: strictly keep reverse chronological order (newest → oldest) in result.experience[].\\n- Education: do NOT reorder education[] in JSON. If junior/student, you may recommend layout changes in report.narrative; do not change section order in JSON.\\n- Bullets: \"Result > Action > Context\". Use present tense for current role, past tense otherwise. Avoid generic phrasing; highlight measurable impact only when metric already exists in CV (never invent).\\n- Dates (JSON): strictly use startDate/endDate YYYY-MM and endDate:\"Present\" for current roles. Human formats allowed only in report.narrative if useful.\\n- Titles: ADAPT the title to match JD (without unjustified upgrade). If internal title is obscure, you may add a market alias in parentheses without distorting role.\\n- Skills: deduplicate and group into skills.languages/frameworks/tools. ORDER by relevance to the job; deprioritize obsolete tech (>5y) rather than delete unless clearly irrelevant; track any deletion. CRITICAL: skills.languages means programming languages, not human languages.\\n\\n=== Reclassification rule (Education) ===\\n- If an experience is removed but actually corresponds to education/training, reclassify it and APPEND it to result.education.\\n- Education entries must follow this structure only: { school, degree?, location?, dates? }. Do not include bullets.\\n- NEVER modify or remove original education from clean_cv; only append reclassified items.\\n- In report.decisions, include reclassifiedToEducation[] entries with: { sourceIndex, school, dates?, reason }.`;\n                const NARRATIVE_CLIENT_TONE = `\\n\\n=== Client-facing narrative ===\\n- Persona: HR professional in the candidate’s domain (infer from clean_cv and/or jd_text).\\n- Open with a concise sentence; use the SAME LANGUAGE as the resume (clean_cv.metadata.language). DO NOT translate.\\n- Be specific and fact-based: cite concrete CV elements (titles, companies, dates, 1–2 metrics already present, stack) and tie them to JD requirements (3–5 covered keywords and 2–3 missing). IMPORTANT: the company name in jd_text is NOT a technical keyword.\\n- Structure in 3–5 short paragraphs (fit, strengths, gaps and targeted recommendations, edits proposed, synthesis).\\n- Include 1–2 real bullet rewrites (before → after + reason), consistent with report.decisions.bulletEdits.\\n- General advice only if grounded in CV/JD content; do not invent.\\n- SPECIAL RULE INTERNSHIP: If the last experience before first job is an internship containing \"thesis\"/equivalent in the same domain, ALWAYS preserve it in result.experience[] and justify in decisions.keptExperiences.\\n`;\n                const systemPromptFull = `${systemPrompt}\\n${ARB_GUIDELINES}\\n${NARRATIVE_CLIENT_TONE}`;\n                const supportsJsonResponseFormat = !useOR || String(arbModel).startsWith(\"openai/\");\n                const req1 = {\n                    model: arbModel,\n                    messages: [\n                        {\n                            role: \"system\",\n                            content: systemPromptFull\n                        },\n                        {\n                            role: \"user\",\n                            content: userMessageArb\n                        }\n                    ],\n                    temperature: 0.0\n                };\n                // Use fallback orchestrator across 8 models\n                const arbCall = await (0,_Integration_orchestrator__WEBPACK_IMPORTED_MODULE_11__.callWithFallbackChat)({\n                    client: openaiArbitrage,\n                    messages: req1.messages,\n                    temperature: 0.0,\n                    validate: (t)=>{\n                        try {\n                            JSON.parse(t);\n                            return true;\n                        } catch  {}\n                        try {\n                            parseJsonStrictOrSalvage(t);\n                            return true;\n                        } catch  {}\n                        return false;\n                    }\n                });\n                const responseContent = arbCall.text;\n                cost.steps.push({\n                    name: \"arbitrage\",\n                    model: arbCall.modelUsed,\n                    usage: arbCall.usage\n                });\n                if (!responseContent) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        error: \"R\\xe9ponse vide de l'API OpenRouter\"\n                    }, {\n                        status: 500\n                    });\n                }\n                let parsedTop;\n                try {\n                    parsedTop = JSON.parse(responseContent);\n                } catch  {\n                    try {\n                        parsedTop = parseJsonStrictOrSalvage(responseContent);\n                    } catch (e) {\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            error: \"R\\xe9ponse JSON invalide (arb_only)\",\n                            details: e?.message || String(e)\n                        }, {\n                            status: 500\n                        });\n                    }\n                }\n                const aiResult = parsedTop?.result ?? parsedTop; // compat si ancien format\n                const aiReport = parsedTop?.report ?? null;\n                const sanitized = (0,_lib_sanitize__WEBPACK_IMPORTED_MODULE_6__.sanitizeResumeForSchema)(aiResult, {\n                    cvText: \"\",\n                    jdText\n                });\n                if (sanitized && Array.isArray(sanitized.experience)) {\n                    sanitized.experience = sortExperienceAntiChrono(sanitized.experience);\n                }\n                const validationResult = _lib_schema__WEBPACK_IMPORTED_MODULE_5__.ResumeJSON.safeParse(sanitized);\n                if (!validationResult.success) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        error: \"JSON g\\xe9n\\xe9r\\xe9 non conforme au sch\\xe9ma\",\n                        issues: validationResult.error.issues\n                    }, {\n                        status: 422\n                    });\n                }\n                // Enforce summary rewrite in arb_only as well\n                const beforeCvArbOnly = JSON.parse(cleanCvJson);\n                let afterCvArbOnly = validationResult.data;\n                const normSum = (s)=>String(s || \"\").replace(/[\\s\\u00A0]+/g, \" \").trim().toLowerCase();\n                const langLabel2 = String(beforeCvArbOnly?.metadata?.language || \"\").trim();\n                const jac2 = (()=>{\n                    const tok = (t)=>new Set(String(t || \"\").toLowerCase().split(/[^a-z0-9]+/gi).filter(Boolean));\n                    const A = tok(afterCvArbOnly?.summary);\n                    const B = tok(beforeCvArbOnly?.summary);\n                    const sizeA = A.size;\n                    const sizeB = B.size;\n                    if (sizeA === 0 && sizeB === 0) return 1;\n                    let interCount = 0;\n                    A.forEach((x)=>{\n                        if (B.has(x)) interCount++;\n                    });\n                    const unionCount = sizeA + sizeB - interCount;\n                    return interCount / Math.max(1, unionCount);\n                })();\n                const needsRewrite2 = !afterCvArbOnly.summary || jac2 >= 0.85;\n                if (needsRewrite2) {\n                    try {\n                        const summarySys2 = `You rewrite a professional resume summary strictly from clean_cv facts to align with the given job description. Rules: 2–3 sentences, ≤ 400 characters. IMPORTANT: Output MUST be in \"${langLabel2}\" language (exactly the same as clean_cv.metadata.language). DO NOT translate. Impersonal professional tone (no first‑person), no bullet list, no new facts or metrics, no company names not in clean_cv.`;\n                        const summaryUser2 = JSON.stringify({\n                            clean_cv: beforeCvArbOnly,\n                            jd_text: jdText\n                        });\n                        const sumReq2 = {\n                            model: arbModel,\n                            messages: [\n                                {\n                                    role: \"system\",\n                                    content: summarySys2\n                                },\n                                {\n                                    role: \"user\",\n                                    content: summaryUser2\n                                }\n                            ],\n                            temperature: 0.0,\n                            max_tokens: 220\n                        };\n                        const sumCall2 = await (0,_Integration_orchestrator__WEBPACK_IMPORTED_MODULE_11__.callWithFallbackChat)({\n                            client: openaiArbitrage,\n                            messages: sumReq2.messages,\n                            temperature: 0.0,\n                            max_tokens: 220\n                        });\n                        const sumTxt2 = (sumCall2.text || \"\").trim();\n                        if (sumTxt2) afterCvArbOnly.summary = sumTxt2;\n                        // Strict guard: if language changed, revert to original summary\n                        try {\n                            const origLang2 = String(beforeCvArbOnly?.metadata?.language || \"\").toLowerCase();\n                            const detLang2 = detectLangLoose(afterCvArbOnly.summary || \"\");\n                            if (origLang2 && detLang2 !== \"unknown\" && detLang2 !== origLang2) {\n                                afterCvArbOnly.summary = beforeCvArbOnly.summary || afterCvArbOnly.summary;\n                                cost.steps.push({\n                                    name: \"summary_language_guard_revert\",\n                                    model: \"server\",\n                                    usage: {\n                                        note: \"reverted to original summary due to language mismatch\"\n                                    }\n                                });\n                            }\n                        } catch  {}\n                        cost.steps.push({\n                            name: \"summary_rewrite\",\n                            model: sumCall2.modelUsed,\n                            usage: sumCall2.usage\n                        });\n                    } catch (e) {\n                        console.warn(\"Summary rewrite (arb_only) skipped due to error:\", e);\n                    }\n                }\n                // Reclassify removed experiences as education when appropriate\n                try {\n                    const normStr = (s)=>String(s || \"\").replace(/[\\s\\u00A0]+/g, \" \").trim().toLowerCase();\n                    const sig = (e)=>[\n                            normStr(e?.company),\n                            normStr(e?.startDate || e?.startDateRaw),\n                            normStr(e?.endDate || e?.endDateRaw)\n                        ].join(\"|\");\n                    const beforeList = Array.isArray(beforeCvArbOnly?.experience) ? beforeCvArbOnly.experience : [];\n                    const afterList = Array.isArray(afterCvArbOnly?.experience) ? afterCvArbOnly.experience : [];\n                    const afterSigs = new Set(afterList.map(sig));\n                    const ensureEdu = ()=>{\n                        if (!Array.isArray(afterCvArbOnly.education)) afterCvArbOnly.education = [];\n                    };\n                    const eduKey = (x)=>[\n                            normStr(x?.school),\n                            normStr(x?.dates)\n                        ].join(\"|\");\n                    const hasEdu = (rec)=>(afterCvArbOnly.education || []).some((x)=>eduKey(x) === eduKey(rec));\n                    beforeList.forEach((e)=>{\n                        if (!e) return;\n                        if (afterSigs.has(sig(e))) return; // not removed\n                        if (!isLikelyEducationEntry(e)) return;\n                        const rec = mapExperienceToEducation(e);\n                        if (!rec?.school) return;\n                        ensureEdu();\n                        if (!hasEdu(rec)) afterCvArbOnly.education.push(rec);\n                    });\n                } catch  {}\n                // Preserve header exactly from clean CV (name, email, phone, links)\n                try {\n                    if (beforeCvArbOnly?.header) {\n                        afterCvArbOnly.header = beforeCvArbOnly.header;\n                    }\n                } catch  {}\n                // Enforce metadata.language to original CV language (arb_only)\n                try {\n                    afterCvArbOnly.metadata = afterCvArbOnly.metadata || {};\n                    afterCvArbOnly.metadata.language = beforeCvArbOnly?.metadata?.language || \"unknown\";\n                } catch  {}\n                // Enforce original language on sections (guard against translation)\n                try {\n                    const origLang2 = String(beforeCvArbOnly?.metadata?.language || \"\").toLowerCase();\n                    enforceOriginalLanguageCV(afterCvArbOnly, beforeCvArbOnly, origLang2);\n                } catch  {}\n                // Drop AI narrative if wrong language\n                if (aiReport && aiReport.narrative) {\n                    try {\n                        const origLang2 = String(beforeCvArbOnly?.metadata?.language || \"\").toLowerCase();\n                        const narrLang = detectLangLoose(String(aiReport.narrative || \"\"));\n                        if (narrLang !== \"unknown\" && narrLang !== origLang2) {\n                            delete aiReport.narrative;\n                        }\n                    } catch  {}\n                }\n                {\n                    const origLang2 = String(beforeCvArbOnly?.metadata?.language || \"\").toLowerCase();\n                    const detLang2 = detectLangLoose(afterCvArbOnly.summary || \"\");\n                    if (origLang2 && detLang2 !== \"unknown\" && detLang2 !== origLang2) {\n                        afterCvArbOnly.summary = beforeCvArbOnly.summary || afterCvArbOnly.summary;\n                    }\n                }\n                // Merge original education with AI additions (append-only, dedup, max 8) — arb_only\n                try {\n                    const base = Array.isArray(beforeCvArbOnly?.education) ? beforeCvArbOnly.education : [];\n                    const aiEdu = Array.isArray(afterCvArbOnly?.education) ? afterCvArbOnly.education : [];\n                    const normE = (s)=>String(s || \"\").replace(/[\\s\\u00A0]+/g, \" \").trim().toLowerCase();\n                    const canonDate = (s)=>normE(String(s || \"\").replace(/[\\u2012\\u2013\\u2014\\u2015\\u2212]/g, \"-\") // unicode dashes → hyphen\n                        .replace(/\\s*-\\s*/g, \"-\") // strip spaces around hyphen\n                        .replace(/-+/g, \"-\") // collapse multiple hyphens\n                        );\n                    const keyE = (e)=>[\n                            normE(e?.school),\n                            canonDate(e?.dates || (e?.startDate || \"\") + \"-\" + (e?.endDate || \"\"))\n                        ].join(\"|\");\n                    const seen = new Set(base.map(keyE));\n                    const merged = base.slice();\n                    aiEdu.forEach((e)=>{\n                        if (!e || !e.school) return;\n                        const obj = {\n                            school: e.school\n                        };\n                        if (e.degree) obj.degree = e.degree;\n                        if (e.location) obj.location = e.location;\n                        if (e.dates) {\n                            obj.dates = e.dates;\n                        } else {\n                            const sd = e.startDate;\n                            const ed = e.endDate && e.endDate !== \"Present\" ? e.endDate : undefined;\n                            const d = [\n                                sd,\n                                ed\n                            ].filter(Boolean).join(\"-\");\n                            if (d) obj.dates = d;\n                        }\n                        const k = keyE(obj);\n                        if (!seen.has(k)) {\n                            seen.add(k);\n                            merged.push(obj);\n                        }\n                    });\n                    afterCvArbOnly.education = merged.slice(0, 8);\n                } catch  {}\n                // Bullets XYZ rewrite per experience/projects (arb_only)\n                try {\n                    const origLang2 = String(beforeCvArbOnly?.metadata?.language || \"\").trim();\n                    const getKeywords = (s)=>{\n                        const toks = String(s || \"\").toLowerCase().split(/[^a-z0-9+.#]/gi).filter((w)=>w.length >= 3);\n                        const freq = new Map();\n                        toks.forEach((w)=>freq.set(w, (freq.get(w) || 0) + 1));\n                        return Array.from(freq.entries()).sort((a, b)=>b[1] - a[1]).map(([w])=>w).slice(0, 20);\n                    };\n                    const jdKw = getKeywords(jdText || \"\");\n                    const numsRegex = /\\b\\d[\\d.,]*%?\\b/g;\n                    const words22 = (s)=>{\n                        const parts = String(s || \"\").trim().split(/\\s+/);\n                        return parts.length > 22 ? parts.slice(0, 22).join(\" \") : String(s || \"\").trim();\n                    };\n                    const verbsUnion2 = (0,_src_hr_actionVerbs__WEBPACK_IMPORTED_MODULE_10__.filterForATS)((0,_src_hr_actionVerbs__WEBPACK_IMPORTED_MODULE_10__.getVerbs)(_src_hr_actionVerbs__WEBPACK_IMPORTED_MODULE_10__.ACTION_VERB_CATEGORIES));\n                    const verbsSet2 = new Set(verbsUnion2.map((v)=>v.toLowerCase()));\n                    const SEED2 = `ACTION VERB STARTER SEED (English forms for guidance only; do NOT translate the rest): ${verbsUnion2.slice(0, 60).join(\", \")}`;\n                    const defaultVerbByLang2 = {\n                        en: \"Implemented\",\n                        fr: \"R\\xe9alis\\xe9\"\n                    };\n                    const ensureActionVerbStart2 = (text)=>{\n                        const before = String(text || \"\").trim();\n                        if (!before) return {\n                            changed: false,\n                            value: before\n                        };\n                        const lang = (origLang2 || \"\").toLowerCase();\n                        const s = before.replace(/^[-•*—–]\\s*/, \"\");\n                        const first = s.split(/\\s+/)[0] || \"\";\n                        if (lang === \"en\") {\n                            if (verbsSet2.has(first.toLowerCase())) return {\n                                changed: before !== s,\n                                value: s\n                            };\n                            return {\n                                changed: true,\n                                value: `${defaultVerbByLang2.en} ${s}`.replace(/\\s{2,}/g, \" \").trim()\n                            };\n                        }\n                        if (lang === \"fr\") {\n                            if (/^[A-ZÀ-ÖØ-Þ]/.test(first)) return {\n                                changed: before !== s,\n                                value: s\n                            };\n                            return {\n                                changed: true,\n                                value: `${defaultVerbByLang2.fr} ${s}`.replace(/\\s{2,}/g, \" \").trim()\n                            };\n                        }\n                        // Other languages: do NOT prefix (avoid cross-language injection); only trim leading bullet symbol.\n                        return {\n                            changed: before !== s,\n                            value: s\n                        };\n                    };\n                    const LLM_SYSTEM = [\n                        'You rewrite resume bullets using the XYZ formula: \"Accomplished [X] as measured by [Y] by doing [Z].\"',\n                        \"- Start with a strong ACTION VERB; include 1 clear METRIC if it already exists; then HOW it was done.\",\n                        \"- Keep each bullet concise (≤ 22 words), past tense unless current role.\",\n                        \"- No fluff, no buzzwords, no invented facts.\",\n                        \"\",\n                        \"IMPORTANT — METRICS & INTEGRITY\",\n                        \"- NEVER invent numbers. Use a metric ONLY if it already exists in the input bullet.\",\n                        \"- If no metric exists, keep the bullet QUALITATIVE (no numbers).\",\n                        \"- You may SUGGEST possible metrics, but ONLY inside REPORT.recommendations (not in the rewritten bullets).\",\n                        \"\",\n                        \"TASK\",\n                        \"For each input bullet, output one rewritten bullet that follows XYZ. If there’s no metric, keep impact qualitative and factual (no numbers). Optionally add metric SUGGESTIONS in REPORT.recommendations.\",\n                        \"\",\n                        \"RULES\",\n                        \"1) Structure = ACTION VERB → X (what) → Y (metric/impact/baseline, if present) → Z (how).\",\n                        \"2) Exactly ONE metric Y, and ONLY if present in the original bullet (%, $, time, volume).\",\n                        \"3) Domain wording consistent; optionally align to context.jd_keywords when semantically equivalent to the original bullet.\",\n                        \"4) Avoid vague openers (“Responsible for…”, “Worked on…”). Use specific verbs.\",\n                        \"5) Do NOT add new achievements, tools, companies, or numbers.\",\n                        \"6) Remove filler (“successfully”, “various”, “numerous”). No first-person.\",\n                        \"\",\n                        \"BULLET VOLUME CONTROL (PRUNE & SHORTEN)\",\n                        \"- If an experience has MANY bullets, you MAY remove low-signal bullets—especially when that experience is minor or not relevant to jd_keywords.\",\n                        \"- Target count (guideline, not strict): major experiences 3–5 bullets; minor/less relevant 1–3 bullets.\",\n                        \"- Prefer to KEEP bullets that show measurable outcomes, leadership/ownership, or JD-aligned skills. Remove repetitive, overlapping, or purely duty-based bullets.\",\n                        \"- If a bullet is long or verbose, you MAY shorten it while preserving meaning and facts (keep ≤ 22 words, keep original claims, no new metrics).\",\n                        \"- All removals/shortenings MUST be logged in REPORT (see OUTPUT FORMAT).\",\n                        \"\",\n                        \"ALGORITHM (follow exactly)\",\n                        \"A) Parse each bullet: verb, what/result, any EXISTING metric, the “how”.\",\n                        \"B) If no metric exists, keep qualitative impact; DO NOT fabricate numbers.\",\n                        \"C) Draft: VERB + X + (optional Y if present) + Z. Ensure ≤ 22 words.\",\n                        \"D) Prune pass (per experience): rank bullets by JD relevance + impact; mark low-signal items for removal.\",\n                        \"E) Shorten pass: compress verbose bullets (remove filler, merge duplicates, keep one metric).\",\n                        \"F) Validate: each kept bullet has verb, what, how; metric only if present.\",\n                        \"\",\n                        `Output MUST be in the same language as clean_cv.metadata.language: \"${origLang2}\". DO NOT translate.`,\n                        SEED2\n                    ].join(\"\\n\");\n                    const perExpLogs = [];\n                    (afterCvArbOnly?.experience || []).forEach((_, idx)=>{\n                        perExpLogs[idx] = null;\n                    });\n                    for(let i = 0; i < (afterCvArbOnly?.experience || []).length; i++){\n                        const exp = afterCvArbOnly.experience[i];\n                        const originalBullets = Array.isArray(exp?.bullets) ? exp.bullets : [];\n                        if (!originalBullets.length) continue;\n                        const userPayload = JSON.stringify({\n                            bullets: originalBullets,\n                            context: {\n                                jd_keywords: jdKw\n                            }\n                        });\n                        const req = {\n                            model: arbModel,\n                            messages: [\n                                {\n                                    role: \"system\",\n                                    content: LLM_SYSTEM\n                                },\n                                {\n                                    role: \"user\",\n                                    content: userPayload\n                                }\n                            ],\n                            temperature: 0.0\n                        };\n                        let out = null;\n                        try {\n                            const call = await (0,_Integration_orchestrator__WEBPACK_IMPORTED_MODULE_11__.callWithFallbackChat)({\n                                client: openaiArbitrage,\n                                messages: req.messages,\n                                temperature: 0.0\n                            });\n                            cost.steps.push({\n                                name: \"bullets_rewrite\",\n                                model: call.modelUsed,\n                                usage: call.usage\n                            });\n                            const txt = (call.text || \"\").trim();\n                            try {\n                                out = JSON.parse(txt);\n                            } catch  {\n                                try {\n                                    out = parseJsonStrictOrSalvage(txt);\n                                } catch  {}\n                            }\n                        } catch  {}\n                        if (!out || !Array.isArray(out?.bullets_xyz)) continue;\n                        const allowNums = new Set((originalBullets.join(\" \").match(numsRegex) || []).map((s)=>s));\n                        const cleaned = [];\n                        for (const b of out.bullets_xyz){\n                            if (!b) continue;\n                            let s = String(b).trim();\n                            const det = detectLangLoose(s);\n                            if (det !== \"unknown\" && det !== origLang2.toLowerCase()) continue;\n                            const nums = s.match(numsRegex) || [];\n                            for (const n of nums){\n                                if (!allowNums.has(n)) {\n                                    s = s.replace(n, \"\").replace(/\\s{2,}/g, \" \").trim();\n                                }\n                            }\n                            s = words22(s);\n                            if (s) cleaned.push(s);\n                            if (cleaned.length >= 5) break;\n                        }\n                        if (!cleaned.length) cleaned.push(originalBullets[0]);\n                        const seenB = new Set();\n                        let deduped = cleaned.filter((x)=>{\n                            const k = x.toLowerCase();\n                            if (seenB.has(k)) return false;\n                            seenB.add(k);\n                            return true;\n                        });\n                        const harmonized = [];\n                        deduped = deduped.map((s, idxB)=>{\n                            const r = ensureActionVerbStart2(s);\n                            if (r.changed && r.value !== s) harmonized.push({\n                                index: idxB,\n                                before: s,\n                                after: r.value,\n                                reason: \"prefixed action verb for harmonization\"\n                            });\n                            return r.value;\n                        });\n                        exp.bullets = deduped.length ? deduped : originalBullets;\n                        perExpLogs[i] = {\n                            experienceIndex: i,\n                            recommendations: out?.REPORT?.recommendations || [],\n                            pruned: out?.REPORT?.pruned || {},\n                            shortened: out?.REPORT?.shortened || [],\n                            harmonized\n                        };\n                    }\n                    // Projects rewrite (arb_only)\n                    const perProjLogs = [];\n                    (afterCvArbOnly?.projects || []).forEach((_, idx)=>{\n                        perProjLogs[idx] = null;\n                    });\n                    for(let i = 0; i < (afterCvArbOnly?.projects || []).length; i++){\n                        const proj = afterCvArbOnly.projects[i];\n                        const originalBullets = Array.isArray(proj?.bullets) ? proj.bullets : [];\n                        if (!originalBullets.length) continue;\n                        const userPayload = JSON.stringify({\n                            bullets: originalBullets,\n                            context: {\n                                jd_keywords: jdKw\n                            }\n                        });\n                        const req = {\n                            model: arbModel,\n                            messages: [\n                                {\n                                    role: \"system\",\n                                    content: LLM_SYSTEM\n                                },\n                                {\n                                    role: \"user\",\n                                    content: userPayload\n                                }\n                            ],\n                            temperature: 0.0\n                        };\n                        let out = null;\n                        try {\n                            const call = await (0,_Integration_orchestrator__WEBPACK_IMPORTED_MODULE_11__.callWithFallbackChat)({\n                                client: openaiArbitrage,\n                                messages: req.messages,\n                                temperature: 0.0\n                            });\n                            cost.steps.push({\n                                name: \"bullets_rewrite_projects\",\n                                model: call.modelUsed,\n                                usage: call.usage\n                            });\n                            const txt = (call.text || \"\").trim();\n                            try {\n                                out = JSON.parse(txt);\n                            } catch  {\n                                try {\n                                    out = parseJsonStrictOrSalvage(txt);\n                                } catch  {}\n                            }\n                        } catch  {}\n                        if (!out || !Array.isArray(out?.bullets_xyz)) continue;\n                        const allowNums = new Set((originalBullets.join(\" \").match(numsRegex) || []).map((s)=>s));\n                        const cleaned = [];\n                        for (const b of out.bullets_xyz){\n                            if (!b) continue;\n                            let s = String(b).trim();\n                            const det = detectLangLoose(s);\n                            if (det !== \"unknown\" && det !== origLang2.toLowerCase()) continue;\n                            const nums = s.match(numsRegex) || [];\n                            for (const n of nums){\n                                if (!allowNums.has(n)) {\n                                    s = s.replace(n, \"\").replace(/\\s{2,}/g, \" \").trim();\n                                }\n                            }\n                            s = words22(s);\n                            if (s) cleaned.push(s);\n                            if (cleaned.length >= 4) break;\n                        }\n                        if (!cleaned.length) cleaned.push(originalBullets[0]);\n                        const seenB = new Set();\n                        let deduped = cleaned.filter((x)=>{\n                            const k = x.toLowerCase();\n                            if (seenB.has(k)) return false;\n                            seenB.add(k);\n                            return true;\n                        });\n                        const harmonized = [];\n                        deduped = deduped.map((s, idxB)=>{\n                            const r = ensureActionVerbStart2(s);\n                            if (r.changed && r.value !== s) harmonized.push({\n                                index: idxB,\n                                before: s,\n                                after: r.value,\n                                reason: \"prefixed action verb for harmonization\"\n                            });\n                            return r.value;\n                        });\n                        proj.bullets = deduped.length ? deduped : originalBullets;\n                        perProjLogs[i] = {\n                            projectIndex: i,\n                            recommendations: out?.REPORT?.recommendations || [],\n                            pruned: out?.REPORT?.pruned || {},\n                            shortened: out?.REPORT?.shortened || [],\n                            harmonized\n                        };\n                    }\n                    const __br = {\n                        perExperience: perExpLogs.filter(Boolean)\n                    };\n                    const pj = perProjLogs.filter(Boolean);\n                    if (pj.length) __br.perProjects = pj;\n                    afterCvArbOnly.__bulletRewrite = __br;\n                } catch  {}\n                const payload = {\n                    result: afterCvArbOnly,\n                    report: {\n                        ...aiReport || {},\n                        languageUsed: langLabel2 || \"same-as-clean_cv\",\n                        summaryEdit: {\n                            before: String(beforeCvArbOnly?.summary || \"\"),\n                            after: String(afterCvArbOnly?.summary || \"\"),\n                            changed: normSum(beforeCvArbOnly?.summary) !== normSum(afterCvArbOnly?.summary),\n                            keywordsUsed: []\n                        }\n                    }\n                };\n                if (afterCvArbOnly.__bulletRewrite) {\n                    payload.report.bulletRewrite = afterCvArbOnly.__bulletRewrite;\n                }\n                try {\n                    const j2 = await judgeArbitrage(\"\", JSON.parse(cleanCvJson), jdText, afterCvArbOnly, {\n                        ...aiReport || {},\n                        summaryEdit: {\n                            before: String(beforeCvArbOnly?.summary || \"\"),\n                            after: String(afterCvArbOnly?.summary || \"\"),\n                            changed: normSum(beforeCvArbOnly?.summary) !== normSum(afterCvArbOnly?.summary),\n                            keywordsUsed: []\n                        }\n                    });\n                    if (j2) {\n                        payload.judge = {\n                            arbitrage: j2.evaluation\n                        };\n                        cost.steps.push({\n                            name: \"judge_arbitrage\",\n                            model: j2.model,\n                            usage: j2.usage\n                        });\n                    }\n                } catch (e) {\n                    payload.judge_error = e instanceof Error ? e.message : String(e);\n                }\n                computeCostTotals(cost);\n                computeCostUSD(cost);\n                payload.cost = cost;\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(payload, {\n                    status: 200\n                });\n            } catch (error) {\n                const errorMessage = error instanceof Error ? error.message : String(error);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: `Erreur lors de l'arbitrage OpenRouter: ${errorMessage}`\n                }, {\n                    status: 500\n                });\n            }\n        }\n        // ÉTAPE 1 : Récupérer cv_text (client) ou OCR via images[] (Vision)\n        let cvText = \"\";\n        let methodUsed = \"client\";\n        let imagesCount = undefined;\n        if (cvTextField && cvTextField.trim().length > 20) {\n            console.log(\"=== \\xc9TAPE 1: Texte CV fourni par le client ===\");\n            cvText = (0,_lib_parse__WEBPACK_IMPORTED_MODULE_1__.normalizeText)(cvTextField);\n            // Journaliser une étape gratuite: extraction locale côté client\n            cost.steps.push({\n                name: \"client_extract\",\n                model: \"local\",\n                usage: {\n                    prompt_tokens: 0,\n                    completion_tokens: 0,\n                    total_tokens: 0\n                }\n            });\n        } else if (imageEntries && imageEntries.length > 0) {\n            console.log(\"=== \\xc9TAPE 1: OCR Vision sur images[] ===\");\n            {\n                if (!process.env.OPENROUTER_KEY_VISION) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        error: \"Configuration OpenRouter Vision manquante (requise pour OCR images[])\"\n                    }, {\n                        status: 500\n                    });\n                }\n            }\n            try {\n                // Sécurité/coûts: limiter à 3 images max\n                const limitedImages = imageEntries.slice(0, 3);\n                imagesCount = limitedImages.length;\n                methodUsed = \"vision\";\n                const ocr = await (0,_lib_parse__WEBPACK_IMPORTED_MODULE_1__.extractTextFromImagesWithVision)(limitedImages);\n                cvText = ocr.text;\n                cost.steps.push({\n                    name: \"vision_ocr\",\n                    model: ocr.model,\n                    usage: ocr.usage\n                });\n                console.log(\"Texte OCR Vision longueur:\", cvText.length);\n            } catch (error) {\n                const errorMessage = error instanceof Error ? error.message : String(error);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: `OCR Vision échouée: ${errorMessage}`\n                }, {\n                    status: 400\n                });\n            }\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Veuillez fournir soit cv_text (extrait c\\xf4t\\xe9 client) soit images[] (data URLs) pour OCR.\"\n            }, {\n                status: 400\n            });\n        }\n        // Vérifier que le texte n'est pas vide\n        if (!cvText || cvText.trim().length < 20) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Aucun texte d\\xe9tect\\xe9 dans le PDF avec l'IA Vision. Veuillez v\\xe9rifier que le PDF contient du contenu lisible.\"\n            }, {\n                status: 400\n            });\n        }\n        // Mode ONLY RAW: retourner uniquement le texte extrait (et coûts)\n        if (onlyRaw) {\n            computeCostTotals(cost);\n            computeCostUSD(cost);\n            const payload = {\n                raw_cv: {\n                    text: cvText,\n                    method: methodUsed,\n                    imagesCount\n                },\n                cost\n            };\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(payload, {\n                status: 200\n            });\n        }\n        // ÉTAPE 2 : Clean CV structuring (AI-first with fallback, cached)\n        const cleanRes = await buildCleanCv(cvText);\n        const cleanCv = cleanRes.clean;\n        if (cleanRes.usage) {\n            cost.steps.push({\n                name: \"structuring_ai\",\n                model: cleanRes.model,\n                usage: cleanRes.usage\n            });\n        } else {\n            // Journaliser une étape gratuite si structuration déterministe (fallback) ou cache sans usage\n            cost.steps.push({\n                name: \"structuring_deterministic\",\n                model: \"local\",\n                usage: {\n                    prompt_tokens: 0,\n                    completion_tokens: 0,\n                    total_tokens: 0\n                }\n            });\n        }\n        // Si only_clean demandé, retourner un clean_cv SANITIZED & trié (+raw si demandé)\n        if (onlyClean) {\n            let cleaned = (0,_lib_sanitize__WEBPACK_IMPORTED_MODULE_6__.sanitizeResumeForSchema)(cleanCv, {\n                cvText,\n                jdText: jdText || \"\"\n            });\n            if (cleaned && Array.isArray(cleaned.experience)) {\n                cleaned.experience = sortExperienceAntiChrono(cleaned.experience);\n            }\n            const validationResult = _lib_schema__WEBPACK_IMPORTED_MODULE_5__.ResumeJSON.safeParse(cleaned);\n            if (!validationResult.success) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"JSON structur\\xe9 non conforme au sch\\xe9ma\",\n                    issues: validationResult.error.issues\n                }, {\n                    status: 422\n                });\n            }\n            const payload = {\n                clean_cv: validationResult.data\n            };\n            // Judge PDF→JSON (optional)\n            try {\n                const j = await judgePdfToJson(cvText, cleanCv);\n                if (j) {\n                    payload.judge = {\n                        pdfToJson: j.evaluation\n                    };\n                    cost.steps.push({\n                        name: \"judge_pdf\",\n                        model: j.model,\n                        usage: j.usage\n                    });\n                }\n            } catch (e) {\n                payload.judge_error = e instanceof Error ? e.message : String(e);\n            }\n            computeCostTotals(cost);\n            computeCostUSD(cost);\n            payload.cost = cost;\n            if (returnRaw) payload.raw_cv = {\n                text: cvText,\n                method: methodUsed,\n                imagesCount\n            };\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(payload, {\n                status: 200\n            });\n        }\n        // ÉTAPE 3 : Préparer le payload pour l'arbitrage (JSON-only: pas de cv_text)\n        const userMessage = JSON.stringify({\n            clean_cv: cleanCv,\n            jd_text: jdText.trim()\n        });\n        console.log(\"=== \\xc9TAPE 2: Arbitrage et adaptation ===\");\n        // Provider + modèle (arbitrage)\n        const OpenAI = (await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/formdata-node@4.4.1\"), __webpack_require__.e(\"vendor-chunks/openai@4.104.0_zod@3.25.76\"), __webpack_require__.e(\"vendor-chunks/form-data-encoder@1.7.2\"), __webpack_require__.e(\"vendor-chunks/whatwg-url@5.0.0\"), __webpack_require__.e(\"vendor-chunks/agentkeepalive@4.6.0\"), __webpack_require__.e(\"vendor-chunks/tr46@0.0.3\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill@4.0.0-beta.3\"), __webpack_require__.e(\"vendor-chunks/node-fetch@2.7.0\"), __webpack_require__.e(\"vendor-chunks/webidl-conversions@3.0.1\"), __webpack_require__.e(\"vendor-chunks/ms@2.1.3\"), __webpack_require__.e(\"vendor-chunks/humanize-ms@1.2.1\"), __webpack_require__.e(\"vendor-chunks/event-target-shim@5.0.1\"), __webpack_require__.e(\"vendor-chunks/abort-controller@3.0.0\")]).then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/.pnpm/openai@4.104.0_zod@3.25.76/node_modules/openai/index.mjs\"))).default;\n        const useOR = true;\n        let openaiArbitrage;\n        let arbModel = arbModelOverride || (0,_config_models__WEBPACK_IMPORTED_MODULE_9__.getConfiguredModel)(\"arbitrage\") || \"gpt-4o\";\n        {\n            const key = process.env.OPENROUTER_KEY_ARBITRAGE;\n            if (!key) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"OPENROUTER_KEY_ARBITRAGE manquante\"\n            }, {\n                status: 500\n            });\n            openaiArbitrage = new OpenAI({\n                apiKey: key,\n                baseURL: \"https://openrouter.ai/api/v1\",\n                defaultHeaders: {\n                    \"HTTP-Referer\": process.env.OPENROUTER_HTTP_REFERER || \"http://localhost:3000\",\n                    \"X-Title\": process.env.OPENROUTER_APP_TITLE || \"QuickCV\"\n                }\n            });\n        }\n        // Appel à l'API OpenRouter Arbitrage\n        let completion;\n        try {\n            const todayISO = new Date().toISOString().split(\"T\")[0]; // YYYY-MM-DD\n            const reportSpec = `\\n\\nCONTEXTE TEMPOREL:\\nDate du jour: ${todayISO}. Utilise cette date pour calculer la durée des expériences et déterminer si un poste est actuel (endDate: \"Present\").\\n\\nFORMAT SORTIE OBLIGATOIRE (REMPLACE LA RÈGLE PRÉCÉDENTE):\\nRetourne un unique objet JSON avec les clés:\\n- result: l'objet STRICTEMENT conforme à ResumeJSON (voir contrat ci-dessous)\\n- report: un objet d'explication contenant:\\n   - narrative: string (6 à 10 phrases DANS LA MÊME LANGUE QUE clean_cv.metadata.language — NE PAS traduire; justifie les choix, cite 3–5 mots-clés JD couverts et 2–3 manquants, inclut 1–2 exemples concrets de réécriture de bullet: avant → après + raison)\\n   - fitScore: nombre 0–100\\n   - jdCoverage: { matchedKeywords: string[], missingKeywords: string[], partialMatches: string[] }\\n   - decisions: {\\n       keptExperiences: string[],\\n       removedExperiences: string[],\\n       bulletEdits: Array<{ sourceIndex: number; before: string; after: string; reason: string }>\\n     }\\n   - warnings?: string[]\\n   - languageUsed: string\\n   - summaryEdit: { before: string; after: string; changed: boolean; keywordsUsed: string[] }\\n\\nCONTRAT STRICT ResumeJSON (squelette minimal indicatif) — toutes les clés non listées sont interdites:\\n{\\n  metadata?: { name?: string; email?: string; phone?: string; location?: string },\\n  experience: Array<{\\n    company: string; title: string; location?: string; startDate: string; endDate?: string; bullets?: string[]\\n  }>,\\n  skills?: { languages?: string[]; frameworks?: string[]; tools?: string[]; other?: string[] },\\n  projects?: Array<{ name: string; description?: string; bullets?: string[] }>,\\n  education?: Array<{ school: string; degree?: string; startDate?: string; endDate?: string }>,\\n  certifications?: string[],\\n  languages?: string[]\\n}\\n\\nRÈGLES DE NORMALISATION & MAPPING (accepte n'importe quel format JSON en entrée):\\n- Si clean_cv ou cv_text suggèrent des synonymes de clés, mappe-les vers notre schéma:\\n  • experiences/work/jobs/workExperience → experience\\n  • company_name/employer/org → company\\n  • position/role → title\\n  • city → location\\n  • start/from → startDate\\n  • end/to → endDate (utiliser \"Present\" si en cours)\\n  • bullets/achievements/responsibilities → bullets (array de strings)\\n  • tech/technology/stack → skills.other ou répartir dans languages/frameworks/tools\\n  • education/educations/academics → education\\n- Dates: format ISO court 'YYYY-MM'. Si inconnue, omets le champ.\\n- Tableaux: toujours des arrays (même vides). Jamais null/undefined.\\n- Chaînes: toujours des strings (jamais objets/arrays).\\n- Types: convertis/coerces intelligemment (ex.: nombre → string si nécessaire).\\n- Champs optionnels: omets-les si non disponibles; ne JAMAIS inventer.\\n\\nVALIDATION MENTALE avant retour:\\n- Toutes les expériences ont company, title, startDate valides; endDate éventuellement 'Present' ou 'YYYY-MM'.\\n- Aucune clé inconnue n'est ajoutée au niveau racine.\\n- 'result' respecte le squelette ci-dessus.\\n\\nEXIGENCES: Ne pas inventer; prioriser clean_cv sur cv_text; respecter l'ordre des expériences.\\nNe renvoie absolument aucun texte en dehors de cet objet JSON.`;\n            const systemPrompt = `${_lib_prompt__WEBPACK_IMPORTED_MODULE_7__.SYSTEM_PROMPT}\\n\\nNOTE IMPORTANTE: Utilise UNIQUEMENT clean_cv (CV structuré) et jd_text. Ignore toute autre source (ne PAS utiliser de cv_text). Si une information manque, laisse-la vide ou avec un placeholder approprié, n'invente rien.${reportSpec}`;\n            const ARB_GUIDELINES = `\\n\\n=== Normes ATS & Lisibilité (complément, ne pas modifier le format JSON) ===\\nObjectif: normaliser et optimiser le CV pour lisibilité humaine + compatibilité ATS, sans inventer d'informations. Si une donnée manque, laisser un espace réservé clair (sans inventer).\\n\\nRègles universelles (appliquer au JSON quand pertinent, sinon en recommandations dans report.narrative):\\n- Expériences: respecter rigoureusement l'ordre anti-chronologique (plus récent → plus ancien) dans result.experience[].\\n- Éducation: ne PAS réordonner le tableau education[] dans le JSON. Si junior/étudiant, tu peux le recommander dans report.narrative (mise en page), mais tu ne modifies pas l'ordre des sections dans le JSON.\\n- Bullets: méthode \"Résultat > Action > Contexte\". Verbes d'action homogènes: présent pour rôle actuel, passé pour anciens. Éviter formulations génériques; valoriser l'impact mesurable dès que la métrique existe déjà dans le CV (ne jamais inventer).\\n- Dates (JSON): utiliser strictement startDate/endDate au format YYYY-MM et endDate:\"Present\" pour un poste en cours. Les formats humains (ex. 03/2021–08/2024) sont autorisés uniquement dans report.narrative si utile.\\n- Titres: ADAPTER le titre (result.header.title ou result.metadata.title si présent dans le schéma) pour qu'il corresponde au poste visé dans la JD. Si l'intitulé interne est obscur, ajouter un alias marché entre parenthèses dans title, sans déformer le rôle (ex: \"Ingénieur Logiciel (Backend)\").\\n- Compétences: dédupliquer et regrouper selon notre schéma (skills.languages/frameworks/tools). ORDONNER les compétences par pertinence au poste: les plus pertinentes en premier dans chaque catégorie. Déprioriser les technos obsolètes (>5 ans) plutôt que supprimer, sauf si clairement non pertinentes; toute suppression doit être tracée. ATTENTION CRITIQUE: \"skills.languages\" désigne les LANGAGES DE PROGRAMMATION (Python, Java, C++, etc.), PAS les langues parlées (anglais, français, etc.). Les langues parlées vont dans le champ \"languages\" (racine du JSON). Ne JAMAIS confondre les deux.\\n- Projets/Éducation/Certifs/Langues: ne renseigner que si l'information existe dans clean_cv; nemais inventer).\\n- Dates (JSON): utiliser strictement startDate/endDate au format YYYY-MM et endDate:\"Present\" pour un poste en cours. Les formats humains (ex. 03/2021–08/2024) sont autorisés uniquement dans report.narrative si utile.\\n- Titres: ADAPTER le titre (result.header.title ou result.metadata.title si présent dans le schéma) pour qu'il corresponde au poste visé dans la JD. Si l'intitulé interne est obscur, ajouter un alias marché entre parenthèses dans title, sans déformer le rôle (ex: \"Ingénieur Logiciel (Backend)\").\\n- Compétences: dédupliquer et regrouper selon notre schéma (skills.languages/frameworks/tools). ORDONNER les compétences par pertinence au poste: les plus pertinentes en premier dans chaque catégorie. Déprioriser les technos obsolètes (>5 ans) plutôt que supprimer, sauf si clairement non pertinentes; toute suppression doit être tracée.\\n- Projets/Éducation/Certifs/Langues: ne renseigner que si l'information existe dans clean_cv; ne rien inventer.\\n- Mise en page (polices, marges, icônes, tableaux, PDF) et éléments purement visuels: ne modifient pas le JSON; formuler ces points en recommandations dans report.narrative si pertinent.\\n\\nCorrections/normalisations automatiques (et traçabilité):\\n- Harmoniser temps verbaux et début de puces par verbe d'action.\\n- Réécrire \"responsable de\" → formulation axée impact quand l'information existe.\\n- Rapatrier les métriques existantes vers la puce correspondante sans en inventer.\\n- Uniformiser les dates JSON (YYYY-MM / \"Present\").\\n- Limiter 1–5 puces par expérience (conforme au schéma).\\n- Si une expérience est supprimée/élaguée pour pertinence: l'inscrire dans report.decisions.removedExperiences avec { sourceIndex, reason } et ajouter un avertissement dans report.warnings si la perte d'information est significative.\\n- Toute réécriture de puce doit être listée dans report.decisions.bulletEdits { sourceIndex, before, after, reason }.\\n\\nChecklist de validation (JSON + narrative):\\n- Expériences anti-chronologiques respectées.\\n- Verbes d'action et temps cohérents.\\n- ≥1 impact/métrique par expérience si la donnée existe (sinon laisser la puce factuelle).\\n- Dates JSON uniformes.\\n- Compétences dédupliquées et regroupées (languages/frameworks/tools).\\n- Aucune info sensible ajoutée; aucune invention.\\n`;\n            const NARRATIVE_CLIENT_TONE = `\\n\\n=== Rédaction du compte rendu (client-facing) ===\\n- Persona: Tu es un RH spécialisé dans le recrutement du profil du candidat (inférer le profil à partir de clean_cv et/ou jd_text: ex. dernier titre + stack dominante).\\n- Adresse-toi au candidat et commence le compte rendu par: \"Votre CV ...\".\\n- Sois spécifique et ancré dans les faits: cite des éléments concrets du CV (titres, entreprises, dates, 1–2 métriques déjà présentes, outils/stack) et relie-les explicitement aux exigences de la JD (3–5 mots-clés couverts et 2–3 manquants). IMPORTANT: Le nom de l'entreprise à laquelle on postule (mentionné dans jd_text) n'est PAS un mot-clé technique; ne le compte pas dans matchedKeywords. Explique le \"pourquoi\", pas seulement le \"quoi\".\\n- Structure en 3–5 paragraphes courts (ex.: Adéquation au poste, Forces alignées, Écarts et recommandations ciblées, Ajustements proposés sur les expériences/bullets, Synthèse).\\n- Intègre 1–2 exemples réels de réécriture de bullet (avant → après + raison), cohérents avec report.decisions.bulletEdits.\\n- Conseils généraux autorisés uniquement s'ils sont pertinents (ex.: retirer/fusionner une expérience trop courte ou hors-scope), et doivent être justifiés par le contenu du CV/JD; ne rien inventer.\\n- RÈGLE SPÉCIALE STAGE/INTERNSHIP: Si un stage (internship) est la dernière expérience avant le premier emploi ET contient le mot \"mémoire\" (ou \"thesis\" en anglais) ET est dans le même domaine que la JD, TOUJOURS le préserver dans result.experience[] même s'il est ancien. Justifie cette décision dans report.decisions.keptExperiences.\\n- Rédige DANS LA LANGUE D'ORIGINE DU CV (clean_cv.metadata.language). NE PAS traduire. Style professionnel, empathique, direct, sans phrases génériques ni remplissage, sans 1re personne du singulier.\\n`;\n            const systemPromptFull = `${systemPrompt}\\n${ARB_GUIDELINES}\\n${NARRATIVE_CLIENT_TONE}`;\n            const supportsJsonResponseFormat = !useOR || String(arbModel).startsWith(\"openai/\");\n            const req2 = {\n                model: arbModel,\n                messages: [\n                    {\n                        role: \"system\",\n                        content: systemPromptFull\n                    },\n                    {\n                        role: \"user\",\n                        content: userMessage\n                    }\n                ],\n                temperature: 0.0\n            };\n            if (supportsJsonResponseFormat) req2.response_format = {\n                type: \"json_object\"\n            };\n            completion = await openaiArbitrage.chat.completions.create(req2);\n        } catch (error) {\n            console.error(\"Erreur OpenRouter Arbitrage:\", error);\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Erreur lors de l'arbitrage OpenRouter: ${errorMessage}`\n            }, {\n                status: 500\n            });\n        }\n        // Extraire la réponse JSON\n        const responseContent = completion.choices[0]?.message?.content;\n        if (!responseContent) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"R\\xe9ponse vide de l'API OpenRouter\"\n            }, {\n                status: 500\n            });\n        }\n        console.log(\"=== \\xc9TAPE 3: Validation et parsing du JSON ===\");\n        // Parser le JSON\n        let parsedTop;\n        try {\n            parsedTop = JSON.parse(responseContent);\n            console.log(\"JSON pars\\xe9 avec succ\\xe8s\");\n        } catch (error) {\n            console.warn(\"JSON strict parse failed, trying salvage:\", error);\n            try {\n                parsedTop = parseJsonStrictOrSalvage(responseContent);\n            } catch (e) {\n                const errorMessage = e instanceof Error ? e.message : String(e);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: `Réponse JSON invalide: ${errorMessage}`\n                }, {\n                    status: 500\n                });\n            }\n        }\n        const aiResult = parsedTop?.result ?? parsedTop; // compat si ancien format\n        const aiReport = parsedTop?.report ?? null;\n        // Sanitize and validate with Zod (JSON-only: pas de cv_text)\n        const sanitized = (0,_lib_sanitize__WEBPACK_IMPORTED_MODULE_6__.sanitizeResumeForSchema)(aiResult, {\n            cvText: \"\",\n            jdText\n        });\n        if (sanitized && Array.isArray(sanitized.experience)) {\n            sanitized.experience = sortExperienceAntiChrono(sanitized.experience);\n        }\n        const validationResult = _lib_schema__WEBPACK_IMPORTED_MODULE_5__.ResumeJSON.safeParse(sanitized);\n        if (!validationResult.success) {\n            console.error(\"Erreur validation Zod:\", validationResult.error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"JSON g\\xe9n\\xe9r\\xe9 non conforme au sch\\xe9ma\",\n                issues: validationResult.error.issues\n            }, {\n                status: 422\n            });\n        }\n        console.log(\"=== SUCC\\xc8S: JSON valid\\xe9 avec succ\\xe8s ===\");\n        console.log(\"Donn\\xe9es finales:\", {\n            metadata: validationResult.data.metadata,\n            experienceCount: validationResult.data.experience.length,\n            hasSkills: !!validationResult.data.skills,\n            hasProjects: !!validationResult.data.projects\n        });\n        // Coûts: arbitrage\n        const arbUsage = completion?.usage;\n        cost.steps.push({\n            name: \"arbitrage\",\n            model: arbModel,\n            usage: arbUsage,\n            price_override: arbPriceOverride\n        });\n        // Judge both phases if enabled\n        // Enforce summary rewrite: if summary unchanged or empty, rewrite it aligned to JD using only facts from clean_cv\n        const beforeCv = cleanCv;\n        let afterCv = validationResult.data;\n        const normText = (s)=>String(s || \"\").replace(/[\\s\\u00A0]+/g, \" \").trim().toLowerCase();\n        const jaccard = (a, b)=>{\n            const tok = (t)=>new Set(t.split(/[^a-z0-9]+/gi).filter(Boolean));\n            const A = tok(a);\n            const B = tok(b);\n            const sizeA = A.size;\n            const sizeB = B.size;\n            if (sizeA === 0 && sizeB === 0) return 1;\n            let interCount = 0;\n            A.forEach((x)=>{\n                if (B.has(x)) interCount++;\n            });\n            const unionCount = sizeA + sizeB - interCount;\n            return interCount / Math.max(1, unionCount);\n        };\n        // (lang removed) no FR/EN targetLang forcing\n        const needsRewrite = !afterCv.summary || jaccard(normText(afterCv.summary), normText(beforeCv?.summary)) >= 0.85;\n        if (needsRewrite) {\n            try {\n                const origLabel = String(beforeCv?.metadata?.language || \"\").trim();\n                const summarySys = `You rewrite a professional resume summary strictly from clean_cv facts to align with the given job description. Rules: 2–3 sentences, ≤ 400 characters. IMPORTANT: Output MUST be in \"${origLabel}\" language (exactly the same as clean_cv.metadata.language). DO NOT translate. Impersonal professional tone (no first‑person), no bullet list, no new facts or metrics, no company names not in clean_cv.`;\n                const summaryUser = JSON.stringify({\n                    clean_cv: beforeCv,\n                    jd_text: jdText\n                });\n                const makeReq = (sys)=>({\n                        model: arbModel,\n                        messages: [\n                            {\n                                role: \"system\",\n                                content: sys\n                            },\n                            {\n                                role: \"user\",\n                                content: summaryUser\n                            }\n                        ],\n                        temperature: 0.0,\n                        max_tokens: 220\n                    });\n                // Pass 1\n                const comp1 = await openaiArbitrage.chat.completions.create(makeReq(summarySys));\n                let candidate = (comp1.choices?.[0]?.message?.content || \"\").trim();\n                cost.steps.push({\n                    name: \"summary_rewrite\",\n                    model: arbModel,\n                    usage: comp1?.usage\n                });\n                // If still too similar, Pass 2 with stronger paraphrase instruction\n                if (!candidate || jaccard(normText(candidate), normText(beforeCv?.summary)) >= 0.85) {\n                    const strongSys = summarySys + \" Paraphrase strongly. Do not reuse previous sentence structures. Integrate JD terminology only when an equivalent exists in clean_cv.\";\n                    const comp2 = await openaiArbitrage.chat.completions.create(makeReq(strongSys));\n                    const cand2 = (comp2.choices?.[0]?.message?.content || \"\").trim();\n                    if (cand2) candidate = cand2;\n                    cost.steps.push({\n                        name: \"summary_rewrite_retry\",\n                        model: arbModel,\n                        usage: comp2?.usage\n                    });\n                }\n                if (candidate) afterCv.summary = candidate;\n                // Strict guard: if language changed, revert to original summary\n                try {\n                    const origLang = String(beforeCv?.metadata?.language || \"\").toLowerCase();\n                    const detLang = detectLangLoose(afterCv.summary || \"\");\n                    if (origLang && detLang !== \"unknown\" && detLang !== origLang) {\n                        afterCv.summary = beforeCv.summary || afterCv.summary;\n                        cost.steps.push({\n                            name: \"summary_language_guard_revert\",\n                            model: \"server\",\n                            usage: {\n                                note: \"reverted to original summary due to language mismatch\"\n                            }\n                        });\n                    }\n                } catch  {}\n            } catch (e) {\n                console.warn(\"Summary rewrite skipped due to error:\", e);\n            }\n        }\n        // Enforce original language on sections (guard against translation)\n        try {\n            const origLang = String(beforeCv?.metadata?.language || \"\").toLowerCase();\n            enforceOriginalLanguageCV(afterCv, beforeCv, origLang);\n        } catch  {}\n        {\n            const origLang = String(beforeCv?.metadata?.language || \"\").toLowerCase();\n            const detLang = detectLangLoose(afterCv.summary || \"\");\n            if (origLang && detLang !== \"unknown\" && detLang !== origLang) {\n                afterCv.summary = beforeCv.summary || afterCv.summary;\n            }\n        }\n        // Reclassify removed experiences as education when appropriate\n        try {\n            const normStr2 = (s)=>String(s || \"\").replace(/[\\s\\u00A0]+/g, \" \").trim().toLowerCase();\n            const sig2 = (e)=>[\n                    normStr2(e?.company),\n                    normStr2(e?.startDate || e?.startDateRaw),\n                    normStr2(e?.endDate || e?.endDateRaw)\n                ].join(\"|\");\n            const beforeList2 = Array.isArray(beforeCv?.experience) ? beforeCv.experience : [];\n            const afterList2 = Array.isArray(afterCv?.experience) ? afterCv.experience : [];\n            const afterSigs2 = new Set(afterList2.map(sig2));\n            const ensureEdu2 = ()=>{\n                if (!Array.isArray(afterCv.education)) afterCv.education = [];\n            };\n            const eduKey2 = (x)=>[\n                    normStr2(x?.school),\n                    normStr2(x?.dates)\n                ].join(\"|\");\n            const hasEdu2 = (rec)=>(afterCv.education || []).some((x)=>eduKey2(x) === eduKey2(rec));\n            beforeList2.forEach((e)=>{\n                if (!e) return;\n                if (afterSigs2.has(sig2(e))) return; // not removed\n                if (!isLikelyEducationEntry(e)) return;\n                const rec = mapExperienceToEducation(e);\n                if (!rec?.school) return;\n                ensureEdu2();\n                if (!hasEdu2(rec)) afterCv.education.push(rec);\n            });\n        } catch  {}\n        // Preserve header exactly from clean CV (name, email, phone, links)\n        try {\n            if (beforeCv?.header) {\n                afterCv.header = beforeCv.header;\n            }\n        } catch  {}\n        // Merge original education with AI additions (append-only, dedup, max 8) — full flow\n        try {\n            const base = Array.isArray(beforeCv?.education) ? beforeCv.education : [];\n            const aiEdu = Array.isArray(afterCv?.education) ? afterCv.education : [];\n            const normE = (s)=>String(s || \"\").replace(/[\\s\\u00A0]+/g, \" \").trim().toLowerCase();\n            const keyE = (e)=>[\n                    normE(e?.school),\n                    normE(e?.dates || (e?.startDate || \"\") + \"–\" + (e?.endDate || \"\"))\n                ].join(\"|\");\n            const seen = new Set(base.map(keyE));\n            const merged = base.slice();\n            aiEdu.forEach((e)=>{\n                if (!e || !e.school) return;\n                const obj = {\n                    school: e.school\n                };\n                if (e.degree) obj.degree = e.degree;\n                if (e.location) obj.location = e.location;\n                if (e.dates) {\n                    obj.dates = e.dates;\n                } else {\n                    const sd = e.startDate;\n                    const ed = e.endDate && e.endDate !== \"Present\" ? e.endDate : undefined;\n                    const d = [\n                        sd,\n                        ed\n                    ].filter(Boolean).join(\"–\");\n                    if (d) obj.dates = d;\n                }\n                const k = keyE(obj);\n                if (!seen.has(k)) {\n                    seen.add(k);\n                    merged.push(obj);\n                }\n            });\n            afterCv.education = merged.slice(0, 8);\n        } catch  {}\n        // Enforce metadata.language to original CV language\n        try {\n            afterCv.metadata = afterCv.metadata || {};\n            afterCv.metadata.language = beforeCv?.metadata?.language || \"unknown\";\n        } catch  {}\n        try {\n            const normA = (s)=>String(s || \"\").replace(/[\\s\\u00A0]+/g, \" \").trim().toLowerCase();\n            if (Array.isArray(afterCv?.education)) {\n                const canonDateA = (s)=>normA(String(s || \"\").replace(/[\\u2012\\u2013\\u2014\\u2015\\u2212]/g, \"-\").replace(/\\s*-\\s*/g, \"-\").replace(/-+/g, \"-\"));\n                const keyE = (e)=>[\n                        normA(e?.school),\n                        canonDateA(e?.dates || (e?.startDate || \"\") + \"-\" + (e?.endDate || \"\"))\n                    ].join(\"|\");\n                const map = new Map();\n                for (const e of afterCv.education){\n                    if (!e || !e.school) continue;\n                    const obj = {\n                        school: e.school\n                    };\n                    if (e.degree) obj.degree = e.degree;\n                    if (e.location) obj.location = e.location;\n                    if (e.dates) obj.dates = e.dates;\n                    else {\n                        const sd = e.startDate;\n                        const ed = e.endDate && e.endDate !== \"Present\" ? e.endDate : undefined;\n                        const d = [\n                            sd,\n                            ed\n                        ].filter(Boolean).join(\"-\");\n                        if (d) obj.dates = d;\n                    }\n                    const k = keyE(obj);\n                    if (!map.has(k)) map.set(k, obj);\n                }\n                afterCv.education = Array.from(map.values()).slice(0, 8);\n            }\n            if (Array.isArray(afterCv?.experience)) {\n                const keyX = (e)=>[\n                        normA(e?.company),\n                        normA(e?.title),\n                        normA(e?.startDate || e?.startDateRaw),\n                        normA(e?.endDate || e?.endDateRaw)\n                    ].join(\"|\");\n                const seen = new Set();\n                const list = [];\n                for (const e of afterCv.experience){\n                    if (!e || !e.company || !e.title) continue;\n                    const k = keyX(e);\n                    if (seen.has(k)) continue;\n                    seen.add(k);\n                    const origBul = Array.isArray(e?.bullets) ? e.bullets : [];\n                    const seenB = new Set();\n                    const nb = [];\n                    for (const b of origBul){\n                        const s = String(b || \"\").trim();\n                        if (!s) continue;\n                        const kb = normA(s);\n                        if (seenB.has(kb)) continue;\n                        seenB.add(kb);\n                        nb.push(s);\n                        if (nb.length >= 5) break;\n                    }\n                    list.push({\n                        ...e,\n                        bullets: nb.length ? nb : undefined\n                    });\n                }\n                afterCv.experience = list.slice(0, 6);\n            }\n            if (Array.isArray(afterCv?.projects)) {\n                const keyP = (p)=>[\n                        normA(p?.name),\n                        normA(p?.dates)\n                    ].join(\"|\");\n                const map = new Map();\n                for (const p of afterCv.projects){\n                    if (!p || !p.name) continue;\n                    const k = keyP(p);\n                    if (map.has(k)) continue;\n                    const origBul = Array.isArray(p?.bullets) ? p.bullets : [];\n                    const seenB = new Set();\n                    const nb = [];\n                    for (const b of origBul){\n                        const s = String(b || \"\").trim();\n                        if (!s) continue;\n                        const kb = normA(s);\n                        if (seenB.has(kb)) continue;\n                        seenB.add(kb);\n                        nb.push(s);\n                        if (nb.length >= 4) break;\n                    }\n                    const obj = {\n                        name: p.name\n                    };\n                    if (p.dates) obj.dates = p.dates;\n                    if (nb.length) obj.bullets = nb;\n                    map.set(k, obj);\n                }\n                afterCv.projects = Array.from(map.values());\n            }\n            if (afterCv?.skills) {\n                const dedupArr = (arr)=>Array.isArray(arr) ? Array.from(new Map(arr.map((s)=>[\n                            normA(s),\n                            s\n                        ])).values()) : undefined;\n                afterCv.skills.languages = dedupArr(afterCv.skills.languages);\n                afterCv.skills.frameworks = dedupArr(afterCv.skills.frameworks);\n                afterCv.skills.tools = dedupArr(afterCv.skills.tools);\n                if (\"other\" in afterCv.skills) afterCv.skills.other = dedupArr(afterCv.skills.other);\n            }\n            if (Array.isArray(afterCv?.languages)) {\n                afterCv.languages = Array.from(new Map(afterCv.languages.map((s)=>[\n                        normA(s),\n                        s\n                    ])).values());\n            }\n            if (Array.isArray(afterCv?.certifications)) {\n                afterCv.certifications = Array.from(new Map(afterCv.certifications.map((s)=>[\n                        normA(s),\n                        s\n                    ])).values());\n            }\n            if (Array.isArray(afterCv?.otherSections)) {\n                const secArr = [];\n                const seenT = new Set();\n                for (const sec of afterCv.otherSections){\n                    if (!sec || !sec.title || !Array.isArray(sec.items)) continue;\n                    const tK = normA(sec.title);\n                    if (seenT.has(tK)) continue;\n                    seenT.add(tK);\n                    const items = Array.from(new Map(sec.items.map((s)=>[\n                            normA(s),\n                            s\n                        ])).values());\n                    secArr.push({\n                        title: sec.title,\n                        items\n                    });\n                }\n                afterCv.otherSections = secArr;\n            }\n        } catch  {}\n        // Bullets XYZ rewrite per experience (full flow)\n        try {\n            const origLang = String(beforeCv?.metadata?.language || \"\").trim();\n            const getKeywords = (s)=>{\n                const toks = String(s || \"\").toLowerCase().split(/[^a-z0-9+.#]/gi).filter((w)=>w.length >= 3);\n                const freq = new Map();\n                toks.forEach((w)=>freq.set(w, (freq.get(w) || 0) + 1));\n                return Array.from(freq.entries()).sort((a, b)=>b[1] - a[1]).map(([w])=>w).slice(0, 20);\n            };\n            const jdKw = getKeywords(jdText || \"\");\n            const numsRegex = /\\b\\d[\\d.,]*%?\\b/g;\n            const words22 = (s)=>{\n                const parts = String(s || \"\").trim().split(/\\s+/);\n                return parts.length > 22 ? parts.slice(0, 22).join(\" \") : String(s || \"\").trim();\n            };\n            const verbsUnion = (0,_src_hr_actionVerbs__WEBPACK_IMPORTED_MODULE_10__.filterForATS)((0,_src_hr_actionVerbs__WEBPACK_IMPORTED_MODULE_10__.getVerbs)(_src_hr_actionVerbs__WEBPACK_IMPORTED_MODULE_10__.ACTION_VERB_CATEGORIES));\n            const verbsSet = new Set(verbsUnion.map((v)=>v.toLowerCase()));\n            const SEED = `ACTION VERB STARTER SEED (English forms for guidance only; do NOT translate the rest): ${verbsUnion.slice(0, 60).join(\", \")}`;\n            const defaultVerbByLang = {\n                en: \"Implemented\",\n                fr: \"R\\xe9alis\\xe9\"\n            };\n            const ensureActionVerbStart = (text)=>{\n                const before = String(text || \"\").trim();\n                if (!before) return {\n                    changed: false,\n                    value: before\n                };\n                const lang = (origLang || \"\").toLowerCase();\n                const s = before.replace(/^[-•*—–]\\s*/, \"\");\n                const first = s.split(/\\s+/)[0] || \"\";\n                if (lang === \"en\") {\n                    if (verbsSet.has(first.toLowerCase())) return {\n                        changed: before !== s,\n                        value: s\n                    };\n                    return {\n                        changed: true,\n                        value: `${defaultVerbByLang.en} ${s}`.replace(/\\s{2,}/g, \" \").trim()\n                    };\n                }\n                if (lang === \"fr\") {\n                    if (/^[A-ZÀ-ÖØ-Þ]/.test(first)) return {\n                        changed: before !== s,\n                        value: s\n                    };\n                    return {\n                        changed: true,\n                        value: `${defaultVerbByLang.fr} ${s}`.replace(/\\s{2,}/g, \" \").trim()\n                    };\n                }\n                // Other languages: do NOT prefix (avoid cross-language injection); only trim leading bullet symbol.\n                return {\n                    changed: before !== s,\n                    value: s\n                };\n            };\n            const LLM_SYSTEM = [\n                'You rewrite resume bullets using the XYZ formula: \"Accomplished [X] as measured by [Y] by doing [Z].\"',\n                \"- Start with a strong ACTION VERB; include 1 clear METRIC if it already exists; then HOW it was done.\",\n                \"- Keep each bullet concise (≤ 22 words), past tense unless current role.\",\n                \"- No fluff, no buzzwords, no invented facts.\",\n                \"\",\n                \"IMPORTANT — METRICS & INTEGRITY\",\n                \"- NEVER invent numbers. Use a metric ONLY if it already exists in the input bullet.\",\n                \"- If no metric exists, keep the bullet QUALITATIVE (no numbers).\",\n                \"- You may SUGGEST possible metrics, but ONLY inside REPORT.recommendations (not in the rewritten bullets).\",\n                \"\",\n                \"TASK\",\n                \"For each input bullet, output one rewritten bullet that follows XYZ. If there’s no metric, keep impact qualitative and factual (no numbers). Optionally add metric SUGGESTIONS in REPORT.recommendations.\",\n                \"\",\n                \"RULES\",\n                \"1) Structure = ACTION VERB → X (what) → Y (metric/impact/baseline, if present) → Z (how).\",\n                \"2) Exactly ONE metric Y, and ONLY if present in the original bullet (%, $, time, volume).\",\n                \"3) Domain wording consistent; optionally align to context.jd_keywords when semantically equivalent to the original bullet.\",\n                \"4) Avoid vague openers (“Responsible for…”, “Worked on…”). Use specific verbs.\",\n                \"5) Do NOT add new achievements, tools, companies, or numbers.\",\n                \"6) Remove filler (“successfully”, “various”, “numerous”). No first-person.\",\n                \"\",\n                \"BULLET VOLUME CONTROL (PRUNE & SHORTEN)\",\n                \"- If an experience has MANY bullets, you MAY remove low-signal bullets—especially when that experience is minor or not relevant to jd_keywords.\",\n                \"- Target count (guideline, not strict): major experiences 3–5 bullets; minor/less relevant 1–3 bullets.\",\n                \"- Prefer to KEEP bullets that show measurable outcomes, leadership/ownership, or JD-aligned skills. Remove repetitive, overlapping, or purely duty-based bullets.\",\n                \"- If a bullet is long or verbose, you MAY shorten it while preserving meaning and facts (keep ≤ 22 words, keep original claims, no new metrics).\",\n                \"- All removals/shortenings MUST be logged in REPORT (see OUTPUT FORMAT).\",\n                \"\",\n                \"ALGORITHM (follow exactly)\",\n                \"A) Parse each bullet: verb, what/result, any EXISTING metric, the “how”.\",\n                \"B) If no metric exists, keep qualitative impact; DO NOT fabricate numbers.\",\n                \"C) Draft: VERB + X + (optional Y if present) + Z. Ensure ≤ 22 words.\",\n                \"D) Prune pass (per experience): rank bullets by JD relevance + impact; mark low-signal items for removal.\",\n                \"E) Shorten pass: compress verbose bullets (remove filler, merge duplicates, keep one metric).\",\n                \"F) Validate: each kept bullet has verb, what, how; metric only if present.\",\n                \"\",\n                `Output MUST be in the same language as clean_cv.metadata.language: \"${origLang}\". DO NOT translate.`,\n                SEED\n            ].join(\"\\n\");\n            const perExpLogs = [];\n            (afterCv?.experience || []).forEach((exp, idx)=>{\n                perExpLogs[idx] = null;\n            });\n            for(let i = 0; i < (afterCv?.experience || []).length; i++){\n                const exp = afterCv.experience[i];\n                const originalBullets = Array.isArray(exp?.bullets) ? exp.bullets : [];\n                if (!originalBullets.length) continue;\n                const userPayload = JSON.stringify({\n                    bullets: originalBullets,\n                    context: {\n                        jd_keywords: jdKw\n                    }\n                });\n                const req = {\n                    model: arbModel,\n                    messages: [\n                        {\n                            role: \"system\",\n                            content: LLM_SYSTEM\n                        },\n                        {\n                            role: \"user\",\n                            content: userPayload\n                        }\n                    ],\n                    temperature: 0.0\n                };\n                let out = null;\n                try {\n                    const resp = await openaiArbitrage.chat.completions.create(req);\n                    cost.steps.push({\n                        name: \"bullets_rewrite\",\n                        model: arbModel,\n                        usage: resp?.usage\n                    });\n                    const txt = (resp.choices?.[0]?.message?.content || \"\").trim();\n                    try {\n                        out = JSON.parse(txt);\n                    } catch  {\n                        try {\n                            out = parseJsonStrictOrSalvage(txt);\n                        } catch  {}\n                    }\n                } catch  {}\n                if (!out || !Array.isArray(out?.bullets_xyz)) continue;\n                const allowNums = new Set((originalBullets.join(\" \").match(numsRegex) || []).map((s)=>s));\n                const cleaned = [];\n                for (const b of out.bullets_xyz){\n                    if (!b) continue;\n                    let s = String(b).trim();\n                    const det = detectLangLoose(s);\n                    if (det !== \"unknown\" && det !== origLang.toLowerCase()) {\n                        continue;\n                    }\n                    const nums = s.match(numsRegex) || [];\n                    for (const n of nums){\n                        if (!allowNums.has(n)) {\n                            s = s.replace(n, \"\").replace(/\\s{2,}/g, \" \").trim();\n                        }\n                    }\n                    s = words22(s);\n                    if (s) cleaned.push(s);\n                    if (cleaned.length >= 5) break;\n                }\n                if (!cleaned.length) cleaned.push(originalBullets[0]);\n                const seenB = new Set();\n                let deduped = cleaned.filter((x)=>{\n                    const k = x.toLowerCase();\n                    if (seenB.has(k)) return false;\n                    seenB.add(k);\n                    return true;\n                });\n                const harmonized = [];\n                deduped = deduped.map((s, idxB)=>{\n                    const r = ensureActionVerbStart(s);\n                    if (r.changed && r.value !== s) harmonized.push({\n                        index: idxB,\n                        before: s,\n                        after: r.value,\n                        reason: \"prefixed action verb for harmonization\"\n                    });\n                    return r.value;\n                });\n                exp.bullets = deduped.length ? deduped : originalBullets;\n                perExpLogs[i] = {\n                    experienceIndex: i,\n                    recommendations: out?.REPORT?.recommendations || [],\n                    pruned: out?.REPORT?.pruned || {},\n                    shortened: out?.REPORT?.shortened || [],\n                    harmonized\n                };\n            }\n            // Projects rewrite (full flow)\n            const perProjLogs = [];\n            (afterCv?.projects || []).forEach((_, idx)=>{\n                perProjLogs[idx] = null;\n            });\n            for(let i = 0; i < (afterCv?.projects || []).length; i++){\n                const proj = afterCv.projects[i];\n                const originalBullets = Array.isArray(proj?.bullets) ? proj.bullets : [];\n                if (!originalBullets.length) continue;\n                const userPayload = JSON.stringify({\n                    bullets: originalBullets,\n                    context: {\n                        jd_keywords: jdKw\n                    }\n                });\n                const req = {\n                    model: arbModel,\n                    messages: [\n                        {\n                            role: \"system\",\n                            content: LLM_SYSTEM\n                        },\n                        {\n                            role: \"user\",\n                            content: userPayload\n                        }\n                    ],\n                    temperature: 0.0\n                };\n                let out = null;\n                try {\n                    const resp = await openaiArbitrage.chat.completions.create(req);\n                    cost.steps.push({\n                        name: \"bullets_rewrite_projects\",\n                        model: arbModel,\n                        usage: resp?.usage\n                    });\n                    const txt = (resp.choices?.[0]?.message?.content || \"\").trim();\n                    try {\n                        out = JSON.parse(txt);\n                    } catch  {\n                        try {\n                            out = parseJsonStrictOrSalvage(txt);\n                        } catch  {}\n                    }\n                } catch  {}\n                if (!out || !Array.isArray(out?.bullets_xyz)) continue;\n                const allowNums = new Set((originalBullets.join(\" \").match(numsRegex) || []).map((s)=>s));\n                const cleaned = [];\n                for (const b of out.bullets_xyz){\n                    if (!b) continue;\n                    let s = String(b).trim();\n                    const det = detectLangLoose(s);\n                    if (det !== \"unknown\" && det !== origLang.toLowerCase()) {\n                        continue;\n                    }\n                    const nums = s.match(numsRegex) || [];\n                    for (const n of nums){\n                        if (!allowNums.has(n)) {\n                            s = s.replace(n, \"\").replace(/\\s{2,}/g, \" \").trim();\n                        }\n                    }\n                    s = words22(s);\n                    if (s) cleaned.push(s);\n                    if (cleaned.length >= 4) break;\n                }\n                if (!cleaned.length) cleaned.push(originalBullets[0]);\n                const seenB = new Set();\n                let deduped = cleaned.filter((x)=>{\n                    const k = x.toLowerCase();\n                    if (seenB.has(k)) return false;\n                    seenB.add(k);\n                    return true;\n                });\n                const harmonized = [];\n                deduped = deduped.map((s, idxB)=>{\n                    const r = ensureActionVerbStart(s);\n                    if (r.changed && r.value !== s) harmonized.push({\n                        index: idxB,\n                        before: s,\n                        after: r.value,\n                        reason: \"prefixed action verb for harmonization\"\n                    });\n                    return r.value;\n                });\n                proj.bullets = deduped.length ? deduped : originalBullets;\n                perProjLogs[i] = {\n                    projectIndex: i,\n                    recommendations: out?.REPORT?.recommendations || [],\n                    pruned: out?.REPORT?.pruned || {},\n                    shortened: out?.REPORT?.shortened || [],\n                    harmonized\n                };\n            }\n            const __brFull = {\n                perExperience: perExpLogs.filter(Boolean)\n            };\n            const pjFull = perProjLogs.filter(Boolean);\n            if (pjFull.length) __brFull.perProjects = pjFull;\n            afterCv.__bulletRewrite = __brFull;\n        } catch  {}\n        // Build a server-side diff to enforce consistency between result and report\n        const diff = (0,_lib_diff__WEBPACK_IMPORTED_MODULE_8__.computeResumeDiff)(beforeCv, afterCv);\n        const label = (e)=>{\n            if (!e) return \"—\";\n            const c = String(e?.company || \"—\").trim();\n            const t = String(e?.title || \"—\").trim();\n            return [\n                c,\n                t\n            ].filter(Boolean).join(\" — \");\n        };\n        const keptLabels = (diff.decisions.keptExperiences || []).map((i)=>label(beforeCv?.experience?.[i]));\n        const removedLabels = (diff.decisions.removedExperiences || []).map((i)=>label(beforeCv?.experience?.[i]));\n        const origLangLabel = String(beforeCv?.metadata?.language || \"\").toLowerCase();\n        const narrativeFromDiff = (0,_lib_diff__WEBPACK_IMPORTED_MODULE_8__.buildNarrativeFromDiff)(diff, origLangLabel);\n        const norm = (s)=>String(s || \"\").replace(/[\\s\\u00A0]+/g, \" \").trim().toLowerCase();\n        // Compute keywordsUsed: intersection JD ∩ summary (lowercased tokens)\n        const tokenSet = (s)=>new Set(String(s || \"\").toLowerCase().split(/[^a-z0-9+.#]/gi).filter(Boolean));\n        const Ssum = tokenSet(String(afterCv?.summary || \"\"));\n        const Sjd = tokenSet(String(jdText || \"\"));\n        const keywordsUsedArr = [];\n        Ssum.forEach((w)=>{\n            if (Sjd.has(w) && w.length >= 3) keywordsUsedArr.push(w);\n        });\n        const summaryEdit = {\n            before: String(beforeCv?.summary || \"\"),\n            after: String(afterCv?.summary || \"\"),\n            changed: norm(beforeCv?.summary) !== norm(afterCv?.summary),\n            keywordsUsed: keywordsUsedArr.slice(0, 12)\n        };\n        const finalReport = {\n            ...aiReport || {},\n            languageUsed: beforeCv?.metadata?.language || \"same-as-clean_cv\",\n            decisions: {\n                keptExperiences: keptLabels,\n                removedExperiences: removedLabels,\n                bulletEdits: (diff.decisions.bulletEdits || []).map((b)=>({\n                        sourceIndex: b.sourceIndex,\n                        before: b.before,\n                        after: b.after\n                    }))\n            },\n            narrative: [\n                narrativeFromDiff,\n                aiReport?.narrative\n            ].filter(Boolean).join(\"\\n\\n\"),\n            summaryEdit,\n            ...afterCv.__bulletRewrite ? {\n                bulletRewrite: afterCv.__bulletRewrite\n            } : {},\n            diff\n        };\n        const payload = {\n            result: afterCv,\n            clean_cv: beforeCv,\n            report: finalReport\n        };\n        try {\n            const [j1, j2] = await Promise.all([\n                judgePdfToJson(cvText, cleanCv),\n                judgeArbitrage(\"\", cleanCv, jdText, validationResult.data, aiReport)\n            ]);\n            if (j1) {\n                payload.judge = {\n                    ...payload.judge || {},\n                    pdfToJson: j1.evaluation\n                };\n                cost.steps.push({\n                    name: \"judge_pdf\",\n                    model: j1.model,\n                    usage: j1.usage\n                });\n            }\n            if (j2) {\n                payload.judge = {\n                    ...payload.judge || {},\n                    arbitrage: j2.evaluation\n                };\n                cost.steps.push({\n                    name: \"judge_arbitrage\",\n                    model: j2.model,\n                    usage: j2.usage\n                });\n            }\n        } catch (e) {\n            payload.judge_error = e instanceof Error ? e.message : String(e);\n        }\n        computeCostTotals(cost);\n        computeCostUSD(cost);\n        payload.cost = cost;\n        // Retourner le JSON; inclure cv brut/clean si demandé\n        if (returnRaw) {\n            payload.raw_cv = {\n                text: cvText,\n                method: methodUsed,\n                imagesCount\n            };\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(payload, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Erreur g\\xe9n\\xe9rale:\", error);\n        const errorMessage = error instanceof Error ? error.message : String(error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: `Erreur interne: ${errorMessage}`\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVU7Z0JBQUM7Z0JBQ3JFakUsS0FBS0ssS0FBSyxDQUFDc0gsSUFBSSxDQUFDO29CQUFFMU4sTUFBTTtvQkFBbUJ1RCxPQUFPOFIsR0FBRzlSLEtBQUs7b0JBQUVELE9BQU8rUixHQUFHL1IsS0FBSztnQkFBQztZQUM5RTtRQUNGLEVBQUUsT0FBT2pHLEdBQUc7WUFDVjJYLFFBQVFRLFdBQVcsR0FBSW5ZLGFBQWF3SSxRQUFReEksRUFBRXlNLE9BQU8sR0FBR3BMLE9BQU9yQjtRQUNqRTtRQUVBeUksa0JBQWtCQztRQUNsQk8sZUFBZVA7UUFDZmlQLFFBQVFqUCxJQUFJLEdBQUdBO1FBRWYsc0RBQXNEO1FBQ3RELElBQUk0RixXQUFXO1lBQ2JxSixRQUFRYyxNQUFNLEdBQUc7Z0JBQUV2VixNQUFNdUM7Z0JBQVFpVCxRQUFRTDtnQkFBWUM7WUFBWTtRQUNuRTtRQUNBLE9BQU85WixxREFBWUEsQ0FBQzRPLElBQUksQ0FBQ3VLLFNBQVM7WUFBRXhJLFFBQVE7UUFBSTtJQUVsRCxFQUFFLE9BQU9ELE9BQU87UUFDZDFJLFFBQVEwSSxLQUFLLENBQUMsMEJBQW9CQTtRQUNsQyxNQUFNa0osZUFBZWxKLGlCQUFpQjFHLFFBQVEwRyxNQUFNekMsT0FBTyxHQUFHcEwsT0FBTzZOO1FBQ3JFLE9BQU8xUSxxREFBWUEsQ0FBQzRPLElBQUksQ0FDdEI7WUFBRThCLE9BQU8sQ0FBQyxnQkFBZ0IsRUFBRWtKLGFBQWEsQ0FBQztRQUFDLEdBQzNDO1lBQUVqSixRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3JlYWxjdi1saXRlLWpzb24vLi9hcHAvYXBpL2FkYXB0L3JvdXRlLnRzP2M0OTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgZXh0cmFjdFRleHRGcm9tSW1hZ2VzV2l0aFZpc2lvbiwgbm9ybWFsaXplVGV4dCB9IGZyb20gJ0AvbGliL3BhcnNlJztcclxuaW1wb3J0IHsgdG9DbGVhblJlc3VtZSB9IGZyb20gJ0AvbGliL2NsZWFuJztcclxuaW1wb3J0IHsgc3RydWN0dXJlQ3ZUZXh0V2l0aEFJIH0gZnJvbSAnQC9saWIvc3RydWN0dXJlX2FpJztcclxuaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gJ2NyeXB0byc7XHJcbmltcG9ydCB7IFJlc3VtZUpTT04gfSBmcm9tICdAL2xpYi9zY2hlbWEnO1xyXG5pbXBvcnQgeyBzYW5pdGl6ZVJlc3VtZUZvclNjaGVtYSB9IGZyb20gJ0AvbGliL3Nhbml0aXplJztcclxuaW1wb3J0IHsgU1lTVEVNX1BST01QVCB9IGZyb20gJ0AvbGliL3Byb21wdCc7XHJcbmltcG9ydCB7IGNvbXB1dGVSZXN1bWVEaWZmLCBidWlsZE5hcnJhdGl2ZUZyb21EaWZmIH0gZnJvbSAnQC9saWIvZGlmZic7XHJcbmltcG9ydCB7IGlzT3BlblJvdXRlckVuYWJsZWQsIGdldENvbmZpZ3VyZWRNb2RlbCwgZ2V0UHJpY2luZ0Zvck1vZGVsLCBnZXREZWZhdWx0UHJpY2luZywgaXNKdWRnZUVuYWJsZWQsIGdldEp1ZGdlTW9kZWwgfSBmcm9tICdAL2NvbmZpZy9tb2RlbHMnO1xyXG5cclxuLy8gQ29uZmlndXJhdGlvbiBPcGVuQUkgc2VyYSBjcsOpw6llIGR5bmFtaXF1ZW1lbnRcclxuaW1wb3J0IHsgZ2V0VmVyYnMsIGZpbHRlckZvckFUUywgQUNUSU9OX1ZFUkJfQ0FURUdPUklFUyB9IGZyb20gJ0Avc3JjL2hyL2FjdGlvblZlcmJzJztcclxuaW1wb3J0IHsgY2FsbFdpdGhGYWxsYmFja0NoYXQgfSBmcm9tICdAL0ludGVncmF0aW9uL29yY2hlc3RyYXRvcic7XHJcblxyXG4vLyBUYWlsbGUgbWF4aW1hbGUgZHUgZmljaGllciAoNU1CKVxyXG5jb25zdCBNQVhfRklMRV9TSVpFID0gNSAqIDEwMjQgKiAxMDI0O1xyXG5cclxuLy8gQ2FjaGUgbcOpbW9pcmUgc2ltcGxlIHBvdXIgbGEgc3RydWN0dXJhdGlvbiBjbGVhbl9jdiAoY2zDqTogU0hBLTI1NiBkdSBjdlRleHQpXHJcbmNvbnN0IGNsZWFuQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgYW55PigpO1xyXG5cclxuLy8gSGV1cmlzdGljcyB0byBkZXRlY3QgaWYgYW4gZXhwZXJpZW5jZSBpdGVtIGlzIGxpa2VseSBhbiBlZHVjYXRpb24vdHJhaW5pbmcgKHRvcC1sZXZlbClcclxuZnVuY3Rpb24gaXNMaWtlbHlFZHVjYXRpb25FbnRyeShlOiBhbnkpOiBib29sZWFuIHtcclxuICBjb25zdCBzID0gW2U/LmNvbXBhbnksIGU/LnRpdGxlLCBlPy5sb2NhdGlvbiwgZT8uZGVzY3JpcHRpb25dLmZpbHRlcihCb29sZWFuKS5qb2luKCcgJykudG9Mb3dlckNhc2UoKTtcclxuICBjb25zdCBlZHVUZXJtcyA9IFtcclxuICAgICd1bml2ZXJzaXQnLCAndW5pdmVyc2l0eScsICfDqWNvbGUnLCAnZWNvbGUnLCAnc2Nob29sJywgJ2NvbGxlZ2UnLCAnaW5zdGl0dXQnLCAnaW5zdGl0dXRlJywgJ2l1dCcsICdpbnNhJywgJ3BvbHl0ZWNoJywgJ2VucycsICdlbnN0YScsICdlbmFjJywgJ21pbmVzJywgJ2NlbnRyYWxlJywgJ3NvcmJvbm5lJywgJ3BhcmlzLXNhY2xheScsICdoZWMnLCAnaMOpYycsICdlbSBseW9uJywgJ2Vzc2VjJyxcclxuICAgICdsaWNlbmNlJywgJ2xpY2Vuc2UnLCAnYmFjaGVsb3InLCAnbWFzdGVyJywgJ21zYycsICdtLnNjJywgJ21iYScsICdwaGQnLCAnZG9jdG9yYXQnLCAnYnRzJywgJ2R1dCcsICdjYXAnLCAnZGV1ZycsICdkZWEnLCAnZGlwbCcsICdkaXBsw7RtZScsICdkaXBsb21lJyxcclxuICAgICdmb3JtYXRpb24nLCAnY2VydGlmaWNhdCcsICdjZXJ0aWZpY2F0ZScsICdjZXJ0aWZpY2F0aW9uJywgJ2Jvb3RjYW1wJywgJ21vb2MnLCAnY291cnNlcmEnLCAnZWR4JywgJ3VkZW15JywgJ29wZW5jbGFzc3Jvb21zJ1xyXG4gIF07XHJcbiAgcmV0dXJuIGVkdVRlcm1zLnNvbWUoayA9PiBzLmluY2x1ZGVzKGspKTtcclxufVxyXG5cclxuLy8gUmV2ZXJ0IHRyYW5zbGF0ZWQgZmllbGRzIGJhY2sgdG8gb3JpZ2luYWwgbGFuZ3VhZ2Ugd2hlbiBkZXRlY3RlZFxyXG5mdW5jdGlvbiBlbmZvcmNlT3JpZ2luYWxMYW5ndWFnZUNWKHJlc3VsdDogYW55LCBiZWZvcmU6IGFueSwgb3JpZ0xhbmc6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzYW1lT3JVbmtub3duID0gKHM6IGFueSkgPT4ge1xyXG4gICAgICBjb25zdCBkbCA9IGRldGVjdExhbmdMb29zZShTdHJpbmcocyB8fCAnJykpO1xyXG4gICAgICByZXR1cm4gZGwgPT09ICd1bmtub3duJyB8fCBkbCA9PT0gU3RyaW5nKG9yaWdMYW5nIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgfTtcclxuICAgIC8vIEV4cGVyaWVuY2UgZmllbGRzXHJcbiAgICBjb25zdCBiZXhwID0gQXJyYXkuaXNBcnJheShiZWZvcmU/LmV4cGVyaWVuY2UpID8gYmVmb3JlLmV4cGVyaWVuY2UgOiBbXTtcclxuICAgIGNvbnN0IGFleHAgPSBBcnJheS5pc0FycmF5KHJlc3VsdD8uZXhwZXJpZW5jZSkgPyByZXN1bHQuZXhwZXJpZW5jZSA6IFtdO1xyXG4gICAgY29uc3QgbiA9IE1hdGgubWluKGJleHAubGVuZ3RoLCBhZXhwLmxlbmd0aCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICBjb25zdCBiID0gYmV4cFtpXSB8fCB7fTsgY29uc3QgYSA9IGFleHBbaV0gfHwge307XHJcbiAgICAgIGlmICghc2FtZU9yVW5rbm93bihhLnRpdGxlKSAmJiBiLnRpdGxlKSBhLnRpdGxlID0gYi50aXRsZTtcclxuICAgICAgaWYgKCFzYW1lT3JVbmtub3duKGEuY29tcGFueSkgJiYgYi5jb21wYW55KSBhLmNvbXBhbnkgPSBiLmNvbXBhbnk7XHJcbiAgICAgIGlmICghc2FtZU9yVW5rbm93bihhLmxvY2F0aW9uKSAmJiBiLmxvY2F0aW9uKSBhLmxvY2F0aW9uID0gYi5sb2NhdGlvbjtcclxuICAgICAgY29uc3QgYkJ1bCA9IEFycmF5LmlzQXJyYXkoYi5idWxsZXRzKSA/IGIuYnVsbGV0cyA6IFtdO1xyXG4gICAgICBjb25zdCBhQnVsID0gQXJyYXkuaXNBcnJheShhLmJ1bGxldHMpID8gYS5idWxsZXRzIDogW107XHJcbiAgICAgIGNvbnN0IG0gPSBNYXRoLm1pbihiQnVsLmxlbmd0aCwgYUJ1bC5sZW5ndGgpO1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG07IGorKykge1xyXG4gICAgICAgIGlmICghc2FtZU9yVW5rbm93bihhQnVsW2pdKSAmJiBiQnVsW2pdKSBhQnVsW2pdID0gYkJ1bFtqXTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhLmJ1bGxldHMpKSBhLmJ1bGxldHMgPSBhQnVsO1xyXG4gICAgfVxyXG4gICAgLy8gUHJvamVjdHNcclxuICAgIGNvbnN0IGJwcm9qID0gQXJyYXkuaXNBcnJheShiZWZvcmU/LnByb2plY3RzKSA/IGJlZm9yZS5wcm9qZWN0cyA6IFtdO1xyXG4gICAgY29uc3QgYXByb2ogPSBBcnJheS5pc0FycmF5KHJlc3VsdD8ucHJvamVjdHMpID8gcmVzdWx0LnByb2plY3RzIDogW107XHJcbiAgICBjb25zdCBwbiA9IE1hdGgubWluKGJwcm9qLmxlbmd0aCwgYXByb2oubGVuZ3RoKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG47IGkrKykge1xyXG4gICAgICBjb25zdCBiID0gYnByb2pbaV0gfHwge307IGNvbnN0IGEgPSBhcHJvaltpXSB8fCB7fTtcclxuICAgICAgaWYgKCFzYW1lT3JVbmtub3duKGEubmFtZSkgJiYgYi5uYW1lKSBhLm5hbWUgPSBiLm5hbWU7XHJcbiAgICAgIGNvbnN0IGJCdWwgPSBBcnJheS5pc0FycmF5KGIuYnVsbGV0cykgPyBiLmJ1bGxldHMgOiBbXTtcclxuICAgICAgY29uc3QgYUJ1bCA9IEFycmF5LmlzQXJyYXkoYS5idWxsZXRzKSA/IGEuYnVsbGV0cyA6IFtdO1xyXG4gICAgICBjb25zdCBtID0gTWF0aC5taW4oYkJ1bC5sZW5ndGgsIGFCdWwubGVuZ3RoKTtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtOyBqKyspIHtcclxuICAgICAgICBpZiAoIXNhbWVPclVua25vd24oYUJ1bFtqXSkgJiYgYkJ1bFtqXSkgYUJ1bFtqXSA9IGJCdWxbal07XHJcbiAgICAgIH1cclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYS5idWxsZXRzKSkgYS5idWxsZXRzID0gYUJ1bDtcclxuICAgIH1cclxuICAgIC8vIEVkdWNhdGlvblxyXG4gICAgY29uc3QgYmVkdSA9IEFycmF5LmlzQXJyYXkoYmVmb3JlPy5lZHVjYXRpb24pID8gYmVmb3JlLmVkdWNhdGlvbiA6IFtdO1xyXG4gICAgY29uc3QgYWVkdSA9IEFycmF5LmlzQXJyYXkocmVzdWx0Py5lZHVjYXRpb24pID8gcmVzdWx0LmVkdWNhdGlvbiA6IFtdO1xyXG4gICAgY29uc3QgZW4gPSBNYXRoLm1pbihiZWR1Lmxlbmd0aCwgYWVkdS5sZW5ndGgpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGIgPSBiZWR1W2ldIHx8IHt9OyBjb25zdCBhID0gYWVkdVtpXSB8fCB7fTtcclxuICAgICAgaWYgKCFzYW1lT3JVbmtub3duKGEuc2Nob29sKSAmJiBiLnNjaG9vbCkgYS5zY2hvb2wgPSBiLnNjaG9vbDtcclxuICAgICAgaWYgKCFzYW1lT3JVbmtub3duKGEuZGVncmVlKSAmJiBiLmRlZ3JlZSkgYS5kZWdyZWUgPSBiLmRlZ3JlZTtcclxuICAgICAgaWYgKCFzYW1lT3JVbmtub3duKGEubG9jYXRpb24pICYmIGIubG9jYXRpb24pIGEubG9jYXRpb24gPSBiLmxvY2F0aW9uO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2gge31cclxufVxyXG5cclxuLy8gTG9vc2UgbGFuZ3VhZ2UgZGV0ZWN0b3IgKHNjcmlwdHMgKyBzaW1wbGUgc3RvcHdvcmRzKVxyXG5mdW5jdGlvbiBkZXRlY3RMYW5nTG9vc2UodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCB0ID0gU3RyaW5nKHRleHQgfHwgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgaWYgKCF0LnRyaW0oKSkgcmV0dXJuICd1bmtub3duJztcclxuICBpZiAoL1tcXHUwNjAwLVxcdTA2RkZdLy50ZXN0KHRleHQpKSByZXR1cm4gJ2FyJztcclxuICBpZiAoL1tcXHU0RTAwLVxcdTlGRkZdLy50ZXN0KHRleHQpKSByZXR1cm4gJ3poJztcclxuICBpZiAoL1tcXHUzMDQwLVxcdTMwRkZdLy50ZXN0KHRleHQpKSByZXR1cm4gJ2phJztcclxuICBpZiAoL1tcXHVBQzAwLVxcdUQ3QUZdLy50ZXN0KHRleHQpKSByZXR1cm4gJ2tvJztcclxuICBjb25zdCBsYW5nczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge1xyXG4gICAgZnI6IFsnIGxlICcsICcgbGEgJywgJyBsZXMgJywgJyBkZXMgJywgJyBldCAnLCAnIMOgICcsICcgb3UgJywgJyBleHDDqXJpZW5jZSAnLCAnIGNvbXDDqXRlbmNlICcsICcgcHJvZmlsICddLFxyXG4gICAgZW46IFsnIHRoZSAnLCAnIGFuZCAnLCAnIHRvICcsICcgb3IgJywgJyBleHBlcmllbmNlICcsICcgc2tpbGxzICcsICcgcHJvZmlsZSAnLCAnIGRldmVsb3BlciAnLCAnIGVuZ2luZWVyICddLFxyXG4gICAgZXM6IFsnIGVsICcsICcgbGEgJywgJyBsb3MgJywgJyBsYXMgJywgJyBkZSAnLCAnIHkgJywgJyBwYXJhICcsICcgZXhwZXJpZW5jaWEgJywgJyBwZXJmaWwgJywgJyBkZXNhcnJvbGxhZG9yICddLFxyXG4gICAgaXQ6IFsnIGlsICcsICcgbGEgJywgJyBsbyAnLCAnIGxlICcsICcgZGkgJywgJyBlICcsICcgcGVyICcsICcgZXNwZXJpZW56YSAnLCAnIHByb2ZpbG8gJywgJyBzdmlsdXBwYXRvcmUgJ10sXHJcbiAgICBkZTogWycgZGVyICcsICcgZGllICcsICcgZGFzICcsICcgdW5kICcsICcgZsO8ciAnLCAnIGVyZmFocnVuZyAnLCAnIHByb2ZpbCAnLCAnIGVudHdpY2tsZXIgJ10sXHJcbiAgICBwdDogWycgbyAnLCAnIGEgJywgJyBvcyAnLCAnIGFzICcsICcgZGUgJywgJyBlICcsICcgcGFyYSAnLCAnIGV4cGVyacOqbmNpYSAnLCAnIHBlcmZpbCAnLCAnIGRlc2Vudm9sdmVkb3IgJ10sXHJcbiAgICBubDogWycgZGUgJywgJyBoZXQgJywgJyBlbiAnLCAnIHZvb3IgJywgJyBlcnZhcmluZyAnLCAnIHByb2ZpZWwgJywgJyBvbnR3aWtrZWxhYXIgJ10sXHJcbiAgICB0cjogWycgdmUgJywgJyBpw6dpbiAnLCAnIGRlbmV5aW0gJywgJyBwcm9maWwgJywgJyBnZWxpxZ90aXJpY2kgJywgJyBtw7xoZW5kaXMgJ10sXHJcbiAgfTtcclxuICBsZXQgYmVzdCA9ICd1bmtub3duJztcclxuICBsZXQgYmVzdFNjb3JlID0gMDtcclxuICBmb3IgKGNvbnN0IFtjb2RlLCB3b3Jkc10gb2YgT2JqZWN0LmVudHJpZXMobGFuZ3MpKSB7XHJcbiAgICBjb25zdCBzY29yZSA9IHdvcmRzLnJlZHVjZSgoYWNjLCB3KSA9PiBhY2MgKyAodC5pbmNsdWRlcyh3KSA/IDEgOiAwKSwgMCk7XHJcbiAgICBpZiAoc2NvcmUgPiBiZXN0U2NvcmUpIHsgYmVzdFNjb3JlID0gc2NvcmU7IGJlc3QgPSBjb2RlOyB9XHJcbiAgfVxyXG4gIHJldHVybiBiZXN0O1xyXG59XHJcblxyXG4vLyBNYXAgYW4gZXhwZXJpZW5jZS1saWtlIG9iamVjdCB0byBhbiBlZHVjYXRpb24gcmVjb3JkIChyZW1vdmUgYnVsbGV0cykgKHRvcC1sZXZlbClcclxuZnVuY3Rpb24gbWFwRXhwZXJpZW5jZVRvRWR1Y2F0aW9uKGU6IGFueSkge1xyXG4gIGNvbnN0IHBpY2sgPSAoeDogYW55KSA9PiAodHlwZW9mIHggPT09ICdzdHJpbmcnID8geC50cmltKCkgOiAnJyk7XHJcbiAgY29uc3QgaGFzRWR1V29yZCA9IChzdHI6IHN0cmluZykgPT4gaXNMaWtlbHlFZHVjYXRpb25FbnRyeSh7IGNvbXBhbnk6ICcnLCB0aXRsZTogc3RyIH0pO1xyXG4gIGNvbnN0IGNvbXBhbnkgPSBwaWNrKGU/LmNvbXBhbnkpO1xyXG4gIGNvbnN0IHRpdGxlID0gcGljayhlPy50aXRsZSk7XHJcbiAgbGV0IHNjaG9vbCA9ICcnO1xyXG4gIGxldCBkZWdyZWU6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuICBpZiAoaGFzRWR1V29yZChjb21wYW55KSB8fCBjb21wYW55Lmxlbmd0aCA+PSB0aXRsZS5sZW5ndGgpIHNjaG9vbCA9IGNvbXBhbnkgfHwgdGl0bGU7XHJcbiAgZWxzZSBzY2hvb2wgPSB0aXRsZSB8fCBjb21wYW55O1xyXG4gIGNvbnN0IGRlZ3JlZVRlcm1zID0gWydsaWNlbmNlJywgJ2xpY2Vuc2UnLCAnYmFjaGVsb3InLCAnbWFzdGVyJywgJ21zYycsICdtYmEnLCAncGhkJywgJ2RvY3RvcmF0JywgJ2J0cycsICdkdXQnLCAnY2FwJ107XHJcbiAgY29uc3QgdExvdyA9IHRpdGxlLnRvTG93ZXJDYXNlKCk7XHJcbiAgY29uc3QgZm91bmQgPSBkZWdyZWVUZXJtcy5maW5kKGQgPT4gdExvdy5pbmNsdWRlcyhkKSk7XHJcbiAgaWYgKGZvdW5kKSBkZWdyZWUgPSB0aXRsZTtcclxuICBjb25zdCBzdGFydERhdGUgPSBwaWNrKGU/LnN0YXJ0RGF0ZSk7XHJcbiAgY29uc3QgZW5kRGF0ZSA9IHBpY2soZT8uZW5kRGF0ZSk7XHJcbiAgY29uc3QgcmVjOiBhbnkgPSB7IHNjaG9vbDogc2Nob29sIHx8IGNvbXBhbnkgfHwgdGl0bGUgfTtcclxuICBpZiAoZGVncmVlKSByZWMuZGVncmVlID0gZGVncmVlO1xyXG4gIGlmIChzdGFydERhdGUgfHwgZW5kRGF0ZSkge1xyXG4gICAgY29uc3Qgc2VwID0gJyDigJMgJztcclxuICAgIHJlYy5kYXRlcyA9IFtzdGFydERhdGUgfHwgJycsIGVuZERhdGUgfHwgJyddLmZpbHRlcigoeCwgaSkgPT4gaSA9PT0gMCA/IHggIT09ICcnIDogdHJ1ZSkuam9pbihzZXApLnRyaW0oKTtcclxuICAgIGlmICghcmVjLmRhdGVzKSBkZWxldGUgcmVjLmRhdGVzO1xyXG4gIH1cclxuICByZXR1cm4gcmVjO1xyXG59XHJcblxyXG4vLyBDb25zdHJ1aXQgbGUgQ2xlYW4gQ1YgZXQgcmVtb250ZSBsJ3VzYWdlICh0b2tlbnMpIHNpIHN0cnVjdHVyYXRpb24gSUEgdXRpbGlzw6llXHJcbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkQ2xlYW5DdihjdlRleHQ6IHN0cmluZyk6IFByb21pc2U8eyBjbGVhbjogYW55OyBzb3VyY2U6ICdjYWNoZScgfCAnYWknIHwgJ2RldGVybWluaXN0aWMnOyB1c2FnZT86IGFueTsgbW9kZWw/OiBzdHJpbmc7IH0+IHtcclxuICBjb25zdCBrZXkgPSBjcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUoY3ZUZXh0KS5kaWdlc3QoJ2hleCcpO1xyXG4gIGlmIChjbGVhbkNhY2hlLmhhcyhrZXkpKSB7XHJcbiAgICByZXR1cm4geyBjbGVhbjogY2xlYW5DYWNoZS5nZXQoa2V5KSwgc291cmNlOiAnY2FjaGUnIH07XHJcbiAgfVxyXG4gIGxldCBjbGVhbjogYW55O1xyXG4gIGxldCB1c2FnZTogYW55IHwgdW5kZWZpbmVkO1xyXG4gIGxldCBtb2RlbDogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gIGxldCBzb3VyY2U6ICdhaScgfCAnZGV0ZXJtaW5pc3RpYycgPSAnZGV0ZXJtaW5pc3RpYyc7XHJcbiAgLy8gU2kgY2zDqSBJQSBkZSBzdHJ1Y3R1cmF0aW9uIE9wZW5Sb3V0ZXIgcHLDqXNlbnRlLCB0ZW50ZXIgbCdJQSBkJ2Fib3JkXHJcbiAgaWYgKHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfS0VZX1BERl9UT19KU09OKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBhaSA9IGF3YWl0IHN0cnVjdHVyZUN2VGV4dFdpdGhBSShjdlRleHQpO1xyXG4gICAgICBjbGVhbiA9IGFpLnN0cnVjdHVyZWQ7XHJcbiAgICAgIHVzYWdlID0gKGFpIGFzIGFueSkudXNhZ2U7XHJcbiAgICAgIG1vZGVsID0gKGFpIGFzIGFueSkubW9kZWw7XHJcbiAgICAgIHNvdXJjZSA9ICdhaSc7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignQUkgc3RydWN0dXJpbmcgZmFpbGVkLCBmYWxsaW5nIGJhY2sgdG8gZGV0ZXJtaW5pc3RpYzonLCBlKTtcclxuICAgICAgY2xlYW4gPSB0b0NsZWFuUmVzdW1lKGN2VGV4dCk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGNsZWFuID0gdG9DbGVhblJlc3VtZShjdlRleHQpO1xyXG4gIH1cclxuICBjbGVhbkNhY2hlLnNldChrZXksIGNsZWFuKTtcclxuICByZXR1cm4geyBjbGVhbiwgc291cmNlLCB1c2FnZSwgbW9kZWwgfTtcclxufVxyXG5cclxuLy8gSGVscGVyOiBzb3J0IGV4cGVyaWVuY2VzIGFudGktY2hyb25vbG9naWNhbGx5IChuZXdlc3QgZmlyc3QpIHVzaW5nIGVuZERhdGUgKFlZWVktTU0gb3IgXCJQcmVzZW50XCIpIHRoZW4gc3RhcnREYXRlXHJcbmZ1bmN0aW9uIHltVG9OdW0oeW0/OiBzdHJpbmcgfCBudWxsKTogbnVtYmVyIHwgbnVsbCB7XHJcbiAgaWYgKCF5bSkgcmV0dXJuIG51bGw7XHJcbiAgaWYgKHltID09PSAnUHJlc2VudCcpIHJldHVybiA5OTk5ICogMTIgKyAxMjsgLy8gc2VudGluZWwgZm9yIGN1cnJlbnQgcm9sZVxyXG4gIGNvbnN0IG0gPSAvXihbMC05XXs0fSktKFswLTldezJ9KSQvLmV4ZWMoU3RyaW5nKHltKSk7XHJcbiAgaWYgKCFtKSByZXR1cm4gbnVsbDtcclxuICBjb25zdCB5ZWFyID0gcGFyc2VJbnQobVsxXSwgMTApO1xyXG4gIGNvbnN0IG1vbnRoID0gcGFyc2VJbnQobVsyXSwgMTApO1xyXG4gIGlmICghTnVtYmVyLmlzRmluaXRlKHllYXIpIHx8ICFOdW1iZXIuaXNGaW5pdGUobW9udGgpIHx8IG1vbnRoIDwgMSB8fCBtb250aCA+IDEyKSByZXR1cm4gbnVsbDtcclxuICByZXR1cm4geWVhciAqIDEyICsgbW9udGg7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNvcnRFeHBlcmllbmNlQW50aUNocm9ubyhleHBzOiBhbnlbXSk6IGFueVtdIHtcclxuICBpZiAoIUFycmF5LmlzQXJyYXkoZXhwcykpIHJldHVybiBleHBzO1xyXG4gIGNvbnN0IHdpdGhJbmRleCA9IGV4cHMubWFwKChlLCBpZHgpID0+ICh7IGUsIGlkeCB9KSk7XHJcbiAgd2l0aEluZGV4LnNvcnQoKGEsIGIpID0+IHtcclxuICAgIGNvbnN0IGFlID0gYS5lIHx8IHt9O1xyXG4gICAgY29uc3QgYmUgPSBiLmUgfHwge307XHJcbiAgICBjb25zdCBhS2V5ID0geW1Ub051bShhZS5lbmREYXRlKSA/PyB5bVRvTnVtKGFlLnN0YXJ0RGF0ZSk7XHJcbiAgICBjb25zdCBiS2V5ID0geW1Ub051bShiZS5lbmREYXRlKSA/PyB5bVRvTnVtKGJlLnN0YXJ0RGF0ZSk7XHJcbiAgICBpZiAoYUtleSAhPSBudWxsICYmIGJLZXkgIT0gbnVsbCkge1xyXG4gICAgICBpZiAoYktleSAhPT0gYUtleSkgcmV0dXJuIGJLZXkgLSBhS2V5OyAvLyBkZXNjZW5kaW5nOiBuZXdlc3QgZmlyc3RcclxuICAgIH0gZWxzZSBpZiAoYUtleSAhPSBudWxsKSB7XHJcbiAgICAgIHJldHVybiAtMTsgLy8gYSBoYXMgYSBkYXRlLCBiIG5vdCDihpIgYSBmaXJzdFxyXG4gICAgfSBlbHNlIGlmIChiS2V5ICE9IG51bGwpIHtcclxuICAgICAgcmV0dXJuIDE7IC8vIGIgaGFzIGEgZGF0ZSwgYSBub3Qg4oaSIGIgZmlyc3RcclxuICAgIH1cclxuICAgIC8vIGZhbGxiYWNrIHRvIG9yaWdpbmFsIG9yZGVyIChzdGFibGUpXHJcbiAgICByZXR1cm4gYS5pZHggLSBiLmlkeDtcclxuICB9KTtcclxuICByZXR1cm4gd2l0aEluZGV4Lm1hcCgoeyBlIH0pID0+IGUpO1xyXG59XHJcblxyXG4vLyBUcnkgdG8gc2FsdmFnZSBKU09OIGZyb20gbW9kZWxzIHRoYXQgcmV0dXJuIGV4dHJhIHRleHQgb3IgdHJhaWxpbmcgY29tbWFzXHJcbmZ1bmN0aW9uIHBhcnNlSnNvblN0cmljdE9yU2FsdmFnZSh0ZXh0OiBzdHJpbmcpOiBhbnkge1xyXG4gIC8vIFByZS1jbGVhbjogcmVtb3ZlIG1hcmtkb3duIGNvZGUgZmVuY2VzXHJcbiAgbGV0IHQgPSB0ZXh0LnJlcGxhY2UoL2BgYGpzb24vZ2ksICdgYGAnKS5yZXBsYWNlKC9gYGAvZywgJycpO1xyXG4gIC8vIDEpIFN0cmljdFxyXG4gIHRyeSB7IHJldHVybiBKU09OLnBhcnNlKHQpOyB9IGNhdGNoIHt9XHJcbiAgLy8gMikgRXh0cmFjdCBiZXR3ZWVuIGZpcnN0ICd7JyBhbmQgbGFzdCAnfSdcclxuICBjb25zdCBmaXJzdCA9IHQuaW5kZXhPZigneycpO1xyXG4gIGNvbnN0IGxhc3QgPSB0Lmxhc3RJbmRleE9mKCd9Jyk7XHJcbiAgaWYgKGZpcnN0ID49IDAgJiYgbGFzdCA+IGZpcnN0KSB7XHJcbiAgICBsZXQgc2xpY2UgPSB0LnNsaWNlKGZpcnN0LCBsYXN0ICsgMSk7XHJcbiAgICAvLyBSZW1vdmUgQy1zdHlsZSBhbmQgbGluZSBjb21tZW50cyBjb25zZXJ2YXRpdmVseVxyXG4gICAgc2xpY2UgPSBzbGljZS5yZXBsYWNlKC9cXC9cXCpbXFxzXFxTXSo/XFwqXFwvL2csICcnKTtcclxuICAgIHNsaWNlID0gc2xpY2UucmVwbGFjZSgvKF58W1xcclxcbl0pXFxzKlxcL1xcLy4qKD89XFxyP1xcbnwkKS9nLCAnJDEnKTtcclxuICAgIHRyeSB7IHJldHVybiBKU09OLnBhcnNlKHNsaWNlKTsgfSBjYXRjaCB7fVxyXG4gICAgLy8gMykgTWluaW1hbCBjbGVhbnVwOiBzbWFydCBxdW90ZXMgYW5kIHRyYWlsaW5nIGNvbW1hc1xyXG4gICAgbGV0IGNsZWFuZWQgPSBzbGljZVxyXG4gICAgICAucmVwbGFjZSgvW1xcdTIwMUNcXHUyMDFEXS9nLCAnXCInKVxyXG4gICAgICAucmVwbGFjZSgvW1xcdTIwMThcXHUyMDE5XS9nLCBcIidcIilcclxuICAgICAgLnJlcGxhY2UoLyxcXHMqKFt9XFxdXSkvZywgJyQxJyk7XHJcbiAgICAvLyBBZ2FpbiByZW1vdmUgY29tbWVudHMgaWYgYW55IHJlYXBwZWFyZWRcclxuICAgIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoL1xcL1xcKltcXHNcXFNdKj9cXCpcXC8vZywgJycpLnJlcGxhY2UoLyhefFtcXHJcXG5dKVxccypcXC9cXC8uKig/PVxccj9cXG58JCkvZywgJyQxJyk7XHJcbiAgICB0cnkgeyByZXR1cm4gSlNPTi5wYXJzZShjbGVhbmVkKTsgfSBjYXRjaCB7fVxyXG4gIH1cclxuICAvLyA0KSBSZW1vdmUgdHJhaWxpbmcgY29tbWFzIGdsb2JhbGx5IGFuZCByZXRyeVxyXG4gIGNvbnN0IGNsZWFuZWRHbG9iYWwgPSB0LnJlcGxhY2UoLyxcXHMqKFt9XFxdXSkvZywgJyQxJyk7XHJcbiAgdHJ5IHsgcmV0dXJuIEpTT04ucGFyc2UoY2xlYW5lZEdsb2JhbCk7IH0gY2F0Y2gge31cclxuICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBwYXJzZSBKU09OJyk7XHJcbn1cclxuXHJcbi8vIEFncsOoZ2UgbGVzIHVzYWdlcyAodG9rZW5zKSBwYXIgw6l0YXBlIHBvdXIgdW4gdG90YWwgZ2xvYmFsXHJcbmZ1bmN0aW9uIGNvbXB1dGVDb3N0VG90YWxzKGNvc3Q6IHsgc3RlcHM6IEFycmF5PHsgdXNhZ2U/OiBhbnkgfT47IHRvdGFscz86IHsgcHJvbXB0X3Rva2VuczogbnVtYmVyOyBjb21wbGV0aW9uX3Rva2VuczogbnVtYmVyOyB0b3RhbF90b2tlbnM6IG51bWJlciB9IH0pIHtcclxuICBjb25zdCB0b3RhbHMgPSB7IHByb21wdF90b2tlbnM6IDAsIGNvbXBsZXRpb25fdG9rZW5zOiAwLCB0b3RhbF90b2tlbnM6IDAgfTtcclxuICBmb3IgKGNvbnN0IHMgb2YgY29zdC5zdGVwcykge1xyXG4gICAgY29uc3QgdSA9IHM/LnVzYWdlIGFzIGFueTtcclxuICAgIGlmICghdSkgY29udGludWU7XHJcbiAgICBpZiAodHlwZW9mIHUucHJvbXB0X3Rva2VucyA9PT0gJ251bWJlcicpIHRvdGFscy5wcm9tcHRfdG9rZW5zICs9IHUucHJvbXB0X3Rva2VucztcclxuICAgIGlmICh0eXBlb2YgdS5jb21wbGV0aW9uX3Rva2VucyA9PT0gJ251bWJlcicpIHRvdGFscy5jb21wbGV0aW9uX3Rva2VucyArPSB1LmNvbXBsZXRpb25fdG9rZW5zO1xyXG4gICAgaWYgKHR5cGVvZiB1LnRvdGFsX3Rva2VucyA9PT0gJ251bWJlcicpIHRvdGFscy50b3RhbF90b2tlbnMgKz0gdS50b3RhbF90b2tlbnM7XHJcbiAgfVxyXG4gIChjb3N0IGFzIGFueSkudG90YWxzID0gdG90YWxzO1xyXG59XHJcblxyXG4vLyBDYWxjdWxlIGxlIGNvw7t0IFVTRCBwYXIgw6l0YXBlIGV0IHRvdGFsLCDDoCBwYXJ0aXIgZGVzIHRva2VucyBldCBkdSBtb2TDqGxlXHJcbmZ1bmN0aW9uIGNvbXB1dGVDb3N0VVNEKGNvc3Q6IHsgc3RlcHM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyBtb2RlbD86IHN0cmluZzsgdXNhZ2U/OiBhbnk7IGNvc3RfdXNkPzogbnVtYmVyOyBwcmljZV9vdmVycmlkZT86IHsgaW5QZXJNVG9rOiBudW1iZXI7IG91dFBlck1Ub2s6IG51bWJlciB9IH0+OyB0b3RhbHM/OiBhbnk7IGN1cnJlbmN5Pzogc3RyaW5nOyB0b3RhbF91c2Q/OiBudW1iZXIgfSkge1xyXG4gIGNvbnN0IGVudk9yID0gKGtleTogc3RyaW5nLCBkZWY6IG51bWJlcikgPT4ge1xyXG4gICAgY29uc3QgdiA9IHByb2Nlc3MuZW52W2tleV07XHJcbiAgICBjb25zdCBuID0gdiA/IHBhcnNlRmxvYXQodikgOiBOYU47XHJcbiAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG4pID8gbiA6IGRlZjtcclxuICB9O1xyXG4gIGNvbnN0IHByaWNpbmcgPSAobW9kZWw/OiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IG0gPSAobW9kZWwgfHwgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAvLyAxKSBDb25maWd1cmFibGUgcGVyLW1vZGVsIHByaWNpbmcgKE9wZW5Sb3V0ZXIgb3Igb3RoZXJzKVxyXG4gICAgY29uc3QgY2ZnID0gZ2V0UHJpY2luZ0Zvck1vZGVsKG1vZGVsIHx8ICcnKTtcclxuICAgIGlmIChjZmcpIHJldHVybiBjZmc7XHJcbiAgICAvLyAyKSBLbm93biBPcGVuQUkgZGVmYXVsdHMgd2l0aCBlbnYgb3ZlcnJpZGVzXHJcbiAgICBpZiAobS5pbmNsdWRlcygnZ3B0LTRvLW1pbmknKSkge1xyXG4gICAgICByZXR1cm4geyBpblBlck1Ub2s6IGVudk9yKCdQUklDRV9HUFQ0T19NSU5JX0lOX1BFUl9NVE9LJywgMC4xNSksIG91dFBlck1Ub2s6IGVudk9yKCdQUklDRV9HUFQ0T19NSU5JX09VVF9QRVJfTVRPSycsIDAuNjApIH07XHJcbiAgICB9XHJcbiAgICBpZiAobS5pbmNsdWRlcygnZ3B0LTRvJykpIHtcclxuICAgICAgcmV0dXJuIHsgaW5QZXJNVG9rOiBlbnZPcignUFJJQ0VfR1BUNE9fSU5fUEVSX01UT0snLCA1LjApLCBvdXRQZXJNVG9rOiBlbnZPcignUFJJQ0VfR1BUNE9fT1VUX1BFUl9NVE9LJywgMTUuMCkgfTtcclxuICAgIH1cclxuICAgIC8vIDMpIEZhbGxiYWNrIHRvIGRlZmF1bHQgcHJpY2luZ1xyXG4gICAgcmV0dXJuIGdldERlZmF1bHRQcmljaW5nKCk7XHJcbiAgfTtcclxuXHJcbiAgbGV0IHRvdGFsVVNEID0gMDtcclxuICBmb3IgKGNvbnN0IHN0ZXAgb2YgY29zdC5zdGVwcykge1xyXG4gICAgY29uc3QgdSA9IHN0ZXAudXNhZ2UgfHwge307XHJcbiAgICBjb25zdCBvdmVycmlkZSA9IChzdGVwIGFzIGFueSkucHJpY2Vfb3ZlcnJpZGU7XHJcbiAgICBjb25zdCBoYXNPdmVycmlkZSA9IG92ZXJyaWRlICYmIHR5cGVvZiBvdmVycmlkZS5pblBlck1Ub2sgPT09ICdudW1iZXInICYmIHR5cGVvZiBvdmVycmlkZS5vdXRQZXJNVG9rID09PSAnbnVtYmVyJztcclxuICAgIGNvbnN0IHJhdGVzID0gaGFzT3ZlcnJpZGUgPyBvdmVycmlkZSA6IHByaWNpbmcoc3RlcC5tb2RlbCk7XHJcbiAgICBjb25zdCBpblVTRCA9ICh0eXBlb2YgdS5wcm9tcHRfdG9rZW5zID09PSAnbnVtYmVyJyA/IHUucHJvbXB0X3Rva2VucyA6IDApICogKHJhdGVzLmluUGVyTVRvayAvIDFfMDAwXzAwMCk7XHJcbiAgICBjb25zdCBvdXRVU0QgPSAodHlwZW9mIHUuY29tcGxldGlvbl90b2tlbnMgPT09ICdudW1iZXInID8gdS5jb21wbGV0aW9uX3Rva2VucyA6IDApICogKHJhdGVzLm91dFBlck1Ub2sgLyAxXzAwMF8wMDApO1xyXG4gICAgc3RlcC5jb3N0X3VzZCA9ICsoaW5VU0QgKyBvdXRVU0QpLnRvRml4ZWQoNik7XHJcbiAgICB0b3RhbFVTRCArPSBzdGVwLmNvc3RfdXNkO1xyXG4gIH1cclxuICAoY29zdCBhcyBhbnkpLmN1cnJlbmN5ID0gJ1VTRCc7XHJcbiAgKGNvc3QgYXMgYW55KS50b3RhbF91c2QgPSArdG90YWxVU0QudG9GaXhlZCg2KTtcclxufVxyXG5cclxuLy8gPT09IEp1ZGdlIChhcmJpdGVyKSBoZWxwZXJzID09PVxyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVKdWRnZUNsaWVudCgpIHtcclxuICBpZiAoIWlzSnVkZ2VFbmFibGVkKCkpIHRocm93IG5ldyBFcnJvcignSnVnZSBkw6lzYWN0aXbDqScpO1xyXG4gIGNvbnN0IE9wZW5BSSA9IChhd2FpdCBpbXBvcnQoJ29wZW5haScpKS5kZWZhdWx0O1xyXG4gIGNvbnN0IG1vZGVsID0gZ2V0SnVkZ2VNb2RlbCgpO1xyXG4gIGNvbnN0IG9yS2V5ID0gcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9LRVlfSlVER0UgfHwgcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9BUElfS0VZX0pVREdFO1xyXG4gIGlmICghb3JLZXkpIHRocm93IG5ldyBFcnJvcignQ2zDqSBBUEkgT3BlblJvdXRlciBkdSBqdWdlIG1hbnF1YW50ZSAoT1BFTlJPVVRFUl9LRVlfSlVER0Ugb3UgT1BFTlJPVVRFUl9BUElfS0VZX0pVREdFKS4nKTtcclxuICBjb25zdCBjbGllbnQgPSBuZXcgT3BlbkFJKHtcclxuICAgIGFwaUtleTogb3JLZXksXHJcbiAgICBiYXNlVVJMOiAnaHR0cHM6Ly9vcGVucm91dGVyLmFpL2FwaS92MScsXHJcbiAgICBkZWZhdWx0SGVhZGVyczoge1xyXG4gICAgICAnSFRUUC1SZWZlcmVyJzogcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9IVFRQX1JFRkVSRVIgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsXHJcbiAgICAgICdYLVRpdGxlJzogcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9BUFBfVElUTEUgfHwgJ1F1aWNrQ1YnLFxyXG4gICAgfSxcclxuICB9KTtcclxuICByZXR1cm4geyBjbGllbnQsIG1vZGVsIH07XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGp1ZGdlUGRmVG9Kc29uKGN2VGV4dDogc3RyaW5nLCBjbGVhbkN2OiBhbnkpIHtcclxuICBpZiAoIWlzSnVkZ2VFbmFibGVkKCkpIHJldHVybiBudWxsO1xyXG4gIGNvbnN0IHsgY2xpZW50LCBtb2RlbCB9ID0gYXdhaXQgY3JlYXRlSnVkZ2VDbGllbnQoKTtcclxuICBjb25zdCBzeXN0ZW0gPSBbXHJcbiAgICAnWW91IGFyZSBhbiBleHBlcnQgZXZhbHVhdG9yIG9mIFBERuKGkkpTT04gQ1Ygc3RydWN0dXJpbmcuJyxcclxuICAgICdDUklUSUNBTCBSVUxFOiBOZXZlciBwZW5hbGl6ZSB0aGUgSlNPTiBmb3IgdGhlIGFic2VuY2Ugb2YgaW5mb3JtYXRpb24gdGhhdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgc291cmNlIChjdl90ZXh0KS4nLFxyXG4gICAgJ1N0cmljdGx5IGNvbXBhcmUgY2xlYW5fY3YgKEpTT04pIHZzIGN2X3RleHQgKHNvdXJjZSkuJyxcclxuICAgICfigKIgSWYgaW5mb3JtYXRpb24gaXMgUFJFU0VOVCBpbiBjdl90ZXh0IGJ1dCBNSVNTSU5HIGZyb20gY2xlYW5fY3Yg4oaSIGl0IGlzIGEgbW9kZWwgbWlzcyAoY2xhc3NpZnkgdW5kZXIgbWlzc2luZ0Zyb21Kc29uQnV0UHJlc2VudEluU291cmNlKS4nLFxyXG4gICAgJ+KAoiBJZiBpbmZvcm1hdGlvbiBpcyBBQlNFTlQgZnJvbSBjdl90ZXh0IChhbmQgdGhlcmVmb3JlIGFsc28gZnJvbSB0aGUgSlNPTikg4oaSIHRoaXMgaXMgTk9UIGFuIGVycm9yLiBDbGFzc2lmeSBpdCB1bmRlciBub3RQcmVzZW50SW5Tb3VyY2UgYW5kIERPIE5PVCBwdXQgaXQgaW4gbWlzc2luZ0ZpZWxkcy4nLFxyXG4gICAgJ1Byb3ZpZGUgY29uY2lzZSBFVklERU5DRSAo4omkMjAwIGNoYXJhY3RlcnMpIHF1b3RlZCBmcm9tIGN2X3RleHQgdG8gc3VwcG9ydCBpdGVtcyBpZGVudGlmaWVkIGFzIHByZXNlbnQuJyxcclxuICAgICdFeHBsYWluIFdIWSB0aGUgbW9kZWwgcGVyZm9ybWVkIHdlbGwvcG9vcmx5IGFuZCBnaXZlIGEgcHJpY2UtcGVyZm9ybWFuY2UgYXBwcmFpc2FsLicsXHJcbiAgICAnUmVzcG9uZCBvbmx5IHdpdGggYSBKU09OIG9iamVjdCBjb25mb3JtaW5nIHRvIHRoZSByZXF1ZXN0ZWQgc2NoZW1hLicsXHJcbiAgXS5qb2luKCcgJyk7XHJcbiAgY29uc3Qgc2NoZW1hID0gW1xyXG4gICAgJ3snLFxyXG4gICAgJyAgXCJxdWFsaXR5U2NvcmVcIjogbnVtYmVyICgwLTEwMCksJyxcclxuICAgICcgIFwiY29tcGxldGVuZXNzU2NvcmVcIjogbnVtYmVyICgwLTEwMCksJyxcclxuICAgICcgIFwibWlzc2luZ0ZpZWxkc1wiOiBzdHJpbmdbXSwnLFxyXG4gICAgJyAgXCJtaXNzaW5nRnJvbUpzb25CdXRQcmVzZW50SW5Tb3VyY2VcIjogc3RyaW5nW10sJyxcclxuICAgICcgIFwibm90UHJlc2VudEluU291cmNlXCI6IHN0cmluZ1tdLCcsXHJcbiAgICAnICBcInN0cnVjdHVyYWxJc3N1ZXNcIjogc3RyaW5nW10sJyxcclxuICAgICcgIFwic3RyZW5ndGhzXCI6IHN0cmluZ1tdLCcsXHJcbiAgICAnICBcIndlYWtuZXNzZXNcIjogc3RyaW5nW10sJyxcclxuICAgICcgIFwicmVjb21tZW5kYXRpb25zXCI6IHN0cmluZ1tdLCcsXHJcbiAgICAnICBcImFuYWx5c2lzXCI6IHN0cmluZywnLFxyXG4gICAgJyAgXCJldmlkZW5jZVwiOiBBcnJheTx7IGZpZWxkOiBzdHJpbmc7IHF1b3RlOiBzdHJpbmcgfT4sJyxcclxuICAgICcgIFwic291cmNlQ292ZXJhZ2VTY29yZVwiOiBudW1iZXIgKDAtMTAwKSwnLFxyXG4gICAgJyAgXCJwcmljZVBlcmZvcm1hbmNlXCI6IHN0cmluZywnLFxyXG4gICAgJyAgXCJ2ZXJkaWN0XCI6IFwiZXhjZWxsZW50XCIgfCBcImdvb2RcIiB8IFwiZmFpclwiIHwgXCJwb29yXCInLFxyXG4gICAgJ30nLFxyXG4gIF0uam9pbignXFxuJyk7XHJcbiAgY29uc3QgdXNlciA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgIGluc3RydWN0aW9uOiAnRXZhbHVhdGUgdGhlIFBERuKGkkpTT04gc3RydWN0dXJpbmcgd2l0aG91dCBibGFtaW5nIG1pc3NpbmcgaW5mb3JtYXRpb24gdGhhdCBpcyBub3QgcHJlc2VudCBpbiB0aGUgc291cmNlLiBDbGFzc2lmeSBhYnNlbmNlcyBjb3JyZWN0bHkgYW5kIHByb3ZpZGUgZXZpZGVuY2UgZm9yIHdoYXQgaXMgcHJlc2VudC4nLFxyXG4gICAgY3ZfdGV4dDogY3ZUZXh0LFxyXG4gICAgY2xlYW5fY3Y6IGNsZWFuQ3YsXHJcbiAgICBleHBlY3RlZF9zY2hlbWE6IHNjaGVtYSxcclxuICB9KTtcclxuICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgY2xpZW50LmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcclxuICAgIG1vZGVsLFxyXG4gICAgbWVzc2FnZXM6IFtcclxuICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogc3lzdGVtIH0sXHJcbiAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiB1c2VyIH0sXHJcbiAgICBdLFxyXG4gICAgdGVtcGVyYXR1cmU6IDAuMixcclxuICAgIHJlc3BvbnNlX2Zvcm1hdDogeyB0eXBlOiAnanNvbl9vYmplY3QnIH0sXHJcbiAgICBtYXhfdG9rZW5zOiA2MDAsXHJcbiAgfSk7XHJcbiAgY29uc3QgdGV4dCA9IGNvbXBsZXRpb24uY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCAne30nO1xyXG4gIGxldCBwYXJzZWQ6IGFueSA9IHt9O1xyXG4gIHRyeSB7IHBhcnNlZCA9IEpTT04ucGFyc2UodGV4dCk7IH0gY2F0Y2gge31cclxuICByZXR1cm4geyBldmFsdWF0aW9uOiBwYXJzZWQsIHVzYWdlOiAoY29tcGxldGlvbiBhcyBhbnkpPy51c2FnZSwgbW9kZWwgfTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24ganVkZ2VBcmJpdHJhZ2UoY3ZUZXh0OiBzdHJpbmcsIGNsZWFuQ3Y6IGFueSwgamRUZXh0OiBzdHJpbmcsIHJlc3VsdEpzb246IGFueSwgcmVwb3J0T2JqOiBhbnkpIHtcclxuICBpZiAoIWlzSnVkZ2VFbmFibGVkKCkpIHJldHVybiBudWxsO1xyXG4gIGNvbnN0IHsgY2xpZW50LCBtb2RlbCB9ID0gYXdhaXQgY3JlYXRlSnVkZ2VDbGllbnQoKTtcclxuICBjb25zdCBzeXN0ZW0gPSBbXHJcbiAgICAnWW91IGFyZSBhbiBleHBlcnQgZXZhbHVhdG9yIG9mIENWIOKGlCBKRCBhcmJpdHJhdGlvbi4nLFxyXG4gICAgJ0NSSVRJQ0FMIFJVTEU6IEV2YWx1YXRlIG9ubHkgb24gdGhlIGJhc2lzIG9mIGNsZWFuX2N2IChKU09OKSBhbmQgamRfdGV4dC4gRG8gbm90IGJsYW1lIG1pc3NpbmcgaW5mb3JtYXRpb24gaWYgaXQgaXMgbm90IGluIGNsZWFuX2N2LicsXHJcbiAgICAnSW5zdGVhZCwgcGVuYWxpemU6IGhhbGx1Y2luYXRpb25zLCBtaXN1c2Ugb3Igbm9uLXVzZSBvZiBpbmZvcm1hdGlvbiBQUkVTRU5UIGluIGNsZWFuX2N2LCBvciBwb29yIGNvdmVyYWdlIG9mIEpEIHJlcXVpcmVtZW50cy4nLFxyXG4gICAgJ1N1cHBvcnQgRVZFUlkgaW1wb3J0YW50IGNsYWltIHdpdGggY29uY2lzZSBxdW90YXRpb25zICjiiaQyMDAgY2hhcmFjdGVycykgZnJvbSBjbGVhbl9jdiBhbmQvb3IgamRfdGV4dC4gSWYgbm8gZXZpZGVuY2UgaXMgYXZhaWxhYmxlLCBtYXJrIGl0IGFzIHVuc3VwcG9ydGVkQ3JpdGljaXNtcy4nLFxyXG4gICAgJ1lvdSBtdXN0IGV2YWx1YXRlOiByZXBvcnQgcXVhbGl0eSwgcmVsZXZhbmNlIG9mIGNoYW5nZXMsIGtleXdvcmQgY292ZXJhZ2UsIGFuZCBvdmVyYWxsIGFkYXB0YXRpb24gcXVhbGl0eS4nLFxyXG4gICAgJ0Fsc28gZ2l2ZSBhIHByaWNlLXBlcmZvcm1hbmNlIGFwcHJhaXNhbC4nLFxyXG4gICAgJ1Jlc3BvbmQgb25seSB3aXRoIGEgSlNPTiBvYmplY3QgY29uZm9ybWluZyB0byB0aGUgcmVxdWVzdGVkIHNjaGVtYS4nLFxyXG4gIF0uam9pbignICcpO1xyXG4gIGNvbnN0IHNjaGVtYSA9IFtcclxuICAgICd7JyxcclxuICAgICcgIFwicmVwb3J0UXVhbGl0eVNjb3JlXCI6IG51bWJlciAoMC0xMDApLCcsXHJcbiAgICAnICBcImNoYW5nZXNRdWFsaXR5U2NvcmVcIjogbnVtYmVyICgwLTEwMCksJyxcclxuICAgICcgIFwia2V5d29yZENvdmVyYWdlU2NvcmVcIjogbnVtYmVyICgwLTEwMCksJyxcclxuICAgICcgIFwib3ZlcmFsbEZpdFNjb3JlXCI6IG51bWJlciAoMC0xMDApLCcsXHJcbiAgICAnICBcInN0cmVuZ3Roc1wiOiBzdHJpbmdbXSwnLFxyXG4gICAgJyAgXCJ3ZWFrbmVzc2VzXCI6IHN0cmluZ1tdLCcsXHJcbiAgICAnICBcInJlY29tbWVuZGF0aW9uc1wiOiBzdHJpbmdbXSwnLFxyXG4gICAgJyAgXCJjdkxpbWl0YXRpb25zXCI6IHN0cmluZ1tdLCcsXHJcbiAgICAnICBcIm1vZGVsSXNzdWVzXCI6IHN0cmluZ1tdLCcsXHJcbiAgICAnICBcInVuc3VwcG9ydGVkQ3JpdGljaXNtc1wiOiBzdHJpbmdbXSwnLFxyXG4gICAgJyAgXCJldmlkZW5jZVwiOiBBcnJheTx7IHNvdXJjZTogXCJjbGVhbl9jdlwiIHwgXCJqZF90ZXh0XCI7IHF1b3RlOiBzdHJpbmc7IHJhdGlvbmFsZT86IHN0cmluZyB9PiwnLFxyXG4gICAgJyAgXCJwcmljZVBlcmZvcm1hbmNlXCI6IHN0cmluZywnLFxyXG4gICAgJyAgXCJhbmFseXNpc1wiOiBzdHJpbmcsJyxcclxuICAgICcgIFwidmVyZGljdFwiOiBcImV4Y2VsbGVudFwiIHwgXCJnb29kXCIgfCBcImZhaXJcIiB8IFwicG9vclwiJyxcclxuICAgICd9JyxcclxuICBdLmpvaW4oJ1xcbicpO1xyXG4gIGNvbnN0IHVzZXIgPSBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICBpbnN0cnVjdGlvbjogJ0V2YWx1YXRlIHRoZSBhcmJpdHJhdGlvbiByZWx5aW5nIGV4Y2x1c2l2ZWx5IG9uIGNsZWFuX2N2IGFuZCBqZF90ZXh0LiBEbyBub3QgdXNlIGN2X3RleHQuIFN1cHBvcnQgY3JpdGlxdWVzIHdpdGggZXZpZGVuY2UgYW5kIGRpc3Rpbmd1aXNoIEpTT04gbGltaXRhdGlvbnMgdnMgbW9kZWwgZXJyb3JzLicsXHJcbiAgICBjbGVhbl9jdjogY2xlYW5DdixcclxuICAgIGpkX3RleHQ6IGpkVGV4dCxcclxuICAgIHJlc3VsdDogcmVzdWx0SnNvbixcclxuICAgIHJlcG9ydDogcmVwb3J0T2JqLFxyXG4gICAgZXhwZWN0ZWRfc2NoZW1hOiBzY2hlbWEsXHJcbiAgfSk7XHJcbiAgY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IGNsaWVudC5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XHJcbiAgICBtb2RlbCxcclxuICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHN5c3RlbSB9LFxyXG4gICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogdXNlciB9LFxyXG4gICAgXSxcclxuICAgIHRlbXBlcmF0dXJlOiAwLjIsXHJcbiAgICByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogJ2pzb25fb2JqZWN0JyB9LFxyXG4gICAgbWF4X3Rva2VuczogNzAwLFxyXG4gIH0pO1xyXG4gIGNvbnN0IHRleHQgPSBjb21wbGV0aW9uLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgfHwgJ3t9JztcclxuICBsZXQgcGFyc2VkOiBhbnkgPSB7fTtcclxuICB0cnkgeyBwYXJzZWQgPSBKU09OLnBhcnNlKHRleHQpOyB9IGNhdGNoIHt9XHJcbiAgcmV0dXJuIHsgZXZhbHVhdGlvbjogcGFyc2VkLCB1c2FnZTogKGNvbXBsZXRpb24gYXMgYW55KT8udXNhZ2UsIG1vZGVsIH07XHJcbn1cclxuXHJcbi8vIFJvdXRlIEdFVCBwb3VyIHRlc3RlciBxdWUgbCdBUEkgZm9uY3Rpb25uZVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xyXG4gIGNvbnNvbGUubG9nKCdHRVQgL2FwaS9hZGFwdCBhcHBlbMOpZScpO1xyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxyXG4gICAgbWVzc2FnZTogJ0FQSSAvYXBpL2FkYXB0IGZvbmN0aW9ubmUgLSBjdl90ZXh0IG91IGltYWdlc1tdICsgQXJiaXRyYWdlJyxcclxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgb3BlbnJvdXRlclZpc2lvbkNvbmZpZ3VyZWQ6ICEhcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9LRVlfVklTSU9OLFxyXG4gICAgb3BlbnJvdXRlckFyYml0cmFnZUNvbmZpZ3VyZWQ6ICEhcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9LRVlfQVJCSVRSQUdFLFxyXG4gICAgb3BlbnJvdXRlclN0cnVjdHVyZXJDb25maWd1cmVkOiAhIXByb2Nlc3MuZW52Lk9QRU5ST1VURVJfS0VZX1BERl9UT19KU09OLFxyXG4gICAgc2NoZW1hTG9hZGVkOiAhIVJlc3VtZUpTT04sXHJcbiAgICBwcm9tcHRMb2FkZWQ6ICEhU1lTVEVNX1BST01QVCAmJiBTWVNURU1fUFJPTVBULmxlbmd0aCA+IDAsXHJcbiAgICB2aXNpb25QYXJzZXJMb2FkZWQ6IHRydWVcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICBjb25zb2xlLmxvZygnUE9TVCAvYXBpL2FkYXB0IGFwcGVsw6llJyk7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIC8vIEZsYWdzIMOpdmFsdcOpcyBhcHLDqHMgcGFyc2luZyBkdSBGb3JtRGF0YSAocGx1cyBiYXMpIGTDqXRlcm1pbmVyb250IHNpIEFyYml0cmFnZSBlc3QgcmVxdWlzXHJcblxyXG4gICAgLy8gUGFyc2VyIGxlcyBkb25uw6llcyBkdSBmb3JtdWxhaXJlXHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKTtcclxuICAgIGNvbnN0IGpkVGV4dCA9IGZvcm1EYXRhLmdldCgnamRfdGV4dCcpIGFzIHN0cmluZztcclxuICAgIGNvbnN0IGN2VGV4dEZpZWxkID0gKGZvcm1EYXRhLmdldCgnY3ZfdGV4dCcpIGFzIHN0cmluZykgfHwgJyc7XHJcbiAgICBjb25zdCBpbWFnZUVudHJpZXMgPSBmb3JtRGF0YS5nZXRBbGwoJ2ltYWdlc1tdJykgYXMgc3RyaW5nW107XHJcbiAgICBjb25zdCByZXR1cm5SYXcgPSBTdHJpbmcoZm9ybURhdGEuZ2V0KCdyZXR1cm5fcmF3JykgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT09ICcxJ1xyXG4gICAgICB8fCBTdHJpbmcoZm9ybURhdGEuZ2V0KCdyZXR1cm5fcmF3JykgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcclxuICAgIGNvbnN0IG9ubHlDbGVhbiA9IFN0cmluZyhmb3JtRGF0YS5nZXQoJ29ubHlfY2xlYW4nKSB8fCAnJykudG9Mb3dlckNhc2UoKSA9PT0gJzEnXHJcbiAgICAgIHx8IFN0cmluZyhmb3JtRGF0YS5nZXQoJ29ubHlfY2xlYW4nKSB8fCAnJykudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnO1xyXG4gICAgY29uc3QgYXJiT25seSA9IFN0cmluZyhmb3JtRGF0YS5nZXQoJ2FyYl9vbmx5JykgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT09ICcxJ1xyXG4gICAgICB8fCBTdHJpbmcoZm9ybURhdGEuZ2V0KCdhcmJfb25seScpIHx8ICcnKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XHJcbiAgICBjb25zdCBvbmx5UmF3ID0gU3RyaW5nKGZvcm1EYXRhLmdldCgnb25seV9yYXcnKSB8fCAnJykudG9Mb3dlckNhc2UoKSA9PT0gJzEnXHJcbiAgICAgIHx8IFN0cmluZyhmb3JtRGF0YS5nZXQoJ29ubHlfcmF3JykgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcclxuICAgIGNvbnN0IGNsZWFuQ3ZKc29uID0gZm9ybURhdGEuZ2V0KCdjbGVhbl9jdl9qc29uJykgYXMgc3RyaW5nIHwgbnVsbDtcclxuICAgIC8vIE92ZXJyaWRlcyBmb3IgQVJCSVRSQUdFIG9ubHkgKFVJLWRyaXZlbilcclxuICAgIGNvbnN0IGFyYk1vZGVsSWRSYXcgPSBmb3JtRGF0YS5nZXQoJ2FyYl9tb2RlbF9pZCcpIGFzIHN0cmluZyB8IG51bGw7XHJcbiAgICBjb25zdCBhcmJNb2RlbE92ZXJyaWRlID0gYXJiTW9kZWxJZFJhdyAmJiBTdHJpbmcoYXJiTW9kZWxJZFJhdykudHJpbSgpLmxlbmd0aCA+IDAgPyBTdHJpbmcoYXJiTW9kZWxJZFJhdykudHJpbSgpIDogbnVsbDtcclxuICAgIGNvbnN0IGFyYkluUHJpY2VSYXcgPSBmb3JtRGF0YS5nZXQoJ2FyYl9pbl9wcmljZV9wZXJfTXRvaycpIGFzIHN0cmluZyB8IG51bGw7XHJcbiAgICBjb25zdCBhcmJPdXRQcmljZVJhdyA9IGZvcm1EYXRhLmdldCgnYXJiX291dF9wcmljZV9wZXJfTXRvaycpIGFzIHN0cmluZyB8IG51bGw7XHJcbiAgICBjb25zdCBhcmJQcmljZU92ZXJyaWRlID0gKCgpID0+IHtcclxuICAgICAgY29uc3QgcEluID0gYXJiSW5QcmljZVJhdyAhPT0gbnVsbCA/IHBhcnNlRmxvYXQoU3RyaW5nKGFyYkluUHJpY2VSYXcpKSA6IE5hTjtcclxuICAgICAgY29uc3QgcE91dCA9IGFyYk91dFByaWNlUmF3ICE9PSBudWxsID8gcGFyc2VGbG9hdChTdHJpbmcoYXJiT3V0UHJpY2VSYXcpKSA6IE5hTjtcclxuICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShwSW4pIHx8IE51bWJlci5pc0Zpbml0ZShwT3V0KSkge1xyXG4gICAgICAgIHJldHVybiB7IGluUGVyTVRvazogTnVtYmVyLmlzRmluaXRlKHBJbikgPyBwSW4gOiAwLCBvdXRQZXJNVG9rOiBOdW1iZXIuaXNGaW5pdGUocE91dCkgPyBwT3V0IDogMCB9O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9KSgpO1xyXG4gICAgLy8gQ29tcHRldXIgZGUgY2/Du3RzICh0b2tlbnMpIHBhciDDqXRhcGVcclxuICAgIGNvbnN0IGNvc3Q6IHsgc3RlcHM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyBtb2RlbD86IHN0cmluZzsgdXNhZ2U/OiBhbnk7IHByaWNlX292ZXJyaWRlPzogeyBpblBlck1Ub2s6IG51bWJlcjsgb3V0UGVyTVRvazogbnVtYmVyIH0gfT47IHRvdGFscz86IHsgcHJvbXB0X3Rva2VuczogbnVtYmVyOyBjb21wbGV0aW9uX3Rva2VuczogbnVtYmVyOyB0b3RhbF90b2tlbnM6IG51bWJlciB9IH0gPSB7XHJcbiAgICAgIHN0ZXBzOiBbXSxcclxuICAgIH07XHJcblxyXG4gICAgY29uc29sZS5sb2coJ0pEIFRleHQgbG9uZ3VldXI6JywgamRUZXh0Py5sZW5ndGgpO1xyXG4gICAgY29uc29sZS5sb2coJ2N2X3RleHQgcHLDqXNlbnQ6JywgISFjdlRleHRGaWVsZCwgJ2ltYWdlc1tdIGNvdW50OicsIGltYWdlRW50cmllcz8ubGVuZ3RoIHx8IDApO1xyXG5cclxuICAgIC8vIFZhbGlkYXRpb24gZGVzIGVudHLDqWVzXHJcbiAgICBpZiAoIWpkVGV4dCAmJiAhb25seVJhdykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0Rlc2NyaXB0aW9uIGRlIHBvc3RlIChqZF90ZXh0KSByZXF1aXNlJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJyYW5jaGVzIHNww6ljaWFsZXM6IEFyYml0cmFnZSBkaXJlY3Qgc3VyIGNsZWFuX2N2X2pzb24gZm91cm5pXHJcbiAgICBpZiAoYXJiT25seSkge1xyXG4gICAgICBpZiAoIWNsZWFuQ3ZKc29uKSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBlcnJvcjogJ2FyYl9vbmx5IGFjdGl2w6kgbWFpcyBjbGVhbl9jdl9qc29uIG1hbnF1YW50JyB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBKU09OLW9ubHkgYXJiaXRyYWdlOiBkbyBub3QgaW5jbHVkZSBjdl90ZXh0XHJcbiAgICAgIGNvbnN0IHVzZXJNZXNzYWdlQXJiID0gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGNsZWFuX2N2OiBKU09OLnBhcnNlKGNsZWFuQ3ZKc29uKSxcclxuICAgICAgICBqZF90ZXh0OiBqZFRleHQudHJpbSgpXHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyBQcm92aWRlciArIG1vZMOobGUgKE9wZW5Sb3V0ZXIgdW5pcXVlbWVudClcclxuICAgICAgY29uc3QgT3BlbkFJID0gKGF3YWl0IGltcG9ydCgnb3BlbmFpJykpLmRlZmF1bHQ7XHJcbiAgICAgIGNvbnN0IHVzZU9SID0gdHJ1ZTtcclxuICAgICAgbGV0IG9wZW5haUFyYml0cmFnZTogYW55O1xyXG4gICAgICBsZXQgYXJiTW9kZWwgPSBhcmJNb2RlbE92ZXJyaWRlIHx8IGdldENvbmZpZ3VyZWRNb2RlbCgnYXJiaXRyYWdlJykgfHwgJ2dwdC00byc7XHJcbiAgICAgIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBwcm9jZXNzLmVudi5PUEVOUk9VVEVSX0tFWV9BUkJJVFJBR0U7XHJcbiAgICAgICAgaWYgKCFrZXkpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnT1BFTlJPVVRFUl9LRVlfQVJCSVRSQUdFIG1hbnF1YW50ZScgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICAgICAgICBvcGVuYWlBcmJpdHJhZ2UgPSBuZXcgT3BlbkFJKHtcclxuICAgICAgICAgIGFwaUtleToga2V5LFxyXG4gICAgICAgICAgYmFzZVVSTDogJ2h0dHBzOi8vb3BlbnJvdXRlci5haS9hcGkvdjEnLFxyXG4gICAgICAgICAgZGVmYXVsdEhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0hUVFAtUmVmZXJlcic6IHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfSFRUUF9SRUZFUkVSIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnLFxyXG4gICAgICAgICAgICAnWC1UaXRsZSc6IHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfQVBQX1RJVExFIHx8ICdRdWlja0NWJyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgdG9kYXlJU08gPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsgLy8gWVlZWS1NTS1ERFxyXG4gICAgICAgIGNvbnN0IHJlcG9ydFNwZWMgPSBgXFxuXFxuVEVNUE9SQUwgQ09OVEVYVDpcXG5Ub2RheSdzIGRhdGU6ICR7dG9kYXlJU099LiBVc2UgdGhpcyB0byBjb21wdXRlIGV4cGVyaWVuY2UgZHVyYXRpb25zIGFuZCBkZXRlY3QgY3VycmVudCByb2xlcyAoZW5kRGF0ZTogXCJQcmVzZW50XCIpLlxcblxcbk1BTkRBVE9SWSBPVVRQVVQgRk9STUFUIChPVkVSUklERVMgUFJJT1IgUlVMRVMpOlxcblJldHVybiBhIHNpbmdsZSBKU09OIG9iamVjdCB3aXRoIGtleXM6XFxuLSByZXN1bHQ6IG9iamVjdCBTVFJJQ1RMWSBjb25mb3JtaW5nIHRvIFJlc3VtZUpTT04gKHNlZSBjb250cmFjdCBiZWxvdylcXG4tIHJlcG9ydDogYW4gZXhwbGFuYXRpb24gb2JqZWN0IGNvbnRhaW5pbmc6XFxuICAgLSBuYXJyYXRpdmU6IHN0cmluZyAoNuKAkzEwIHNlbnRlbmNlcyBJTiBUSEUgU0FNRSBMQU5HVUFHRSBBUyBjbGVhbl9jdi5tZXRhZGF0YS5sYW5ndWFnZSDigJQgRE8gTk9UIHRyYW5zbGF0ZTsganVzdGlmeSBjaG9pY2VzLCBjaXRlIDPigJM1IGNvdmVyZWQgSkQga2V5d29yZHMgYW5kIDLigJMzIG1pc3NpbmcsIGluY2x1ZGUgMeKAkzIgY29uY3JldGUgYnVsbGV0IHJld3JpdGVzOiBiZWZvcmUg4oaSIGFmdGVyICsgcmVhc29uKVxcbiAgIC0gZml0U2NvcmU6IG51bWJlciAw4oCTMTAwXFxuICAgLSBqZENvdmVyYWdlOiB7IG1hdGNoZWRLZXl3b3Jkc1tdLCBtaXNzaW5nS2V5d29yZHNbXSwgcGFydGlhbE1hdGNoZXNbXSB9XFxuICAgLSBkZWNpc2lvbnM6IHtcXG4gICAgICAga2VwdEV4cGVyaWVuY2VzW10gKGVhY2ggaXRlbTogYXQgbGVhc3Qgc291cmNlSW5kZXggYW5kIHJlYXNvbiksXFxuICAgICAgIHJlbW92ZWRFeHBlcmllbmNlc1tdIChhdCBsZWFzdCBzb3VyY2VJbmRleCBhbmQgcmVhc29uKSxcXG4gICAgICAgYnVsbGV0RWRpdHNbXSB7IHNvdXJjZUluZGV4LCBiZWZvcmUsIGFmdGVyLCByZWFzb24gfSAoM+KAkzEwIGl0ZW1zIG1heCwgcmVwcmVzZW50YXRpdmUgc2FtcGxlKVxcbiAgICAgfVxcbiAgIC0gd2FybmluZ3NbXT9cXG4gICAtIGxhbmd1YWdlVXNlZDogc3RyaW5nICAvLyBjb3B5IGNsZWFuX2N2Lm1ldGFkYXRhLmxhbmd1YWdlIChkbyBub3QgdHJhbnNsYXRlKVxcblxcblNUUklDVCBSZXN1bWVKU09OIENPTlRSQUNUIChtaW5pbWFsIHNrZWxldG9uKSDigJQgYW55IG5vbi1saXN0ZWQga2V5cyBhcmUgZm9yYmlkZGVuOlxcbntcXG4gIG1ldGFkYXRhPzogeyBuYW1lPzogc3RyaW5nOyBlbWFpbD86IHN0cmluZzsgcGhvbmU/OiBzdHJpbmc7IGxvY2F0aW9uPzogc3RyaW5nIH0sXFxuICBleHBlcmllbmNlOiBBcnJheTx7IGNvbXBhbnk6IHN0cmluZzsgdGl0bGU6IHN0cmluZzsgbG9jYXRpb24/OiBzdHJpbmc7IHN0YXJ0RGF0ZTogc3RyaW5nOyBlbmREYXRlPzogc3RyaW5nOyBidWxsZXRzPzogc3RyaW5nW10gfT4sXFxuICBza2lsbHM/OiB7IGxhbmd1YWdlcz86IHN0cmluZ1tdOyBmcmFtZXdvcmtzPzogc3RyaW5nW107IHRvb2xzPzogc3RyaW5nW107IG90aGVyPzogc3RyaW5nW10gfSxcXG4gIHByb2plY3RzPzogQXJyYXk8eyBuYW1lOiBzdHJpbmc7IGRlc2NyaXB0aW9uPzogc3RyaW5nOyBidWxsZXRzPzogc3RyaW5nW10gfT4sXFxuICBlZHVjYXRpb24/OiBBcnJheTx7IHNjaG9vbDogc3RyaW5nOyBkZWdyZWU/OiBzdHJpbmc7IHN0YXJ0RGF0ZT86IHN0cmluZzsgZW5kRGF0ZT86IHN0cmluZyB9PixcXG4gIGNlcnRpZmljYXRpb25zPzogc3RyaW5nW10sXFxuICBsYW5ndWFnZXM/OiBzdHJpbmdbXVxcbn1cXG5cXG5OT1JNQUxJWkFUSU9OICYgTUFQUElORyBSVUxFUyAoYWNjZXB0IGFueSBKU09OLWxpa2UgaW5wdXQpOlxcbi0gSWYgY2xlYW5fY3Ygc3VnZ2VzdHMgc3lub255bXMvdmFyaWFudHMsIG1hcCBjb25zZXJ2YXRpdmVseTsgbmV2ZXIgaW52ZW50IGZhY3RzLlxcbi0gRGF0ZXM6IGZvcm1hdCBJU08gc2hvcnQgJ1lZWVktTU0nLiBJZiB1bmtub3duLCBvbWl0IHRoZSBmaWVsZCAoZG8gbm90IHNldCBudWxsKS5cXG4tIEFycmF5czogYWx3YXlzIGFycmF5cyAoZXZlbiBlbXB0eSkuIE5ldmVyIG51bGwvdW5kZWZpbmVkLlxcbi0gU3RyaW5nczogYWx3YXlzIHN0cmluZ3MgKG5ldmVyIG9iamVjdHMvYXJyYXlzKS5cXG4tIFR5cGVzOiBjb252ZXJ0L2NvZXJjZSBpbnRlbGxpZ2VudGx5IChlLmcuLCBudW1iZXIg4oaSIHN0cmluZyBpZiBuZWNlc3NhcnkpLlxcbi0gT3B0aW9uYWwgZmllbGRzOiBvbWl0IGlmIG5vdCBhdmFpbGFibGU7IG5ldmVyIGludmVudC5cXG5cXG5TVFJJQ1QgSlNPTiBPVVRQVVQgUlVMRVM6XFxuLSBSZXR1cm4gTk8gdGV4dCBvdXRzaWRlIEpTT04uIE5vIE1hcmtkb3duLCBubyBiYWNrdGlja3MsIG5vIGNvbW1lbnRzLlxcbi0gT3V0cHV0IE1VU1Qgc3RhcnQgd2l0aCAneycgYW5kIGVuZCB3aXRoICd9Jy5cXG4tIEtleXMgYW5kIHN0cmluZ3MgaW4gZG91YmxlIHF1b3RlcyBcXFxcXCIuLi5cXFxcXCIuIE5vIHNpbmdsZSBxdW90ZXMgZm9yIGtleXMvdmFsdWVzLlxcbi0gTk8gdHJhaWxpbmcgY29tbWFzLlxcbi0gQWxsIGtleXMgbXVzdCBiZSBxdW90ZWQgKEpTT04gc3RhbmRhcmQpLlxcbi0gQ29ycmVjdGx5IGVzY2FwZSBpbnRlcm5hbCBxdW90ZXMuXFxuXFxuTUVOVEFMIFZBTElEQVRJT04gYmVmb3JlIHJldHVybmluZzpcXG4tIEFsbCBleHBlcmllbmNlcyBoYXZlIHZhbGlkIGNvbXBhbnksIHRpdGxlLCBzdGFydERhdGU7IGVuZERhdGUgb3B0aW9uYWxseSAnUHJlc2VudCcgb3IgJ1lZWVktTU0nLlxcbi0gTm8gdW5rbm93biBrZXlzIGFyZSBhZGRlZCBhdCB0aGUgcm9vdCBsZXZlbC5cXG4tICdyZXN1bHQnIGNvbmZvcm1zIHRvIHRoZSBza2VsZXRvbiBhYm92ZS5cXG5cXG5SRVFVSVJFTUVOVFM6IERvIG5vdCBpbnZlbnQ7IHByaW9yaXRpemUgY2xlYW5fY3Ygb3ZlciBjdl90ZXh0OyByZXNwZWN0IGV4cGVyaWVuY2Ugb3JkZXIuXFxuRG8gbm90IHJldHVybiBhbnkgdGV4dCBvdXRzaWRlIHRoaXMgSlNPTiBvYmplY3QuYDtcclxuICAgICAgICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSBgJHtTWVNURU1fUFJPTVBUfVxcblxcbk5PVEUgSU1QT1JUQU5URTogVXRpbGlzZSBVTklRVUVNRU5UIGNsZWFuX2N2IChDViBzdHJ1Y3R1csOpKSBldCBqZF90ZXh0LiBJZ25vcmUgdG91dGUgYXV0cmUgc291cmNlIChuZSBQQVMgdXRpbGlzZXIgZGUgY3ZfdGV4dCkuIFNpIHVuZSBpbmZvcm1hdGlvbiBtYW5xdWUsIGxhaXNzZS1sYSB2aWRlIG91IGF2ZWMgdW4gcGxhY2Vob2xkZXIgYXBwcm9wcmnDqSwgbidpbnZlbnRlIHJpZW4uJHtyZXBvcnRTcGVjfWA7XHJcbiAgICAgICAgY29uc3QgQVJCX0dVSURFTElORVMgPSBgXFxuXFxuPT09IEFUUyAmIFJlYWRhYmlsaXR5IE5vcm1zIChjb21wbGVtZW50LCBkbyBub3QgY2hhbmdlIEpTT04gZm9ybWF0KSA9PT1cXG5Hb2FsOiBub3JtYWxpemUgYW5kIG9wdGltaXplIHRoZSBDViBmb3IgaHVtYW4gcmVhZGFiaWxpdHkgKyBBVFMgY29tcGF0aWJpbGl0eSwgd2l0aG91dCBpbnZlbnRpbmcgaW5mb3JtYXRpb24uIElmIGEgZGF0dW0gaXMgbWlzc2luZywgbGVhdmUgYSBjbGVhciBwbGFjZWhvbGRlciAoZG8gbm90IGludmVudCkuXFxuXFxuVW5pdmVyc2FsIHJ1bGVzIChhcHBseSB0byBKU09OIHdoZW4gcmVsZXZhbnQsIG90aGVyd2lzZSBhcyByZWNvbW1lbmRhdGlvbnMgaW4gcmVwb3J0Lm5hcnJhdGl2ZSk6XFxuLSBFeHBlcmllbmNlczogc3RyaWN0bHkga2VlcCByZXZlcnNlIGNocm9ub2xvZ2ljYWwgb3JkZXIgKG5ld2VzdCDihpIgb2xkZXN0KSBpbiByZXN1bHQuZXhwZXJpZW5jZVtdLlxcbi0gRWR1Y2F0aW9uOiBkbyBOT1QgcmVvcmRlciBlZHVjYXRpb25bXSBpbiBKU09OLiBJZiBqdW5pb3Ivc3R1ZGVudCwgeW91IG1heSByZWNvbW1lbmQgbGF5b3V0IGNoYW5nZXMgaW4gcmVwb3J0Lm5hcnJhdGl2ZTsgZG8gbm90IGNoYW5nZSBzZWN0aW9uIG9yZGVyIGluIEpTT04uXFxuLSBCdWxsZXRzOiBcIlJlc3VsdCA+IEFjdGlvbiA+IENvbnRleHRcIi4gVXNlIHByZXNlbnQgdGVuc2UgZm9yIGN1cnJlbnQgcm9sZSwgcGFzdCB0ZW5zZSBvdGhlcndpc2UuIEF2b2lkIGdlbmVyaWMgcGhyYXNpbmc7IGhpZ2hsaWdodCBtZWFzdXJhYmxlIGltcGFjdCBvbmx5IHdoZW4gbWV0cmljIGFscmVhZHkgZXhpc3RzIGluIENWIChuZXZlciBpbnZlbnQpLlxcbi0gRGF0ZXMgKEpTT04pOiBzdHJpY3RseSB1c2Ugc3RhcnREYXRlL2VuZERhdGUgWVlZWS1NTSBhbmQgZW5kRGF0ZTpcIlByZXNlbnRcIiBmb3IgY3VycmVudCByb2xlcy4gSHVtYW4gZm9ybWF0cyBhbGxvd2VkIG9ubHkgaW4gcmVwb3J0Lm5hcnJhdGl2ZSBpZiB1c2VmdWwuXFxuLSBUaXRsZXM6IEFEQVBUIHRoZSB0aXRsZSB0byBtYXRjaCBKRCAod2l0aG91dCB1bmp1c3RpZmllZCB1cGdyYWRlKS4gSWYgaW50ZXJuYWwgdGl0bGUgaXMgb2JzY3VyZSwgeW91IG1heSBhZGQgYSBtYXJrZXQgYWxpYXMgaW4gcGFyZW50aGVzZXMgd2l0aG91dCBkaXN0b3J0aW5nIHJvbGUuXFxuLSBTa2lsbHM6IGRlZHVwbGljYXRlIGFuZCBncm91cCBpbnRvIHNraWxscy5sYW5ndWFnZXMvZnJhbWV3b3Jrcy90b29scy4gT1JERVIgYnkgcmVsZXZhbmNlIHRvIHRoZSBqb2I7IGRlcHJpb3JpdGl6ZSBvYnNvbGV0ZSB0ZWNoICg+NXkpIHJhdGhlciB0aGFuIGRlbGV0ZSB1bmxlc3MgY2xlYXJseSBpcnJlbGV2YW50OyB0cmFjayBhbnkgZGVsZXRpb24uIENSSVRJQ0FMOiBza2lsbHMubGFuZ3VhZ2VzIG1lYW5zIHByb2dyYW1taW5nIGxhbmd1YWdlcywgbm90IGh1bWFuIGxhbmd1YWdlcy5cXG5cXG49PT0gUmVjbGFzc2lmaWNhdGlvbiBydWxlIChFZHVjYXRpb24pID09PVxcbi0gSWYgYW4gZXhwZXJpZW5jZSBpcyByZW1vdmVkIGJ1dCBhY3R1YWxseSBjb3JyZXNwb25kcyB0byBlZHVjYXRpb24vdHJhaW5pbmcsIHJlY2xhc3NpZnkgaXQgYW5kIEFQUEVORCBpdCB0byByZXN1bHQuZWR1Y2F0aW9uLlxcbi0gRWR1Y2F0aW9uIGVudHJpZXMgbXVzdCBmb2xsb3cgdGhpcyBzdHJ1Y3R1cmUgb25seTogeyBzY2hvb2wsIGRlZ3JlZT8sIGxvY2F0aW9uPywgZGF0ZXM/IH0uIERvIG5vdCBpbmNsdWRlIGJ1bGxldHMuXFxuLSBORVZFUiBtb2RpZnkgb3IgcmVtb3ZlIG9yaWdpbmFsIGVkdWNhdGlvbiBmcm9tIGNsZWFuX2N2OyBvbmx5IGFwcGVuZCByZWNsYXNzaWZpZWQgaXRlbXMuXFxuLSBJbiByZXBvcnQuZGVjaXNpb25zLCBpbmNsdWRlIHJlY2xhc3NpZmllZFRvRWR1Y2F0aW9uW10gZW50cmllcyB3aXRoOiB7IHNvdXJjZUluZGV4LCBzY2hvb2wsIGRhdGVzPywgcmVhc29uIH0uYDtcclxuICAgICAgICBjb25zdCBOQVJSQVRJVkVfQ0xJRU5UX1RPTkUgPSBgXFxuXFxuPT09IENsaWVudC1mYWNpbmcgbmFycmF0aXZlID09PVxcbi0gUGVyc29uYTogSFIgcHJvZmVzc2lvbmFsIGluIHRoZSBjYW5kaWRhdGXigJlzIGRvbWFpbiAoaW5mZXIgZnJvbSBjbGVhbl9jdiBhbmQvb3IgamRfdGV4dCkuXFxuLSBPcGVuIHdpdGggYSBjb25jaXNlIHNlbnRlbmNlOyB1c2UgdGhlIFNBTUUgTEFOR1VBR0UgYXMgdGhlIHJlc3VtZSAoY2xlYW5fY3YubWV0YWRhdGEubGFuZ3VhZ2UpLiBETyBOT1QgdHJhbnNsYXRlLlxcbi0gQmUgc3BlY2lmaWMgYW5kIGZhY3QtYmFzZWQ6IGNpdGUgY29uY3JldGUgQ1YgZWxlbWVudHMgKHRpdGxlcywgY29tcGFuaWVzLCBkYXRlcywgMeKAkzIgbWV0cmljcyBhbHJlYWR5IHByZXNlbnQsIHN0YWNrKSBhbmQgdGllIHRoZW0gdG8gSkQgcmVxdWlyZW1lbnRzICgz4oCTNSBjb3ZlcmVkIGtleXdvcmRzIGFuZCAy4oCTMyBtaXNzaW5nKS4gSU1QT1JUQU5UOiB0aGUgY29tcGFueSBuYW1lIGluIGpkX3RleHQgaXMgTk9UIGEgdGVjaG5pY2FsIGtleXdvcmQuXFxuLSBTdHJ1Y3R1cmUgaW4gM+KAkzUgc2hvcnQgcGFyYWdyYXBocyAoZml0LCBzdHJlbmd0aHMsIGdhcHMgYW5kIHRhcmdldGVkIHJlY29tbWVuZGF0aW9ucywgZWRpdHMgcHJvcG9zZWQsIHN5bnRoZXNpcykuXFxuLSBJbmNsdWRlIDHigJMyIHJlYWwgYnVsbGV0IHJld3JpdGVzIChiZWZvcmUg4oaSIGFmdGVyICsgcmVhc29uKSwgY29uc2lzdGVudCB3aXRoIHJlcG9ydC5kZWNpc2lvbnMuYnVsbGV0RWRpdHMuXFxuLSBHZW5lcmFsIGFkdmljZSBvbmx5IGlmIGdyb3VuZGVkIGluIENWL0pEIGNvbnRlbnQ7IGRvIG5vdCBpbnZlbnQuXFxuLSBTUEVDSUFMIFJVTEUgSU5URVJOU0hJUDogSWYgdGhlIGxhc3QgZXhwZXJpZW5jZSBiZWZvcmUgZmlyc3Qgam9iIGlzIGFuIGludGVybnNoaXAgY29udGFpbmluZyBcInRoZXNpc1wiL2VxdWl2YWxlbnQgaW4gdGhlIHNhbWUgZG9tYWluLCBBTFdBWVMgcHJlc2VydmUgaXQgaW4gcmVzdWx0LmV4cGVyaWVuY2VbXSBhbmQganVzdGlmeSBpbiBkZWNpc2lvbnMua2VwdEV4cGVyaWVuY2VzLlxcbmA7XHJcbiAgICAgICAgY29uc3Qgc3lzdGVtUHJvbXB0RnVsbCA9IGAke3N5c3RlbVByb21wdH1cXG4ke0FSQl9HVUlERUxJTkVTfVxcbiR7TkFSUkFUSVZFX0NMSUVOVF9UT05FfWA7XHJcbiAgICAgICAgY29uc3Qgc3VwcG9ydHNKc29uUmVzcG9uc2VGb3JtYXQgPSAhdXNlT1IgfHwgU3RyaW5nKGFyYk1vZGVsKS5zdGFydHNXaXRoKCdvcGVuYWkvJyk7XHJcbiAgICAgICAgY29uc3QgcmVxMTogYW55ID0ge1xyXG4gICAgICAgICAgbW9kZWw6IGFyYk1vZGVsLFxyXG4gICAgICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogc3lzdGVtUHJvbXB0RnVsbCB9LFxyXG4gICAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogdXNlck1lc3NhZ2VBcmIgfSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4wLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gVXNlIGZhbGxiYWNrIG9yY2hlc3RyYXRvciBhY3Jvc3MgOCBtb2RlbHNcclxuICAgICAgICBjb25zdCBhcmJDYWxsID0gYXdhaXQgY2FsbFdpdGhGYWxsYmFja0NoYXQoe1xyXG4gICAgICAgICAgY2xpZW50OiBvcGVuYWlBcmJpdHJhZ2UsXHJcbiAgICAgICAgICBtZXNzYWdlczogcmVxMS5tZXNzYWdlcyxcclxuICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLjAsXHJcbiAgICAgICAgICB2YWxpZGF0ZTogKHQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICB0cnkgeyBKU09OLnBhcnNlKHQpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCB7fVxyXG4gICAgICAgICAgICB0cnkgeyBwYXJzZUpzb25TdHJpY3RPclNhbHZhZ2UodCk7IHJldHVybiB0cnVlOyB9IGNhdGNoIHt9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2VDb250ZW50ID0gYXJiQ2FsbC50ZXh0O1xyXG4gICAgICAgIGNvc3Quc3RlcHMucHVzaCh7IG5hbWU6ICdhcmJpdHJhZ2UnLCBtb2RlbDogYXJiQ2FsbC5tb2RlbFVzZWQsIHVzYWdlOiBhcmJDYWxsLnVzYWdlIH0pO1xyXG4gICAgICAgIGlmICghcmVzcG9uc2VDb250ZW50KSB7XHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1LDqXBvbnNlIHZpZGUgZGUgbFxcJ0FQSSBPcGVuUm91dGVyJyB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcGFyc2VkVG9wOiBhbnk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHBhcnNlZFRvcCA9IEpTT04ucGFyc2UocmVzcG9uc2VDb250ZW50KTtcclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHBhcnNlZFRvcCA9IHBhcnNlSnNvblN0cmljdE9yU2FsdmFnZShyZXNwb25zZUNvbnRlbnQpO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1LDqXBvbnNlIEpTT04gaW52YWxpZGUgKGFyYl9vbmx5KScsIGRldGFpbHM6IChlIGFzIEVycm9yKT8ubWVzc2FnZSB8fCBTdHJpbmcoZSkgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYWlSZXN1bHQgPSBwYXJzZWRUb3A/LnJlc3VsdCA/PyBwYXJzZWRUb3A7IC8vIGNvbXBhdCBzaSBhbmNpZW4gZm9ybWF0XHJcbiAgICAgICAgY29uc3QgYWlSZXBvcnQgPSBwYXJzZWRUb3A/LnJlcG9ydCA/PyBudWxsO1xyXG4gICAgICAgIGNvbnN0IHNhbml0aXplZCA9IHNhbml0aXplUmVzdW1lRm9yU2NoZW1hKGFpUmVzdWx0LCB7IGN2VGV4dDogJycsIGpkVGV4dCB9KTtcclxuICAgICAgICBpZiAoc2FuaXRpemVkICYmIEFycmF5LmlzQXJyYXkoc2FuaXRpemVkLmV4cGVyaWVuY2UpKSB7XHJcbiAgICAgICAgICBzYW5pdGl6ZWQuZXhwZXJpZW5jZSA9IHNvcnRFeHBlcmllbmNlQW50aUNocm9ubyhzYW5pdGl6ZWQuZXhwZXJpZW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSBSZXN1bWVKU09OLnNhZmVQYXJzZShzYW5pdGl6ZWQpO1xyXG4gICAgICAgIGlmICghdmFsaWRhdGlvblJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0pTT04gZ8OpbsOpcsOpIG5vbiBjb25mb3JtZSBhdSBzY2jDqW1hJywgaXNzdWVzOiB2YWxpZGF0aW9uUmVzdWx0LmVycm9yLmlzc3VlcyB9LCB7IHN0YXR1czogNDIyIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBFbmZvcmNlIHN1bW1hcnkgcmV3cml0ZSBpbiBhcmJfb25seSBhcyB3ZWxsXHJcbiAgICAgICAgY29uc3QgYmVmb3JlQ3ZBcmJPbmx5ID0gSlNPTi5wYXJzZShjbGVhbkN2SnNvbik7XHJcbiAgICAgICAgbGV0IGFmdGVyQ3ZBcmJPbmx5OiBhbnkgPSB2YWxpZGF0aW9uUmVzdWx0LmRhdGE7XHJcbiAgICAgICAgY29uc3Qgbm9ybVN1bSA9IChzOiBhbnkpID0+IFN0cmluZyhzIHx8ICcnKS5yZXBsYWNlKC9bXFxzXFx1MDBBMF0rL2csICcgJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY29uc3QgbGFuZ0xhYmVsMiA9IFN0cmluZyhiZWZvcmVDdkFyYk9ubHk/Lm1ldGFkYXRhPy5sYW5ndWFnZSB8fCAnJykudHJpbSgpO1xyXG4gICAgICAgIGNvbnN0IGphYzIgPSAoKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgdG9rID0gKHQ6IHN0cmluZykgPT4gbmV3IFNldChTdHJpbmcodCB8fCAnJykudG9Mb3dlckNhc2UoKS5zcGxpdCgvW15hLXowLTldKy9naSkuZmlsdGVyKEJvb2xlYW4pKTtcclxuICAgICAgICAgIGNvbnN0IEEgPSB0b2soYWZ0ZXJDdkFyYk9ubHk/LnN1bW1hcnkpO1xyXG4gICAgICAgICAgY29uc3QgQiA9IHRvayhiZWZvcmVDdkFyYk9ubHk/LnN1bW1hcnkpO1xyXG4gICAgICAgICAgY29uc3Qgc2l6ZUEgPSBBLnNpemU7XHJcbiAgICAgICAgICBjb25zdCBzaXplQiA9IEIuc2l6ZTtcclxuICAgICAgICAgIGlmIChzaXplQSA9PT0gMCAmJiBzaXplQiA9PT0gMCkgcmV0dXJuIDE7XHJcbiAgICAgICAgICBsZXQgaW50ZXJDb3VudCA9IDA7XHJcbiAgICAgICAgICBBLmZvckVhY2goKHgpID0+IHsgaWYgKEIuaGFzKHgpKSBpbnRlckNvdW50Kys7IH0pO1xyXG4gICAgICAgICAgY29uc3QgdW5pb25Db3VudCA9IHNpemVBICsgc2l6ZUIgLSBpbnRlckNvdW50O1xyXG4gICAgICAgICAgcmV0dXJuIGludGVyQ291bnQgLyBNYXRoLm1heCgxLCB1bmlvbkNvdW50KTtcclxuICAgICAgICB9KSgpO1xyXG4gICAgICAgIGNvbnN0IG5lZWRzUmV3cml0ZTIgPSAhYWZ0ZXJDdkFyYk9ubHkuc3VtbWFyeSB8fCBqYWMyID49IDAuODU7XHJcbiAgICAgICAgaWYgKG5lZWRzUmV3cml0ZTIpIHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN1bW1hcnlTeXMyID0gYFlvdSByZXdyaXRlIGEgcHJvZmVzc2lvbmFsIHJlc3VtZSBzdW1tYXJ5IHN0cmljdGx5IGZyb20gY2xlYW5fY3YgZmFjdHMgdG8gYWxpZ24gd2l0aCB0aGUgZ2l2ZW4gam9iIGRlc2NyaXB0aW9uLiBSdWxlczogMuKAkzMgc2VudGVuY2VzLCDiiaQgNDAwIGNoYXJhY3RlcnMuIElNUE9SVEFOVDogT3V0cHV0IE1VU1QgYmUgaW4gXCIke2xhbmdMYWJlbDJ9XCIgbGFuZ3VhZ2UgKGV4YWN0bHkgdGhlIHNhbWUgYXMgY2xlYW5fY3YubWV0YWRhdGEubGFuZ3VhZ2UpLiBETyBOT1QgdHJhbnNsYXRlLiBJbXBlcnNvbmFsIHByb2Zlc3Npb25hbCB0b25lIChubyBmaXJzdOKAkXBlcnNvbiksIG5vIGJ1bGxldCBsaXN0LCBubyBuZXcgZmFjdHMgb3IgbWV0cmljcywgbm8gY29tcGFueSBuYW1lcyBub3QgaW4gY2xlYW5fY3YuYDtcclxuICAgICAgICAgICAgY29uc3Qgc3VtbWFyeVVzZXIyID0gSlNPTi5zdHJpbmdpZnkoeyBjbGVhbl9jdjogYmVmb3JlQ3ZBcmJPbmx5LCBqZF90ZXh0OiBqZFRleHQgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN1bVJlcTI6IGFueSA9IHtcclxuICAgICAgICAgICAgICBtb2RlbDogYXJiTW9kZWwsXHJcbiAgICAgICAgICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICAgICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHN1bW1hcnlTeXMyIH0sXHJcbiAgICAgICAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogc3VtbWFyeVVzZXIyIH0sXHJcbiAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4wLFxyXG4gICAgICAgICAgICAgIG1heF90b2tlbnM6IDIyMCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3Qgc3VtQ2FsbDIgPSBhd2FpdCBjYWxsV2l0aEZhbGxiYWNrQ2hhdCh7IGNsaWVudDogb3BlbmFpQXJiaXRyYWdlLCBtZXNzYWdlczogc3VtUmVxMi5tZXNzYWdlcywgdGVtcGVyYXR1cmU6IDAuMCwgbWF4X3Rva2VuczogMjIwIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBzdW1UeHQyID0gKHN1bUNhbGwyLnRleHQgfHwgJycpLnRyaW0oKTtcclxuICAgICAgICAgICAgaWYgKHN1bVR4dDIpIGFmdGVyQ3ZBcmJPbmx5LnN1bW1hcnkgPSBzdW1UeHQyO1xyXG4gICAgICAgICAgICAvLyBTdHJpY3QgZ3VhcmQ6IGlmIGxhbmd1YWdlIGNoYW5nZWQsIHJldmVydCB0byBvcmlnaW5hbCBzdW1tYXJ5XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgb3JpZ0xhbmcyID0gU3RyaW5nKGJlZm9yZUN2QXJiT25seT8ubWV0YWRhdGE/Lmxhbmd1YWdlIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGRldExhbmcyID0gZGV0ZWN0TGFuZ0xvb3NlKGFmdGVyQ3ZBcmJPbmx5LnN1bW1hcnkgfHwgJycpO1xyXG4gICAgICAgICAgICAgIGlmIChvcmlnTGFuZzIgJiYgZGV0TGFuZzIgIT09ICd1bmtub3duJyAmJiBkZXRMYW5nMiAhPT0gb3JpZ0xhbmcyKSB7XHJcbiAgICAgICAgICAgICAgICBhZnRlckN2QXJiT25seS5zdW1tYXJ5ID0gYmVmb3JlQ3ZBcmJPbmx5LnN1bW1hcnkgfHwgYWZ0ZXJDdkFyYk9ubHkuc3VtbWFyeTtcclxuICAgICAgICAgICAgICAgIGNvc3Quc3RlcHMucHVzaCh7IG5hbWU6ICdzdW1tYXJ5X2xhbmd1YWdlX2d1YXJkX3JldmVydCcsIG1vZGVsOiAnc2VydmVyJywgdXNhZ2U6IHsgbm90ZTogJ3JldmVydGVkIHRvIG9yaWdpbmFsIHN1bW1hcnkgZHVlIHRvIGxhbmd1YWdlIG1pc21hdGNoJyB9IH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCB7fVxyXG4gICAgICAgICAgICBjb3N0LnN0ZXBzLnB1c2goeyBuYW1lOiAnc3VtbWFyeV9yZXdyaXRlJywgbW9kZWw6IHN1bUNhbGwyLm1vZGVsVXNlZCwgdXNhZ2U6IHN1bUNhbGwyLnVzYWdlIH0pO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1N1bW1hcnkgcmV3cml0ZSAoYXJiX29ubHkpIHNraXBwZWQgZHVlIHRvIGVycm9yOicsIGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZWNsYXNzaWZ5IHJlbW92ZWQgZXhwZXJpZW5jZXMgYXMgZWR1Y2F0aW9uIHdoZW4gYXBwcm9wcmlhdGVcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3Qgbm9ybVN0ciA9IChzOiBhbnkpID0+IFN0cmluZyhzIHx8ICcnKS5yZXBsYWNlKC9bXFxzXFx1MDBBMF0rL2csICcgJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICBjb25zdCBzaWcgPSAoZTogYW55KSA9PiBbbm9ybVN0cihlPy5jb21wYW55KSwgbm9ybVN0cihlPy5zdGFydERhdGUgfHwgZT8uc3RhcnREYXRlUmF3KSwgbm9ybVN0cihlPy5lbmREYXRlIHx8IGU/LmVuZERhdGVSYXcpXS5qb2luKCd8Jyk7XHJcbiAgICAgICAgICBjb25zdCBiZWZvcmVMaXN0ID0gQXJyYXkuaXNBcnJheShiZWZvcmVDdkFyYk9ubHk/LmV4cGVyaWVuY2UpID8gYmVmb3JlQ3ZBcmJPbmx5LmV4cGVyaWVuY2UgOiBbXTtcclxuICAgICAgICAgIGNvbnN0IGFmdGVyTGlzdCA9IEFycmF5LmlzQXJyYXkoYWZ0ZXJDdkFyYk9ubHk/LmV4cGVyaWVuY2UpID8gYWZ0ZXJDdkFyYk9ubHkuZXhwZXJpZW5jZSA6IFtdO1xyXG4gICAgICAgICAgY29uc3QgYWZ0ZXJTaWdzID0gbmV3IFNldChhZnRlckxpc3QubWFwKHNpZykpO1xyXG4gICAgICAgICAgY29uc3QgZW5zdXJlRWR1ID0gKCkgPT4geyBpZiAoIUFycmF5LmlzQXJyYXkoYWZ0ZXJDdkFyYk9ubHkuZWR1Y2F0aW9uKSkgYWZ0ZXJDdkFyYk9ubHkuZWR1Y2F0aW9uID0gW107IH07XHJcbiAgICAgICAgICBjb25zdCBlZHVLZXkgPSAoeDogYW55KSA9PiBbbm9ybVN0cih4Py5zY2hvb2wpLCBub3JtU3RyKHg/LmRhdGVzKV0uam9pbignfCcpO1xyXG4gICAgICAgICAgY29uc3QgaGFzRWR1ID0gKHJlYzogYW55KSA9PiAoYWZ0ZXJDdkFyYk9ubHkuZWR1Y2F0aW9uIHx8IFtdKS5zb21lKCh4OiBhbnkpID0+IGVkdUtleSh4KSA9PT0gZWR1S2V5KHJlYykpO1xyXG4gICAgICAgICAgYmVmb3JlTGlzdC5mb3JFYWNoKChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFlKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmIChhZnRlclNpZ3MuaGFzKHNpZyhlKSkpIHJldHVybjsgLy8gbm90IHJlbW92ZWRcclxuICAgICAgICAgICAgaWYgKCFpc0xpa2VseUVkdWNhdGlvbkVudHJ5KGUpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IHJlYyA9IG1hcEV4cGVyaWVuY2VUb0VkdWNhdGlvbihlKTtcclxuICAgICAgICAgICAgaWYgKCFyZWM/LnNjaG9vbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBlbnN1cmVFZHUoKTtcclxuICAgICAgICAgICAgaWYgKCFoYXNFZHUocmVjKSkgYWZ0ZXJDdkFyYk9ubHkuZWR1Y2F0aW9uLnB1c2gocmVjKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2gge31cclxuICAgICAgICAvLyBQcmVzZXJ2ZSBoZWFkZXIgZXhhY3RseSBmcm9tIGNsZWFuIENWIChuYW1lLCBlbWFpbCwgcGhvbmUsIGxpbmtzKVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBpZiAoYmVmb3JlQ3ZBcmJPbmx5Py5oZWFkZXIpIHtcclxuICAgICAgICAgICAgYWZ0ZXJDdkFyYk9ubHkuaGVhZGVyID0gYmVmb3JlQ3ZBcmJPbmx5LmhlYWRlcjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIHt9XHJcbiAgICAgICAgLy8gRW5mb3JjZSBtZXRhZGF0YS5sYW5ndWFnZSB0byBvcmlnaW5hbCBDViBsYW5ndWFnZSAoYXJiX29ubHkpXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGFmdGVyQ3ZBcmJPbmx5Lm1ldGFkYXRhID0gYWZ0ZXJDdkFyYk9ubHkubWV0YWRhdGEgfHwge307XHJcbiAgICAgICAgICBhZnRlckN2QXJiT25seS5tZXRhZGF0YS5sYW5ndWFnZSA9IGJlZm9yZUN2QXJiT25seT8ubWV0YWRhdGE/Lmxhbmd1YWdlIHx8ICd1bmtub3duJztcclxuICAgICAgICB9IGNhdGNoIHt9XHJcbiAgICAgICAgLy8gRW5mb3JjZSBvcmlnaW5hbCBsYW5ndWFnZSBvbiBzZWN0aW9ucyAoZ3VhcmQgYWdhaW5zdCB0cmFuc2xhdGlvbilcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3Qgb3JpZ0xhbmcyID0gU3RyaW5nKGJlZm9yZUN2QXJiT25seT8ubWV0YWRhdGE/Lmxhbmd1YWdlIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgZW5mb3JjZU9yaWdpbmFsTGFuZ3VhZ2VDVihhZnRlckN2QXJiT25seSwgYmVmb3JlQ3ZBcmJPbmx5LCBvcmlnTGFuZzIpO1xyXG4gICAgICAgIH0gY2F0Y2gge31cclxuICAgICAgICAvLyBEcm9wIEFJIG5hcnJhdGl2ZSBpZiB3cm9uZyBsYW5ndWFnZVxyXG4gICAgICAgIGlmIChhaVJlcG9ydCAmJiBhaVJlcG9ydC5uYXJyYXRpdmUpIHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdMYW5nMiA9IFN0cmluZyhiZWZvcmVDdkFyYk9ubHk/Lm1ldGFkYXRhPy5sYW5ndWFnZSB8fCAnJykudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgY29uc3QgbmFyckxhbmcgPSBkZXRlY3RMYW5nTG9vc2UoU3RyaW5nKGFpUmVwb3J0Lm5hcnJhdGl2ZSB8fCAnJykpO1xyXG4gICAgICAgICAgICBpZiAobmFyckxhbmcgIT09ICd1bmtub3duJyAmJiBuYXJyTGFuZyAhPT0gb3JpZ0xhbmcyKSB7XHJcbiAgICAgICAgICAgICAgZGVsZXRlIGFpUmVwb3J0Lm5hcnJhdGl2ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBjYXRjaCB7fVxyXG4gICAgICAgIH1cclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb25zdCBvcmlnTGFuZzIgPSBTdHJpbmcoYmVmb3JlQ3ZBcmJPbmx5Py5tZXRhZGF0YT8ubGFuZ3VhZ2UgfHwgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICBjb25zdCBkZXRMYW5nMiA9IGRldGVjdExhbmdMb29zZShhZnRlckN2QXJiT25seS5zdW1tYXJ5IHx8ICcnKTtcclxuICAgICAgICAgIGlmIChvcmlnTGFuZzIgJiYgZGV0TGFuZzIgIT09ICd1bmtub3duJyAmJiBkZXRMYW5nMiAhPT0gb3JpZ0xhbmcyKSB7XHJcbiAgICAgICAgICAgIGFmdGVyQ3ZBcmJPbmx5LnN1bW1hcnkgPSBiZWZvcmVDdkFyYk9ubHkuc3VtbWFyeSB8fCBhZnRlckN2QXJiT25seS5zdW1tYXJ5O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBNZXJnZSBvcmlnaW5hbCBlZHVjYXRpb24gd2l0aCBBSSBhZGRpdGlvbnMgKGFwcGVuZC1vbmx5LCBkZWR1cCwgbWF4IDgpIOKAlCBhcmJfb25seVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBiYXNlID0gQXJyYXkuaXNBcnJheShiZWZvcmVDdkFyYk9ubHk/LmVkdWNhdGlvbikgPyBiZWZvcmVDdkFyYk9ubHkuZWR1Y2F0aW9uIDogW107XHJcbiAgICAgICAgICBjb25zdCBhaUVkdSA9IEFycmF5LmlzQXJyYXkoYWZ0ZXJDdkFyYk9ubHk/LmVkdWNhdGlvbikgPyBhZnRlckN2QXJiT25seS5lZHVjYXRpb24gOiBbXTtcclxuICAgICAgICAgIGNvbnN0IG5vcm1FID0gKHM6IGFueSkgPT4gU3RyaW5nKHMgfHwgJycpLnJlcGxhY2UoL1tcXHNcXHUwMEEwXSsvZywgJyAnKS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgIGNvbnN0IGNhbm9uRGF0ZSA9IChzOiBhbnkpID0+IG5vcm1FKFN0cmluZyhzIHx8ICcnKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvW1xcdTIwMTJcXHUyMDEzXFx1MjAxNFxcdTIwMTVcXHUyMjEyXS9nLCAnLScpIC8vIHVuaWNvZGUgZGFzaGVzIOKGkiBoeXBoZW5cclxuICAgICAgICAgICAgLnJlcGxhY2UoL1xccyotXFxzKi9nLCAnLScpIC8vIHN0cmlwIHNwYWNlcyBhcm91bmQgaHlwaGVuXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8tKy9nLCAnLScpICAgICAgICAvLyBjb2xsYXBzZSBtdWx0aXBsZSBoeXBoZW5zXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgY29uc3Qga2V5RSA9IChlOiBhbnkpID0+IFtub3JtRShlPy5zY2hvb2wpLCBjYW5vbkRhdGUoZT8uZGF0ZXMgfHwgKChlPy5zdGFydERhdGUgfHwgJycpICsgJy0nICsgKGU/LmVuZERhdGUgfHwgJycpKSldLmpvaW4oJ3wnKTtcclxuICAgICAgICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0KGJhc2UubWFwKGtleUUpKTtcclxuICAgICAgICAgIGNvbnN0IG1lcmdlZDogYW55W10gPSBiYXNlLnNsaWNlKCk7XHJcbiAgICAgICAgICBhaUVkdS5mb3JFYWNoKChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFlIHx8ICFlLnNjaG9vbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zdCBvYmo6IGFueSA9IHsgc2Nob29sOiBlLnNjaG9vbCB9O1xyXG4gICAgICAgICAgICBpZiAoZS5kZWdyZWUpIG9iai5kZWdyZWUgPSBlLmRlZ3JlZTtcclxuICAgICAgICAgICAgaWYgKGUubG9jYXRpb24pIG9iai5sb2NhdGlvbiA9IGUubG9jYXRpb247XHJcbiAgICAgICAgICAgIGlmIChlLmRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgb2JqLmRhdGVzID0gZS5kYXRlcztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjb25zdCBzZCA9IGUuc3RhcnREYXRlO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGVkID0gZS5lbmREYXRlICYmIGUuZW5kRGF0ZSAhPT0gJ1ByZXNlbnQnID8gZS5lbmREYXRlIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGQgPSBbc2QsIGVkXS5maWx0ZXIoQm9vbGVhbikuam9pbignLScpO1xyXG4gICAgICAgICAgICAgIGlmIChkKSBvYmouZGF0ZXMgPSBkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGsgPSBrZXlFKG9iaik7XHJcbiAgICAgICAgICAgIGlmICghc2Vlbi5oYXMoaykpIHsgc2Vlbi5hZGQoayk7IG1lcmdlZC5wdXNoKG9iaik7IH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgYWZ0ZXJDdkFyYk9ubHkuZWR1Y2F0aW9uID0gbWVyZ2VkLnNsaWNlKDAsIDgpO1xyXG4gICAgICAgIH0gY2F0Y2gge31cclxuICAgICAgICAvLyBCdWxsZXRzIFhZWiByZXdyaXRlIHBlciBleHBlcmllbmNlL3Byb2plY3RzIChhcmJfb25seSlcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3Qgb3JpZ0xhbmcyID0gU3RyaW5nKGJlZm9yZUN2QXJiT25seT8ubWV0YWRhdGE/Lmxhbmd1YWdlIHx8ICcnKS50cmltKCk7XHJcbiAgICAgICAgICBjb25zdCBnZXRLZXl3b3JkcyA9IChzOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdG9rcyA9IFN0cmluZyhzIHx8ICcnKS50b0xvd2VyQ2FzZSgpLnNwbGl0KC9bXmEtejAtOSsuI10vZ2kpLmZpbHRlcih3ID0+IHcubGVuZ3RoID49IDMpO1xyXG4gICAgICAgICAgICBjb25zdCBmcmVxID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcclxuICAgICAgICAgICAgdG9rcy5mb3JFYWNoKHcgPT4gZnJlcS5zZXQodywgKGZyZXEuZ2V0KHcpIHx8IDApICsgMSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShmcmVxLmVudHJpZXMoKSkuc29ydCgoYSxiKT0+YlsxXS1hWzFdKS5tYXAoKFt3XSk9PncpLnNsaWNlKDAsIDIwKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBjb25zdCBqZEt3ID0gZ2V0S2V5d29yZHMoamRUZXh0IHx8ICcnKTtcclxuICAgICAgICAgIGNvbnN0IG51bXNSZWdleCA9IC9cXGJcXGRbXFxkLixdKiU/XFxiL2c7XHJcbiAgICAgICAgICBjb25zdCB3b3JkczIyID0gKHM6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IFN0cmluZyhzIHx8ICcnKS50cmltKCkuc3BsaXQoL1xccysvKTtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnRzLmxlbmd0aCA+IDIyID8gcGFydHMuc2xpY2UoMCwgMjIpLmpvaW4oJyAnKSA6IFN0cmluZyhzIHx8ICcnKS50cmltKCk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgY29uc3QgdmVyYnNVbmlvbjIgPSBmaWx0ZXJGb3JBVFMoZ2V0VmVyYnMoQUNUSU9OX1ZFUkJfQ0FURUdPUklFUykpO1xyXG4gICAgICAgICAgY29uc3QgdmVyYnNTZXQyID0gbmV3IFNldCh2ZXJic1VuaW9uMi5tYXAodiA9PiB2LnRvTG93ZXJDYXNlKCkpKTtcclxuICAgICAgICAgIGNvbnN0IFNFRUQyID0gYEFDVElPTiBWRVJCIFNUQVJURVIgU0VFRCAoRW5nbGlzaCBmb3JtcyBmb3IgZ3VpZGFuY2Ugb25seTsgZG8gTk9UIHRyYW5zbGF0ZSB0aGUgcmVzdCk6ICR7dmVyYnNVbmlvbjIuc2xpY2UoMCwgNjApLmpvaW4oJywgJyl9YDtcclxuICAgICAgICAgIGNvbnN0IGRlZmF1bHRWZXJiQnlMYW5nMjogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHsgZW46ICdJbXBsZW1lbnRlZCcsIGZyOiAnUsOpYWxpc8OpJyB9O1xyXG4gICAgICAgICAgY29uc3QgZW5zdXJlQWN0aW9uVmVyYlN0YXJ0MiA9ICh0ZXh0OiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYmVmb3JlID0gU3RyaW5nKHRleHQgfHwgJycpLnRyaW0oKTtcclxuICAgICAgICAgICAgaWYgKCFiZWZvcmUpIHJldHVybiB7IGNoYW5nZWQ6IGZhbHNlLCB2YWx1ZTogYmVmb3JlIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGxhbmcgPSAob3JpZ0xhbmcyIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBzID0gYmVmb3JlLnJlcGxhY2UoL15bLeKAoirigJTigJNdXFxzKi8sICcnKTtcclxuICAgICAgICAgICAgY29uc3QgZmlyc3QgPSBzLnNwbGl0KC9cXHMrLylbMF0gfHwgJyc7XHJcbiAgICAgICAgICAgIGlmIChsYW5nID09PSAnZW4nKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHZlcmJzU2V0Mi5oYXMoZmlyc3QudG9Mb3dlckNhc2UoKSkpIHJldHVybiB7IGNoYW5nZWQ6IGJlZm9yZSAhPT0gcywgdmFsdWU6IHMgfTtcclxuICAgICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VkOiB0cnVlLCB2YWx1ZTogYCR7ZGVmYXVsdFZlcmJCeUxhbmcyLmVufSAke3N9YC5yZXBsYWNlKC9cXHN7Mix9L2csICcgJykudHJpbSgpIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGxhbmcgPT09ICdmcicpIHtcclxuICAgICAgICAgICAgICBpZiAoL15bQS1aw4Atw5bDmC3Dnl0vLnRlc3QoZmlyc3QpKSByZXR1cm4geyBjaGFuZ2VkOiBiZWZvcmUgIT09IHMsIHZhbHVlOiBzIH07XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlZDogdHJ1ZSwgdmFsdWU6IGAke2RlZmF1bHRWZXJiQnlMYW5nMi5mcn0gJHtzfWAucmVwbGFjZSgvXFxzezIsfS9nLCAnICcpLnRyaW0oKSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIE90aGVyIGxhbmd1YWdlczogZG8gTk9UIHByZWZpeCAoYXZvaWQgY3Jvc3MtbGFuZ3VhZ2UgaW5qZWN0aW9uKTsgb25seSB0cmltIGxlYWRpbmcgYnVsbGV0IHN5bWJvbC5cclxuICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlZDogYmVmb3JlICE9PSBzLCB2YWx1ZTogcyB9O1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGNvbnN0IExMTV9TWVNURU0gPSBbXHJcbiAgICAgICAgICAgICdZb3UgcmV3cml0ZSByZXN1bWUgYnVsbGV0cyB1c2luZyB0aGUgWFlaIGZvcm11bGE6IFwiQWNjb21wbGlzaGVkIFtYXSBhcyBtZWFzdXJlZCBieSBbWV0gYnkgZG9pbmcgW1pdLlwiJyxcclxuICAgICAgICAgICAgJy0gU3RhcnQgd2l0aCBhIHN0cm9uZyBBQ1RJT04gVkVSQjsgaW5jbHVkZSAxIGNsZWFyIE1FVFJJQyBpZiBpdCBhbHJlYWR5IGV4aXN0czsgdGhlbiBIT1cgaXQgd2FzIGRvbmUuJyxcclxuICAgICAgICAgICAgJy0gS2VlcCBlYWNoIGJ1bGxldCBjb25jaXNlICjiiaQgMjIgd29yZHMpLCBwYXN0IHRlbnNlIHVubGVzcyBjdXJyZW50IHJvbGUuJyxcclxuICAgICAgICAgICAgJy0gTm8gZmx1ZmYsIG5vIGJ1enp3b3Jkcywgbm8gaW52ZW50ZWQgZmFjdHMuJyxcclxuICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgICdJTVBPUlRBTlQg4oCUIE1FVFJJQ1MgJiBJTlRFR1JJVFknLFxyXG4gICAgICAgICAgICAnLSBORVZFUiBpbnZlbnQgbnVtYmVycy4gVXNlIGEgbWV0cmljIE9OTFkgaWYgaXQgYWxyZWFkeSBleGlzdHMgaW4gdGhlIGlucHV0IGJ1bGxldC4nLFxyXG4gICAgICAgICAgICAnLSBJZiBubyBtZXRyaWMgZXhpc3RzLCBrZWVwIHRoZSBidWxsZXQgUVVBTElUQVRJVkUgKG5vIG51bWJlcnMpLicsXHJcbiAgICAgICAgICAgICctIFlvdSBtYXkgU1VHR0VTVCBwb3NzaWJsZSBtZXRyaWNzLCBidXQgT05MWSBpbnNpZGUgUkVQT1JULnJlY29tbWVuZGF0aW9ucyAobm90IGluIHRoZSByZXdyaXR0ZW4gYnVsbGV0cykuJyxcclxuICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgICdUQVNLJyxcclxuICAgICAgICAgICAgJ0ZvciBlYWNoIGlucHV0IGJ1bGxldCwgb3V0cHV0IG9uZSByZXdyaXR0ZW4gYnVsbGV0IHRoYXQgZm9sbG93cyBYWVouIElmIHRoZXJl4oCZcyBubyBtZXRyaWMsIGtlZXAgaW1wYWN0IHF1YWxpdGF0aXZlIGFuZCBmYWN0dWFsIChubyBudW1iZXJzKS4gT3B0aW9uYWxseSBhZGQgbWV0cmljIFNVR0dFU1RJT05TIGluIFJFUE9SVC5yZWNvbW1lbmRhdGlvbnMuJyxcclxuICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgICdSVUxFUycsXHJcbiAgICAgICAgICAgICcxKSBTdHJ1Y3R1cmUgPSBBQ1RJT04gVkVSQiDihpIgWCAod2hhdCkg4oaSIFkgKG1ldHJpYy9pbXBhY3QvYmFzZWxpbmUsIGlmIHByZXNlbnQpIOKGkiBaIChob3cpLicsXHJcbiAgICAgICAgICAgICcyKSBFeGFjdGx5IE9ORSBtZXRyaWMgWSwgYW5kIE9OTFkgaWYgcHJlc2VudCBpbiB0aGUgb3JpZ2luYWwgYnVsbGV0ICglLCAkLCB0aW1lLCB2b2x1bWUpLicsXHJcbiAgICAgICAgICAgICczKSBEb21haW4gd29yZGluZyBjb25zaXN0ZW50OyBvcHRpb25hbGx5IGFsaWduIHRvIGNvbnRleHQuamRfa2V5d29yZHMgd2hlbiBzZW1hbnRpY2FsbHkgZXF1aXZhbGVudCB0byB0aGUgb3JpZ2luYWwgYnVsbGV0LicsXHJcbiAgICAgICAgICAgICc0KSBBdm9pZCB2YWd1ZSBvcGVuZXJzICjigJxSZXNwb25zaWJsZSBmb3LigKbigJ0sIOKAnFdvcmtlZCBvbuKApuKAnSkuIFVzZSBzcGVjaWZpYyB2ZXJicy4nLFxyXG4gICAgICAgICAgICAnNSkgRG8gTk9UIGFkZCBuZXcgYWNoaWV2ZW1lbnRzLCB0b29scywgY29tcGFuaWVzLCBvciBudW1iZXJzLicsXHJcbiAgICAgICAgICAgICc2KSBSZW1vdmUgZmlsbGVyICjigJxzdWNjZXNzZnVsbHnigJ0sIOKAnHZhcmlvdXPigJ0sIOKAnG51bWVyb3Vz4oCdKS4gTm8gZmlyc3QtcGVyc29uLicsXHJcbiAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAnQlVMTEVUIFZPTFVNRSBDT05UUk9MIChQUlVORSAmIFNIT1JURU4pJyxcclxuICAgICAgICAgICAgJy0gSWYgYW4gZXhwZXJpZW5jZSBoYXMgTUFOWSBidWxsZXRzLCB5b3UgTUFZIHJlbW92ZSBsb3ctc2lnbmFsIGJ1bGxldHPigJRlc3BlY2lhbGx5IHdoZW4gdGhhdCBleHBlcmllbmNlIGlzIG1pbm9yIG9yIG5vdCByZWxldmFudCB0byBqZF9rZXl3b3Jkcy4nLFxyXG4gICAgICAgICAgICAnLSBUYXJnZXQgY291bnQgKGd1aWRlbGluZSwgbm90IHN0cmljdCk6IG1ham9yIGV4cGVyaWVuY2VzIDPigJM1IGJ1bGxldHM7IG1pbm9yL2xlc3MgcmVsZXZhbnQgMeKAkzMgYnVsbGV0cy4nLFxyXG4gICAgICAgICAgICAnLSBQcmVmZXIgdG8gS0VFUCBidWxsZXRzIHRoYXQgc2hvdyBtZWFzdXJhYmxlIG91dGNvbWVzLCBsZWFkZXJzaGlwL293bmVyc2hpcCwgb3IgSkQtYWxpZ25lZCBza2lsbHMuIFJlbW92ZSByZXBldGl0aXZlLCBvdmVybGFwcGluZywgb3IgcHVyZWx5IGR1dHktYmFzZWQgYnVsbGV0cy4nLFxyXG4gICAgICAgICAgICAnLSBJZiBhIGJ1bGxldCBpcyBsb25nIG9yIHZlcmJvc2UsIHlvdSBNQVkgc2hvcnRlbiBpdCB3aGlsZSBwcmVzZXJ2aW5nIG1lYW5pbmcgYW5kIGZhY3RzIChrZWVwIOKJpCAyMiB3b3Jkcywga2VlcCBvcmlnaW5hbCBjbGFpbXMsIG5vIG5ldyBtZXRyaWNzKS4nLFxyXG4gICAgICAgICAgICAnLSBBbGwgcmVtb3ZhbHMvc2hvcnRlbmluZ3MgTVVTVCBiZSBsb2dnZWQgaW4gUkVQT1JUIChzZWUgT1VUUFVUIEZPUk1BVCkuJyxcclxuICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgICdBTEdPUklUSE0gKGZvbGxvdyBleGFjdGx5KScsXHJcbiAgICAgICAgICAgICdBKSBQYXJzZSBlYWNoIGJ1bGxldDogdmVyYiwgd2hhdC9yZXN1bHQsIGFueSBFWElTVElORyBtZXRyaWMsIHRoZSDigJxob3figJ0uJyxcclxuICAgICAgICAgICAgJ0IpIElmIG5vIG1ldHJpYyBleGlzdHMsIGtlZXAgcXVhbGl0YXRpdmUgaW1wYWN0OyBETyBOT1QgZmFicmljYXRlIG51bWJlcnMuJyxcclxuICAgICAgICAgICAgJ0MpIERyYWZ0OiBWRVJCICsgWCArIChvcHRpb25hbCBZIGlmIHByZXNlbnQpICsgWi4gRW5zdXJlIOKJpCAyMiB3b3Jkcy4nLFxyXG4gICAgICAgICAgICAnRCkgUHJ1bmUgcGFzcyAocGVyIGV4cGVyaWVuY2UpOiByYW5rIGJ1bGxldHMgYnkgSkQgcmVsZXZhbmNlICsgaW1wYWN0OyBtYXJrIGxvdy1zaWduYWwgaXRlbXMgZm9yIHJlbW92YWwuJyxcclxuICAgICAgICAgICAgJ0UpIFNob3J0ZW4gcGFzczogY29tcHJlc3MgdmVyYm9zZSBidWxsZXRzIChyZW1vdmUgZmlsbGVyLCBtZXJnZSBkdXBsaWNhdGVzLCBrZWVwIG9uZSBtZXRyaWMpLicsXHJcbiAgICAgICAgICAgICdGKSBWYWxpZGF0ZTogZWFjaCBrZXB0IGJ1bGxldCBoYXMgdmVyYiwgd2hhdCwgaG93OyBtZXRyaWMgb25seSBpZiBwcmVzZW50LicsXHJcbiAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICBgT3V0cHV0IE1VU1QgYmUgaW4gdGhlIHNhbWUgbGFuZ3VhZ2UgYXMgY2xlYW5fY3YubWV0YWRhdGEubGFuZ3VhZ2U6IFwiJHtvcmlnTGFuZzJ9XCIuIERPIE5PVCB0cmFuc2xhdGUuYCxcclxuICAgICAgICAgICAgU0VFRDIsXHJcbiAgICAgICAgICBdLmpvaW4oJ1xcbicpO1xyXG4gICAgICAgICAgY29uc3QgcGVyRXhwTG9nczogYW55W10gPSBbXTtcclxuICAgICAgICAgIChhZnRlckN2QXJiT25seT8uZXhwZXJpZW5jZSB8fCBbXSkuZm9yRWFjaCgoXzogYW55LCBpZHg6IG51bWJlcikgPT4geyBwZXJFeHBMb2dzW2lkeF0gPSBudWxsOyB9KTtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgKGFmdGVyQ3ZBcmJPbmx5Py5leHBlcmllbmNlIHx8IFtdKS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBleHAgPSBhZnRlckN2QXJiT25seS5leHBlcmllbmNlW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbEJ1bGxldHM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShleHA/LmJ1bGxldHMpID8gZXhwLmJ1bGxldHMgOiBbXTtcclxuICAgICAgICAgICAgaWYgKCFvcmlnaW5hbEJ1bGxldHMubGVuZ3RoKSBjb250aW51ZTtcclxuICAgICAgICAgICAgY29uc3QgdXNlclBheWxvYWQgPSBKU09OLnN0cmluZ2lmeSh7IGJ1bGxldHM6IG9yaWdpbmFsQnVsbGV0cywgY29udGV4dDogeyBqZF9rZXl3b3JkczogamRLdyB9IH0pO1xyXG4gICAgICAgICAgICBjb25zdCByZXE6IGFueSA9IHsgbW9kZWw6IGFyYk1vZGVsLCBtZXNzYWdlczogWyB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBMTE1fU1lTVEVNIH0sIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiB1c2VyUGF5bG9hZCB9IF0sIHRlbXBlcmF0dXJlOiAwLjAgfTtcclxuICAgICAgICAgICAgbGV0IG91dDogYW55ID0gbnVsbDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBjb25zdCBjYWxsID0gYXdhaXQgY2FsbFdpdGhGYWxsYmFja0NoYXQoeyBjbGllbnQ6IG9wZW5haUFyYml0cmFnZSwgbWVzc2FnZXM6IHJlcS5tZXNzYWdlcywgdGVtcGVyYXR1cmU6IDAuMCB9KTtcclxuICAgICAgICAgICAgICBjb3N0LnN0ZXBzLnB1c2goeyBuYW1lOiAnYnVsbGV0c19yZXdyaXRlJywgbW9kZWw6IGNhbGwubW9kZWxVc2VkLCB1c2FnZTogY2FsbC51c2FnZSB9KTtcclxuICAgICAgICAgICAgICBjb25zdCB0eHQgPSAoY2FsbC50ZXh0IHx8ICcnKS50cmltKCk7XHJcbiAgICAgICAgICAgICAgdHJ5IHsgb3V0ID0gSlNPTi5wYXJzZSh0eHQpOyB9IGNhdGNoIHsgdHJ5IHsgb3V0ID0gcGFyc2VKc29uU3RyaWN0T3JTYWx2YWdlKHR4dCk7IH0gY2F0Y2gge30gfVxyXG4gICAgICAgICAgICB9IGNhdGNoIHt9XHJcbiAgICAgICAgICAgIGlmICghb3V0IHx8ICFBcnJheS5pc0FycmF5KG91dD8uYnVsbGV0c194eXopKSBjb250aW51ZTtcclxuICAgICAgICAgICAgY29uc3QgYWxsb3dOdW1zID0gbmV3IFNldCgob3JpZ2luYWxCdWxsZXRzLmpvaW4oJyAnKSAubWF0Y2gobnVtc1JlZ2V4KSB8fCBbXSkubWFwKHMgPT4gcykpO1xyXG4gICAgICAgICAgICBjb25zdCBjbGVhbmVkOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGIgb2Ygb3V0LmJ1bGxldHNfeHl6KSB7XHJcbiAgICAgICAgICAgICAgaWYgKCFiKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICBsZXQgcyA9IFN0cmluZyhiKS50cmltKCk7XHJcbiAgICAgICAgICAgICAgY29uc3QgZGV0ID0gZGV0ZWN0TGFuZ0xvb3NlKHMpO1xyXG4gICAgICAgICAgICAgIGlmIChkZXQgIT09ICd1bmtub3duJyAmJiBkZXQgIT09IG9yaWdMYW5nMi50b0xvd2VyQ2FzZSgpKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICBjb25zdCBudW1zID0gcy5tYXRjaChudW1zUmVnZXgpIHx8IFtdO1xyXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBudW1zKSB7IGlmICghYWxsb3dOdW1zLmhhcyhuKSkgeyBzID0gcy5yZXBsYWNlKG4sICcnKS5yZXBsYWNlKC9cXHN7Mix9L2csICcgJykudHJpbSgpOyB9IH1cclxuICAgICAgICAgICAgICBzID0gd29yZHMyMihzKTtcclxuICAgICAgICAgICAgICBpZiAocykgY2xlYW5lZC5wdXNoKHMpO1xyXG4gICAgICAgICAgICAgIGlmIChjbGVhbmVkLmxlbmd0aCA+PSA1KSBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWNsZWFuZWQubGVuZ3RoKSBjbGVhbmVkLnB1c2gob3JpZ2luYWxCdWxsZXRzWzBdKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VlbkIgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgICAgICAgICAgbGV0IGRlZHVwZWQgPSBjbGVhbmVkLmZpbHRlcih4ID0+IHsgY29uc3QgayA9IHgudG9Mb3dlckNhc2UoKTsgaWYgKHNlZW5CLmhhcyhrKSkgcmV0dXJuIGZhbHNlOyBzZWVuQi5hZGQoayk7IHJldHVybiB0cnVlOyB9KTtcclxuICAgICAgICAgICAgY29uc3QgaGFybW9uaXplZDogYW55W10gPSBbXTtcclxuICAgICAgICAgICAgZGVkdXBlZCA9IGRlZHVwZWQubWFwKChzLCBpZHhCKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgciA9IGVuc3VyZUFjdGlvblZlcmJTdGFydDIocyk7XHJcbiAgICAgICAgICAgICAgaWYgKHIuY2hhbmdlZCAmJiByLnZhbHVlICE9PSBzKSBoYXJtb25pemVkLnB1c2goeyBpbmRleDogaWR4QiwgYmVmb3JlOiBzLCBhZnRlcjogci52YWx1ZSwgcmVhc29uOiAncHJlZml4ZWQgYWN0aW9uIHZlcmIgZm9yIGhhcm1vbml6YXRpb24nIH0pO1xyXG4gICAgICAgICAgICAgIHJldHVybiByLnZhbHVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXhwLmJ1bGxldHMgPSBkZWR1cGVkLmxlbmd0aCA/IGRlZHVwZWQgOiBvcmlnaW5hbEJ1bGxldHM7XHJcbiAgICAgICAgICAgIHBlckV4cExvZ3NbaV0gPSB7IGV4cGVyaWVuY2VJbmRleDogaSwgcmVjb21tZW5kYXRpb25zOiBvdXQ/LlJFUE9SVD8ucmVjb21tZW5kYXRpb25zIHx8IFtdLCBwcnVuZWQ6IG91dD8uUkVQT1JUPy5wcnVuZWQgfHwge30sIHNob3J0ZW5lZDogb3V0Py5SRVBPUlQ/LnNob3J0ZW5lZCB8fCBbXSwgaGFybW9uaXplZCB9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gUHJvamVjdHMgcmV3cml0ZSAoYXJiX29ubHkpXHJcbiAgICAgICAgICBjb25zdCBwZXJQcm9qTG9nczogYW55W10gPSBbXTtcclxuICAgICAgICAgIChhZnRlckN2QXJiT25seT8ucHJvamVjdHMgfHwgW10pLmZvckVhY2goKF86IGFueSwgaWR4OiBudW1iZXIpID0+IHsgcGVyUHJvakxvZ3NbaWR4XSA9IG51bGw7IH0pO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAoYWZ0ZXJDdkFyYk9ubHk/LnByb2plY3RzIHx8IFtdKS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9qID0gYWZ0ZXJDdkFyYk9ubHkucHJvamVjdHNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsQnVsbGV0czogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KHByb2o/LmJ1bGxldHMpID8gcHJvai5idWxsZXRzIDogW107XHJcbiAgICAgICAgICAgIGlmICghb3JpZ2luYWxCdWxsZXRzLmxlbmd0aCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJQYXlsb2FkID0gSlNPTi5zdHJpbmdpZnkoeyBidWxsZXRzOiBvcmlnaW5hbEJ1bGxldHMsIGNvbnRleHQ6IHsgamRfa2V5d29yZHM6IGpkS3cgfSB9KTtcclxuICAgICAgICAgICAgY29uc3QgcmVxOiBhbnkgPSB7IG1vZGVsOiBhcmJNb2RlbCwgbWVzc2FnZXM6IFsgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogTExNX1NZU1RFTSB9LCB7IHJvbGU6ICd1c2VyJywgY29udGVudDogdXNlclBheWxvYWQgfSBdLCB0ZW1wZXJhdHVyZTogMC4wIH07XHJcbiAgICAgICAgICAgIGxldCBvdXQ6IGFueSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgY2FsbCA9IGF3YWl0IGNhbGxXaXRoRmFsbGJhY2tDaGF0KHsgY2xpZW50OiBvcGVuYWlBcmJpdHJhZ2UsIG1lc3NhZ2VzOiByZXEubWVzc2FnZXMsIHRlbXBlcmF0dXJlOiAwLjAgfSk7XHJcbiAgICAgICAgICAgICAgY29zdC5zdGVwcy5wdXNoKHsgbmFtZTogJ2J1bGxldHNfcmV3cml0ZV9wcm9qZWN0cycsIG1vZGVsOiBjYWxsLm1vZGVsVXNlZCwgdXNhZ2U6IGNhbGwudXNhZ2UgfSk7XHJcbiAgICAgICAgICAgICAgY29uc3QgdHh0ID0gKGNhbGwudGV4dCB8fCAnJykudHJpbSgpO1xyXG4gICAgICAgICAgICAgIHRyeSB7IG91dCA9IEpTT04ucGFyc2UodHh0KTsgfSBjYXRjaCB7IHRyeSB7IG91dCA9IHBhcnNlSnNvblN0cmljdE9yU2FsdmFnZSh0eHQpOyB9IGNhdGNoIHt9IH1cclxuICAgICAgICAgICAgfSBjYXRjaCB7fVxyXG4gICAgICAgICAgICBpZiAoIW91dCB8fCAhQXJyYXkuaXNBcnJheShvdXQ/LmJ1bGxldHNfeHl6KSkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbG93TnVtcyA9IG5ldyBTZXQoKG9yaWdpbmFsQnVsbGV0cy5qb2luKCcgJykgLm1hdGNoKG51bXNSZWdleCkgfHwgW10pLm1hcChzID0+IHMpKTtcclxuICAgICAgICAgICAgY29uc3QgY2xlYW5lZDogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBiIG9mIG91dC5idWxsZXRzX3h5eikge1xyXG4gICAgICAgICAgICAgIGlmICghYikgY29udGludWU7XHJcbiAgICAgICAgICAgICAgbGV0IHMgPSBTdHJpbmcoYikudHJpbSgpO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGRldCA9IGRldGVjdExhbmdMb29zZShzKTtcclxuICAgICAgICAgICAgICBpZiAoZGV0ICE9PSAndW5rbm93bicgJiYgZGV0ICE9PSBvcmlnTGFuZzIudG9Mb3dlckNhc2UoKSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgY29uc3QgbnVtcyA9IHMubWF0Y2gobnVtc1JlZ2V4KSB8fCBbXTtcclxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbnVtcykgeyBpZiAoIWFsbG93TnVtcy5oYXMobikpIHsgcyA9IHMucmVwbGFjZShuLCAnJykucmVwbGFjZSgvXFxzezIsfS9nLCAnICcpLnRyaW0oKTsgfSB9XHJcbiAgICAgICAgICAgICAgcyA9IHdvcmRzMjIocyk7XHJcbiAgICAgICAgICAgICAgaWYgKHMpIGNsZWFuZWQucHVzaChzKTtcclxuICAgICAgICAgICAgICBpZiAoY2xlYW5lZC5sZW5ndGggPj0gNCkgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFjbGVhbmVkLmxlbmd0aCkgY2xlYW5lZC5wdXNoKG9yaWdpbmFsQnVsbGV0c1swXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlZW5CID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgICAgICAgICAgIGxldCBkZWR1cGVkID0gY2xlYW5lZC5maWx0ZXIoeCA9PiB7IGNvbnN0IGsgPSB4LnRvTG93ZXJDYXNlKCk7IGlmIChzZWVuQi5oYXMoaykpIHJldHVybiBmYWxzZTsgc2VlbkIuYWRkKGspOyByZXR1cm4gdHJ1ZTsgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhcm1vbml6ZWQ6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIGRlZHVwZWQgPSBkZWR1cGVkLm1hcCgocywgaWR4QikgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHIgPSBlbnN1cmVBY3Rpb25WZXJiU3RhcnQyKHMpO1xyXG4gICAgICAgICAgICAgIGlmIChyLmNoYW5nZWQgJiYgci52YWx1ZSAhPT0gcykgaGFybW9uaXplZC5wdXNoKHsgaW5kZXg6IGlkeEIsIGJlZm9yZTogcywgYWZ0ZXI6IHIudmFsdWUsIHJlYXNvbjogJ3ByZWZpeGVkIGFjdGlvbiB2ZXJiIGZvciBoYXJtb25pemF0aW9uJyB9KTtcclxuICAgICAgICAgICAgICByZXR1cm4gci52YWx1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHByb2ouYnVsbGV0cyA9IGRlZHVwZWQubGVuZ3RoID8gZGVkdXBlZCA6IG9yaWdpbmFsQnVsbGV0cztcclxuICAgICAgICAgICAgcGVyUHJvakxvZ3NbaV0gPSB7IHByb2plY3RJbmRleDogaSwgcmVjb21tZW5kYXRpb25zOiBvdXQ/LlJFUE9SVD8ucmVjb21tZW5kYXRpb25zIHx8IFtdLCBwcnVuZWQ6IG91dD8uUkVQT1JUPy5wcnVuZWQgfHwge30sIHNob3J0ZW5lZDogb3V0Py5SRVBPUlQ/LnNob3J0ZW5lZCB8fCBbXSwgaGFybW9uaXplZCB9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc3QgX19icjogYW55ID0geyBwZXJFeHBlcmllbmNlOiBwZXJFeHBMb2dzLmZpbHRlcihCb29sZWFuKSB9O1xyXG4gICAgICAgICAgY29uc3QgcGogPSBwZXJQcm9qTG9ncy5maWx0ZXIoQm9vbGVhbik7XHJcbiAgICAgICAgICBpZiAocGoubGVuZ3RoKSBfX2JyLnBlclByb2plY3RzID0gcGo7XHJcbiAgICAgICAgICAoYWZ0ZXJDdkFyYk9ubHkgYXMgYW55KS5fX2J1bGxldFJld3JpdGUgPSBfX2JyO1xyXG4gICAgICAgIH0gY2F0Y2gge31cclxuICAgICAgICBjb25zdCBwYXlsb2FkOiBhbnkgPSB7IHJlc3VsdDogYWZ0ZXJDdkFyYk9ubHksIHJlcG9ydDogeyAuLi4oYWlSZXBvcnQgfHwge30pLCBsYW5ndWFnZVVzZWQ6IChsYW5nTGFiZWwyIHx8ICdzYW1lLWFzLWNsZWFuX2N2JyksIHN1bW1hcnlFZGl0OiB7IGJlZm9yZTogU3RyaW5nKGJlZm9yZUN2QXJiT25seT8uc3VtbWFyeSB8fCAnJyksIGFmdGVyOiBTdHJpbmcoYWZ0ZXJDdkFyYk9ubHk/LnN1bW1hcnkgfHwgJycpLCBjaGFuZ2VkOiBub3JtU3VtKGJlZm9yZUN2QXJiT25seT8uc3VtbWFyeSkgIT09IG5vcm1TdW0oYWZ0ZXJDdkFyYk9ubHk/LnN1bW1hcnkpLCBrZXl3b3Jkc1VzZWQ6IFtdIGFzIHN0cmluZ1tdIH0gfSB9O1xyXG4gICAgICAgIGlmICgoYWZ0ZXJDdkFyYk9ubHkgYXMgYW55KS5fX2J1bGxldFJld3JpdGUpIHtcclxuICAgICAgICAgIChwYXlsb2FkLnJlcG9ydCBhcyBhbnkpLmJ1bGxldFJld3JpdGUgPSAoYWZ0ZXJDdkFyYk9ubHkgYXMgYW55KS5fX2J1bGxldFJld3JpdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBqMiA9IGF3YWl0IGp1ZGdlQXJiaXRyYWdlKCcnLCBKU09OLnBhcnNlKGNsZWFuQ3ZKc29uKSwgamRUZXh0LCBhZnRlckN2QXJiT25seSwgeyAuLi4oYWlSZXBvcnQgfHwge30pLCBzdW1tYXJ5RWRpdDogeyBiZWZvcmU6IFN0cmluZyhiZWZvcmVDdkFyYk9ubHk/LnN1bW1hcnkgfHwgJycpLCBhZnRlcjogU3RyaW5nKGFmdGVyQ3ZBcmJPbmx5Py5zdW1tYXJ5IHx8ICcnKSwgY2hhbmdlZDogbm9ybVN1bShiZWZvcmVDdkFyYk9ubHk/LnN1bW1hcnkpICE9PSBub3JtU3VtKGFmdGVyQ3ZBcmJPbmx5Py5zdW1tYXJ5KSwga2V5d29yZHNVc2VkOiBbXSBhcyBzdHJpbmdbXSB9IH0pO1xyXG4gICAgICAgICAgaWYgKGoyKSB7XHJcbiAgICAgICAgICAgIHBheWxvYWQuanVkZ2UgPSB7IGFyYml0cmFnZTogajIuZXZhbHVhdGlvbiB9O1xyXG4gICAgICAgICAgICBjb3N0LnN0ZXBzLnB1c2goeyBuYW1lOiAnanVkZ2VfYXJiaXRyYWdlJywgbW9kZWw6IGoyLm1vZGVsLCB1c2FnZTogajIudXNhZ2UgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgKHBheWxvYWQgYXMgYW55KS5qdWRnZV9lcnJvciA9IChlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgOiBTdHJpbmcoZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb21wdXRlQ29zdFRvdGFscyhjb3N0KTtcclxuICAgICAgICBjb21wdXRlQ29zdFVTRChjb3N0KTtcclxuICAgICAgICBwYXlsb2FkLmNvc3QgPSBjb3N0O1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihwYXlsb2FkLCB7IHN0YXR1czogMjAwIH0pO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogYEVycmV1ciBsb3JzIGRlIGwnYXJiaXRyYWdlIE9wZW5Sb3V0ZXI6ICR7ZXJyb3JNZXNzYWdlfWAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIMOJVEFQRSAxIDogUsOpY3Vww6lyZXIgY3ZfdGV4dCAoY2xpZW50KSBvdSBPQ1IgdmlhIGltYWdlc1tdIChWaXNpb24pXHJcbiAgICBsZXQgY3ZUZXh0OiBzdHJpbmcgPSAnJztcclxuICAgIGxldCBtZXRob2RVc2VkOiAnY2xpZW50JyB8ICd2aXNpb24nID0gJ2NsaWVudCc7XHJcbiAgICBsZXQgaW1hZ2VzQ291bnQ6IG51bWJlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuICAgIGlmIChjdlRleHRGaWVsZCAmJiBjdlRleHRGaWVsZC50cmltKCkubGVuZ3RoID4gMjApIHtcclxuICAgICAgY29uc29sZS5sb2coJz09PSDDiVRBUEUgMTogVGV4dGUgQ1YgZm91cm5pIHBhciBsZSBjbGllbnQgPT09Jyk7XHJcbiAgICAgIGN2VGV4dCA9IG5vcm1hbGl6ZVRleHQoY3ZUZXh0RmllbGQpO1xyXG4gICAgICAvLyBKb3VybmFsaXNlciB1bmUgw6l0YXBlIGdyYXR1aXRlOiBleHRyYWN0aW9uIGxvY2FsZSBjw7R0w6kgY2xpZW50XHJcbiAgICAgIGNvc3Quc3RlcHMucHVzaCh7IG5hbWU6ICdjbGllbnRfZXh0cmFjdCcsIG1vZGVsOiAnbG9jYWwnLCB1c2FnZTogeyBwcm9tcHRfdG9rZW5zOiAwLCBjb21wbGV0aW9uX3Rva2VuczogMCwgdG90YWxfdG9rZW5zOiAwIH0gfSk7XHJcbiAgICB9IGVsc2UgaWYgKGltYWdlRW50cmllcyAmJiBpbWFnZUVudHJpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnPT09IMOJVEFQRSAxOiBPQ1IgVmlzaW9uIHN1ciBpbWFnZXNbXSA9PT0nKTtcclxuICAgICAge1xyXG4gICAgICAgIGlmICghcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9LRVlfVklTSU9OKSB7XHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgIHsgZXJyb3I6ICdDb25maWd1cmF0aW9uIE9wZW5Sb3V0ZXIgVmlzaW9uIG1hbnF1YW50ZSAocmVxdWlzZSBwb3VyIE9DUiBpbWFnZXNbXSknIH0sXHJcbiAgICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBTw6ljdXJpdMOpL2Nvw7t0czogbGltaXRlciDDoCAzIGltYWdlcyBtYXhcclxuICAgICAgICBjb25zdCBsaW1pdGVkSW1hZ2VzID0gaW1hZ2VFbnRyaWVzLnNsaWNlKDAsIDMpO1xyXG4gICAgICAgIGltYWdlc0NvdW50ID0gbGltaXRlZEltYWdlcy5sZW5ndGg7XHJcbiAgICAgICAgbWV0aG9kVXNlZCA9ICd2aXNpb24nO1xyXG4gICAgICAgIGNvbnN0IG9jciA9IGF3YWl0IGV4dHJhY3RUZXh0RnJvbUltYWdlc1dpdGhWaXNpb24obGltaXRlZEltYWdlcyk7XHJcbiAgICAgICAgY3ZUZXh0ID0gb2NyLnRleHQ7XHJcbiAgICAgICAgY29zdC5zdGVwcy5wdXNoKHsgbmFtZTogJ3Zpc2lvbl9vY3InLCBtb2RlbDogb2NyLm1vZGVsLCB1c2FnZTogKG9jciBhcyBhbnkpLnVzYWdlIH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUZXh0ZSBPQ1IgVmlzaW9uIGxvbmd1ZXVyOicsIGN2VGV4dC5sZW5ndGgpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICB7IGVycm9yOiBgT0NSIFZpc2lvbiDDqWNob3XDqWU6ICR7ZXJyb3JNZXNzYWdlfWAgfSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnVmV1aWxsZXogZm91cm5pciBzb2l0IGN2X3RleHQgKGV4dHJhaXQgY8O0dMOpIGNsaWVudCkgc29pdCBpbWFnZXNbXSAoZGF0YSBVUkxzKSBwb3VyIE9DUi4nIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVsOpcmlmaWVyIHF1ZSBsZSB0ZXh0ZSBuJ2VzdCBwYXMgdmlkZVxyXG4gICAgaWYgKCFjdlRleHQgfHwgY3ZUZXh0LnRyaW0oKS5sZW5ndGggPCAyMCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIGVycm9yOiAnQXVjdW4gdGV4dGUgZMOpdGVjdMOpIGRhbnMgbGUgUERGIGF2ZWMgbFxcJ0lBIFZpc2lvbi4gVmV1aWxsZXogdsOpcmlmaWVyIHF1ZSBsZSBQREYgY29udGllbnQgZHUgY29udGVudSBsaXNpYmxlLicgXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNb2RlIE9OTFkgUkFXOiByZXRvdXJuZXIgdW5pcXVlbWVudCBsZSB0ZXh0ZSBleHRyYWl0IChldCBjb8O7dHMpXHJcbiAgICBpZiAob25seVJhdykge1xyXG4gICAgICBjb21wdXRlQ29zdFRvdGFscyhjb3N0KTtcclxuICAgICAgY29tcHV0ZUNvc3RVU0QoY29zdCk7XHJcbiAgICAgIGNvbnN0IHBheWxvYWQ6IGFueSA9IHtcclxuICAgICAgICByYXdfY3Y6IHsgdGV4dDogY3ZUZXh0LCBtZXRob2Q6IG1ldGhvZFVzZWQsIGltYWdlc0NvdW50IH0sXHJcbiAgICAgICAgY29zdCxcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHBheWxvYWQsIHsgc3RhdHVzOiAyMDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gw4lUQVBFIDIgOiBDbGVhbiBDViBzdHJ1Y3R1cmluZyAoQUktZmlyc3Qgd2l0aCBmYWxsYmFjaywgY2FjaGVkKVxyXG4gICAgY29uc3QgY2xlYW5SZXMgPSBhd2FpdCBidWlsZENsZWFuQ3YoY3ZUZXh0KTtcclxuICAgIGNvbnN0IGNsZWFuQ3YgPSBjbGVhblJlcy5jbGVhbjtcclxuICAgIGlmICgoY2xlYW5SZXMgYXMgYW55KS51c2FnZSkge1xyXG4gICAgICBjb3N0LnN0ZXBzLnB1c2goeyBuYW1lOiAnc3RydWN0dXJpbmdfYWknLCBtb2RlbDogKGNsZWFuUmVzIGFzIGFueSkubW9kZWwsIHVzYWdlOiAoY2xlYW5SZXMgYXMgYW55KS51c2FnZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIEpvdXJuYWxpc2VyIHVuZSDDqXRhcGUgZ3JhdHVpdGUgc2kgc3RydWN0dXJhdGlvbiBkw6l0ZXJtaW5pc3RlIChmYWxsYmFjaykgb3UgY2FjaGUgc2FucyB1c2FnZVxyXG4gICAgICBjb3N0LnN0ZXBzLnB1c2goeyBuYW1lOiAnc3RydWN0dXJpbmdfZGV0ZXJtaW5pc3RpYycsIG1vZGVsOiAnbG9jYWwnLCB1c2FnZTogeyBwcm9tcHRfdG9rZW5zOiAwLCBjb21wbGV0aW9uX3Rva2VuczogMCwgdG90YWxfdG9rZW5zOiAwIH0gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2kgb25seV9jbGVhbiBkZW1hbmTDqSwgcmV0b3VybmVyIHVuIGNsZWFuX2N2IFNBTklUSVpFRCAmIHRyacOpICgrcmF3IHNpIGRlbWFuZMOpKVxyXG4gICAgaWYgKG9ubHlDbGVhbikge1xyXG4gICAgICBsZXQgY2xlYW5lZCA9IHNhbml0aXplUmVzdW1lRm9yU2NoZW1hKGNsZWFuQ3YsIHsgY3ZUZXh0LCBqZFRleHQ6IGpkVGV4dCB8fCAnJyB9KTtcclxuICAgICAgaWYgKGNsZWFuZWQgJiYgQXJyYXkuaXNBcnJheShjbGVhbmVkLmV4cGVyaWVuY2UpKSB7XHJcbiAgICAgICAgY2xlYW5lZC5leHBlcmllbmNlID0gc29ydEV4cGVyaWVuY2VBbnRpQ2hyb25vKGNsZWFuZWQuZXhwZXJpZW5jZSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IFJlc3VtZUpTT04uc2FmZVBhcnNlKGNsZWFuZWQpO1xyXG4gICAgICBpZiAoIXZhbGlkYXRpb25SZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSlNPTiBzdHJ1Y3R1csOpIG5vbiBjb25mb3JtZSBhdSBzY2jDqW1hJywgaXNzdWVzOiB2YWxpZGF0aW9uUmVzdWx0LmVycm9yLmlzc3VlcyB9LCB7IHN0YXR1czogNDIyIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBheWxvYWQ6IGFueSA9IHsgY2xlYW5fY3Y6IHZhbGlkYXRpb25SZXN1bHQuZGF0YSB9O1xyXG4gICAgICAvLyBKdWRnZSBQREbihpJKU09OIChvcHRpb25hbClcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBqID0gYXdhaXQganVkZ2VQZGZUb0pzb24oY3ZUZXh0LCBjbGVhbkN2KTtcclxuICAgICAgICBpZiAoaikge1xyXG4gICAgICAgICAgcGF5bG9hZC5qdWRnZSA9IHsgcGRmVG9Kc29uOiBqLmV2YWx1YXRpb24gfTtcclxuICAgICAgICAgIGNvc3Quc3RlcHMucHVzaCh7IG5hbWU6ICdqdWRnZV9wZGYnLCBtb2RlbDogai5tb2RlbCwgdXNhZ2U6IGoudXNhZ2UgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgcGF5bG9hZC5qdWRnZV9lcnJvciA9IChlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgOiBTdHJpbmcoZSkpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbXB1dGVDb3N0VG90YWxzKGNvc3QpO1xyXG4gICAgICBjb21wdXRlQ29zdFVTRChjb3N0KTtcclxuICAgICAgcGF5bG9hZC5jb3N0ID0gY29zdDtcclxuICAgICAgaWYgKHJldHVyblJhdykgcGF5bG9hZC5yYXdfY3YgPSB7IHRleHQ6IGN2VGV4dCwgbWV0aG9kOiBtZXRob2RVc2VkLCBpbWFnZXNDb3VudCB9O1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocGF5bG9hZCwgeyBzdGF0dXM6IDIwMCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDDiVRBUEUgMyA6IFByw6lwYXJlciBsZSBwYXlsb2FkIHBvdXIgbCdhcmJpdHJhZ2UgKEpTT04tb25seTogcGFzIGRlIGN2X3RleHQpXHJcbiAgICBjb25zdCB1c2VyTWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgY2xlYW5fY3Y6IGNsZWFuQ3YsXHJcbiAgICAgIGpkX3RleHQ6IGpkVGV4dC50cmltKClcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCc9PT0gw4lUQVBFIDI6IEFyYml0cmFnZSBldCBhZGFwdGF0aW9uID09PScpO1xyXG5cclxuICAgIC8vIFByb3ZpZGVyICsgbW9kw6hsZSAoYXJiaXRyYWdlKVxyXG4gICAgY29uc3QgT3BlbkFJID0gKGF3YWl0IGltcG9ydCgnb3BlbmFpJykpLmRlZmF1bHQ7XHJcbiAgICBjb25zdCB1c2VPUiA9IHRydWU7XHJcbiAgICBsZXQgb3BlbmFpQXJiaXRyYWdlOiBhbnk7XHJcbiAgICBsZXQgYXJiTW9kZWwgPSBhcmJNb2RlbE92ZXJyaWRlIHx8IGdldENvbmZpZ3VyZWRNb2RlbCgnYXJiaXRyYWdlJykgfHwgJ2dwdC00byc7XHJcbiAgICB7XHJcbiAgICAgIGNvbnN0IGtleSA9IHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfS0VZX0FSQklUUkFHRTtcclxuICAgICAgaWYgKCFrZXkpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnT1BFTlJPVVRFUl9LRVlfQVJCSVRSQUdFIG1hbnF1YW50ZScgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICAgICAgb3BlbmFpQXJiaXRyYWdlID0gbmV3IE9wZW5BSSh7XHJcbiAgICAgICAgYXBpS2V5OiBrZXksXHJcbiAgICAgICAgYmFzZVVSTDogJ2h0dHBzOi8vb3BlbnJvdXRlci5haS9hcGkvdjEnLFxyXG4gICAgICAgIGRlZmF1bHRIZWFkZXJzOiB7XHJcbiAgICAgICAgICAnSFRUUC1SZWZlcmVyJzogcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9IVFRQX1JFRkVSRVIgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsXHJcbiAgICAgICAgICAnWC1UaXRsZSc6IHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfQVBQX1RJVExFIHx8ICdRdWlja0NWJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBcHBlbCDDoCBsJ0FQSSBPcGVuUm91dGVyIEFyYml0cmFnZVxyXG4gICAgbGV0IGNvbXBsZXRpb247XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB0b2RheUlTTyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOyAvLyBZWVlZLU1NLUREXHJcbiAgICAgIGNvbnN0IHJlcG9ydFNwZWMgPSBgXFxuXFxuQ09OVEVYVEUgVEVNUE9SRUw6XFxuRGF0ZSBkdSBqb3VyOiAke3RvZGF5SVNPfS4gVXRpbGlzZSBjZXR0ZSBkYXRlIHBvdXIgY2FsY3VsZXIgbGEgZHVyw6llIGRlcyBleHDDqXJpZW5jZXMgZXQgZMOpdGVybWluZXIgc2kgdW4gcG9zdGUgZXN0IGFjdHVlbCAoZW5kRGF0ZTogXCJQcmVzZW50XCIpLlxcblxcbkZPUk1BVCBTT1JUSUUgT0JMSUdBVE9JUkUgKFJFTVBMQUNFIExBIFLDiEdMRSBQUsOJQ8OJREVOVEUpOlxcblJldG91cm5lIHVuIHVuaXF1ZSBvYmpldCBKU09OIGF2ZWMgbGVzIGNsw6lzOlxcbi0gcmVzdWx0OiBsJ29iamV0IFNUUklDVEVNRU5UIGNvbmZvcm1lIMOgIFJlc3VtZUpTT04gKHZvaXIgY29udHJhdCBjaS1kZXNzb3VzKVxcbi0gcmVwb3J0OiB1biBvYmpldCBkJ2V4cGxpY2F0aW9uIGNvbnRlbmFudDpcXG4gICAtIG5hcnJhdGl2ZTogc3RyaW5nICg2IMOgIDEwIHBocmFzZXMgREFOUyBMQSBNw4pNRSBMQU5HVUUgUVVFIGNsZWFuX2N2Lm1ldGFkYXRhLmxhbmd1YWdlIOKAlCBORSBQQVMgdHJhZHVpcmU7IGp1c3RpZmllIGxlcyBjaG9peCwgY2l0ZSAz4oCTNSBtb3RzLWNsw6lzIEpEIGNvdXZlcnRzIGV0IDLigJMzIG1hbnF1YW50cywgaW5jbHV0IDHigJMyIGV4ZW1wbGVzIGNvbmNyZXRzIGRlIHLDqcOpY3JpdHVyZSBkZSBidWxsZXQ6IGF2YW50IOKGkiBhcHLDqHMgKyByYWlzb24pXFxuICAgLSBmaXRTY29yZTogbm9tYnJlIDDigJMxMDBcXG4gICAtIGpkQ292ZXJhZ2U6IHsgbWF0Y2hlZEtleXdvcmRzOiBzdHJpbmdbXSwgbWlzc2luZ0tleXdvcmRzOiBzdHJpbmdbXSwgcGFydGlhbE1hdGNoZXM6IHN0cmluZ1tdIH1cXG4gICAtIGRlY2lzaW9uczoge1xcbiAgICAgICBrZXB0RXhwZXJpZW5jZXM6IHN0cmluZ1tdLFxcbiAgICAgICByZW1vdmVkRXhwZXJpZW5jZXM6IHN0cmluZ1tdLFxcbiAgICAgICBidWxsZXRFZGl0czogQXJyYXk8eyBzb3VyY2VJbmRleDogbnVtYmVyOyBiZWZvcmU6IHN0cmluZzsgYWZ0ZXI6IHN0cmluZzsgcmVhc29uOiBzdHJpbmcgfT5cXG4gICAgIH1cXG4gICAtIHdhcm5pbmdzPzogc3RyaW5nW11cXG4gICAtIGxhbmd1YWdlVXNlZDogc3RyaW5nXFxuICAgLSBzdW1tYXJ5RWRpdDogeyBiZWZvcmU6IHN0cmluZzsgYWZ0ZXI6IHN0cmluZzsgY2hhbmdlZDogYm9vbGVhbjsga2V5d29yZHNVc2VkOiBzdHJpbmdbXSB9XFxuXFxuQ09OVFJBVCBTVFJJQ1QgUmVzdW1lSlNPTiAoc3F1ZWxldHRlIG1pbmltYWwgaW5kaWNhdGlmKSDigJQgdG91dGVzIGxlcyBjbMOpcyBub24gbGlzdMOpZXMgc29udCBpbnRlcmRpdGVzOlxcbntcXG4gIG1ldGFkYXRhPzogeyBuYW1lPzogc3RyaW5nOyBlbWFpbD86IHN0cmluZzsgcGhvbmU/OiBzdHJpbmc7IGxvY2F0aW9uPzogc3RyaW5nIH0sXFxuICBleHBlcmllbmNlOiBBcnJheTx7XFxuICAgIGNvbXBhbnk6IHN0cmluZzsgdGl0bGU6IHN0cmluZzsgbG9jYXRpb24/OiBzdHJpbmc7IHN0YXJ0RGF0ZTogc3RyaW5nOyBlbmREYXRlPzogc3RyaW5nOyBidWxsZXRzPzogc3RyaW5nW11cXG4gIH0+LFxcbiAgc2tpbGxzPzogeyBsYW5ndWFnZXM/OiBzdHJpbmdbXTsgZnJhbWV3b3Jrcz86IHN0cmluZ1tdOyB0b29scz86IHN0cmluZ1tdOyBvdGhlcj86IHN0cmluZ1tdIH0sXFxuICBwcm9qZWN0cz86IEFycmF5PHsgbmFtZTogc3RyaW5nOyBkZXNjcmlwdGlvbj86IHN0cmluZzsgYnVsbGV0cz86IHN0cmluZ1tdIH0+LFxcbiAgZWR1Y2F0aW9uPzogQXJyYXk8eyBzY2hvb2w6IHN0cmluZzsgZGVncmVlPzogc3RyaW5nOyBzdGFydERhdGU/OiBzdHJpbmc7IGVuZERhdGU/OiBzdHJpbmcgfT4sXFxuICBjZXJ0aWZpY2F0aW9ucz86IHN0cmluZ1tdLFxcbiAgbGFuZ3VhZ2VzPzogc3RyaW5nW11cXG59XFxuXFxuUsOIR0xFUyBERSBOT1JNQUxJU0FUSU9OICYgTUFQUElORyAoYWNjZXB0ZSBuJ2ltcG9ydGUgcXVlbCBmb3JtYXQgSlNPTiBlbiBlbnRyw6llKTpcXG4tIFNpIGNsZWFuX2N2IG91IGN2X3RleHQgc3VnZ8OocmVudCBkZXMgc3lub255bWVzIGRlIGNsw6lzLCBtYXBwZS1sZXMgdmVycyBub3RyZSBzY2jDqW1hOlxcbiAg4oCiIGV4cGVyaWVuY2VzL3dvcmsvam9icy93b3JrRXhwZXJpZW5jZSDihpIgZXhwZXJpZW5jZVxcbiAg4oCiIGNvbXBhbnlfbmFtZS9lbXBsb3llci9vcmcg4oaSIGNvbXBhbnlcXG4gIOKAoiBwb3NpdGlvbi9yb2xlIOKGkiB0aXRsZVxcbiAg4oCiIGNpdHkg4oaSIGxvY2F0aW9uXFxuICDigKIgc3RhcnQvZnJvbSDihpIgc3RhcnREYXRlXFxuICDigKIgZW5kL3RvIOKGkiBlbmREYXRlICh1dGlsaXNlciBcIlByZXNlbnRcIiBzaSBlbiBjb3VycylcXG4gIOKAoiBidWxsZXRzL2FjaGlldmVtZW50cy9yZXNwb25zaWJpbGl0aWVzIOKGkiBidWxsZXRzIChhcnJheSBkZSBzdHJpbmdzKVxcbiAg4oCiIHRlY2gvdGVjaG5vbG9neS9zdGFjayDihpIgc2tpbGxzLm90aGVyIG91IHLDqXBhcnRpciBkYW5zIGxhbmd1YWdlcy9mcmFtZXdvcmtzL3Rvb2xzXFxuICDigKIgZWR1Y2F0aW9uL2VkdWNhdGlvbnMvYWNhZGVtaWNzIOKGkiBlZHVjYXRpb25cXG4tIERhdGVzOiBmb3JtYXQgSVNPIGNvdXJ0ICdZWVlZLU1NJy4gU2kgaW5jb25udWUsIG9tZXRzIGxlIGNoYW1wLlxcbi0gVGFibGVhdXg6IHRvdWpvdXJzIGRlcyBhcnJheXMgKG3Dqm1lIHZpZGVzKS4gSmFtYWlzIG51bGwvdW5kZWZpbmVkLlxcbi0gQ2hhw65uZXM6IHRvdWpvdXJzIGRlcyBzdHJpbmdzIChqYW1haXMgb2JqZXRzL2FycmF5cykuXFxuLSBUeXBlczogY29udmVydGlzL2NvZXJjZXMgaW50ZWxsaWdlbW1lbnQgKGV4Ljogbm9tYnJlIOKGkiBzdHJpbmcgc2kgbsOpY2Vzc2FpcmUpLlxcbi0gQ2hhbXBzIG9wdGlvbm5lbHM6IG9tZXRzLWxlcyBzaSBub24gZGlzcG9uaWJsZXM7IG5lIEpBTUFJUyBpbnZlbnRlci5cXG5cXG5WQUxJREFUSU9OIE1FTlRBTEUgYXZhbnQgcmV0b3VyOlxcbi0gVG91dGVzIGxlcyBleHDDqXJpZW5jZXMgb250IGNvbXBhbnksIHRpdGxlLCBzdGFydERhdGUgdmFsaWRlczsgZW5kRGF0ZSDDqXZlbnR1ZWxsZW1lbnQgJ1ByZXNlbnQnIG91ICdZWVlZLU1NJy5cXG4tIEF1Y3VuZSBjbMOpIGluY29ubnVlIG4nZXN0IGFqb3V0w6llIGF1IG5pdmVhdSByYWNpbmUuXFxuLSAncmVzdWx0JyByZXNwZWN0ZSBsZSBzcXVlbGV0dGUgY2ktZGVzc3VzLlxcblxcbkVYSUdFTkNFUzogTmUgcGFzIGludmVudGVyOyBwcmlvcmlzZXIgY2xlYW5fY3Ygc3VyIGN2X3RleHQ7IHJlc3BlY3RlciBsJ29yZHJlIGRlcyBleHDDqXJpZW5jZXMuXFxuTmUgcmVudm9pZSBhYnNvbHVtZW50IGF1Y3VuIHRleHRlIGVuIGRlaG9ycyBkZSBjZXQgb2JqZXQgSlNPTi5gO1xyXG4gICAgICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSBgJHtTWVNURU1fUFJPTVBUfVxcblxcbk5PVEUgSU1QT1JUQU5URTogVXRpbGlzZSBVTklRVUVNRU5UIGNsZWFuX2N2IChDViBzdHJ1Y3R1csOpKSBldCBqZF90ZXh0LiBJZ25vcmUgdG91dGUgYXV0cmUgc291cmNlIChuZSBQQVMgdXRpbGlzZXIgZGUgY3ZfdGV4dCkuIFNpIHVuZSBpbmZvcm1hdGlvbiBtYW5xdWUsIGxhaXNzZS1sYSB2aWRlIG91IGF2ZWMgdW4gcGxhY2Vob2xkZXIgYXBwcm9wcmnDqSwgbidpbnZlbnRlIHJpZW4uJHtyZXBvcnRTcGVjfWA7XHJcbiAgICAgIGNvbnN0IEFSQl9HVUlERUxJTkVTID0gYFxcblxcbj09PSBOb3JtZXMgQVRTICYgTGlzaWJpbGl0w6kgKGNvbXBsw6ltZW50LCBuZSBwYXMgbW9kaWZpZXIgbGUgZm9ybWF0IEpTT04pID09PVxcbk9iamVjdGlmOiBub3JtYWxpc2VyIGV0IG9wdGltaXNlciBsZSBDViBwb3VyIGxpc2liaWxpdMOpIGh1bWFpbmUgKyBjb21wYXRpYmlsaXTDqSBBVFMsIHNhbnMgaW52ZW50ZXIgZCdpbmZvcm1hdGlvbnMuIFNpIHVuZSBkb25uw6llIG1hbnF1ZSwgbGFpc3NlciB1biBlc3BhY2UgcsOpc2VydsOpIGNsYWlyIChzYW5zIGludmVudGVyKS5cXG5cXG5Sw6hnbGVzIHVuaXZlcnNlbGxlcyAoYXBwbGlxdWVyIGF1IEpTT04gcXVhbmQgcGVydGluZW50LCBzaW5vbiBlbiByZWNvbW1hbmRhdGlvbnMgZGFucyByZXBvcnQubmFycmF0aXZlKTpcXG4tIEV4cMOpcmllbmNlczogcmVzcGVjdGVyIHJpZ291cmV1c2VtZW50IGwnb3JkcmUgYW50aS1jaHJvbm9sb2dpcXVlIChwbHVzIHLDqWNlbnQg4oaSIHBsdXMgYW5jaWVuKSBkYW5zIHJlc3VsdC5leHBlcmllbmNlW10uXFxuLSDDiWR1Y2F0aW9uOiBuZSBQQVMgcsOpb3Jkb25uZXIgbGUgdGFibGVhdSBlZHVjYXRpb25bXSBkYW5zIGxlIEpTT04uIFNpIGp1bmlvci/DqXR1ZGlhbnQsIHR1IHBldXggbGUgcmVjb21tYW5kZXIgZGFucyByZXBvcnQubmFycmF0aXZlIChtaXNlIGVuIHBhZ2UpLCBtYWlzIHR1IG5lIG1vZGlmaWVzIHBhcyBsJ29yZHJlIGRlcyBzZWN0aW9ucyBkYW5zIGxlIEpTT04uXFxuLSBCdWxsZXRzOiBtw6l0aG9kZSBcIlLDqXN1bHRhdCA+IEFjdGlvbiA+IENvbnRleHRlXCIuIFZlcmJlcyBkJ2FjdGlvbiBob21vZ8OobmVzOiBwcsOpc2VudCBwb3VyIHLDtGxlIGFjdHVlbCwgcGFzc8OpIHBvdXIgYW5jaWVucy4gw4l2aXRlciBmb3JtdWxhdGlvbnMgZ8OpbsOpcmlxdWVzOyB2YWxvcmlzZXIgbCdpbXBhY3QgbWVzdXJhYmxlIGTDqHMgcXVlIGxhIG3DqXRyaXF1ZSBleGlzdGUgZMOpasOgIGRhbnMgbGUgQ1YgKG5lIGphbWFpcyBpbnZlbnRlcikuXFxuLSBEYXRlcyAoSlNPTik6IHV0aWxpc2VyIHN0cmljdGVtZW50IHN0YXJ0RGF0ZS9lbmREYXRlIGF1IGZvcm1hdCBZWVlZLU1NIGV0IGVuZERhdGU6XCJQcmVzZW50XCIgcG91ciB1biBwb3N0ZSBlbiBjb3Vycy4gTGVzIGZvcm1hdHMgaHVtYWlucyAoZXguIDAzLzIwMjHigJMwOC8yMDI0KSBzb250IGF1dG9yaXPDqXMgdW5pcXVlbWVudCBkYW5zIHJlcG9ydC5uYXJyYXRpdmUgc2kgdXRpbGUuXFxuLSBUaXRyZXM6IEFEQVBURVIgbGUgdGl0cmUgKHJlc3VsdC5oZWFkZXIudGl0bGUgb3UgcmVzdWx0Lm1ldGFkYXRhLnRpdGxlIHNpIHByw6lzZW50IGRhbnMgbGUgc2Now6ltYSkgcG91ciBxdSdpbCBjb3JyZXNwb25kZSBhdSBwb3N0ZSB2aXPDqSBkYW5zIGxhIEpELiBTaSBsJ2ludGl0dWzDqSBpbnRlcm5lIGVzdCBvYnNjdXIsIGFqb3V0ZXIgdW4gYWxpYXMgbWFyY2jDqSBlbnRyZSBwYXJlbnRow6hzZXMgZGFucyB0aXRsZSwgc2FucyBkw6lmb3JtZXIgbGUgcsO0bGUgKGV4OiBcIkluZ8OpbmlldXIgTG9naWNpZWwgKEJhY2tlbmQpXCIpLlxcbi0gQ29tcMOpdGVuY2VzOiBkw6lkdXBsaXF1ZXIgZXQgcmVncm91cGVyIHNlbG9uIG5vdHJlIHNjaMOpbWEgKHNraWxscy5sYW5ndWFnZXMvZnJhbWV3b3Jrcy90b29scykuIE9SRE9OTkVSIGxlcyBjb21ww6l0ZW5jZXMgcGFyIHBlcnRpbmVuY2UgYXUgcG9zdGU6IGxlcyBwbHVzIHBlcnRpbmVudGVzIGVuIHByZW1pZXIgZGFucyBjaGFxdWUgY2F0w6lnb3JpZS4gRMOpcHJpb3Jpc2VyIGxlcyB0ZWNobm9zIG9ic29sw6h0ZXMgKD41IGFucykgcGx1dMO0dCBxdWUgc3VwcHJpbWVyLCBzYXVmIHNpIGNsYWlyZW1lbnQgbm9uIHBlcnRpbmVudGVzOyB0b3V0ZSBzdXBwcmVzc2lvbiBkb2l0IMOqdHJlIHRyYWPDqWUuIEFUVEVOVElPTiBDUklUSVFVRTogXCJza2lsbHMubGFuZ3VhZ2VzXCIgZMOpc2lnbmUgbGVzIExBTkdBR0VTIERFIFBST0dSQU1NQVRJT04gKFB5dGhvbiwgSmF2YSwgQysrLCBldGMuKSwgUEFTIGxlcyBsYW5ndWVzIHBhcmzDqWVzIChhbmdsYWlzLCBmcmFuw6dhaXMsIGV0Yy4pLiBMZXMgbGFuZ3VlcyBwYXJsw6llcyB2b250IGRhbnMgbGUgY2hhbXAgXCJsYW5ndWFnZXNcIiAocmFjaW5lIGR1IEpTT04pLiBOZSBKQU1BSVMgY29uZm9uZHJlIGxlcyBkZXV4Llxcbi0gUHJvamV0cy/DiWR1Y2F0aW9uL0NlcnRpZnMvTGFuZ3VlczogbmUgcmVuc2VpZ25lciBxdWUgc2kgbCdpbmZvcm1hdGlvbiBleGlzdGUgZGFucyBjbGVhbl9jdjsgbmVtYWlzIGludmVudGVyKS5cXG4tIERhdGVzIChKU09OKTogdXRpbGlzZXIgc3RyaWN0ZW1lbnQgc3RhcnREYXRlL2VuZERhdGUgYXUgZm9ybWF0IFlZWVktTU0gZXQgZW5kRGF0ZTpcIlByZXNlbnRcIiBwb3VyIHVuIHBvc3RlIGVuIGNvdXJzLiBMZXMgZm9ybWF0cyBodW1haW5zIChleC4gMDMvMjAyMeKAkzA4LzIwMjQpIHNvbnQgYXV0b3Jpc8OpcyB1bmlxdWVtZW50IGRhbnMgcmVwb3J0Lm5hcnJhdGl2ZSBzaSB1dGlsZS5cXG4tIFRpdHJlczogQURBUFRFUiBsZSB0aXRyZSAocmVzdWx0LmhlYWRlci50aXRsZSBvdSByZXN1bHQubWV0YWRhdGEudGl0bGUgc2kgcHLDqXNlbnQgZGFucyBsZSBzY2jDqW1hKSBwb3VyIHF1J2lsIGNvcnJlc3BvbmRlIGF1IHBvc3RlIHZpc8OpIGRhbnMgbGEgSkQuIFNpIGwnaW50aXR1bMOpIGludGVybmUgZXN0IG9ic2N1ciwgYWpvdXRlciB1biBhbGlhcyBtYXJjaMOpIGVudHJlIHBhcmVudGjDqHNlcyBkYW5zIHRpdGxlLCBzYW5zIGTDqWZvcm1lciBsZSByw7RsZSAoZXg6IFwiSW5nw6luaWV1ciBMb2dpY2llbCAoQmFja2VuZClcIikuXFxuLSBDb21ww6l0ZW5jZXM6IGTDqWR1cGxpcXVlciBldCByZWdyb3VwZXIgc2Vsb24gbm90cmUgc2Now6ltYSAoc2tpbGxzLmxhbmd1YWdlcy9mcmFtZXdvcmtzL3Rvb2xzKS4gT1JET05ORVIgbGVzIGNvbXDDqXRlbmNlcyBwYXIgcGVydGluZW5jZSBhdSBwb3N0ZTogbGVzIHBsdXMgcGVydGluZW50ZXMgZW4gcHJlbWllciBkYW5zIGNoYXF1ZSBjYXTDqWdvcmllLiBEw6lwcmlvcmlzZXIgbGVzIHRlY2hub3Mgb2Jzb2zDqHRlcyAoPjUgYW5zKSBwbHV0w7R0IHF1ZSBzdXBwcmltZXIsIHNhdWYgc2kgY2xhaXJlbWVudCBub24gcGVydGluZW50ZXM7IHRvdXRlIHN1cHByZXNzaW9uIGRvaXQgw6p0cmUgdHJhY8OpZS5cXG4tIFByb2pldHMvw4lkdWNhdGlvbi9DZXJ0aWZzL0xhbmd1ZXM6IG5lIHJlbnNlaWduZXIgcXVlIHNpIGwnaW5mb3JtYXRpb24gZXhpc3RlIGRhbnMgY2xlYW5fY3Y7IG5lIHJpZW4gaW52ZW50ZXIuXFxuLSBNaXNlIGVuIHBhZ2UgKHBvbGljZXMsIG1hcmdlcywgaWPDtG5lcywgdGFibGVhdXgsIFBERikgZXQgw6lsw6ltZW50cyBwdXJlbWVudCB2aXN1ZWxzOiBuZSBtb2RpZmllbnQgcGFzIGxlIEpTT047IGZvcm11bGVyIGNlcyBwb2ludHMgZW4gcmVjb21tYW5kYXRpb25zIGRhbnMgcmVwb3J0Lm5hcnJhdGl2ZSBzaSBwZXJ0aW5lbnQuXFxuXFxuQ29ycmVjdGlvbnMvbm9ybWFsaXNhdGlvbnMgYXV0b21hdGlxdWVzIChldCB0cmHDp2FiaWxpdMOpKTpcXG4tIEhhcm1vbmlzZXIgdGVtcHMgdmVyYmF1eCBldCBkw6lidXQgZGUgcHVjZXMgcGFyIHZlcmJlIGQnYWN0aW9uLlxcbi0gUsOpw6ljcmlyZSBcInJlc3BvbnNhYmxlIGRlXCIg4oaSIGZvcm11bGF0aW9uIGF4w6llIGltcGFjdCBxdWFuZCBsJ2luZm9ybWF0aW9uIGV4aXN0ZS5cXG4tIFJhcGF0cmllciBsZXMgbcOpdHJpcXVlcyBleGlzdGFudGVzIHZlcnMgbGEgcHVjZSBjb3JyZXNwb25kYW50ZSBzYW5zIGVuIGludmVudGVyLlxcbi0gVW5pZm9ybWlzZXIgbGVzIGRhdGVzIEpTT04gKFlZWVktTU0gLyBcIlByZXNlbnRcIikuXFxuLSBMaW1pdGVyIDHigJM1IHB1Y2VzIHBhciBleHDDqXJpZW5jZSAoY29uZm9ybWUgYXUgc2Now6ltYSkuXFxuLSBTaSB1bmUgZXhww6lyaWVuY2UgZXN0IHN1cHByaW3DqWUvw6lsYWd1w6llIHBvdXIgcGVydGluZW5jZTogbCdpbnNjcmlyZSBkYW5zIHJlcG9ydC5kZWNpc2lvbnMucmVtb3ZlZEV4cGVyaWVuY2VzIGF2ZWMgeyBzb3VyY2VJbmRleCwgcmVhc29uIH0gZXQgYWpvdXRlciB1biBhdmVydGlzc2VtZW50IGRhbnMgcmVwb3J0Lndhcm5pbmdzIHNpIGxhIHBlcnRlIGQnaW5mb3JtYXRpb24gZXN0IHNpZ25pZmljYXRpdmUuXFxuLSBUb3V0ZSByw6nDqWNyaXR1cmUgZGUgcHVjZSBkb2l0IMOqdHJlIGxpc3TDqWUgZGFucyByZXBvcnQuZGVjaXNpb25zLmJ1bGxldEVkaXRzIHsgc291cmNlSW5kZXgsIGJlZm9yZSwgYWZ0ZXIsIHJlYXNvbiB9LlxcblxcbkNoZWNrbGlzdCBkZSB2YWxpZGF0aW9uIChKU09OICsgbmFycmF0aXZlKTpcXG4tIEV4cMOpcmllbmNlcyBhbnRpLWNocm9ub2xvZ2lxdWVzIHJlc3BlY3TDqWVzLlxcbi0gVmVyYmVzIGQnYWN0aW9uIGV0IHRlbXBzIGNvaMOpcmVudHMuXFxuLSDiiaUxIGltcGFjdC9tw6l0cmlxdWUgcGFyIGV4cMOpcmllbmNlIHNpIGxhIGRvbm7DqWUgZXhpc3RlIChzaW5vbiBsYWlzc2VyIGxhIHB1Y2UgZmFjdHVlbGxlKS5cXG4tIERhdGVzIEpTT04gdW5pZm9ybWVzLlxcbi0gQ29tcMOpdGVuY2VzIGTDqWR1cGxpcXXDqWVzIGV0IHJlZ3JvdXDDqWVzIChsYW5ndWFnZXMvZnJhbWV3b3Jrcy90b29scykuXFxuLSBBdWN1bmUgaW5mbyBzZW5zaWJsZSBham91dMOpZTsgYXVjdW5lIGludmVudGlvbi5cXG5gO1xyXG4gICAgICBjb25zdCBOQVJSQVRJVkVfQ0xJRU5UX1RPTkUgPSBgXFxuXFxuPT09IFLDqWRhY3Rpb24gZHUgY29tcHRlIHJlbmR1IChjbGllbnQtZmFjaW5nKSA9PT1cXG4tIFBlcnNvbmE6IFR1IGVzIHVuIFJIIHNww6ljaWFsaXPDqSBkYW5zIGxlIHJlY3J1dGVtZW50IGR1IHByb2ZpbCBkdSBjYW5kaWRhdCAoaW5mw6lyZXIgbGUgcHJvZmlsIMOgIHBhcnRpciBkZSBjbGVhbl9jdiBldC9vdSBqZF90ZXh0OiBleC4gZGVybmllciB0aXRyZSArIHN0YWNrIGRvbWluYW50ZSkuXFxuLSBBZHJlc3NlLXRvaSBhdSBjYW5kaWRhdCBldCBjb21tZW5jZSBsZSBjb21wdGUgcmVuZHUgcGFyOiBcIlZvdHJlIENWIC4uLlwiLlxcbi0gU29pcyBzcMOpY2lmaXF1ZSBldCBhbmNyw6kgZGFucyBsZXMgZmFpdHM6IGNpdGUgZGVzIMOpbMOpbWVudHMgY29uY3JldHMgZHUgQ1YgKHRpdHJlcywgZW50cmVwcmlzZXMsIGRhdGVzLCAx4oCTMiBtw6l0cmlxdWVzIGTDqWrDoCBwcsOpc2VudGVzLCBvdXRpbHMvc3RhY2spIGV0IHJlbGllLWxlcyBleHBsaWNpdGVtZW50IGF1eCBleGlnZW5jZXMgZGUgbGEgSkQgKDPigJM1IG1vdHMtY2zDqXMgY291dmVydHMgZXQgMuKAkzMgbWFucXVhbnRzKS4gSU1QT1JUQU5UOiBMZSBub20gZGUgbCdlbnRyZXByaXNlIMOgIGxhcXVlbGxlIG9uIHBvc3R1bGUgKG1lbnRpb25uw6kgZGFucyBqZF90ZXh0KSBuJ2VzdCBQQVMgdW4gbW90LWNsw6kgdGVjaG5pcXVlOyBuZSBsZSBjb21wdGUgcGFzIGRhbnMgbWF0Y2hlZEtleXdvcmRzLiBFeHBsaXF1ZSBsZSBcInBvdXJxdW9pXCIsIHBhcyBzZXVsZW1lbnQgbGUgXCJxdW9pXCIuXFxuLSBTdHJ1Y3R1cmUgZW4gM+KAkzUgcGFyYWdyYXBoZXMgY291cnRzIChleC46IEFkw6lxdWF0aW9uIGF1IHBvc3RlLCBGb3JjZXMgYWxpZ27DqWVzLCDDiWNhcnRzIGV0IHJlY29tbWFuZGF0aW9ucyBjaWJsw6llcywgQWp1c3RlbWVudHMgcHJvcG9zw6lzIHN1ciBsZXMgZXhww6lyaWVuY2VzL2J1bGxldHMsIFN5bnRow6hzZSkuXFxuLSBJbnTDqGdyZSAx4oCTMiBleGVtcGxlcyByw6llbHMgZGUgcsOpw6ljcml0dXJlIGRlIGJ1bGxldCAoYXZhbnQg4oaSIGFwcsOocyArIHJhaXNvbiksIGNvaMOpcmVudHMgYXZlYyByZXBvcnQuZGVjaXNpb25zLmJ1bGxldEVkaXRzLlxcbi0gQ29uc2VpbHMgZ8OpbsOpcmF1eCBhdXRvcmlzw6lzIHVuaXF1ZW1lbnQgcydpbHMgc29udCBwZXJ0aW5lbnRzIChleC46IHJldGlyZXIvZnVzaW9ubmVyIHVuZSBleHDDqXJpZW5jZSB0cm9wIGNvdXJ0ZSBvdSBob3JzLXNjb3BlKSwgZXQgZG9pdmVudCDDqnRyZSBqdXN0aWZpw6lzIHBhciBsZSBjb250ZW51IGR1IENWL0pEOyBuZSByaWVuIGludmVudGVyLlxcbi0gUsOIR0xFIFNQw4lDSUFMRSBTVEFHRS9JTlRFUk5TSElQOiBTaSB1biBzdGFnZSAoaW50ZXJuc2hpcCkgZXN0IGxhIGRlcm5pw6hyZSBleHDDqXJpZW5jZSBhdmFudCBsZSBwcmVtaWVyIGVtcGxvaSBFVCBjb250aWVudCBsZSBtb3QgXCJtw6ltb2lyZVwiIChvdSBcInRoZXNpc1wiIGVuIGFuZ2xhaXMpIEVUIGVzdCBkYW5zIGxlIG3Dqm1lIGRvbWFpbmUgcXVlIGxhIEpELCBUT1VKT1VSUyBsZSBwcsOpc2VydmVyIGRhbnMgcmVzdWx0LmV4cGVyaWVuY2VbXSBtw6ptZSBzJ2lsIGVzdCBhbmNpZW4uIEp1c3RpZmllIGNldHRlIGTDqWNpc2lvbiBkYW5zIHJlcG9ydC5kZWNpc2lvbnMua2VwdEV4cGVyaWVuY2VzLlxcbi0gUsOpZGlnZSBEQU5TIExBIExBTkdVRSBEJ09SSUdJTkUgRFUgQ1YgKGNsZWFuX2N2Lm1ldGFkYXRhLmxhbmd1YWdlKS4gTkUgUEFTIHRyYWR1aXJlLiBTdHlsZSBwcm9mZXNzaW9ubmVsLCBlbXBhdGhpcXVlLCBkaXJlY3QsIHNhbnMgcGhyYXNlcyBnw6luw6lyaXF1ZXMgbmkgcmVtcGxpc3NhZ2UsIHNhbnMgMXJlIHBlcnNvbm5lIGR1IHNpbmd1bGllci5cXG5gO1xyXG4gICAgICBjb25zdCBzeXN0ZW1Qcm9tcHRGdWxsID0gYCR7c3lzdGVtUHJvbXB0fVxcbiR7QVJCX0dVSURFTElORVN9XFxuJHtOQVJSQVRJVkVfQ0xJRU5UX1RPTkV9YDtcclxuICAgICAgY29uc3Qgc3VwcG9ydHNKc29uUmVzcG9uc2VGb3JtYXQgPSAhdXNlT1IgfHwgU3RyaW5nKGFyYk1vZGVsKS5zdGFydHNXaXRoKCdvcGVuYWkvJyk7XHJcbiAgICAgIGNvbnN0IHJlcTI6IGFueSA9IHtcclxuICAgICAgICBtb2RlbDogYXJiTW9kZWwsXHJcbiAgICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHN5c3RlbVByb21wdEZ1bGxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICAgICAgY29udGVudDogdXNlck1lc3NhZ2VcclxuICAgICAgICAgIH1cclxuICAgICAgICBdLFxyXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjAsXHJcbiAgICAgIH07XHJcbiAgICAgIGlmIChzdXBwb3J0c0pzb25SZXNwb25zZUZvcm1hdCkgcmVxMi5yZXNwb25zZV9mb3JtYXQgPSB7IHR5cGU6ICdqc29uX29iamVjdCcgfTtcclxuICAgICAgY29tcGxldGlvbiA9IGF3YWl0IG9wZW5haUFyYml0cmFnZS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZShyZXEyKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBPcGVuUm91dGVyIEFyYml0cmFnZTonLCBlcnJvcik7XHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6IGBFcnJldXIgbG9ycyBkZSBsJ2FyYml0cmFnZSBPcGVuUm91dGVyOiAke2Vycm9yTWVzc2FnZX1gIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXh0cmFpcmUgbGEgcsOpcG9uc2UgSlNPTlxyXG4gICAgY29uc3QgcmVzcG9uc2VDb250ZW50ID0gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50O1xyXG4gICAgaWYgKCFyZXNwb25zZUNvbnRlbnQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdSw6lwb25zZSB2aWRlIGRlIGxcXCdBUEkgT3BlblJvdXRlcicgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnPT09IMOJVEFQRSAzOiBWYWxpZGF0aW9uIGV0IHBhcnNpbmcgZHUgSlNPTiA9PT0nKTtcclxuXHJcbiAgICAvLyBQYXJzZXIgbGUgSlNPTlxyXG4gICAgbGV0IHBhcnNlZFRvcDogYW55O1xyXG4gICAgdHJ5IHtcclxuICAgICAgcGFyc2VkVG9wID0gSlNPTi5wYXJzZShyZXNwb25zZUNvbnRlbnQpO1xyXG4gICAgICBjb25zb2xlLmxvZygnSlNPTiBwYXJzw6kgYXZlYyBzdWNjw6hzJyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ0pTT04gc3RyaWN0IHBhcnNlIGZhaWxlZCwgdHJ5aW5nIHNhbHZhZ2U6JywgZXJyb3IpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHBhcnNlZFRvcCA9IHBhcnNlSnNvblN0cmljdE9yU2FsdmFnZShyZXNwb25zZUNvbnRlbnQpO1xyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogU3RyaW5nKGUpO1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgZXJyb3I6IGBSw6lwb25zZSBKU09OIGludmFsaWRlOiAke2Vycm9yTWVzc2FnZX1gIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWlSZXN1bHQgPSBwYXJzZWRUb3A/LnJlc3VsdCA/PyBwYXJzZWRUb3A7IC8vIGNvbXBhdCBzaSBhbmNpZW4gZm9ybWF0XHJcbiAgICBjb25zdCBhaVJlcG9ydCA9IHBhcnNlZFRvcD8ucmVwb3J0ID8/IG51bGw7XHJcbiAgICAvLyBTYW5pdGl6ZSBhbmQgdmFsaWRhdGUgd2l0aCBab2QgKEpTT04tb25seTogcGFzIGRlIGN2X3RleHQpXHJcbiAgICBjb25zdCBzYW5pdGl6ZWQgPSBzYW5pdGl6ZVJlc3VtZUZvclNjaGVtYShhaVJlc3VsdCwgeyBjdlRleHQ6ICcnLCBqZFRleHQgfSk7XHJcbiAgICBpZiAoc2FuaXRpemVkICYmIEFycmF5LmlzQXJyYXkoc2FuaXRpemVkLmV4cGVyaWVuY2UpKSB7XHJcbiAgICAgIHNhbml0aXplZC5leHBlcmllbmNlID0gc29ydEV4cGVyaWVuY2VBbnRpQ2hyb25vKHNhbml0aXplZC5leHBlcmllbmNlKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSBSZXN1bWVKU09OLnNhZmVQYXJzZShzYW5pdGl6ZWQpO1xyXG4gICAgaWYgKCF2YWxpZGF0aW9uUmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyZXVyIHZhbGlkYXRpb24gWm9kOicsIHZhbGlkYXRpb25SZXN1bHQuZXJyb3IpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIGVycm9yOiAnSlNPTiBnw6luw6lyw6kgbm9uIGNvbmZvcm1lIGF1IHNjaMOpbWEnLFxyXG4gICAgICAgICAgaXNzdWVzOiB2YWxpZGF0aW9uUmVzdWx0LmVycm9yLmlzc3Vlc1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQyMiB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJz09PSBTVUNDw4hTOiBKU09OIHZhbGlkw6kgYXZlYyBzdWNjw6hzID09PScpO1xyXG4gICAgY29uc29sZS5sb2coJ0Rvbm7DqWVzIGZpbmFsZXM6Jywge1xyXG4gICAgICBtZXRhZGF0YTogdmFsaWRhdGlvblJlc3VsdC5kYXRhLm1ldGFkYXRhLFxyXG4gICAgICBleHBlcmllbmNlQ291bnQ6IHZhbGlkYXRpb25SZXN1bHQuZGF0YS5leHBlcmllbmNlLmxlbmd0aCxcclxuICAgICAgaGFzU2tpbGxzOiAhIXZhbGlkYXRpb25SZXN1bHQuZGF0YS5za2lsbHMsXHJcbiAgICAgIGhhc1Byb2plY3RzOiAhIXZhbGlkYXRpb25SZXN1bHQuZGF0YS5wcm9qZWN0c1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2/Du3RzOiBhcmJpdHJhZ2VcclxuICAgIGNvbnN0IGFyYlVzYWdlID0gKGNvbXBsZXRpb24gYXMgYW55KT8udXNhZ2U7XHJcbiAgICBjb3N0LnN0ZXBzLnB1c2goeyBuYW1lOiAnYXJiaXRyYWdlJywgbW9kZWw6IGFyYk1vZGVsLCB1c2FnZTogYXJiVXNhZ2UsIHByaWNlX292ZXJyaWRlOiBhcmJQcmljZU92ZXJyaWRlIH0pO1xyXG5cclxuICAgIC8vIEp1ZGdlIGJvdGggcGhhc2VzIGlmIGVuYWJsZWRcclxuICAgIC8vIEVuZm9yY2Ugc3VtbWFyeSByZXdyaXRlOiBpZiBzdW1tYXJ5IHVuY2hhbmdlZCBvciBlbXB0eSwgcmV3cml0ZSBpdCBhbGlnbmVkIHRvIEpEIHVzaW5nIG9ubHkgZmFjdHMgZnJvbSBjbGVhbl9jdlxyXG4gICAgY29uc3QgYmVmb3JlQ3YgPSBjbGVhbkN2O1xyXG4gICAgbGV0IGFmdGVyQ3Y6IGFueSA9IHZhbGlkYXRpb25SZXN1bHQuZGF0YTtcclxuICAgIGNvbnN0IG5vcm1UZXh0ID0gKHM6IGFueSkgPT4gU3RyaW5nKHMgfHwgJycpLnJlcGxhY2UoL1tcXHNcXHUwMEEwXSsvZywgJyAnKS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICAgIGNvbnN0IGphY2NhcmQgPSAoYTogc3RyaW5nLCBiOiBzdHJpbmcpID0+IHtcclxuICAgICAgY29uc3QgdG9rID0gKHQ6IHN0cmluZykgPT4gbmV3IFNldCh0LnNwbGl0KC9bXmEtejAtOV0rL2dpKS5maWx0ZXIoQm9vbGVhbikpO1xyXG4gICAgICBjb25zdCBBID0gdG9rKGEpO1xyXG4gICAgICBjb25zdCBCID0gdG9rKGIpO1xyXG4gICAgICBjb25zdCBzaXplQSA9IEEuc2l6ZTtcclxuICAgICAgY29uc3Qgc2l6ZUIgPSBCLnNpemU7XHJcbiAgICAgIGlmIChzaXplQSA9PT0gMCAmJiBzaXplQiA9PT0gMCkgcmV0dXJuIDE7XHJcbiAgICAgIGxldCBpbnRlckNvdW50ID0gMDtcclxuICAgICAgQS5mb3JFYWNoKCh4KSA9PiB7IGlmIChCLmhhcyh4KSkgaW50ZXJDb3VudCsrOyB9KTtcclxuICAgICAgY29uc3QgdW5pb25Db3VudCA9IHNpemVBICsgc2l6ZUIgLSBpbnRlckNvdW50O1xyXG4gICAgICByZXR1cm4gaW50ZXJDb3VudCAvIE1hdGgubWF4KDEsIHVuaW9uQ291bnQpO1xyXG4gICAgfTtcclxuICAgIC8vIChsYW5nIHJlbW92ZWQpIG5vIEZSL0VOIHRhcmdldExhbmcgZm9yY2luZ1xyXG4gICAgY29uc3QgbmVlZHNSZXdyaXRlID0gIWFmdGVyQ3Yuc3VtbWFyeSB8fCBqYWNjYXJkKG5vcm1UZXh0KGFmdGVyQ3Yuc3VtbWFyeSksIG5vcm1UZXh0KGJlZm9yZUN2Py5zdW1tYXJ5KSkgPj0gMC44NTtcclxuICAgIGlmIChuZWVkc1Jld3JpdGUpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBvcmlnTGFiZWwgPSBTdHJpbmcoYmVmb3JlQ3Y/Lm1ldGFkYXRhPy5sYW5ndWFnZSB8fCAnJykudHJpbSgpO1xyXG4gICAgICAgIGNvbnN0IHN1bW1hcnlTeXMgPSBgWW91IHJld3JpdGUgYSBwcm9mZXNzaW9uYWwgcmVzdW1lIHN1bW1hcnkgc3RyaWN0bHkgZnJvbSBjbGVhbl9jdiBmYWN0cyB0byBhbGlnbiB3aXRoIHRoZSBnaXZlbiBqb2IgZGVzY3JpcHRpb24uIFJ1bGVzOiAy4oCTMyBzZW50ZW5jZXMsIOKJpCA0MDAgY2hhcmFjdGVycy4gSU1QT1JUQU5UOiBPdXRwdXQgTVVTVCBiZSBpbiBcIiR7b3JpZ0xhYmVsfVwiIGxhbmd1YWdlIChleGFjdGx5IHRoZSBzYW1lIGFzIGNsZWFuX2N2Lm1ldGFkYXRhLmxhbmd1YWdlKS4gRE8gTk9UIHRyYW5zbGF0ZS4gSW1wZXJzb25hbCBwcm9mZXNzaW9uYWwgdG9uZSAobm8gZmlyc3TigJFwZXJzb24pLCBubyBidWxsZXQgbGlzdCwgbm8gbmV3IGZhY3RzIG9yIG1ldHJpY3MsIG5vIGNvbXBhbnkgbmFtZXMgbm90IGluIGNsZWFuX2N2LmA7XHJcbiAgICAgICAgY29uc3Qgc3VtbWFyeVVzZXIgPSBKU09OLnN0cmluZ2lmeSh7IGNsZWFuX2N2OiBiZWZvcmVDdiwgamRfdGV4dDogamRUZXh0IH0pO1xyXG4gICAgICAgIGNvbnN0IG1ha2VSZXEgPSAoc3lzOiBzdHJpbmcpID0+ICh7XHJcbiAgICAgICAgICBtb2RlbDogYXJiTW9kZWwsXHJcbiAgICAgICAgICBtZXNzYWdlczogW1xyXG4gICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBzeXMgfSxcclxuICAgICAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHN1bW1hcnlVc2VyIH0sXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgICAgdGVtcGVyYXR1cmU6IDAuMCxcclxuICAgICAgICAgIG1heF90b2tlbnM6IDIyMCxcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBQYXNzIDFcclxuICAgICAgICBjb25zdCBjb21wMSA9IGF3YWl0IG9wZW5haUFyYml0cmFnZS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZShtYWtlUmVxKHN1bW1hcnlTeXMpKTtcclxuICAgICAgICBsZXQgY2FuZGlkYXRlID0gKGNvbXAxLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudCB8fCAnJykudHJpbSgpO1xyXG4gICAgICAgIGNvc3Quc3RlcHMucHVzaCh7IG5hbWU6ICdzdW1tYXJ5X3Jld3JpdGUnLCBtb2RlbDogYXJiTW9kZWwsIHVzYWdlOiAoY29tcDEgYXMgYW55KT8udXNhZ2UgfSk7XHJcbiAgICAgICAgLy8gSWYgc3RpbGwgdG9vIHNpbWlsYXIsIFBhc3MgMiB3aXRoIHN0cm9uZ2VyIHBhcmFwaHJhc2UgaW5zdHJ1Y3Rpb25cclxuICAgICAgICBpZiAoIWNhbmRpZGF0ZSB8fCBqYWNjYXJkKG5vcm1UZXh0KGNhbmRpZGF0ZSksIG5vcm1UZXh0KGJlZm9yZUN2Py5zdW1tYXJ5KSkgPj0gMC44NSkge1xyXG4gICAgICAgICAgY29uc3Qgc3Ryb25nU3lzID0gc3VtbWFyeVN5cyArICcgUGFyYXBocmFzZSBzdHJvbmdseS4gRG8gbm90IHJldXNlIHByZXZpb3VzIHNlbnRlbmNlIHN0cnVjdHVyZXMuIEludGVncmF0ZSBKRCB0ZXJtaW5vbG9neSBvbmx5IHdoZW4gYW4gZXF1aXZhbGVudCBleGlzdHMgaW4gY2xlYW5fY3YuJztcclxuICAgICAgICAgIGNvbnN0IGNvbXAyID0gYXdhaXQgb3BlbmFpQXJiaXRyYWdlLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKG1ha2VSZXEoc3Ryb25nU3lzKSk7XHJcbiAgICAgICAgICBjb25zdCBjYW5kMiA9IChjb21wMi5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgfHwgJycpLnRyaW0oKTtcclxuICAgICAgICAgIGlmIChjYW5kMikgY2FuZGlkYXRlID0gY2FuZDI7XHJcbiAgICAgICAgICBjb3N0LnN0ZXBzLnB1c2goeyBuYW1lOiAnc3VtbWFyeV9yZXdyaXRlX3JldHJ5JywgbW9kZWw6IGFyYk1vZGVsLCB1c2FnZTogKGNvbXAyIGFzIGFueSk/LnVzYWdlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2FuZGlkYXRlKSBhZnRlckN2LnN1bW1hcnkgPSBjYW5kaWRhdGU7XHJcbiAgICAgICAgLy8gU3RyaWN0IGd1YXJkOiBpZiBsYW5ndWFnZSBjaGFuZ2VkLCByZXZlcnQgdG8gb3JpZ2luYWwgc3VtbWFyeVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBvcmlnTGFuZyA9IFN0cmluZyhiZWZvcmVDdj8ubWV0YWRhdGE/Lmxhbmd1YWdlIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgY29uc3QgZGV0TGFuZyA9IGRldGVjdExhbmdMb29zZShhZnRlckN2LnN1bW1hcnkgfHwgJycpO1xyXG4gICAgICAgICAgaWYgKG9yaWdMYW5nICYmIGRldExhbmcgIT09ICd1bmtub3duJyAmJiBkZXRMYW5nICE9PSBvcmlnTGFuZykge1xyXG4gICAgICAgICAgICBhZnRlckN2LnN1bW1hcnkgPSBiZWZvcmVDdi5zdW1tYXJ5IHx8IGFmdGVyQ3Yuc3VtbWFyeTtcclxuICAgICAgICAgICAgY29zdC5zdGVwcy5wdXNoKHsgbmFtZTogJ3N1bW1hcnlfbGFuZ3VhZ2VfZ3VhcmRfcmV2ZXJ0JywgbW9kZWw6ICdzZXJ2ZXInLCB1c2FnZTogeyBub3RlOiAncmV2ZXJ0ZWQgdG8gb3JpZ2luYWwgc3VtbWFyeSBkdWUgdG8gbGFuZ3VhZ2UgbWlzbWF0Y2gnIH0gfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCB7fVxyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdTdW1tYXJ5IHJld3JpdGUgc2tpcHBlZCBkdWUgdG8gZXJyb3I6JywgZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEVuZm9yY2Ugb3JpZ2luYWwgbGFuZ3VhZ2Ugb24gc2VjdGlvbnMgKGd1YXJkIGFnYWluc3QgdHJhbnNsYXRpb24pXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBvcmlnTGFuZyA9IFN0cmluZyhiZWZvcmVDdj8ubWV0YWRhdGE/Lmxhbmd1YWdlIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICBlbmZvcmNlT3JpZ2luYWxMYW5ndWFnZUNWKGFmdGVyQ3YsIGJlZm9yZUN2LCBvcmlnTGFuZyk7XHJcbiAgICB9IGNhdGNoIHt9XHJcbiAgICB7XHJcbiAgICAgIGNvbnN0IG9yaWdMYW5nID0gU3RyaW5nKGJlZm9yZUN2Py5tZXRhZGF0YT8ubGFuZ3VhZ2UgfHwgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIGNvbnN0IGRldExhbmcgPSBkZXRlY3RMYW5nTG9vc2UoYWZ0ZXJDdi5zdW1tYXJ5IHx8ICcnKTtcclxuICAgICAgaWYgKG9yaWdMYW5nICYmIGRldExhbmcgIT09ICd1bmtub3duJyAmJiBkZXRMYW5nICE9PSBvcmlnTGFuZykge1xyXG4gICAgICAgIGFmdGVyQ3Yuc3VtbWFyeSA9IGJlZm9yZUN2LnN1bW1hcnkgfHwgYWZ0ZXJDdi5zdW1tYXJ5O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBSZWNsYXNzaWZ5IHJlbW92ZWQgZXhwZXJpZW5jZXMgYXMgZWR1Y2F0aW9uIHdoZW4gYXBwcm9wcmlhdGVcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG5vcm1TdHIyID0gKHM6IGFueSkgPT4gU3RyaW5nKHMgfHwgJycpLnJlcGxhY2UoL1tcXHNcXHUwMEEwXSsvZywgJyAnKS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgY29uc3Qgc2lnMiA9IChlOiBhbnkpID0+IFtub3JtU3RyMihlPy5jb21wYW55KSwgbm9ybVN0cjIoZT8uc3RhcnREYXRlIHx8IGU/LnN0YXJ0RGF0ZVJhdyksIG5vcm1TdHIyKGU/LmVuZERhdGUgfHwgZT8uZW5kRGF0ZVJhdyldLmpvaW4oJ3wnKTtcclxuICAgICAgY29uc3QgYmVmb3JlTGlzdDIgPSBBcnJheS5pc0FycmF5KGJlZm9yZUN2Py5leHBlcmllbmNlKSA/IGJlZm9yZUN2LmV4cGVyaWVuY2UgOiBbXTtcclxuICAgICAgY29uc3QgYWZ0ZXJMaXN0MiA9IEFycmF5LmlzQXJyYXkoYWZ0ZXJDdj8uZXhwZXJpZW5jZSkgPyBhZnRlckN2LmV4cGVyaWVuY2UgOiBbXTtcclxuICAgICAgY29uc3QgYWZ0ZXJTaWdzMiA9IG5ldyBTZXQoYWZ0ZXJMaXN0Mi5tYXAoc2lnMikpO1xyXG4gICAgICBjb25zdCBlbnN1cmVFZHUyID0gKCkgPT4geyBpZiAoIUFycmF5LmlzQXJyYXkoYWZ0ZXJDdi5lZHVjYXRpb24pKSBhZnRlckN2LmVkdWNhdGlvbiA9IFtdOyB9O1xyXG4gICAgICBjb25zdCBlZHVLZXkyID0gKHg6IGFueSkgPT4gW25vcm1TdHIyKHg/LnNjaG9vbCksIG5vcm1TdHIyKHg/LmRhdGVzKV0uam9pbignfCcpO1xyXG4gICAgICBjb25zdCBoYXNFZHUyID0gKHJlYzogYW55KSA9PiAoYWZ0ZXJDdi5lZHVjYXRpb24gfHwgW10pLnNvbWUoKHg6IGFueSkgPT4gZWR1S2V5Mih4KSA9PT0gZWR1S2V5MihyZWMpKTtcclxuICAgICAgYmVmb3JlTGlzdDIuZm9yRWFjaCgoZTogYW55KSA9PiB7XHJcbiAgICAgICAgaWYgKCFlKSByZXR1cm47XHJcbiAgICAgICAgaWYgKGFmdGVyU2lnczIuaGFzKHNpZzIoZSkpKSByZXR1cm47IC8vIG5vdCByZW1vdmVkXHJcbiAgICAgICAgaWYgKCFpc0xpa2VseUVkdWNhdGlvbkVudHJ5KGUpKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgcmVjID0gbWFwRXhwZXJpZW5jZVRvRWR1Y2F0aW9uKGUpO1xyXG4gICAgICAgIGlmICghcmVjPy5zY2hvb2wpIHJldHVybjtcclxuICAgICAgICBlbnN1cmVFZHUyKCk7XHJcbiAgICAgICAgaWYgKCFoYXNFZHUyKHJlYykpIGFmdGVyQ3YuZWR1Y2F0aW9uLnB1c2gocmVjKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIHt9XHJcbiAgICAvLyBQcmVzZXJ2ZSBoZWFkZXIgZXhhY3RseSBmcm9tIGNsZWFuIENWIChuYW1lLCBlbWFpbCwgcGhvbmUsIGxpbmtzKVxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKGJlZm9yZUN2Py5oZWFkZXIpIHtcclxuICAgICAgICBhZnRlckN2LmhlYWRlciA9IGJlZm9yZUN2LmhlYWRlcjtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCB7fVxyXG4gICAgLy8gTWVyZ2Ugb3JpZ2luYWwgZWR1Y2F0aW9uIHdpdGggQUkgYWRkaXRpb25zIChhcHBlbmQtb25seSwgZGVkdXAsIG1heCA4KSDigJQgZnVsbCBmbG93XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBiYXNlID0gQXJyYXkuaXNBcnJheShiZWZvcmVDdj8uZWR1Y2F0aW9uKSA/IGJlZm9yZUN2LmVkdWNhdGlvbiA6IFtdO1xyXG4gICAgICBjb25zdCBhaUVkdSA9IEFycmF5LmlzQXJyYXkoYWZ0ZXJDdj8uZWR1Y2F0aW9uKSA/IGFmdGVyQ3YuZWR1Y2F0aW9uIDogW107XHJcbiAgICAgIGNvbnN0IG5vcm1FID0gKHM6IGFueSkgPT4gU3RyaW5nKHMgfHwgJycpLnJlcGxhY2UoL1tcXHNcXHUwMEEwXSsvZywgJyAnKS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgY29uc3Qga2V5RSA9IChlOiBhbnkpID0+IFtub3JtRShlPy5zY2hvb2wpLCBub3JtRShlPy5kYXRlcyB8fCAoKGU/LnN0YXJ0RGF0ZSB8fCAnJykgKyAn4oCTJyArIChlPy5lbmREYXRlIHx8ICcnKSkpXS5qb2luKCd8Jyk7XHJcbiAgICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0KGJhc2UubWFwKGtleUUpKTtcclxuICAgICAgY29uc3QgbWVyZ2VkOiBhbnlbXSA9IGJhc2Uuc2xpY2UoKTtcclxuICAgICAgYWlFZHUuZm9yRWFjaCgoZTogYW55KSA9PiB7XHJcbiAgICAgICAgaWYgKCFlIHx8ICFlLnNjaG9vbCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IG9iajogYW55ID0geyBzY2hvb2w6IGUuc2Nob29sIH07XHJcbiAgICAgICAgaWYgKGUuZGVncmVlKSBvYmouZGVncmVlID0gZS5kZWdyZWU7XHJcbiAgICAgICAgaWYgKGUubG9jYXRpb24pIG9iai5sb2NhdGlvbiA9IGUubG9jYXRpb247XHJcbiAgICAgICAgaWYgKGUuZGF0ZXMpIHtcclxuICAgICAgICAgIG9iai5kYXRlcyA9IGUuZGF0ZXM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IHNkID0gZS5zdGFydERhdGU7XHJcbiAgICAgICAgICBjb25zdCBlZCA9IGUuZW5kRGF0ZSAmJiBlLmVuZERhdGUgIT09ICdQcmVzZW50JyA/IGUuZW5kRGF0ZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgIGNvbnN0IGQgPSBbc2QsIGVkXS5maWx0ZXIoQm9vbGVhbikuam9pbign4oCTJyk7XHJcbiAgICAgICAgICBpZiAoZCkgb2JqLmRhdGVzID0gZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgayA9IGtleUUob2JqKTtcclxuICAgICAgICBpZiAoIXNlZW4uaGFzKGspKSB7IHNlZW4uYWRkKGspOyBtZXJnZWQucHVzaChvYmopOyB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBhZnRlckN2LmVkdWNhdGlvbiA9IG1lcmdlZC5zbGljZSgwLCA4KTtcclxuICAgIH0gY2F0Y2gge31cclxuICAgIC8vIEVuZm9yY2UgbWV0YWRhdGEubGFuZ3VhZ2UgdG8gb3JpZ2luYWwgQ1YgbGFuZ3VhZ2VcclxuICAgIHRyeSB7XHJcbiAgICAgIGFmdGVyQ3YubWV0YWRhdGEgPSBhZnRlckN2Lm1ldGFkYXRhIHx8IHt9O1xyXG4gICAgICBhZnRlckN2Lm1ldGFkYXRhLmxhbmd1YWdlID0gYmVmb3JlQ3Y/Lm1ldGFkYXRhPy5sYW5ndWFnZSB8fCAndW5rbm93bic7XHJcbiAgICB9IGNhdGNoIHt9XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBub3JtQSA9IChzOiBhbnkpID0+IFN0cmluZyhzIHx8ICcnKS5yZXBsYWNlKC9bXFxzXFx1MDBBMF0rL2csICcgJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFmdGVyQ3Y/LmVkdWNhdGlvbikpIHtcclxuICAgICAgICBjb25zdCBjYW5vbkRhdGVBID0gKHM6IGFueSkgPT4gbm9ybUEoU3RyaW5nKHMgfHwgJycpXHJcbiAgICAgICAgICAucmVwbGFjZSgvW1xcdTIwMTJcXHUyMDEzXFx1MjAxNFxcdTIwMTVcXHUyMjEyXS9nLCAnLScpXHJcbiAgICAgICAgICAucmVwbGFjZSgvXFxzKi1cXHMqL2csICctJylcclxuICAgICAgICAgIC5yZXBsYWNlKC8tKy9nLCAnLScpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zdCBrZXlFID0gKGU6IGFueSkgPT4gW25vcm1BKGU/LnNjaG9vbCksIGNhbm9uRGF0ZUEoZT8uZGF0ZXMgfHwgKChlPy5zdGFydERhdGUgfHwgJycpICsgJy0nICsgKGU/LmVuZERhdGUgfHwgJycpKSkgXS5qb2luKCd8Jyk7XHJcbiAgICAgICAgY29uc3QgbWFwID0gbmV3IE1hcDxzdHJpbmcsIGFueT4oKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgYWZ0ZXJDdi5lZHVjYXRpb24pIHtcclxuICAgICAgICAgIGlmICghZSB8fCAhZS5zY2hvb2wpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgY29uc3Qgb2JqOiBhbnkgPSB7IHNjaG9vbDogZS5zY2hvb2wgfTtcclxuICAgICAgICAgIGlmIChlLmRlZ3JlZSkgb2JqLmRlZ3JlZSA9IGUuZGVncmVlO1xyXG4gICAgICAgICAgaWYgKGUubG9jYXRpb24pIG9iai5sb2NhdGlvbiA9IGUubG9jYXRpb247XHJcbiAgICAgICAgICBpZiAoZS5kYXRlcykgb2JqLmRhdGVzID0gZS5kYXRlczsgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNkID0gZS5zdGFydERhdGU7IGNvbnN0IGVkID0gZS5lbmREYXRlICYmIGUuZW5kRGF0ZSAhPT0gJ1ByZXNlbnQnID8gZS5lbmREYXRlIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBjb25zdCBkID0gW3NkLCBlZF0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJy0nKTsgaWYgKGQpIG9iai5kYXRlcyA9IGQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCBrID0ga2V5RShvYmopO1xyXG4gICAgICAgICAgaWYgKCFtYXAuaGFzKGspKSBtYXAuc2V0KGssIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFmdGVyQ3YuZWR1Y2F0aW9uID0gQXJyYXkuZnJvbShtYXAudmFsdWVzKCkpLnNsaWNlKDAsIDgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFmdGVyQ3Y/LmV4cGVyaWVuY2UpKSB7XHJcbiAgICAgICAgY29uc3Qga2V5WCA9IChlOiBhbnkpID0+IFtub3JtQShlPy5jb21wYW55KSwgbm9ybUEoZT8udGl0bGUpLCBub3JtQShlPy5zdGFydERhdGUgfHwgZT8uc3RhcnREYXRlUmF3KSwgbm9ybUEoZT8uZW5kRGF0ZSB8fCBlPy5lbmREYXRlUmF3KV0uam9pbignfCcpO1xyXG4gICAgICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgICAgICBjb25zdCBsaXN0OiBhbnlbXSA9IFtdO1xyXG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBhZnRlckN2LmV4cGVyaWVuY2UpIHtcclxuICAgICAgICAgIGlmICghZSB8fCAhZS5jb21wYW55IHx8ICFlLnRpdGxlKSBjb250aW51ZTtcclxuICAgICAgICAgIGNvbnN0IGsgPSBrZXlYKGUpO1xyXG4gICAgICAgICAgaWYgKHNlZW4uaGFzKGspKSBjb250aW51ZTtcclxuICAgICAgICAgIHNlZW4uYWRkKGspO1xyXG4gICAgICAgICAgY29uc3Qgb3JpZ0J1bCA9IEFycmF5LmlzQXJyYXkoZT8uYnVsbGV0cykgPyBlLmJ1bGxldHMgOiBbXTtcclxuICAgICAgICAgIGNvbnN0IHNlZW5CID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgICAgICAgICBjb25zdCBuYjogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgIGZvciAoY29uc3QgYiBvZiBvcmlnQnVsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHMgPSBTdHJpbmcoYiB8fCAnJykudHJpbSgpO1xyXG4gICAgICAgICAgICBpZiAoIXMpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBjb25zdCBrYiA9IG5vcm1BKHMpO1xyXG4gICAgICAgICAgICBpZiAoc2VlbkIuaGFzKGtiKSkgY29udGludWU7XHJcbiAgICAgICAgICAgIHNlZW5CLmFkZChrYik7XHJcbiAgICAgICAgICAgIG5iLnB1c2gocyk7XHJcbiAgICAgICAgICAgIGlmIChuYi5sZW5ndGggPj0gNSkgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBsaXN0LnB1c2goeyAuLi5lLCBidWxsZXRzOiBuYi5sZW5ndGggPyBuYiA6IHVuZGVmaW5lZCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWZ0ZXJDdi5leHBlcmllbmNlID0gbGlzdC5zbGljZSgwLCA2KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhZnRlckN2Py5wcm9qZWN0cykpIHtcclxuICAgICAgICBjb25zdCBrZXlQID0gKHA6IGFueSkgPT4gW25vcm1BKHA/Lm5hbWUpLCBub3JtQShwPy5kYXRlcyldLmpvaW4oJ3wnKTtcclxuICAgICAgICBjb25zdCBtYXAgPSBuZXcgTWFwPHN0cmluZywgYW55PigpO1xyXG4gICAgICAgIGZvciAoY29uc3QgcCBvZiBhZnRlckN2LnByb2plY3RzKSB7XHJcbiAgICAgICAgICBpZiAoIXAgfHwgIXAubmFtZSkgY29udGludWU7XHJcbiAgICAgICAgICBjb25zdCBrID0ga2V5UChwKTtcclxuICAgICAgICAgIGlmIChtYXAuaGFzKGspKSBjb250aW51ZTtcclxuICAgICAgICAgIGNvbnN0IG9yaWdCdWwgPSBBcnJheS5pc0FycmF5KHA/LmJ1bGxldHMpID8gcC5idWxsZXRzIDogW107XHJcbiAgICAgICAgICBjb25zdCBzZWVuQiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgICAgICAgY29uc3QgbmI6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGIgb2Ygb3JpZ0J1bCkge1xyXG4gICAgICAgICAgICBjb25zdCBzID0gU3RyaW5nKGIgfHwgJycpLnRyaW0oKTtcclxuICAgICAgICAgICAgaWYgKCFzKSBjb250aW51ZTtcclxuICAgICAgICAgICAgY29uc3Qga2IgPSBub3JtQShzKTtcclxuICAgICAgICAgICAgaWYgKHNlZW5CLmhhcyhrYikpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBzZWVuQi5hZGQoa2IpO1xyXG4gICAgICAgICAgICBuYi5wdXNoKHMpO1xyXG4gICAgICAgICAgICBpZiAobmIubGVuZ3RoID49IDQpIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc3Qgb2JqOiBhbnkgPSB7IG5hbWU6IHAubmFtZSB9O1xyXG4gICAgICAgICAgaWYgKHAuZGF0ZXMpIG9iai5kYXRlcyA9IHAuZGF0ZXM7XHJcbiAgICAgICAgICBpZiAobmIubGVuZ3RoKSBvYmouYnVsbGV0cyA9IG5iO1xyXG4gICAgICAgICAgbWFwLnNldChrLCBvYmopO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhZnRlckN2LnByb2plY3RzID0gQXJyYXkuZnJvbShtYXAudmFsdWVzKCkpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChhZnRlckN2Py5za2lsbHMpIHtcclxuICAgICAgICBjb25zdCBkZWR1cEFyciA9IChhcnI/OiBzdHJpbmdbXSkgPT4gQXJyYXkuaXNBcnJheShhcnIpID8gQXJyYXkuZnJvbShuZXcgTWFwKGFyci5tYXAocyA9PiBbbm9ybUEocyksIHNdKSkudmFsdWVzKCkpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGFmdGVyQ3Yuc2tpbGxzLmxhbmd1YWdlcyA9IGRlZHVwQXJyKGFmdGVyQ3Yuc2tpbGxzLmxhbmd1YWdlcyk7XHJcbiAgICAgICAgYWZ0ZXJDdi5za2lsbHMuZnJhbWV3b3JrcyA9IGRlZHVwQXJyKGFmdGVyQ3Yuc2tpbGxzLmZyYW1ld29ya3MpO1xyXG4gICAgICAgIGFmdGVyQ3Yuc2tpbGxzLnRvb2xzID0gZGVkdXBBcnIoYWZ0ZXJDdi5za2lsbHMudG9vbHMpO1xyXG4gICAgICAgIGlmICgnb3RoZXInIGluIGFmdGVyQ3Yuc2tpbGxzKSBhZnRlckN2LnNraWxscy5vdGhlciA9IGRlZHVwQXJyKChhZnRlckN2IGFzIGFueSkuc2tpbGxzLm90aGVyKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhZnRlckN2Py5sYW5ndWFnZXMpKSB7XHJcbiAgICAgICAgYWZ0ZXJDdi5sYW5ndWFnZXMgPSBBcnJheS5mcm9tKG5ldyBNYXAoYWZ0ZXJDdi5sYW5ndWFnZXMubWFwKChzOiBhbnkpID0+IFtub3JtQShzKSwgc10pKS52YWx1ZXMoKSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYWZ0ZXJDdj8uY2VydGlmaWNhdGlvbnMpKSB7XHJcbiAgICAgICAgYWZ0ZXJDdi5jZXJ0aWZpY2F0aW9ucyA9IEFycmF5LmZyb20obmV3IE1hcChhZnRlckN2LmNlcnRpZmljYXRpb25zLm1hcCgoczogYW55KSA9PiBbbm9ybUEocyksIHNdKSkudmFsdWVzKCkpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KChhZnRlckN2IGFzIGFueSk/Lm90aGVyU2VjdGlvbnMpKSB7XHJcbiAgICAgICAgY29uc3Qgc2VjQXJyOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNlZW5UID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBzZWMgb2YgYWZ0ZXJDdi5vdGhlclNlY3Rpb25zKSB7XHJcbiAgICAgICAgICBpZiAoIXNlYyB8fCAhc2VjLnRpdGxlIHx8ICFBcnJheS5pc0FycmF5KHNlYy5pdGVtcykpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgY29uc3QgdEsgPSBub3JtQShzZWMudGl0bGUpO1xyXG4gICAgICAgICAgaWYgKHNlZW5ULmhhcyh0SykpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgc2VlblQuYWRkKHRLKTtcclxuICAgICAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShuZXcgTWFwKHNlYy5pdGVtcy5tYXAoKHM6IGFueSkgPT4gW25vcm1BKHMpLCBzXSkpLnZhbHVlcygpKTtcclxuICAgICAgICAgIHNlY0Fyci5wdXNoKHsgdGl0bGU6IHNlYy50aXRsZSwgaXRlbXMgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFmdGVyQ3Yub3RoZXJTZWN0aW9ucyA9IHNlY0FycjtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCB7fVxyXG4gICAgLy8gQnVsbGV0cyBYWVogcmV3cml0ZSBwZXIgZXhwZXJpZW5jZSAoZnVsbCBmbG93KVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgb3JpZ0xhbmcgPSBTdHJpbmcoYmVmb3JlQ3Y/Lm1ldGFkYXRhPy5sYW5ndWFnZSB8fCAnJykudHJpbSgpO1xyXG4gICAgICBjb25zdCBnZXRLZXl3b3JkcyA9IChzOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBjb25zdCB0b2tzID0gU3RyaW5nKHMgfHwgJycpLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1teYS16MC05Ky4jXS9naSkuZmlsdGVyKHcgPT4gdy5sZW5ndGggPj0gMyk7XHJcbiAgICAgICAgY29uc3QgZnJlcSA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcbiAgICAgICAgdG9rcy5mb3JFYWNoKHcgPT4gZnJlcS5zZXQodywgKGZyZXEuZ2V0KHcpIHx8IDApICsgMSkpO1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKGZyZXEuZW50cmllcygpKS5zb3J0KChhLGIpPT5iWzFdLWFbMV0pLm1hcCgoW3ddKT0+dykuc2xpY2UoMCwgMjApO1xyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBqZEt3ID0gZ2V0S2V5d29yZHMoamRUZXh0IHx8ICcnKTtcclxuICAgICAgY29uc3QgbnVtc1JlZ2V4ID0gL1xcYlxcZFtcXGQuLF0qJT9cXGIvZztcclxuICAgICAgY29uc3Qgd29yZHMyMiA9IChzOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IFN0cmluZyhzIHx8ICcnKS50cmltKCkuc3BsaXQoL1xccysvKTtcclxuICAgICAgICByZXR1cm4gcGFydHMubGVuZ3RoID4gMjIgPyBwYXJ0cy5zbGljZSgwLCAyMikuam9pbignICcpIDogU3RyaW5nKHMgfHwgJycpLnRyaW0oKTtcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgdmVyYnNVbmlvbiA9IGZpbHRlckZvckFUUyhnZXRWZXJicyhBQ1RJT05fVkVSQl9DQVRFR09SSUVTKSk7XHJcbiAgICAgIGNvbnN0IHZlcmJzU2V0ID0gbmV3IFNldCh2ZXJic1VuaW9uLm1hcCh2ID0+IHYudG9Mb3dlckNhc2UoKSkpO1xyXG4gICAgICBjb25zdCBTRUVEID0gYEFDVElPTiBWRVJCIFNUQVJURVIgU0VFRCAoRW5nbGlzaCBmb3JtcyBmb3IgZ3VpZGFuY2Ugb25seTsgZG8gTk9UIHRyYW5zbGF0ZSB0aGUgcmVzdCk6ICR7dmVyYnNVbmlvbi5zbGljZSgwLCA2MCkuam9pbignLCAnKX1gO1xyXG4gICAgICBjb25zdCBkZWZhdWx0VmVyYkJ5TGFuZzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHsgZW46ICdJbXBsZW1lbnRlZCcsIGZyOiAnUsOpYWxpc8OpJyB9O1xyXG4gICAgICBjb25zdCBlbnN1cmVBY3Rpb25WZXJiU3RhcnQgPSAodGV4dDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYmVmb3JlID0gU3RyaW5nKHRleHQgfHwgJycpLnRyaW0oKTtcclxuICAgICAgICBpZiAoIWJlZm9yZSkgcmV0dXJuIHsgY2hhbmdlZDogZmFsc2UsIHZhbHVlOiBiZWZvcmUgfTtcclxuICAgICAgICBjb25zdCBsYW5nID0gKG9yaWdMYW5nIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IHMgPSBiZWZvcmUucmVwbGFjZSgvXlst4oCiKuKAlOKAk11cXHMqLywgJycpO1xyXG4gICAgICAgIGNvbnN0IGZpcnN0ID0gcy5zcGxpdCgvXFxzKy8pWzBdIHx8ICcnO1xyXG4gICAgICAgIGlmIChsYW5nID09PSAnZW4nKSB7XHJcbiAgICAgICAgICBpZiAodmVyYnNTZXQuaGFzKGZpcnN0LnRvTG93ZXJDYXNlKCkpKSByZXR1cm4geyBjaGFuZ2VkOiBiZWZvcmUgIT09IHMsIHZhbHVlOiBzIH07XHJcbiAgICAgICAgICByZXR1cm4geyBjaGFuZ2VkOiB0cnVlLCB2YWx1ZTogYCR7ZGVmYXVsdFZlcmJCeUxhbmcuZW59ICR7c31gLnJlcGxhY2UoL1xcc3syLH0vZywgJyAnKS50cmltKCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhbmcgPT09ICdmcicpIHtcclxuICAgICAgICAgIGlmICgvXltBLVrDgC3DlsOYLcOeXS8udGVzdChmaXJzdCkpIHJldHVybiB7IGNoYW5nZWQ6IGJlZm9yZSAhPT0gcywgdmFsdWU6IHMgfTtcclxuICAgICAgICAgIHJldHVybiB7IGNoYW5nZWQ6IHRydWUsIHZhbHVlOiBgJHtkZWZhdWx0VmVyYkJ5TGFuZy5mcn0gJHtzfWAucmVwbGFjZSgvXFxzezIsfS9nLCAnICcpLnRyaW0oKSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBPdGhlciBsYW5ndWFnZXM6IGRvIE5PVCBwcmVmaXggKGF2b2lkIGNyb3NzLWxhbmd1YWdlIGluamVjdGlvbik7IG9ubHkgdHJpbSBsZWFkaW5nIGJ1bGxldCBzeW1ib2wuXHJcbiAgICAgICAgcmV0dXJuIHsgY2hhbmdlZDogYmVmb3JlICE9PSBzLCB2YWx1ZTogcyB9O1xyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBMTE1fU1lTVEVNID0gW1xyXG4gICAgICAgICdZb3UgcmV3cml0ZSByZXN1bWUgYnVsbGV0cyB1c2luZyB0aGUgWFlaIGZvcm11bGE6IFwiQWNjb21wbGlzaGVkIFtYXSBhcyBtZWFzdXJlZCBieSBbWV0gYnkgZG9pbmcgW1pdLlwiJyxcclxuICAgICAgICAnLSBTdGFydCB3aXRoIGEgc3Ryb25nIEFDVElPTiBWRVJCOyBpbmNsdWRlIDEgY2xlYXIgTUVUUklDIGlmIGl0IGFscmVhZHkgZXhpc3RzOyB0aGVuIEhPVyBpdCB3YXMgZG9uZS4nLFxyXG4gICAgICAgICctIEtlZXAgZWFjaCBidWxsZXQgY29uY2lzZSAo4omkIDIyIHdvcmRzKSwgcGFzdCB0ZW5zZSB1bmxlc3MgY3VycmVudCByb2xlLicsXHJcbiAgICAgICAgJy0gTm8gZmx1ZmYsIG5vIGJ1enp3b3Jkcywgbm8gaW52ZW50ZWQgZmFjdHMuJyxcclxuICAgICAgICAnJyxcclxuICAgICAgICAnSU1QT1JUQU5UIOKAlCBNRVRSSUNTICYgSU5URUdSSVRZJyxcclxuICAgICAgICAnLSBORVZFUiBpbnZlbnQgbnVtYmVycy4gVXNlIGEgbWV0cmljIE9OTFkgaWYgaXQgYWxyZWFkeSBleGlzdHMgaW4gdGhlIGlucHV0IGJ1bGxldC4nLFxyXG4gICAgICAgICctIElmIG5vIG1ldHJpYyBleGlzdHMsIGtlZXAgdGhlIGJ1bGxldCBRVUFMSVRBVElWRSAobm8gbnVtYmVycykuJyxcclxuICAgICAgICAnLSBZb3UgbWF5IFNVR0dFU1QgcG9zc2libGUgbWV0cmljcywgYnV0IE9OTFkgaW5zaWRlIFJFUE9SVC5yZWNvbW1lbmRhdGlvbnMgKG5vdCBpbiB0aGUgcmV3cml0dGVuIGJ1bGxldHMpLicsXHJcbiAgICAgICAgJycsXHJcbiAgICAgICAgJ1RBU0snLFxyXG4gICAgICAgICdGb3IgZWFjaCBpbnB1dCBidWxsZXQsIG91dHB1dCBvbmUgcmV3cml0dGVuIGJ1bGxldCB0aGF0IGZvbGxvd3MgWFlaLiBJZiB0aGVyZeKAmXMgbm8gbWV0cmljLCBrZWVwIGltcGFjdCBxdWFsaXRhdGl2ZSBhbmQgZmFjdHVhbCAobm8gbnVtYmVycykuIE9wdGlvbmFsbHkgYWRkIG1ldHJpYyBTVUdHRVNUSU9OUyBpbiBSRVBPUlQucmVjb21tZW5kYXRpb25zLicsXHJcbiAgICAgICAgJycsXHJcbiAgICAgICAgJ1JVTEVTJyxcclxuICAgICAgICAnMSkgU3RydWN0dXJlID0gQUNUSU9OIFZFUkIg4oaSIFggKHdoYXQpIOKGkiBZIChtZXRyaWMvaW1wYWN0L2Jhc2VsaW5lLCBpZiBwcmVzZW50KSDihpIgWiAoaG93KS4nLFxyXG4gICAgICAgICcyKSBFeGFjdGx5IE9ORSBtZXRyaWMgWSwgYW5kIE9OTFkgaWYgcHJlc2VudCBpbiB0aGUgb3JpZ2luYWwgYnVsbGV0ICglLCAkLCB0aW1lLCB2b2x1bWUpLicsXHJcbiAgICAgICAgJzMpIERvbWFpbiB3b3JkaW5nIGNvbnNpc3RlbnQ7IG9wdGlvbmFsbHkgYWxpZ24gdG8gY29udGV4dC5qZF9rZXl3b3JkcyB3aGVuIHNlbWFudGljYWxseSBlcXVpdmFsZW50IHRvIHRoZSBvcmlnaW5hbCBidWxsZXQuJyxcclxuICAgICAgICAnNCkgQXZvaWQgdmFndWUgb3BlbmVycyAo4oCcUmVzcG9uc2libGUgZm9y4oCm4oCdLCDigJxXb3JrZWQgb27igKbigJ0pLiBVc2Ugc3BlY2lmaWMgdmVyYnMuJyxcclxuICAgICAgICAnNSkgRG8gTk9UIGFkZCBuZXcgYWNoaWV2ZW1lbnRzLCB0b29scywgY29tcGFuaWVzLCBvciBudW1iZXJzLicsXHJcbiAgICAgICAgJzYpIFJlbW92ZSBmaWxsZXIgKOKAnHN1Y2Nlc3NmdWxseeKAnSwg4oCcdmFyaW91c+KAnSwg4oCcbnVtZXJvdXPigJ0pLiBObyBmaXJzdC1wZXJzb24uJyxcclxuICAgICAgICAnJyxcclxuICAgICAgICAnQlVMTEVUIFZPTFVNRSBDT05UUk9MIChQUlVORSAmIFNIT1JURU4pJyxcclxuICAgICAgICAnLSBJZiBhbiBleHBlcmllbmNlIGhhcyBNQU5ZIGJ1bGxldHMsIHlvdSBNQVkgcmVtb3ZlIGxvdy1zaWduYWwgYnVsbGV0c+KAlGVzcGVjaWFsbHkgd2hlbiB0aGF0IGV4cGVyaWVuY2UgaXMgbWlub3Igb3Igbm90IHJlbGV2YW50IHRvIGpkX2tleXdvcmRzLicsXHJcbiAgICAgICAgJy0gVGFyZ2V0IGNvdW50IChndWlkZWxpbmUsIG5vdCBzdHJpY3QpOiBtYWpvciBleHBlcmllbmNlcyAz4oCTNSBidWxsZXRzOyBtaW5vci9sZXNzIHJlbGV2YW50IDHigJMzIGJ1bGxldHMuJyxcclxuICAgICAgICAnLSBQcmVmZXIgdG8gS0VFUCBidWxsZXRzIHRoYXQgc2hvdyBtZWFzdXJhYmxlIG91dGNvbWVzLCBsZWFkZXJzaGlwL293bmVyc2hpcCwgb3IgSkQtYWxpZ25lZCBza2lsbHMuIFJlbW92ZSByZXBldGl0aXZlLCBvdmVybGFwcGluZywgb3IgcHVyZWx5IGR1dHktYmFzZWQgYnVsbGV0cy4nLFxyXG4gICAgICAgICctIElmIGEgYnVsbGV0IGlzIGxvbmcgb3IgdmVyYm9zZSwgeW91IE1BWSBzaG9ydGVuIGl0IHdoaWxlIHByZXNlcnZpbmcgbWVhbmluZyBhbmQgZmFjdHMgKGtlZXAg4omkIDIyIHdvcmRzLCBrZWVwIG9yaWdpbmFsIGNsYWltcywgbm8gbmV3IG1ldHJpY3MpLicsXHJcbiAgICAgICAgJy0gQWxsIHJlbW92YWxzL3Nob3J0ZW5pbmdzIE1VU1QgYmUgbG9nZ2VkIGluIFJFUE9SVCAoc2VlIE9VVFBVVCBGT1JNQVQpLicsXHJcbiAgICAgICAgJycsXHJcbiAgICAgICAgJ0FMR09SSVRITSAoZm9sbG93IGV4YWN0bHkpJyxcclxuICAgICAgICAnQSkgUGFyc2UgZWFjaCBidWxsZXQ6IHZlcmIsIHdoYXQvcmVzdWx0LCBhbnkgRVhJU1RJTkcgbWV0cmljLCB0aGUg4oCcaG934oCdLicsXHJcbiAgICAgICAgJ0IpIElmIG5vIG1ldHJpYyBleGlzdHMsIGtlZXAgcXVhbGl0YXRpdmUgaW1wYWN0OyBETyBOT1QgZmFicmljYXRlIG51bWJlcnMuJyxcclxuICAgICAgICAnQykgRHJhZnQ6IFZFUkIgKyBYICsgKG9wdGlvbmFsIFkgaWYgcHJlc2VudCkgKyBaLiBFbnN1cmUg4omkIDIyIHdvcmRzLicsXHJcbiAgICAgICAgJ0QpIFBydW5lIHBhc3MgKHBlciBleHBlcmllbmNlKTogcmFuayBidWxsZXRzIGJ5IEpEIHJlbGV2YW5jZSArIGltcGFjdDsgbWFyayBsb3ctc2lnbmFsIGl0ZW1zIGZvciByZW1vdmFsLicsXHJcbiAgICAgICAgJ0UpIFNob3J0ZW4gcGFzczogY29tcHJlc3MgdmVyYm9zZSBidWxsZXRzIChyZW1vdmUgZmlsbGVyLCBtZXJnZSBkdXBsaWNhdGVzLCBrZWVwIG9uZSBtZXRyaWMpLicsXHJcbiAgICAgICAgJ0YpIFZhbGlkYXRlOiBlYWNoIGtlcHQgYnVsbGV0IGhhcyB2ZXJiLCB3aGF0LCBob3c7IG1ldHJpYyBvbmx5IGlmIHByZXNlbnQuJyxcclxuICAgICAgICAnJyxcclxuICAgICAgICBgT3V0cHV0IE1VU1QgYmUgaW4gdGhlIHNhbWUgbGFuZ3VhZ2UgYXMgY2xlYW5fY3YubWV0YWRhdGEubGFuZ3VhZ2U6IFwiJHtvcmlnTGFuZ31cIi4gRE8gTk9UIHRyYW5zbGF0ZS5gLFxyXG4gICAgICAgIFNFRUQsXHJcbiAgICAgIF0uam9pbignXFxuJyk7XHJcbiAgICAgIGNvbnN0IHBlckV4cExvZ3M6IGFueVtdID0gW107XHJcbiAgICAgIChhZnRlckN2Py5leHBlcmllbmNlIHx8IFtdKS5mb3JFYWNoKChleHA6IGFueSwgaWR4OiBudW1iZXIpID0+IHsgcGVyRXhwTG9nc1tpZHhdID0gbnVsbDsgfSk7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgKGFmdGVyQ3Y/LmV4cGVyaWVuY2UgfHwgW10pLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgZXhwID0gYWZ0ZXJDdi5leHBlcmllbmNlW2ldO1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsQnVsbGV0czogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KGV4cD8uYnVsbGV0cykgPyBleHAuYnVsbGV0cyA6IFtdO1xyXG4gICAgICAgIGlmICghb3JpZ2luYWxCdWxsZXRzLmxlbmd0aCkgY29udGludWU7XHJcbiAgICAgICAgY29uc3QgdXNlclBheWxvYWQgPSBKU09OLnN0cmluZ2lmeSh7IGJ1bGxldHM6IG9yaWdpbmFsQnVsbGV0cywgY29udGV4dDogeyBqZF9rZXl3b3JkczogamRLdyB9IH0pO1xyXG4gICAgICAgIGNvbnN0IHJlcTogYW55ID0ge1xyXG4gICAgICAgICAgbW9kZWw6IGFyYk1vZGVsLFxyXG4gICAgICAgICAgbWVzc2FnZXM6IFsgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogTExNX1NZU1RFTSB9LCB7IHJvbGU6ICd1c2VyJywgY29udGVudDogdXNlclBheWxvYWQgfSBdLFxyXG4gICAgICAgICAgdGVtcGVyYXR1cmU6IDAuMCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCBvdXQ6IGFueSA9IG51bGw7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBvcGVuYWlBcmJpdHJhZ2UuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUocmVxKTtcclxuICAgICAgICAgIGNvc3Quc3RlcHMucHVzaCh7IG5hbWU6ICdidWxsZXRzX3Jld3JpdGUnLCBtb2RlbDogYXJiTW9kZWwsIHVzYWdlOiAocmVzcCBhcyBhbnkpPy51c2FnZSB9KTtcclxuICAgICAgICAgIGNvbnN0IHR4dCA9IChyZXNwLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudCB8fCAnJykudHJpbSgpO1xyXG4gICAgICAgICAgdHJ5IHsgb3V0ID0gSlNPTi5wYXJzZSh0eHQpOyB9IGNhdGNoIHsgdHJ5IHsgb3V0ID0gcGFyc2VKc29uU3RyaWN0T3JTYWx2YWdlKHR4dCk7IH0gY2F0Y2gge30gfVxyXG4gICAgICAgIH0gY2F0Y2gge31cclxuICAgICAgICBpZiAoIW91dCB8fCAhQXJyYXkuaXNBcnJheShvdXQ/LmJ1bGxldHNfeHl6KSkgY29udGludWU7XHJcbiAgICAgICAgY29uc3QgYWxsb3dOdW1zID0gbmV3IFNldCgob3JpZ2luYWxCdWxsZXRzLmpvaW4oJyAnKSAubWF0Y2gobnVtc1JlZ2V4KSB8fCBbXSkubWFwKHMgPT4gcykpO1xyXG4gICAgICAgIGNvbnN0IGNsZWFuZWQ6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBiIG9mIG91dC5idWxsZXRzX3h5eikge1xyXG4gICAgICAgICAgaWYgKCFiKSBjb250aW51ZTtcclxuICAgICAgICAgIGxldCBzID0gU3RyaW5nKGIpLnRyaW0oKTtcclxuICAgICAgICAgIGNvbnN0IGRldCA9IGRldGVjdExhbmdMb29zZShzKTtcclxuICAgICAgICAgIGlmIChkZXQgIT09ICd1bmtub3duJyAmJiBkZXQgIT09IG9yaWdMYW5nLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCBudW1zID0gcy5tYXRjaChudW1zUmVnZXgpIHx8IFtdO1xyXG4gICAgICAgICAgZm9yIChjb25zdCBuIG9mIG51bXMpIHsgaWYgKCFhbGxvd051bXMuaGFzKG4pKSB7IHMgPSBzLnJlcGxhY2UobiwgJycpLnJlcGxhY2UoL1xcc3syLH0vZywgJyAnKS50cmltKCk7IH0gfVxyXG4gICAgICAgICAgcyA9IHdvcmRzMjIocyk7XHJcbiAgICAgICAgICBpZiAocykgY2xlYW5lZC5wdXNoKHMpO1xyXG4gICAgICAgICAgaWYgKGNsZWFuZWQubGVuZ3RoID49IDUpIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWNsZWFuZWQubGVuZ3RoKSBjbGVhbmVkLnB1c2gob3JpZ2luYWxCdWxsZXRzWzBdKTtcclxuICAgICAgICBjb25zdCBzZWVuQiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgICAgIGxldCBkZWR1cGVkID0gY2xlYW5lZC5maWx0ZXIoeCA9PiB7IGNvbnN0IGsgPSB4LnRvTG93ZXJDYXNlKCk7IGlmIChzZWVuQi5oYXMoaykpIHJldHVybiBmYWxzZTsgc2VlbkIuYWRkKGspOyByZXR1cm4gdHJ1ZTsgfSk7XHJcbiAgICAgICAgY29uc3QgaGFybW9uaXplZDogYW55W10gPSBbXTtcclxuICAgICAgICBkZWR1cGVkID0gZGVkdXBlZC5tYXAoKHMsIGlkeEIpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHIgPSBlbnN1cmVBY3Rpb25WZXJiU3RhcnQocyk7XHJcbiAgICAgICAgICBpZiAoci5jaGFuZ2VkICYmIHIudmFsdWUgIT09IHMpIGhhcm1vbml6ZWQucHVzaCh7IGluZGV4OiBpZHhCLCBiZWZvcmU6IHMsIGFmdGVyOiByLnZhbHVlLCByZWFzb246ICdwcmVmaXhlZCBhY3Rpb24gdmVyYiBmb3IgaGFybW9uaXphdGlvbicgfSk7XHJcbiAgICAgICAgICByZXR1cm4gci52YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBleHAuYnVsbGV0cyA9IGRlZHVwZWQubGVuZ3RoID8gZGVkdXBlZCA6IG9yaWdpbmFsQnVsbGV0cztcclxuICAgICAgICBwZXJFeHBMb2dzW2ldID0geyBleHBlcmllbmNlSW5kZXg6IGksIHJlY29tbWVuZGF0aW9uczogb3V0Py5SRVBPUlQ/LnJlY29tbWVuZGF0aW9ucyB8fCBbXSwgcHJ1bmVkOiBvdXQ/LlJFUE9SVD8ucHJ1bmVkIHx8IHt9LCBzaG9ydGVuZWQ6IG91dD8uUkVQT1JUPy5zaG9ydGVuZWQgfHwgW10sIGhhcm1vbml6ZWQgfTtcclxuICAgICAgfVxyXG4gICAgICAvLyBQcm9qZWN0cyByZXdyaXRlIChmdWxsIGZsb3cpXHJcbiAgICAgIGNvbnN0IHBlclByb2pMb2dzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAoYWZ0ZXJDdj8ucHJvamVjdHMgfHwgW10pLmZvckVhY2goKF86IGFueSwgaWR4OiBudW1iZXIpID0+IHsgcGVyUHJvakxvZ3NbaWR4XSA9IG51bGw7IH0pO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IChhZnRlckN2Py5wcm9qZWN0cyB8fCBbXSkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBwcm9qID0gYWZ0ZXJDdi5wcm9qZWN0c1tpXTtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbEJ1bGxldHM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShwcm9qPy5idWxsZXRzKSA/IHByb2ouYnVsbGV0cyA6IFtdO1xyXG4gICAgICAgIGlmICghb3JpZ2luYWxCdWxsZXRzLmxlbmd0aCkgY29udGludWU7XHJcbiAgICAgICAgY29uc3QgdXNlclBheWxvYWQgPSBKU09OLnN0cmluZ2lmeSh7IGJ1bGxldHM6IG9yaWdpbmFsQnVsbGV0cywgY29udGV4dDogeyBqZF9rZXl3b3JkczogamRLdyB9IH0pO1xyXG4gICAgICAgIGNvbnN0IHJlcTogYW55ID0ge1xyXG4gICAgICAgICAgbW9kZWw6IGFyYk1vZGVsLFxyXG4gICAgICAgICAgbWVzc2FnZXM6IFsgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogTExNX1NZU1RFTSB9LCB7IHJvbGU6ICd1c2VyJywgY29udGVudDogdXNlclBheWxvYWQgfSBdLFxyXG4gICAgICAgICAgdGVtcGVyYXR1cmU6IDAuMCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCBvdXQ6IGFueSA9IG51bGw7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBvcGVuYWlBcmJpdHJhZ2UuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUocmVxKTtcclxuICAgICAgICAgIGNvc3Quc3RlcHMucHVzaCh7IG5hbWU6ICdidWxsZXRzX3Jld3JpdGVfcHJvamVjdHMnLCBtb2RlbDogYXJiTW9kZWwsIHVzYWdlOiAocmVzcCBhcyBhbnkpPy51c2FnZSB9KTtcclxuICAgICAgICAgIGNvbnN0IHR4dCA9IChyZXNwLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudCB8fCAnJykudHJpbSgpO1xyXG4gICAgICAgICAgdHJ5IHsgb3V0ID0gSlNPTi5wYXJzZSh0eHQpOyB9IGNhdGNoIHsgdHJ5IHsgb3V0ID0gcGFyc2VKc29uU3RyaWN0T3JTYWx2YWdlKHR4dCk7IH0gY2F0Y2gge30gfVxyXG4gICAgICAgIH0gY2F0Y2gge31cclxuICAgICAgICBpZiAoIW91dCB8fCAhQXJyYXkuaXNBcnJheShvdXQ/LmJ1bGxldHNfeHl6KSkgY29udGludWU7XHJcbiAgICAgICAgY29uc3QgYWxsb3dOdW1zID0gbmV3IFNldCgob3JpZ2luYWxCdWxsZXRzLmpvaW4oJyAnKSAubWF0Y2gobnVtc1JlZ2V4KSB8fCBbXSkubWFwKHMgPT4gcykpO1xyXG4gICAgICAgIGNvbnN0IGNsZWFuZWQ6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBiIG9mIG91dC5idWxsZXRzX3h5eikge1xyXG4gICAgICAgICAgaWYgKCFiKSBjb250aW51ZTtcclxuICAgICAgICAgIGxldCBzID0gU3RyaW5nKGIpLnRyaW0oKTtcclxuICAgICAgICAgIGNvbnN0IGRldCA9IGRldGVjdExhbmdMb29zZShzKTtcclxuICAgICAgICAgIGlmIChkZXQgIT09ICd1bmtub3duJyAmJiBkZXQgIT09IG9yaWdMYW5nLnRvTG93ZXJDYXNlKCkpIHsgY29udGludWU7IH1cclxuICAgICAgICAgIGNvbnN0IG51bXMgPSBzLm1hdGNoKG51bXNSZWdleCkgfHwgW107XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbnVtcykgeyBpZiAoIWFsbG93TnVtcy5oYXMobikpIHsgcyA9IHMucmVwbGFjZShuLCAnJykucmVwbGFjZSgvXFxzezIsfS9nLCAnICcpLnRyaW0oKTsgfSB9XHJcbiAgICAgICAgICBzID0gd29yZHMyMihzKTtcclxuICAgICAgICAgIGlmIChzKSBjbGVhbmVkLnB1c2gocyk7XHJcbiAgICAgICAgICBpZiAoY2xlYW5lZC5sZW5ndGggPj0gNCkgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY2xlYW5lZC5sZW5ndGgpIGNsZWFuZWQucHVzaChvcmlnaW5hbEJ1bGxldHNbMF0pO1xyXG4gICAgICAgIGNvbnN0IHNlZW5CID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgICAgICAgbGV0IGRlZHVwZWQgPSBjbGVhbmVkLmZpbHRlcih4ID0+IHsgY29uc3QgayA9IHgudG9Mb3dlckNhc2UoKTsgaWYgKHNlZW5CLmhhcyhrKSkgcmV0dXJuIGZhbHNlOyBzZWVuQi5hZGQoayk7IHJldHVybiB0cnVlOyB9KTtcclxuICAgICAgICBjb25zdCBoYXJtb25pemVkOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgIGRlZHVwZWQgPSBkZWR1cGVkLm1hcCgocywgaWR4QikgPT4ge1xyXG4gICAgICAgICAgY29uc3QgciA9IGVuc3VyZUFjdGlvblZlcmJTdGFydChzKTtcclxuICAgICAgICAgIGlmIChyLmNoYW5nZWQgJiYgci52YWx1ZSAhPT0gcykgaGFybW9uaXplZC5wdXNoKHsgaW5kZXg6IGlkeEIsIGJlZm9yZTogcywgYWZ0ZXI6IHIudmFsdWUsIHJlYXNvbjogJ3ByZWZpeGVkIGFjdGlvbiB2ZXJiIGZvciBoYXJtb25pemF0aW9uJyB9KTtcclxuICAgICAgICAgIHJldHVybiByLnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHByb2ouYnVsbGV0cyA9IGRlZHVwZWQubGVuZ3RoID8gZGVkdXBlZCA6IG9yaWdpbmFsQnVsbGV0cztcclxuICAgICAgICBwZXJQcm9qTG9nc1tpXSA9IHsgcHJvamVjdEluZGV4OiBpLCByZWNvbW1lbmRhdGlvbnM6IG91dD8uUkVQT1JUPy5yZWNvbW1lbmRhdGlvbnMgfHwgW10sIHBydW5lZDogb3V0Py5SRVBPUlQ/LnBydW5lZCB8fCB7fSwgc2hvcnRlbmVkOiBvdXQ/LlJFUE9SVD8uc2hvcnRlbmVkIHx8IFtdLCBoYXJtb25pemVkIH07XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgX19ickZ1bGw6IGFueSA9IHsgcGVyRXhwZXJpZW5jZTogcGVyRXhwTG9ncy5maWx0ZXIoQm9vbGVhbikgfTtcclxuICAgICAgY29uc3QgcGpGdWxsID0gcGVyUHJvakxvZ3MuZmlsdGVyKEJvb2xlYW4pO1xyXG4gICAgICBpZiAocGpGdWxsLmxlbmd0aCkgX19ickZ1bGwucGVyUHJvamVjdHMgPSBwakZ1bGw7XHJcbiAgICAgIChhZnRlckN2IGFzIGFueSkuX19idWxsZXRSZXdyaXRlID0gX19ickZ1bGw7XHJcbiAgICB9IGNhdGNoIHt9XHJcbiAgICAvLyBCdWlsZCBhIHNlcnZlci1zaWRlIGRpZmYgdG8gZW5mb3JjZSBjb25zaXN0ZW5jeSBiZXR3ZWVuIHJlc3VsdCBhbmQgcmVwb3J0XHJcbiAgICBjb25zdCBkaWZmID0gY29tcHV0ZVJlc3VtZURpZmYoYmVmb3JlQ3YsIGFmdGVyQ3YpO1xyXG4gICAgY29uc3QgbGFiZWwgPSAoZTogYW55KSA9PiB7XHJcbiAgICAgIGlmICghZSkgcmV0dXJuICfigJQnO1xyXG4gICAgICBjb25zdCBjID0gU3RyaW5nKGU/LmNvbXBhbnkgfHwgJ+KAlCcpLnRyaW0oKTtcclxuICAgICAgY29uc3QgdCA9IFN0cmluZyhlPy50aXRsZSB8fCAn4oCUJykudHJpbSgpO1xyXG4gICAgICByZXR1cm4gW2MsIHRdLmZpbHRlcihCb29sZWFuKS5qb2luKCcg4oCUICcpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGtlcHRMYWJlbHMgPSAoZGlmZi5kZWNpc2lvbnMua2VwdEV4cGVyaWVuY2VzIHx8IFtdKS5tYXAoKGk6IG51bWJlcikgPT4gbGFiZWwoYmVmb3JlQ3Y/LmV4cGVyaWVuY2U/LltpXSkpO1xyXG4gICAgY29uc3QgcmVtb3ZlZExhYmVscyA9IChkaWZmLmRlY2lzaW9ucy5yZW1vdmVkRXhwZXJpZW5jZXMgfHwgW10pLm1hcCgoaTogbnVtYmVyKSA9PiBsYWJlbChiZWZvcmVDdj8uZXhwZXJpZW5jZT8uW2ldKSk7XHJcbiAgICBjb25zdCBvcmlnTGFuZ0xhYmVsID0gU3RyaW5nKGJlZm9yZUN2Py5tZXRhZGF0YT8ubGFuZ3VhZ2UgfHwgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBjb25zdCBuYXJyYXRpdmVGcm9tRGlmZiA9IGJ1aWxkTmFycmF0aXZlRnJvbURpZmYoZGlmZiBhcyBhbnksIG9yaWdMYW5nTGFiZWwpO1xyXG4gICAgY29uc3Qgbm9ybSA9IChzOiBhbnkpID0+IFN0cmluZyhzIHx8ICcnKS5yZXBsYWNlKC9bXFxzXFx1MDBBMF0rL2csICcgJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAvLyBDb21wdXRlIGtleXdvcmRzVXNlZDogaW50ZXJzZWN0aW9uIEpEIOKIqSBzdW1tYXJ5IChsb3dlcmNhc2VkIHRva2VucylcclxuICAgIGNvbnN0IHRva2VuU2V0ID0gKHM6IHN0cmluZykgPT4gbmV3IFNldChTdHJpbmcocyB8fCAnJykudG9Mb3dlckNhc2UoKS5zcGxpdCgvW15hLXowLTkrLiNdL2dpKS5maWx0ZXIoQm9vbGVhbikpO1xyXG4gICAgY29uc3QgU3N1bSA9IHRva2VuU2V0KFN0cmluZyhhZnRlckN2Py5zdW1tYXJ5IHx8ICcnKSk7XHJcbiAgICBjb25zdCBTamQgPSB0b2tlblNldChTdHJpbmcoamRUZXh0IHx8ICcnKSk7XHJcbiAgICBjb25zdCBrZXl3b3Jkc1VzZWRBcnI6IHN0cmluZ1tdID0gW107XHJcbiAgICBTc3VtLmZvckVhY2goKHcpID0+IHsgaWYgKFNqZC5oYXModykgJiYgdy5sZW5ndGggPj0gMykga2V5d29yZHNVc2VkQXJyLnB1c2godyk7IH0pO1xyXG4gICAgY29uc3Qgc3VtbWFyeUVkaXQgPSB7XHJcbiAgICAgIGJlZm9yZTogU3RyaW5nKGJlZm9yZUN2Py5zdW1tYXJ5IHx8ICcnKSxcclxuICAgICAgYWZ0ZXI6IFN0cmluZyhhZnRlckN2Py5zdW1tYXJ5IHx8ICcnKSxcclxuICAgICAgY2hhbmdlZDogbm9ybShiZWZvcmVDdj8uc3VtbWFyeSkgIT09IG5vcm0oYWZ0ZXJDdj8uc3VtbWFyeSksXHJcbiAgICAgIGtleXdvcmRzVXNlZDoga2V5d29yZHNVc2VkQXJyLnNsaWNlKDAsIDEyKSxcclxuICAgIH07XHJcbiAgICBjb25zdCBmaW5hbFJlcG9ydCA9IHtcclxuICAgICAgLi4uKGFpUmVwb3J0IHx8IHt9KSxcclxuICAgICAgbGFuZ3VhZ2VVc2VkOiAoYmVmb3JlQ3Y/Lm1ldGFkYXRhPy5sYW5ndWFnZSB8fCAnc2FtZS1hcy1jbGVhbl9jdicpLFxyXG4gICAgICBkZWNpc2lvbnM6IHtcclxuICAgICAgICBrZXB0RXhwZXJpZW5jZXM6IGtlcHRMYWJlbHMsXHJcbiAgICAgICAgcmVtb3ZlZEV4cGVyaWVuY2VzOiByZW1vdmVkTGFiZWxzLFxyXG4gICAgICAgIGJ1bGxldEVkaXRzOiAoZGlmZi5kZWNpc2lvbnMuYnVsbGV0RWRpdHMgfHwgW10pLm1hcCgoYjogYW55KSA9PiAoe1xyXG4gICAgICAgICAgc291cmNlSW5kZXg6IGIuc291cmNlSW5kZXgsXHJcbiAgICAgICAgICBiZWZvcmU6IGIuYmVmb3JlLFxyXG4gICAgICAgICAgYWZ0ZXI6IGIuYWZ0ZXIsXHJcbiAgICAgICAgfSkpLFxyXG4gICAgICB9LFxyXG4gICAgICBuYXJyYXRpdmU6IFtuYXJyYXRpdmVGcm9tRGlmZiwgKGFpUmVwb3J0IGFzIGFueSk/Lm5hcnJhdGl2ZV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcblxcbicpLFxyXG4gICAgICBzdW1tYXJ5RWRpdCxcclxuICAgICAgLi4uKCAoYWZ0ZXJDdiBhcyBhbnkpLl9fYnVsbGV0UmV3cml0ZSA/IHsgYnVsbGV0UmV3cml0ZTogKGFmdGVyQ3YgYXMgYW55KS5fX2J1bGxldFJld3JpdGUgfSA6IHt9ICksXHJcbiAgICAgIGRpZmYsXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcGF5bG9hZDogYW55ID0geyByZXN1bHQ6IGFmdGVyQ3YsIGNsZWFuX2N2OiBiZWZvcmVDdiwgcmVwb3J0OiBmaW5hbFJlcG9ydCB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgW2oxLCBqMl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAganVkZ2VQZGZUb0pzb24oY3ZUZXh0LCBjbGVhbkN2KSxcclxuICAgICAgICBqdWRnZUFyYml0cmFnZSgnJywgY2xlYW5DdiwgamRUZXh0LCB2YWxpZGF0aW9uUmVzdWx0LmRhdGEsIGFpUmVwb3J0KSxcclxuICAgICAgXSk7XHJcbiAgICAgIGlmIChqMSkge1xyXG4gICAgICAgIHBheWxvYWQuanVkZ2UgPSB7IC4uLihwYXlsb2FkLmp1ZGdlIHx8IHt9KSwgcGRmVG9Kc29uOiBqMS5ldmFsdWF0aW9uIH07XHJcbiAgICAgICAgY29zdC5zdGVwcy5wdXNoKHsgbmFtZTogJ2p1ZGdlX3BkZicsIG1vZGVsOiBqMS5tb2RlbCwgdXNhZ2U6IGoxLnVzYWdlIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChqMikge1xyXG4gICAgICAgIHBheWxvYWQuanVkZ2UgPSB7IC4uLihwYXlsb2FkLmp1ZGdlIHx8IHt9KSwgYXJiaXRyYWdlOiBqMi5ldmFsdWF0aW9uIH07XHJcbiAgICAgICAgY29zdC5zdGVwcy5wdXNoKHsgbmFtZTogJ2p1ZGdlX2FyYml0cmFnZScsIG1vZGVsOiBqMi5tb2RlbCwgdXNhZ2U6IGoyLnVzYWdlIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHBheWxvYWQuanVkZ2VfZXJyb3IgPSAoZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogU3RyaW5nKGUpKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wdXRlQ29zdFRvdGFscyhjb3N0KTtcclxuICAgIGNvbXB1dGVDb3N0VVNEKGNvc3QpO1xyXG4gICAgcGF5bG9hZC5jb3N0ID0gY29zdDtcclxuXHJcbiAgICAvLyBSZXRvdXJuZXIgbGUgSlNPTjsgaW5jbHVyZSBjdiBicnV0L2NsZWFuIHNpIGRlbWFuZMOpXHJcbiAgICBpZiAocmV0dXJuUmF3KSB7XHJcbiAgICAgIHBheWxvYWQucmF3X2N2ID0geyB0ZXh0OiBjdlRleHQsIG1ldGhvZDogbWV0aG9kVXNlZCwgaW1hZ2VzQ291bnQgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihwYXlsb2FkLCB7IHN0YXR1czogMjAwIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGfDqW7DqXJhbGU6JywgZXJyb3IpO1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiBgRXJyZXVyIGludGVybmU6ICR7ZXJyb3JNZXNzYWdlfWAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZXh0cmFjdFRleHRGcm9tSW1hZ2VzV2l0aFZpc2lvbiIsIm5vcm1hbGl6ZVRleHQiLCJ0b0NsZWFuUmVzdW1lIiwic3RydWN0dXJlQ3ZUZXh0V2l0aEFJIiwiY3JlYXRlSGFzaCIsIlJlc3VtZUpTT04iLCJzYW5pdGl6ZVJlc3VtZUZvclNjaGVtYSIsIlNZU1RFTV9QUk9NUFQiLCJjb21wdXRlUmVzdW1lRGlmZiIsImJ1aWxkTmFycmF0aXZlRnJvbURpZmYiLCJnZXRDb25maWd1cmVkTW9kZWwiLCJnZXRQcmljaW5nRm9yTW9kZWwiLCJnZXREZWZhdWx0UHJpY2luZyIsImlzSnVkZ2VFbmFibGVkIiwiZ2V0SnVkZ2VNb2RlbCIsImdldFZlcmJzIiwiZmlsdGVyRm9yQVRTIiwiQUNUSU9OX1ZFUkJfQ0FURUdPUklFUyIsImNhbGxXaXRoRmFsbGJhY2tDaGF0IiwiTUFYX0ZJTEVfU0laRSIsImNsZWFuQ2FjaGUiLCJNYXAiLCJpc0xpa2VseUVkdWNhdGlvbkVudHJ5IiwiZSIsInMiLCJjb21wYW55IiwidGl0bGUiLCJsb2NhdGlvbiIsImRlc2NyaXB0aW9uIiwiZmlsdGVyIiwiQm9vbGVhbiIsImpvaW4iLCJ0b0xvd2VyQ2FzZSIsImVkdVRlcm1zIiwic29tZSIsImsiLCJpbmNsdWRlcyIsImVuZm9yY2VPcmlnaW5hbExhbmd1YWdlQ1YiLCJyZXN1bHQiLCJiZWZvcmUiLCJvcmlnTGFuZyIsInNhbWVPclVua25vd24iLCJkbCIsImRldGVjdExhbmdMb29zZSIsIlN0cmluZyIsImJleHAiLCJBcnJheSIsImlzQXJyYXkiLCJleHBlcmllbmNlIiwiYWV4cCIsIm4iLCJNYXRoIiwibWluIiwibGVuZ3RoIiwiaSIsImIiLCJhIiwiYkJ1bCIsImJ1bGxldHMiLCJhQnVsIiwibSIsImoiLCJicHJvaiIsInByb2plY3RzIiwiYXByb2oiLCJwbiIsIm5hbWUiLCJiZWR1IiwiZWR1Y2F0aW9uIiwiYWVkdSIsImVuIiwic2Nob29sIiwiZGVncmVlIiwidGV4dCIsInQiLCJ0cmltIiwidGVzdCIsImxhbmdzIiwiZnIiLCJlcyIsIml0IiwiZGUiLCJwdCIsIm5sIiwidHIiLCJiZXN0IiwiYmVzdFNjb3JlIiwiY29kZSIsIndvcmRzIiwiT2JqZWN0IiwiZW50cmllcyIsInNjb3JlIiwicmVkdWNlIiwiYWNjIiwidyIsIm1hcEV4cGVyaWVuY2VUb0VkdWNhdGlvbiIsInBpY2siLCJ4IiwiaGFzRWR1V29yZCIsInN0ciIsInVuZGVmaW5lZCIsImRlZ3JlZVRlcm1zIiwidExvdyIsImZvdW5kIiwiZmluZCIsImQiLCJzdGFydERhdGUiLCJlbmREYXRlIiwicmVjIiwic2VwIiwiZGF0ZXMiLCJidWlsZENsZWFuQ3YiLCJjdlRleHQiLCJrZXkiLCJ1cGRhdGUiLCJkaWdlc3QiLCJoYXMiLCJjbGVhbiIsImdldCIsInNvdXJjZSIsInVzYWdlIiwibW9kZWwiLCJwcm9jZXNzIiwiZW52IiwiT1BFTlJPVVRFUl9LRVlfUERGX1RPX0pTT04iLCJhaSIsInN0cnVjdHVyZWQiLCJjb25zb2xlIiwid2FybiIsInNldCIsInltVG9OdW0iLCJ5bSIsImV4ZWMiLCJ5ZWFyIiwicGFyc2VJbnQiLCJtb250aCIsIk51bWJlciIsImlzRmluaXRlIiwic29ydEV4cGVyaWVuY2VBbnRpQ2hyb25vIiwiZXhwcyIsIndpdGhJbmRleCIsIm1hcCIsImlkeCIsInNvcnQiLCJhZSIsImJlIiwiYUtleSIsImJLZXkiLCJwYXJzZUpzb25TdHJpY3RPclNhbHZhZ2UiLCJyZXBsYWNlIiwiSlNPTiIsInBhcnNlIiwiZmlyc3QiLCJpbmRleE9mIiwibGFzdCIsImxhc3RJbmRleE9mIiwic2xpY2UiLCJjbGVhbmVkIiwiY2xlYW5lZEdsb2JhbCIsIkVycm9yIiwiY29tcHV0ZUNvc3RUb3RhbHMiLCJjb3N0IiwidG90YWxzIiwicHJvbXB0X3Rva2VucyIsImNvbXBsZXRpb25fdG9rZW5zIiwidG90YWxfdG9rZW5zIiwic3RlcHMiLCJ1IiwiY29tcHV0ZUNvc3RVU0QiLCJlbnZPciIsImRlZiIsInYiLCJwYXJzZUZsb2F0IiwiTmFOIiwicHJpY2luZyIsImNmZyIsImluUGVyTVRvayIsIm91dFBlck1Ub2siLCJ0b3RhbFVTRCIsInN0ZXAiLCJvdmVycmlkZSIsInByaWNlX292ZXJyaWRlIiwiaGFzT3ZlcnJpZGUiLCJyYXRlcyIsImluVVNEIiwib3V0VVNEIiwiY29zdF91c2QiLCJ0b0ZpeGVkIiwiY3VycmVuY3kiLCJ0b3RhbF91c2QiLCJjcmVhdGVKdWRnZUNsaWVudCIsIk9wZW5BSSIsImRlZmF1bHQiLCJvcktleSIsIk9QRU5ST1VURVJfS0VZX0pVREdFIiwiT1BFTlJPVVRFUl9BUElfS0VZX0pVREdFIiwiY2xpZW50IiwiYXBpS2V5IiwiYmFzZVVSTCIsImRlZmF1bHRIZWFkZXJzIiwiT1BFTlJPVVRFUl9IVFRQX1JFRkVSRVIiLCJPUEVOUk9VVEVSX0FQUF9USVRMRSIsImp1ZGdlUGRmVG9Kc29uIiwiY2xlYW5DdiIsInN5c3RlbSIsInNjaGVtYSIsInVzZXIiLCJzdHJpbmdpZnkiLCJpbnN0cnVjdGlvbiIsImN2X3RleHQiLCJjbGVhbl9jdiIsImV4cGVjdGVkX3NjaGVtYSIsImNvbXBsZXRpb24iLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidGVtcGVyYXR1cmUiLCJyZXNwb25zZV9mb3JtYXQiLCJ0eXBlIiwibWF4X3Rva2VucyIsImNob2ljZXMiLCJtZXNzYWdlIiwicGFyc2VkIiwiZXZhbHVhdGlvbiIsImp1ZGdlQXJiaXRyYWdlIiwiamRUZXh0IiwicmVzdWx0SnNvbiIsInJlcG9ydE9iaiIsImpkX3RleHQiLCJyZXBvcnQiLCJHRVQiLCJsb2ciLCJqc29uIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwib3BlbnJvdXRlclZpc2lvbkNvbmZpZ3VyZWQiLCJPUEVOUk9VVEVSX0tFWV9WSVNJT04iLCJvcGVucm91dGVyQXJiaXRyYWdlQ29uZmlndXJlZCIsIk9QRU5ST1VURVJfS0VZX0FSQklUUkFHRSIsIm9wZW5yb3V0ZXJTdHJ1Y3R1cmVyQ29uZmlndXJlZCIsInNjaGVtYUxvYWRlZCIsInByb21wdExvYWRlZCIsInZpc2lvblBhcnNlckxvYWRlZCIsIlBPU1QiLCJyZXF1ZXN0IiwiZm9ybURhdGEiLCJjdlRleHRGaWVsZCIsImltYWdlRW50cmllcyIsImdldEFsbCIsInJldHVyblJhdyIsIm9ubHlDbGVhbiIsImFyYk9ubHkiLCJvbmx5UmF3IiwiY2xlYW5Ddkpzb24iLCJhcmJNb2RlbElkUmF3IiwiYXJiTW9kZWxPdmVycmlkZSIsImFyYkluUHJpY2VSYXciLCJhcmJPdXRQcmljZVJhdyIsImFyYlByaWNlT3ZlcnJpZGUiLCJwSW4iLCJwT3V0IiwiZXJyb3IiLCJzdGF0dXMiLCJ1c2VyTWVzc2FnZUFyYiIsInVzZU9SIiwib3BlbmFpQXJiaXRyYWdlIiwiYXJiTW9kZWwiLCJ0b2RheUlTTyIsInNwbGl0IiwicmVwb3J0U3BlYyIsInN5c3RlbVByb21wdCIsIkFSQl9HVUlERUxJTkVTIiwiTkFSUkFUSVZFX0NMSUVOVF9UT05FIiwic3lzdGVtUHJvbXB0RnVsbCIsInN1cHBvcnRzSnNvblJlc3BvbnNlRm9ybWF0Iiwic3RhcnRzV2l0aCIsInJlcTEiLCJhcmJDYWxsIiwidmFsaWRhdGUiLCJyZXNwb25zZUNvbnRlbnQiLCJwdXNoIiwibW9kZWxVc2VkIiwicGFyc2VkVG9wIiwiZGV0YWlscyIsImFpUmVzdWx0IiwiYWlSZXBvcnQiLCJzYW5pdGl6ZWQiLCJ2YWxpZGF0aW9uUmVzdWx0Iiwic2FmZVBhcnNlIiwic3VjY2VzcyIsImlzc3VlcyIsImJlZm9yZUN2QXJiT25seSIsImFmdGVyQ3ZBcmJPbmx5IiwiZGF0YSIsIm5vcm1TdW0iLCJsYW5nTGFiZWwyIiwibWV0YWRhdGEiLCJsYW5ndWFnZSIsImphYzIiLCJ0b2siLCJTZXQiLCJBIiwic3VtbWFyeSIsIkIiLCJzaXplQSIsInNpemUiLCJzaXplQiIsImludGVyQ291bnQiLCJmb3JFYWNoIiwidW5pb25Db3VudCIsIm1heCIsIm5lZWRzUmV3cml0ZTIiLCJzdW1tYXJ5U3lzMiIsInN1bW1hcnlVc2VyMiIsInN1bVJlcTIiLCJzdW1DYWxsMiIsInN1bVR4dDIiLCJvcmlnTGFuZzIiLCJkZXRMYW5nMiIsIm5vdGUiLCJub3JtU3RyIiwic2lnIiwic3RhcnREYXRlUmF3IiwiZW5kRGF0ZVJhdyIsImJlZm9yZUxpc3QiLCJhZnRlckxpc3QiLCJhZnRlclNpZ3MiLCJlbnN1cmVFZHUiLCJlZHVLZXkiLCJoYXNFZHUiLCJoZWFkZXIiLCJuYXJyYXRpdmUiLCJuYXJyTGFuZyIsImJhc2UiLCJhaUVkdSIsIm5vcm1FIiwiY2Fub25EYXRlIiwia2V5RSIsInNlZW4iLCJtZXJnZWQiLCJvYmoiLCJzZCIsImVkIiwiYWRkIiwiZ2V0S2V5d29yZHMiLCJ0b2tzIiwiZnJlcSIsImZyb20iLCJqZEt3IiwibnVtc1JlZ2V4Iiwid29yZHMyMiIsInBhcnRzIiwidmVyYnNVbmlvbjIiLCJ2ZXJic1NldDIiLCJTRUVEMiIsImRlZmF1bHRWZXJiQnlMYW5nMiIsImVuc3VyZUFjdGlvblZlcmJTdGFydDIiLCJjaGFuZ2VkIiwidmFsdWUiLCJsYW5nIiwiTExNX1NZU1RFTSIsInBlckV4cExvZ3MiLCJfIiwiZXhwIiwib3JpZ2luYWxCdWxsZXRzIiwidXNlclBheWxvYWQiLCJjb250ZXh0IiwiamRfa2V5d29yZHMiLCJyZXEiLCJvdXQiLCJjYWxsIiwidHh0IiwiYnVsbGV0c194eXoiLCJhbGxvd051bXMiLCJtYXRjaCIsImRldCIsIm51bXMiLCJzZWVuQiIsImRlZHVwZWQiLCJoYXJtb25pemVkIiwiaWR4QiIsInIiLCJpbmRleCIsImFmdGVyIiwicmVhc29uIiwiZXhwZXJpZW5jZUluZGV4IiwicmVjb21tZW5kYXRpb25zIiwiUkVQT1JUIiwicHJ1bmVkIiwic2hvcnRlbmVkIiwicGVyUHJvakxvZ3MiLCJwcm9qIiwicHJvamVjdEluZGV4IiwiX19iciIsInBlckV4cGVyaWVuY2UiLCJwaiIsInBlclByb2plY3RzIiwiX19idWxsZXRSZXdyaXRlIiwicGF5bG9hZCIsImxhbmd1YWdlVXNlZCIsInN1bW1hcnlFZGl0Iiwia2V5d29yZHNVc2VkIiwiYnVsbGV0UmV3cml0ZSIsImoyIiwianVkZ2UiLCJhcmJpdHJhZ2UiLCJqdWRnZV9lcnJvciIsImVycm9yTWVzc2FnZSIsIm1ldGhvZFVzZWQiLCJpbWFnZXNDb3VudCIsImxpbWl0ZWRJbWFnZXMiLCJvY3IiLCJyYXdfY3YiLCJtZXRob2QiLCJjbGVhblJlcyIsInBkZlRvSnNvbiIsInVzZXJNZXNzYWdlIiwicmVxMiIsImV4cGVyaWVuY2VDb3VudCIsImhhc1NraWxscyIsInNraWxscyIsImhhc1Byb2plY3RzIiwiYXJiVXNhZ2UiLCJiZWZvcmVDdiIsImFmdGVyQ3YiLCJub3JtVGV4dCIsImphY2NhcmQiLCJuZWVkc1Jld3JpdGUiLCJvcmlnTGFiZWwiLCJzdW1tYXJ5U3lzIiwic3VtbWFyeVVzZXIiLCJtYWtlUmVxIiwic3lzIiwiY29tcDEiLCJjYW5kaWRhdGUiLCJzdHJvbmdTeXMiLCJjb21wMiIsImNhbmQyIiwiZGV0TGFuZyIsIm5vcm1TdHIyIiwic2lnMiIsImJlZm9yZUxpc3QyIiwiYWZ0ZXJMaXN0MiIsImFmdGVyU2lnczIiLCJlbnN1cmVFZHUyIiwiZWR1S2V5MiIsImhhc0VkdTIiLCJub3JtQSIsImNhbm9uRGF0ZUEiLCJ2YWx1ZXMiLCJrZXlYIiwibGlzdCIsIm9yaWdCdWwiLCJuYiIsImtiIiwia2V5UCIsInAiLCJkZWR1cEFyciIsImFyciIsImxhbmd1YWdlcyIsImZyYW1ld29ya3MiLCJ0b29scyIsIm90aGVyIiwiY2VydGlmaWNhdGlvbnMiLCJvdGhlclNlY3Rpb25zIiwic2VjQXJyIiwic2VlblQiLCJzZWMiLCJpdGVtcyIsInRLIiwidmVyYnNVbmlvbiIsInZlcmJzU2V0IiwiU0VFRCIsImRlZmF1bHRWZXJiQnlMYW5nIiwiZW5zdXJlQWN0aW9uVmVyYlN0YXJ0IiwicmVzcCIsIl9fYnJGdWxsIiwicGpGdWxsIiwiZGlmZiIsImxhYmVsIiwiYyIsImtlcHRMYWJlbHMiLCJkZWNpc2lvbnMiLCJrZXB0RXhwZXJpZW5jZXMiLCJyZW1vdmVkTGFiZWxzIiwicmVtb3ZlZEV4cGVyaWVuY2VzIiwib3JpZ0xhbmdMYWJlbCIsIm5hcnJhdGl2ZUZyb21EaWZmIiwibm9ybSIsInRva2VuU2V0IiwiU3N1bSIsIlNqZCIsImtleXdvcmRzVXNlZEFyciIsImZpbmFsUmVwb3J0IiwiYnVsbGV0RWRpdHMiLCJzb3VyY2VJbmRleCIsImoxIiwiUHJvbWlzZSIsImFsbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/adapt/route.ts\n");

/***/ }),

/***/ "(rsc)/./config/models.ts":
/*!**************************!*\
  !*** ./config/models.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FILE_JUDGE_ENABLED: () => (/* binding */ FILE_JUDGE_ENABLED),\n/* harmony export */   FILE_JUDGE_MODEL: () => (/* binding */ FILE_JUDGE_MODEL),\n/* harmony export */   getConfiguredModel: () => (/* binding */ getConfiguredModel),\n/* harmony export */   getDefaultPricing: () => (/* binding */ getDefaultPricing),\n/* harmony export */   getJudgeModel: () => (/* binding */ getJudgeModel),\n/* harmony export */   getPricingForModel: () => (/* binding */ getPricingForModel),\n/* harmony export */   isJudgeEnabled: () => (/* binding */ isJudgeEnabled),\n/* harmony export */   isOpenRouterEnabled: () => (/* binding */ isOpenRouterEnabled)\n/* harmony export */ });\n// Central config for model selection and pricing\n// Edit the FILE_* constants below to try different OpenRouter models and pricing.\n// You can also override OPENROUTER_ENABLED via env OPENROUTER_ENABLED=true|false.\n// === USER-EDITABLE MODEL SELECTION ===\n// Toggle to route calls to OpenRouter (true) or OpenAI (false) by default.\nconst FILE_OPENROUTER_ENABLED = true; // Openrouter = True/False\n// Models used when OpenRouter is enabled\n// You can change those 3 to test different providers/models easily.\n// Vision models must support image inputs (multimodal). Examples that typically work via OpenRouter:\n// - 'openai/gpt-4o-mini'\n// - 'openai/gpt-4o'\n// - certain Google Gemini 1.5 variants (if supported in your account)\nconst FILE_VISION_MODEL = \"x-ai/grok-code-fast-1\";\nconst FILE_PDF_TO_JSON_MODEL = \"x-ai/grok-code-fast-1\";\nconst FILE_ARBITRAGE_MODEL = \"openai/gpt-4o\";\n// Judge (arbitre) model, used to evaluate quality; controlled by FILE_JUDGE_ENABLED\nconst FILE_JUDGE_MODEL = \"openai/gpt-4o\";\nconst FILE_JUDGE_ENABLED = false; // set to true to enable the judge\n// === USER-EDITABLE PRICING ===\n// Provide pricing per million tokens (USD per 1,000,000 tokens) for the models you test on OpenRouter.\n// Example: if input costs $0.30/M tokens, set inPerMTok: 0.30.\n// If you leave pricing at 0, totals will still show tokens but cost will appear as $0.\nconst FILE_DEFAULT_PRICING = {\n    inPerMTok: 0,\n    outPerMTok: 0\n};\nconst FILE_MODEL_PRICING = {\n    [FILE_VISION_MODEL]: {\n        inPerMTok: 0,\n        outPerMTok: 0\n    },\n    [FILE_PDF_TO_JSON_MODEL]: {\n        inPerMTok: 0.2,\n        outPerMTok: 1.5\n    },\n    [FILE_ARBITRAGE_MODEL]: {\n        inPerMTok: 0.5,\n        outPerMTok: 2.8\n    },\n    // Default pricing for judge model (gpt-5) provided by user: $1.25/M input, $10/M output\n    [FILE_JUDGE_MODEL]: {\n        inPerMTok: 1.25,\n        outPerMTok: 10\n    }\n};\n// === HELPERS ===\nfunction truthyEnv(v) {\n    if (v === undefined || v === null) return undefined;\n    const s = String(v).toLowerCase();\n    return s === \"1\" || s === \"true\" || s === \"yes\" || s === \"on\";\n}\nfunction isOpenRouterEnabled() {\n    const envOverride = truthyEnv(process.env.OPENROUTER_ENABLED);\n    if (envOverride !== undefined) return envOverride;\n    return FILE_OPENROUTER_ENABLED;\n}\nfunction getConfiguredModel(kind) {\n    switch(kind){\n        case \"vision\":\n            return FILE_VISION_MODEL;\n        case \"pdf\":\n            return FILE_PDF_TO_JSON_MODEL;\n        case \"arbitrage\":\n            return FILE_ARBITRAGE_MODEL;\n        default:\n            return FILE_ARBITRAGE_MODEL;\n    }\n}\nfunction sanitizeModelToEnvKey(m) {\n    return m.replace(/[^a-z0-9]+/gi, \"_\").toUpperCase();\n}\nfunction getPricingForModel(model) {\n    if (!model) return undefined;\n    // 1) File-defined per-model pricing\n    if (FILE_MODEL_PRICING[model]) return FILE_MODEL_PRICING[model];\n    // 2) Env overrides per model (PRICE_MODEL_<MODEL>_IN/OUT_PER_MTOK)\n    const key = sanitizeModelToEnvKey(model);\n    const inEnv = process.env[`PRICE_MODEL_${key}_IN_PER_MTOK`];\n    const outEnv = process.env[`PRICE_MODEL_${key}_OUT_PER_MTOK`];\n    const inVal = inEnv ? parseFloat(inEnv) : NaN;\n    const outVal = outEnv ? parseFloat(outEnv) : NaN;\n    if (Number.isFinite(inVal) || Number.isFinite(outVal)) {\n        return {\n            inPerMTok: Number.isFinite(inVal) ? inVal : FILE_DEFAULT_PRICING.inPerMTok,\n            outPerMTok: Number.isFinite(outVal) ? outVal : FILE_DEFAULT_PRICING.outPerMTok\n        };\n    }\n    // 3) No specific pricing found → leave undefined and let callers fallback\n    return undefined;\n}\nfunction getDefaultPricing() {\n    const inEnv = process.env.PRICE_DEFAULT_IN_PER_MTOK;\n    const outEnv = process.env.PRICE_DEFAULT_OUT_PER_MTOK;\n    const inVal = inEnv ? parseFloat(inEnv) : NaN;\n    const outVal = outEnv ? parseFloat(outEnv) : NaN;\n    return {\n        inPerMTok: Number.isFinite(inVal) ? inVal : FILE_DEFAULT_PRICING.inPerMTok,\n        outPerMTok: Number.isFinite(outVal) ? outVal : FILE_DEFAULT_PRICING.outPerMTok\n    };\n}\n// === Judge helpers ===\nfunction truthyEnvStrict(v) {\n    if (v === undefined || v === null) return undefined;\n    const s = String(v).trim().toLowerCase();\n    if (s === \"true\" || s === \"1\" || s === \"yes\" || s === \"on\") return true;\n    if (s === \"false\" || s === \"0\" || s === \"no\" || s === \"off\") return false;\n    return undefined;\n}\nfunction isJudgeEnabled() {\n    // Allow env override: OPENROUTER_JUDGE_ENABLED or JUDGE_ENABLED\n    const envOverride = truthyEnvStrict(process.env.OPENROUTER_JUDGE_ENABLED);\n    const envOverride2 = truthyEnvStrict(process.env.JUDGE_ENABLED);\n    if (envOverride !== undefined) return envOverride;\n    if (envOverride2 !== undefined) return envOverride2;\n    return FILE_JUDGE_ENABLED;\n}\nfunction getJudgeModel() {\n    const m = process.env.JUDGE_MODEL?.trim();\n    return m && m.length > 0 ? m : FILE_JUDGE_MODEL;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WyJ3ZWJwYWNrOi8vcmVhbGN2LWxpdGUtanNvbi8uL2NvbmZpZy9tb2RlbHMudHM/NDRhMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDZW50cmFsIGNvbmZpZyBmb3IgbW9kZWwgc2VsZWN0aW9uIGFuZCBwcmljaW5nXHJcbi8vIEVkaXQgdGhlIEZJTEVfKiBjb25zdGFudHMgYmVsb3cgdG8gdHJ5IGRpZmZlcmVudCBPcGVuUm91dGVyIG1vZGVscyBhbmQgcHJpY2luZy5cclxuLy8gWW91IGNhbiBhbHNvIG92ZXJyaWRlIE9QRU5ST1VURVJfRU5BQkxFRCB2aWEgZW52IE9QRU5ST1VURVJfRU5BQkxFRD10cnVlfGZhbHNlLlxyXG5cclxuZXhwb3J0IHR5cGUgUHJpY2UgPSB7IGluUGVyTVRvazogbnVtYmVyOyBvdXRQZXJNVG9rOiBudW1iZXIgfTtcclxuXHJcbi8vID09PSBVU0VSLUVESVRBQkxFIE1PREVMIFNFTEVDVElPTiA9PT1cclxuLy8gVG9nZ2xlIHRvIHJvdXRlIGNhbGxzIHRvIE9wZW5Sb3V0ZXIgKHRydWUpIG9yIE9wZW5BSSAoZmFsc2UpIGJ5IGRlZmF1bHQuXHJcbmNvbnN0IEZJTEVfT1BFTlJPVVRFUl9FTkFCTEVEID0gdHJ1ZTsgLy8gT3BlbnJvdXRlciA9IFRydWUvRmFsc2VcclxuXHJcbi8vIE1vZGVscyB1c2VkIHdoZW4gT3BlblJvdXRlciBpcyBlbmFibGVkXHJcbi8vIFlvdSBjYW4gY2hhbmdlIHRob3NlIDMgdG8gdGVzdCBkaWZmZXJlbnQgcHJvdmlkZXJzL21vZGVscyBlYXNpbHkuXHJcbi8vIFZpc2lvbiBtb2RlbHMgbXVzdCBzdXBwb3J0IGltYWdlIGlucHV0cyAobXVsdGltb2RhbCkuIEV4YW1wbGVzIHRoYXQgdHlwaWNhbGx5IHdvcmsgdmlhIE9wZW5Sb3V0ZXI6XHJcbi8vIC0gJ29wZW5haS9ncHQtNG8tbWluaSdcclxuLy8gLSAnb3BlbmFpL2dwdC00bydcclxuLy8gLSBjZXJ0YWluIEdvb2dsZSBHZW1pbmkgMS41IHZhcmlhbnRzIChpZiBzdXBwb3J0ZWQgaW4geW91ciBhY2NvdW50KVxyXG5jb25zdCBGSUxFX1ZJU0lPTl9NT0RFTCA9ICd4LWFpL2dyb2stY29kZS1mYXN0LTEnO1xyXG5jb25zdCBGSUxFX1BERl9UT19KU09OX01PREVMID0gJ3gtYWkvZ3Jvay1jb2RlLWZhc3QtMSc7XHJcbmNvbnN0IEZJTEVfQVJCSVRSQUdFX01PREVMID0gJ29wZW5haS9ncHQtNG8nO1xyXG4vLyBKdWRnZSAoYXJiaXRyZSkgbW9kZWwsIHVzZWQgdG8gZXZhbHVhdGUgcXVhbGl0eTsgY29udHJvbGxlZCBieSBGSUxFX0pVREdFX0VOQUJMRURcclxuZXhwb3J0IGNvbnN0IEZJTEVfSlVER0VfTU9ERUwgPSAnb3BlbmFpL2dwdC00byc7XHJcbmV4cG9ydCBjb25zdCBGSUxFX0pVREdFX0VOQUJMRUQgPSBmYWxzZTsgLy8gc2V0IHRvIHRydWUgdG8gZW5hYmxlIHRoZSBqdWRnZVxyXG5cclxuLy8gPT09IFVTRVItRURJVEFCTEUgUFJJQ0lORyA9PT1cclxuLy8gUHJvdmlkZSBwcmljaW5nIHBlciBtaWxsaW9uIHRva2VucyAoVVNEIHBlciAxLDAwMCwwMDAgdG9rZW5zKSBmb3IgdGhlIG1vZGVscyB5b3UgdGVzdCBvbiBPcGVuUm91dGVyLlxyXG4vLyBFeGFtcGxlOiBpZiBpbnB1dCBjb3N0cyAkMC4zMC9NIHRva2Vucywgc2V0IGluUGVyTVRvazogMC4zMC5cclxuLy8gSWYgeW91IGxlYXZlIHByaWNpbmcgYXQgMCwgdG90YWxzIHdpbGwgc3RpbGwgc2hvdyB0b2tlbnMgYnV0IGNvc3Qgd2lsbCBhcHBlYXIgYXMgJDAuXHJcbmNvbnN0IEZJTEVfREVGQVVMVF9QUklDSU5HOiBQcmljZSA9IHsgaW5QZXJNVG9rOiAwLCBvdXRQZXJNVG9rOiAwIH07XHJcbmNvbnN0IEZJTEVfTU9ERUxfUFJJQ0lORzogUmVjb3JkPHN0cmluZywgUHJpY2U+ID0ge1xyXG4gIFtGSUxFX1ZJU0lPTl9NT0RFTF06IHsgaW5QZXJNVG9rOiAwLCBvdXRQZXJNVG9rOiAwIH0sXHJcbiAgW0ZJTEVfUERGX1RPX0pTT05fTU9ERUxdOiB7IGluUGVyTVRvazogMC4yLCBvdXRQZXJNVG9rOiAxLjUgfSxcclxuICBbRklMRV9BUkJJVFJBR0VfTU9ERUxdOiB7IGluUGVyTVRvazogMC41LCBvdXRQZXJNVG9rOiAyLjggfSxcclxuICAvLyBEZWZhdWx0IHByaWNpbmcgZm9yIGp1ZGdlIG1vZGVsIChncHQtNSkgcHJvdmlkZWQgYnkgdXNlcjogJDEuMjUvTSBpbnB1dCwgJDEwL00gb3V0cHV0XHJcbiAgW0ZJTEVfSlVER0VfTU9ERUxdOiB7IGluUGVyTVRvazogMS4yNSwgb3V0UGVyTVRvazogMTAgfSxcclxufTtcclxuXHJcbi8vID09PSBIRUxQRVJTID09PVxyXG5mdW5jdGlvbiB0cnV0aHlFbnYodjogYW55KTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XHJcbiAgaWYgKHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIGNvbnN0IHMgPSBTdHJpbmcodikudG9Mb3dlckNhc2UoKTtcclxuICByZXR1cm4gcyA9PT0gJzEnIHx8IHMgPT09ICd0cnVlJyB8fCBzID09PSAneWVzJyB8fCBzID09PSAnb24nO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNPcGVuUm91dGVyRW5hYmxlZCgpOiBib29sZWFuIHtcclxuICBjb25zdCBlbnZPdmVycmlkZSA9IHRydXRoeUVudihwcm9jZXNzLmVudi5PUEVOUk9VVEVSX0VOQUJMRUQpO1xyXG4gIGlmIChlbnZPdmVycmlkZSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gZW52T3ZlcnJpZGU7XHJcbiAgcmV0dXJuIEZJTEVfT1BFTlJPVVRFUl9FTkFCTEVEO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBBaUtpbmQgPSAndmlzaW9uJyB8ICdwZGYnIHwgJ2FyYml0cmFnZSc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlndXJlZE1vZGVsKGtpbmQ6IEFpS2luZCk6IHN0cmluZyB7XHJcbiAgc3dpdGNoIChraW5kKSB7XHJcbiAgICBjYXNlICd2aXNpb24nOlxyXG4gICAgICByZXR1cm4gRklMRV9WSVNJT05fTU9ERUw7XHJcbiAgICBjYXNlICdwZGYnOlxyXG4gICAgICByZXR1cm4gRklMRV9QREZfVE9fSlNPTl9NT0RFTDtcclxuICAgIGNhc2UgJ2FyYml0cmFnZSc6XHJcbiAgICAgIHJldHVybiBGSUxFX0FSQklUUkFHRV9NT0RFTDtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiBGSUxFX0FSQklUUkFHRV9NT0RFTDtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNhbml0aXplTW9kZWxUb0VudktleShtOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiBtLnJlcGxhY2UoL1teYS16MC05XSsvZ2ksICdfJykudG9VcHBlckNhc2UoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFByaWNpbmdGb3JNb2RlbChtb2RlbDogc3RyaW5nKTogUHJpY2UgfCB1bmRlZmluZWQge1xyXG4gIGlmICghbW9kZWwpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgLy8gMSkgRmlsZS1kZWZpbmVkIHBlci1tb2RlbCBwcmljaW5nXHJcbiAgaWYgKEZJTEVfTU9ERUxfUFJJQ0lOR1ttb2RlbF0pIHJldHVybiBGSUxFX01PREVMX1BSSUNJTkdbbW9kZWxdO1xyXG4gIC8vIDIpIEVudiBvdmVycmlkZXMgcGVyIG1vZGVsIChQUklDRV9NT0RFTF88TU9ERUw+X0lOL09VVF9QRVJfTVRPSylcclxuICBjb25zdCBrZXkgPSBzYW5pdGl6ZU1vZGVsVG9FbnZLZXkobW9kZWwpO1xyXG4gIGNvbnN0IGluRW52ID0gcHJvY2Vzcy5lbnZbYFBSSUNFX01PREVMXyR7a2V5fV9JTl9QRVJfTVRPS2BdO1xyXG4gIGNvbnN0IG91dEVudiA9IHByb2Nlc3MuZW52W2BQUklDRV9NT0RFTF8ke2tleX1fT1VUX1BFUl9NVE9LYF07XHJcbiAgY29uc3QgaW5WYWwgPSBpbkVudiA/IHBhcnNlRmxvYXQoaW5FbnYpIDogTmFOO1xyXG4gIGNvbnN0IG91dFZhbCA9IG91dEVudiA/IHBhcnNlRmxvYXQob3V0RW52KSA6IE5hTjtcclxuICBpZiAoTnVtYmVyLmlzRmluaXRlKGluVmFsKSB8fCBOdW1iZXIuaXNGaW5pdGUob3V0VmFsKSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaW5QZXJNVG9rOiBOdW1iZXIuaXNGaW5pdGUoaW5WYWwpID8gaW5WYWwgOiBGSUxFX0RFRkFVTFRfUFJJQ0lORy5pblBlck1Ub2ssXHJcbiAgICAgIG91dFBlck1Ub2s6IE51bWJlci5pc0Zpbml0ZShvdXRWYWwpID8gb3V0VmFsIDogRklMRV9ERUZBVUxUX1BSSUNJTkcub3V0UGVyTVRvayxcclxuICAgIH07XHJcbiAgfVxyXG4gIC8vIDMpIE5vIHNwZWNpZmljIHByaWNpbmcgZm91bmQg4oaSIGxlYXZlIHVuZGVmaW5lZCBhbmQgbGV0IGNhbGxlcnMgZmFsbGJhY2tcclxuICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdFByaWNpbmcoKTogUHJpY2Uge1xyXG4gIGNvbnN0IGluRW52ID0gcHJvY2Vzcy5lbnYuUFJJQ0VfREVGQVVMVF9JTl9QRVJfTVRPSztcclxuICBjb25zdCBvdXRFbnYgPSBwcm9jZXNzLmVudi5QUklDRV9ERUZBVUxUX09VVF9QRVJfTVRPSztcclxuICBjb25zdCBpblZhbCA9IGluRW52ID8gcGFyc2VGbG9hdChpbkVudikgOiBOYU47XHJcbiAgY29uc3Qgb3V0VmFsID0gb3V0RW52ID8gcGFyc2VGbG9hdChvdXRFbnYpIDogTmFOO1xyXG4gIHJldHVybiB7XHJcbiAgICBpblBlck1Ub2s6IE51bWJlci5pc0Zpbml0ZShpblZhbCkgPyBpblZhbCA6IEZJTEVfREVGQVVMVF9QUklDSU5HLmluUGVyTVRvayxcclxuICAgIG91dFBlck1Ub2s6IE51bWJlci5pc0Zpbml0ZShvdXRWYWwpID8gb3V0VmFsIDogRklMRV9ERUZBVUxUX1BSSUNJTkcub3V0UGVyTVRvayxcclxuICB9O1xyXG59XHJcblxyXG4vLyA9PT0gSnVkZ2UgaGVscGVycyA9PT1cclxuZnVuY3Rpb24gdHJ1dGh5RW52U3RyaWN0KHY6IGFueSk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xyXG4gIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICBjb25zdCBzID0gU3RyaW5nKHYpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG4gIGlmIChzID09PSAndHJ1ZScgfHwgcyA9PT0gJzEnIHx8IHMgPT09ICd5ZXMnIHx8IHMgPT09ICdvbicpIHJldHVybiB0cnVlO1xyXG4gIGlmIChzID09PSAnZmFsc2UnIHx8IHMgPT09ICcwJyB8fCBzID09PSAnbm8nIHx8IHMgPT09ICdvZmYnKSByZXR1cm4gZmFsc2U7XHJcbiAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzSnVkZ2VFbmFibGVkKCk6IGJvb2xlYW4ge1xyXG4gIC8vIEFsbG93IGVudiBvdmVycmlkZTogT1BFTlJPVVRFUl9KVURHRV9FTkFCTEVEIG9yIEpVREdFX0VOQUJMRURcclxuICBjb25zdCBlbnZPdmVycmlkZSA9IHRydXRoeUVudlN0cmljdChwcm9jZXNzLmVudi5PUEVOUk9VVEVSX0pVREdFX0VOQUJMRUQpO1xyXG4gIGNvbnN0IGVudk92ZXJyaWRlMiA9IHRydXRoeUVudlN0cmljdChwcm9jZXNzLmVudi5KVURHRV9FTkFCTEVEKTtcclxuICBpZiAoZW52T3ZlcnJpZGUgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGVudk92ZXJyaWRlO1xyXG4gIGlmIChlbnZPdmVycmlkZTIgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGVudk92ZXJyaWRlMjtcclxuICByZXR1cm4gRklMRV9KVURHRV9FTkFCTEVEO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SnVkZ2VNb2RlbCgpOiBzdHJpbmcge1xyXG4gIGNvbnN0IG0gPSBwcm9jZXNzLmVudi5KVURHRV9NT0RFTD8udHJpbSgpO1xyXG4gIHJldHVybiBtICYmIG0ubGVuZ3RoID4gMCA/IG0gOiBGSUxFX0pVREdFX01PREVMO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJGSUxFX09QRU5ST1VURVJfRU5BQkxFRCIsIkZJTEVfVklTSU9OX01PREVMIiwiRklMRV9QREZfVE9fSlNPTl9NT0RFTCIsIkZJTEVfQVJCSVRSQUdFX01PREVMIiwiRklMRV9KVURHRV9NT0RFTCIsIkZJTEVfSlVER0VfRU5BQkxFRCIsIkZJTEVfREVGQVVMVF9QUklDSU5HIiwiaW5QZXJNVG9rIiwib3V0UGVyTVRvayIsIkZJTEVfTU9ERUxfUFJJQ0lORyIsInRydXRoeUVudiIsInYiLCJ1bmRlZmluZWQiLCJzIiwiU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJpc09wZW5Sb3V0ZXJFbmFibGVkIiwiZW52T3ZlcnJpZGUiLCJwcm9jZXNzIiwiZW52IiwiT1BFTlJPVVRFUl9FTkFCTEVEIiwiZ2V0Q29uZmlndXJlZE1vZGVsIiwia2luZCIsInNhbml0aXplTW9kZWxUb0VudktleSIsIm0iLCJyZXBsYWNlIiwidG9VcHBlckNhc2UiLCJnZXRQcmljaW5nRm9yTW9kZWwiLCJtb2RlbCIsImtleSIsImluRW52Iiwib3V0RW52IiwiaW5WYWwiLCJwYXJzZUZsb2F0IiwiTmFOIiwib3V0VmFsIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJnZXREZWZhdWx0UHJpY2luZyIsIlBSSUNFX0RFRkFVTFRfSU5fUEVSX01UT0siLCJQUklDRV9ERUZBVUxUX09VVF9QRVJfTVRPSyIsInRydXRoeUVudlN0cmljdCIsInRyaW0iLCJpc0p1ZGdlRW5hYmxlZCIsIk9QRU5ST1VURVJfSlVER0VfRU5BQkxFRCIsImVudk92ZXJyaWRlMiIsIkpVREdFX0VOQUJMRUQiLCJnZXRKdWRnZU1vZGVsIiwiSlVER0VfTU9ERUwiLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./config/models.ts\n");

/***/ }),

/***/ "(rsc)/./lib/clean.ts":
/*!**********************!*\
  !*** ./lib/clean.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toCleanResume: () => (/* binding */ toCleanResume)\n/* harmony export */ });\n/* harmony import */ var _lib_parse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/parse */ \"(rsc)/./lib/parse.ts\");\n\nconst HEADINGS = {\n    fr: [\n        \"profil\",\n        \"r\\xe9sum\\xe9\",\n        \"resume\",\n        \"summary\",\n        \"experience\",\n        \"exp\\xe9rience\",\n        \"exp\\xe9riences\",\n        \"exp\\xe9rience professionnelle\",\n        \"exp\\xe9riences professionnelles\",\n        \"formation\",\n        \"formations\",\n        \"\\xe9ducation\",\n        \"education\",\n        \"comp\\xe9tences\",\n        \"skills\",\n        \"langues\",\n        \"languages\",\n        \"certifications\",\n        \"projets\",\n        \"projects\",\n        \"centres d'int\\xe9r\\xeat\",\n        \"interests\"\n    ]\n};\n// Multi-language detection (scripts + simple stopwords)\nfunction detectLangFromText(text) {\n    const t = (text || \"\").toLowerCase();\n    if (!t.trim()) return \"unknown\";\n    // Scripts\n    if (/\\p{Script=Arabic}/u.test(text)) return \"ar\";\n    if (/[\\u4E00-\\u9FFF]/.test(text)) return \"zh\";\n    if (/[\\u3040-\\u30FF]/.test(text)) return \"ja\";\n    if (/[\\uAC00-\\uD7AF]/.test(text)) return \"ko\";\n    // Latin-based stopwords\n    const langs = {\n        fr: [\n            \" le \",\n            \" la \",\n            \" les \",\n            \" de \",\n            \" des \",\n            \" et \",\n            \" \\xe0 \",\n            \" ou \",\n            \" exp\\xe9rience \",\n            \"comp\\xe9tence\",\n            \"profil\"\n        ],\n        en: [\n            \" the \",\n            \" and \",\n            \" to \",\n            \" or \",\n            \" experience \",\n            \" skills \",\n            \" profile \",\n            \" developer \",\n            \" engineer \"\n        ],\n        es: [\n            \" el \",\n            \" la \",\n            \" los \",\n            \" las \",\n            \" de \",\n            \" y \",\n            \" para \",\n            \" experiencia \",\n            \" perfil \",\n            \" desarrollador \"\n        ],\n        it: [\n            \" il \",\n            \" la \",\n            \" lo \",\n            \" le \",\n            \" di \",\n            \" e \",\n            \" per \",\n            \" esperienza \",\n            \" profilo \",\n            \" sviluppatore \"\n        ],\n        de: [\n            \" der \",\n            \" die \",\n            \" das \",\n            \" und \",\n            \" f\\xfcr \",\n            \" erfahrung \",\n            \" profil \",\n            \" entwickler \"\n        ],\n        pt: [\n            \" o \",\n            \" a \",\n            \" os \",\n            \" as \",\n            \" de \",\n            \" e \",\n            \" para \",\n            \" experi\\xeancia \",\n            \" perfil \",\n            \" desenvolvedor \"\n        ],\n        nl: [\n            \" de \",\n            \" het \",\n            \" en \",\n            \" voor \",\n            \" ervaring \",\n            \" profiel \",\n            \" ontwikkelaar \"\n        ],\n        tr: [\n            \" ve \",\n            \" i\\xe7in \",\n            \" deneyim \",\n            \" profil \",\n            \" geliştirici \",\n            \" m\\xfchendis \"\n        ]\n    };\n    let best = \"unknown\";\n    let bestScore = 0;\n    for (const [code, words] of Object.entries(langs)){\n        const score = words.reduce((acc, w)=>acc + (t.includes(w) ? 1 : 0), 0);\n        if (score > bestScore) {\n            bestScore = score;\n            best = code;\n        }\n    }\n    return best;\n}\nfunction extractEmail(text) {\n    const m = text.match(/[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}/i);\n    return m ? m[0] : undefined;\n}\nfunction extractPhone(text) {\n    const m = text.match(/(\\+\\d{1,3}[\\s.-]?)?(0|\\+?\\d{1,3})?[\\s.-]?(\\d[\\s.-]?){8,12}/);\n    return m ? m[0] : undefined;\n}\nfunction extractLinks(text) {\n    const links = {};\n    const linkedin = text.match(/https?:\\/\\/([\\w.-]*linkedin\\.com\\/[\\w\\-_/]+)/i);\n    const github = text.match(/https?:\\/\\/([\\w.-]*github\\.com\\/[\\w\\-_/]+)/i);\n    const portfolio = text.match(/https?:\\/\\/[\\w.-]+\\.[a-z]{2,}(?:\\/[\\w\\-_/]*)?/i);\n    if (linkedin) links.linkedin = linkedin[0];\n    if (github) links.github = github[0];\n    // Avoid overwriting with LinkedIn/GitHub\n    if (portfolio && !links.linkedin && !links.github) links.portfolio = portfolio[0];\n    return links;\n}\nfunction probableFullName(firstLines) {\n    // Take first 1-3 lines, pick the longest line with 2-5 capitalized words\n    const candidates = firstLines.slice(0, 3);\n    for (const line of candidates){\n        const words = line.trim().split(/\\s+/);\n        const capWords = words.filter((w)=>/^[A-ZÀÂÄÇÉÈÊËÏÎÔÖÙÛÜŸ][\\p{L}'-]+$/u.test(w));\n        if (capWords.length >= 2 && capWords.length <= 5) {\n            return capWords.join(\" \");\n        }\n    }\n    return undefined;\n}\nfunction splitSections(text) {\n    const lines = text.split(\"\\n\");\n    const indices = [];\n    const allHeadings = Array.from(new Set(HEADINGS.fr));\n    for(let i = 0; i < lines.length; i++){\n        const l = lines[i].trim().toLowerCase();\n        if (!l) continue;\n        for (const h of allHeadings){\n            if (l === h || l.startsWith(h + \" \")) {\n                indices.push({\n                    key: h,\n                    idx: i\n                });\n                break;\n            }\n        }\n    }\n    indices.sort((a, b)=>a.idx - b.idx);\n    const result = {};\n    if (indices.length === 0) {\n        result[\"__root__\"] = text;\n        return result;\n    }\n    // Header block\n    const headerStart = 0;\n    const headerEnd = indices[0].idx;\n    result[\"__header__\"] = lines.slice(headerStart, headerEnd).join(\"\\n\");\n    for(let i = 0; i < indices.length; i++){\n        const start = indices[i].idx + 1;\n        const end = i + 1 < indices.length ? indices[i + 1].idx : lines.length;\n        result[indices[i].key] = lines.slice(start, end).join(\"\\n\").trim();\n    }\n    return result;\n}\nfunction extractBullets(block) {\n    const lines = block.split(\"\\n\");\n    const bullets = [];\n    for (const l of lines){\n        const s = l.trim().replace(/^[-•·‣⁃]\\s*/, \"\");\n        if (!s) continue;\n        if (/^[-•·‣⁃]/.test(l.trim()) || s.length > 12) {\n            bullets.push(s);\n        }\n    }\n    // Deduplicate\n    return Array.from(new Set(bullets));\n}\nfunction parseExperienceSection(block) {\n    const items = [];\n    if (!block.trim()) return items;\n    // Split by double newlines as rough blocks\n    const parts = block.split(/\\n\\s*\\n+/);\n    for (const p of parts){\n        const lines = p.split(\"\\n\").map((s)=>s.trim()).filter(Boolean);\n        if (lines.length === 0) continue;\n        const head = lines[0];\n        // dates\n        const dateRegex = /(\\d{2}\\/\\d{4}|\\d{4}-\\d{2}|\\d{4})\\s*(?:–|-|to|au|\\/)\\s*(Present|Présent|\\d{2}\\/\\d{4}|\\d{4}-\\d{2}|\\d{4})/i;\n        const m = p.match(dateRegex);\n        let startDateRaw;\n        let endDateRaw;\n        if (m) {\n            startDateRaw = m[1];\n            endDateRaw = m[2];\n        }\n        // company + title heuristics\n        let company;\n        let title;\n        const pipeSplit = head.split(\"|\").map((s)=>s.trim());\n        if (pipeSplit.length >= 2) {\n            title = pipeSplit[0];\n            company = pipeSplit[1];\n        } else {\n            // Try uppercase token as company\n            const up = head.match(/[A-ZÀÂÄÇÉÈÊËÏÎÔÖÙÛÜŸ][A-ZÀÂÄÇÉÈÊËÏÎÔÖÙÛÜŸ\\- '&]+/g);\n            if (up && up[0].length >= 3) company = up[0].trim();\n            title = head;\n        }\n        // location\n        let location;\n        const locMatch = p.match(/\\b(Paris|France|Maroc|Morocco|Rabat|Courbevoie|Bois\\-Colombes|Strasbourg)\\b/i);\n        if (locMatch) location = locMatch[0];\n        const bullets = extractBullets(p);\n        if (bullets.length === 0) bullets.push(head);\n        items.push({\n            company,\n            title,\n            location,\n            startDateRaw,\n            endDateRaw,\n            datesRaw: m?.[0],\n            bullets,\n            raw: p\n        });\n    }\n    return items;\n}\nfunction parseEducationSection(block) {\n    const items = [];\n    if (!block.trim()) return items;\n    const parts = block.split(/\\n\\s*\\n+/);\n    for (const p of parts){\n        const schoolMatch = p.match(/(Université|University|École|Ecole|Lycée|School)\\s[^\\n,|]*/i);\n        const school = schoolMatch?.[0]?.trim();\n        const degreeMatch = p.match(/(Actuaire|Master|Licence|Bachelor|DUAS|CPGE|MP|Engineer|Dipl[oô]me)\\s[^\\n,|]*/i);\n        const degree = degreeMatch?.[0]?.trim();\n        const dates = (p.match(/\\b(\\d{4})(?:\\s*[–-]\\s*(\\d{4}))?\\b/) || [])[0];\n        const loc = (p.match(/\\b(Paris|France|Maroc|Rabat|Courbevoie|Bois\\-Colombes|Strasbourg)\\b/i) || [])[0];\n        items.push({\n            school,\n            degree,\n            dates,\n            location: loc,\n            raw: p\n        });\n    }\n    return items;\n}\nfunction parseSkills(block) {\n    const lines = block.split(\"\\n\").map((s)=>s.trim()).filter(Boolean);\n    const res = {};\n    const pushAll = (arr)=>arr && arr.length ? arr : undefined;\n    const flat = [];\n    for (const l of lines){\n        const parts = l.split(/[:|\\-]/).map((s)=>s.trim());\n        const items = parts[parts.length - 1].split(/[;,•]/).map((s)=>s.trim()).filter(Boolean);\n        flat.push(...items);\n    }\n    // naive categorization\n    const languages = [];\n    const frameworks = [];\n    const tools = [];\n    for (const it of flat){\n        if (/^(python|r|sas|sql|excel|vba|typescript|javascript|java|c\\+\\+|c#)$/i.test(it)) languages.push(it);\n        else if (/^(react|node\\.js|pytorch|tensorflow|scikit\\-learn|xgboost|lightgbm|prophet)$/i.test(it)) frameworks.push(it);\n        else tools.push(it);\n    }\n    res.languages = pushAll(languages);\n    res.frameworks = pushAll(frameworks);\n    res.tools = pushAll(tools);\n    if (!res.languages && !res.frameworks && !res.tools) res.other = pushAll(flat);\n    return res;\n}\nfunction parseLanguages(block) {\n    const lines = block.split(\"\\n\").map((s)=>s.trim()).filter(Boolean);\n    const out = [];\n    for (const l of lines){\n        const parts = l.split(/[;•,]/).map((s)=>s.trim());\n        out.push(...parts);\n    }\n    return Array.from(new Set(out)).filter(Boolean);\n}\nfunction parseCertifications(block) {\n    return extractBullets(block);\n}\nfunction toCleanResume(rawText) {\n    const t0 = (0,_lib_parse__WEBPACK_IMPORTED_MODULE_0__.normalizeText)(rawText);\n    // Remove pagination like \"1 / 2\"\n    const t = t0.replace(/\\n\\s*\\d+\\s*\\/\\s*\\d+\\s*\\n/g, \"\\n\");\n    const language = detectLangFromText(t);\n    const sections = splitSections(t);\n    const headerBlock = sections[\"__header__\"] || \"\";\n    const firstLines = headerBlock.split(\"\\n\").map((s)=>s.trim()).filter(Boolean);\n    const header = {\n        fullName: probableFullName(firstLines),\n        email: extractEmail(t),\n        phone: extractPhone(t),\n        links: extractLinks(t),\n        location: undefined\n    };\n    // Summary candidates\n    let summary;\n    for (const k of Object.keys(sections)){\n        if (k.includes(\"profil\") || k.includes(\"r\\xe9sum\\xe9\") || k.includes(\"resume\") || k.includes(\"summary\")) {\n            const s = sections[k];\n            if (s && s.length > 20) {\n                summary = s.trim();\n                break;\n            }\n        }\n    }\n    const expKey = Object.keys(sections).find((k)=>k.includes(\"exp\"));\n    const experience = expKey ? parseExperienceSection(sections[expKey]) : undefined;\n    const eduKey = Object.keys(sections).find((k)=>k.includes(\"formation\") || k.includes(\"\\xe9ducation\") || k.includes(\"education\"));\n    const education = eduKey ? parseEducationSection(sections[eduKey]) : undefined;\n    const skillsKey = Object.keys(sections).find((k)=>k.includes(\"comp\\xe9tences\") || k.includes(\"skills\"));\n    const skills = skillsKey ? parseSkills(sections[skillsKey]) : undefined;\n    const languagesKey = Object.keys(sections).find((k)=>k.includes(\"langues\") || k.includes(\"languages\"));\n    const languages = languagesKey ? parseLanguages(sections[languagesKey]) : undefined;\n    const certKey = Object.keys(sections).find((k)=>k.includes(\"certifications\"));\n    const certifications = certKey ? parseCertifications(sections[certKey]) : undefined;\n    const warnings = [];\n    if (!header.fullName) warnings.push(\"Nom complet non d\\xe9tect\\xe9 avec certitude.\");\n    if (!experience || experience.length === 0) warnings.push(\"Aucune exp\\xe9rience d\\xe9tect\\xe9e.\");\n    return {\n        metadata: {\n            language,\n            sourceOrderPreserved: true,\n            warnings: warnings.length ? warnings : undefined\n        },\n        header,\n        summary,\n        experience,\n        education,\n        skills,\n        languages,\n        certifications\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDO0lBQ3pGLE1BQU04RSxZQUFZMkIsZUFBZXZCLGVBQWVPLFFBQVEsQ0FBQ2dCLGFBQWEsSUFBSXJHO0lBRTFFLE1BQU1zRyxVQUFVaEgsT0FBT3VHLElBQUksQ0FBQ1IsVUFBVVUsSUFBSSxDQUFDSCxDQUFBQSxJQUFLQSxFQUFFaEcsUUFBUSxDQUFDO0lBQzNELE1BQU0yRyxpQkFBaUJELFVBQVV0QixvQkFBb0JLLFFBQVEsQ0FBQ2lCLFFBQVEsSUFBSXRHO0lBRTFFLE1BQU13RyxXQUFxQixFQUFFO0lBQzdCLElBQUksQ0FBQ2pCLE9BQU9DLFFBQVEsRUFBRWdCLFNBQVM1RSxJQUFJLENBQUM7SUFDcEMsSUFBSSxDQUFDb0UsY0FBY0EsV0FBV2pGLE1BQU0sS0FBSyxHQUFHeUYsU0FBUzVFLElBQUksQ0FBQztJQUUxRCxPQUFPO1FBQ0w2RSxVQUFVO1lBQUVyQjtZQUFVc0Isc0JBQXNCO1lBQU1GLFVBQVVBLFNBQVN6RixNQUFNLEdBQUd5RixXQUFXeEc7UUFBVTtRQUNuR3VGO1FBQ0FJO1FBQ0FLO1FBQ0FFO1FBQ0FFO1FBQ0ExQjtRQUNBNkI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVhbGN2LWxpdGUtanNvbi8uL2xpYi9jbGVhbi50cz8wMzE1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG5vcm1hbGl6ZVRleHQgfSBmcm9tICdAL2xpYi9wYXJzZSc7XHJcblxyXG5leHBvcnQgdHlwZSBDbGVhbkxpbmsgPSB7XHJcbiAgbGlua2VkaW4/OiBzdHJpbmc7XHJcbiAgZ2l0aHViPzogc3RyaW5nO1xyXG4gIHBvcnRmb2xpbz86IHN0cmluZztcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIENsZWFuSGVhZGVyID0ge1xyXG4gIGZ1bGxOYW1lPzogc3RyaW5nO1xyXG4gIGVtYWlsPzogc3RyaW5nO1xyXG4gIHBob25lPzogc3RyaW5nO1xyXG4gIGxvY2F0aW9uPzogc3RyaW5nO1xyXG4gIGxpbmtzPzogQ2xlYW5MaW5rO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQ2xlYW5FeHBlcmllbmNlID0ge1xyXG4gIGNvbXBhbnk/OiBzdHJpbmc7XHJcbiAgdGl0bGU/OiBzdHJpbmc7XHJcbiAgbG9jYXRpb24/OiBzdHJpbmc7XHJcbiAgc3RhcnREYXRlUmF3Pzogc3RyaW5nO1xyXG4gIGVuZERhdGVSYXc/OiBzdHJpbmc7XHJcbiAgZGF0ZXNSYXc/OiBzdHJpbmc7XHJcbiAgYnVsbGV0cz86IHN0cmluZ1tdO1xyXG4gIHJhdz86IHN0cmluZzsgLy8gZmFsbGJhY2sgZnVsbCBibG9ja1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQ2xlYW5FZHVjYXRpb24gPSB7XHJcbiAgc2Nob29sPzogc3RyaW5nO1xyXG4gIGRlZ3JlZT86IHN0cmluZztcclxuICBsb2NhdGlvbj86IHN0cmluZztcclxuICBkYXRlcz86IHN0cmluZztcclxuICByYXc/OiBzdHJpbmc7XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBDbGVhblNraWxscyA9IHtcclxuICBsYW5ndWFnZXM/OiBzdHJpbmdbXTtcclxuICBmcmFtZXdvcmtzPzogc3RyaW5nW107XHJcbiAgdG9vbHM/OiBzdHJpbmdbXTtcclxuICBvdGhlcj86IHN0cmluZ1tdO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQ2xlYW5SZXN1bWUgPSB7XHJcbiAgbWV0YWRhdGE6IHtcclxuICAgIGxhbmd1YWdlOiBzdHJpbmc7XHJcbiAgICBzb3VyY2VPcmRlclByZXNlcnZlZDogYm9vbGVhbjtcclxuICAgIHdhcm5pbmdzPzogc3RyaW5nW107XHJcbiAgfTtcclxuICBoZWFkZXI6IENsZWFuSGVhZGVyO1xyXG4gIHN1bW1hcnk/OiBzdHJpbmc7XHJcbiAgZXhwZXJpZW5jZT86IENsZWFuRXhwZXJpZW5jZVtdO1xyXG4gIGVkdWNhdGlvbj86IENsZWFuRWR1Y2F0aW9uW107XHJcbiAgcHJvamVjdHM/OiB7IG5hbWU/OiBzdHJpbmc7IGJ1bGxldHM/OiBzdHJpbmdbXTsgcmF3Pzogc3RyaW5nIH1bXTtcclxuICBza2lsbHM/OiBDbGVhblNraWxscztcclxuICBsYW5ndWFnZXM/OiBzdHJpbmdbXTtcclxuICBjZXJ0aWZpY2F0aW9ucz86IHN0cmluZ1tdO1xyXG59O1xyXG5cclxuY29uc3QgSEVBRElOR1MgPSB7XHJcbiAgZnI6IFtcclxuICAgICdwcm9maWwnLCAncsOpc3Vtw6knLCAncmVzdW1lJywgJ3N1bW1hcnknLCAnZXhwZXJpZW5jZScsICdleHDDqXJpZW5jZScsICdleHDDqXJpZW5jZXMnLCAnZXhww6lyaWVuY2UgcHJvZmVzc2lvbm5lbGxlJywgJ2V4cMOpcmllbmNlcyBwcm9mZXNzaW9ubmVsbGVzJyxcclxuICAgICdmb3JtYXRpb24nLCAnZm9ybWF0aW9ucycsICfDqWR1Y2F0aW9uJywgJ2VkdWNhdGlvbicsICdjb21ww6l0ZW5jZXMnLCAnc2tpbGxzJywgJ2xhbmd1ZXMnLCAnbGFuZ3VhZ2VzJywgJ2NlcnRpZmljYXRpb25zJywgJ3Byb2pldHMnLCAncHJvamVjdHMnLFxyXG4gICAgXCJjZW50cmVzIGQnaW50w6lyw6p0XCIsICdpbnRlcmVzdHMnXHJcbiAgXSxcclxufTtcclxuXHJcbi8vIE11bHRpLWxhbmd1YWdlIGRldGVjdGlvbiAoc2NyaXB0cyArIHNpbXBsZSBzdG9wd29yZHMpXHJcbmZ1bmN0aW9uIGRldGVjdExhbmdGcm9tVGV4dCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIGNvbnN0IHQgPSAodGV4dCB8fCAnJykudG9Mb3dlckNhc2UoKTtcclxuICBpZiAoIXQudHJpbSgpKSByZXR1cm4gJ3Vua25vd24nO1xyXG4gIC8vIFNjcmlwdHNcclxuICBpZiAoL1xccHtTY3JpcHQ9QXJhYmljfS91LnRlc3QodGV4dCkpIHJldHVybiAnYXInO1xyXG4gIGlmICgvW1xcdTRFMDAtXFx1OUZGRl0vLnRlc3QodGV4dCkpIHJldHVybiAnemgnO1xyXG4gIGlmICgvW1xcdTMwNDAtXFx1MzBGRl0vLnRlc3QodGV4dCkpIHJldHVybiAnamEnO1xyXG4gIGlmICgvW1xcdUFDMDAtXFx1RDdBRl0vLnRlc3QodGV4dCkpIHJldHVybiAna28nO1xyXG4gIC8vIExhdGluLWJhc2VkIHN0b3B3b3Jkc1xyXG4gIGNvbnN0IGxhbmdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XHJcbiAgICBmcjogWycgbGUgJywgJyBsYSAnLCAnIGxlcyAnLCAnIGRlICcsICcgZGVzICcsICcgZXQgJywgJyDDoCAnLCAnIG91ICcsICcgZXhww6lyaWVuY2UgJywgJ2NvbXDDqXRlbmNlJywgJ3Byb2ZpbCddLFxyXG4gICAgZW46IFsnIHRoZSAnLCAnIGFuZCAnLCAnIHRvICcsICcgb3IgJywgJyBleHBlcmllbmNlICcsICcgc2tpbGxzICcsICcgcHJvZmlsZSAnLCAnIGRldmVsb3BlciAnLCAnIGVuZ2luZWVyICddLFxyXG4gICAgZXM6IFsnIGVsICcsICcgbGEgJywgJyBsb3MgJywgJyBsYXMgJywgJyBkZSAnLCAnIHkgJywgJyBwYXJhICcsICcgZXhwZXJpZW5jaWEgJywgJyBwZXJmaWwgJywgJyBkZXNhcnJvbGxhZG9yICddLFxyXG4gICAgaXQ6IFsnIGlsICcsICcgbGEgJywgJyBsbyAnLCAnIGxlICcsICcgZGkgJywgJyBlICcsICcgcGVyICcsICcgZXNwZXJpZW56YSAnLCAnIHByb2ZpbG8gJywgJyBzdmlsdXBwYXRvcmUgJ10sXHJcbiAgICBkZTogWycgZGVyICcsICcgZGllICcsICcgZGFzICcsICcgdW5kICcsICcgZsO8ciAnLCAnIGVyZmFocnVuZyAnLCAnIHByb2ZpbCAnLCAnIGVudHdpY2tsZXIgJ10sXHJcbiAgICBwdDogWycgbyAnLCAnIGEgJywgJyBvcyAnLCAnIGFzICcsICcgZGUgJywgJyBlICcsICcgcGFyYSAnLCAnIGV4cGVyacOqbmNpYSAnLCAnIHBlcmZpbCAnLCAnIGRlc2Vudm9sdmVkb3IgJ10sXHJcbiAgICBubDogWycgZGUgJywgJyBoZXQgJywgJyBlbiAnLCAnIHZvb3IgJywgJyBlcnZhcmluZyAnLCAnIHByb2ZpZWwgJywgJyBvbnR3aWtrZWxhYXIgJ10sXHJcbiAgICB0cjogWycgdmUgJywgJyBpw6dpbiAnLCAnIGRlbmV5aW0gJywgJyBwcm9maWwgJywgJyBnZWxpxZ90aXJpY2kgJywgJyBtw7xoZW5kaXMgJ10sXHJcbiAgfTtcclxuICBsZXQgYmVzdCA9ICd1bmtub3duJztcclxuICBsZXQgYmVzdFNjb3JlID0gMDtcclxuICBmb3IgKGNvbnN0IFtjb2RlLCB3b3Jkc10gb2YgT2JqZWN0LmVudHJpZXMobGFuZ3MpKSB7XHJcbiAgICBjb25zdCBzY29yZSA9IHdvcmRzLnJlZHVjZSgoYWNjLCB3KSA9PiBhY2MgKyAodC5pbmNsdWRlcyh3KSA/IDEgOiAwKSwgMCk7XHJcbiAgICBpZiAoc2NvcmUgPiBiZXN0U2NvcmUpIHsgYmVzdFNjb3JlID0gc2NvcmU7IGJlc3QgPSBjb2RlOyB9XHJcbiAgfVxyXG4gIHJldHVybiBiZXN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHRyYWN0RW1haWwodGV4dDogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICBjb25zdCBtID0gdGV4dC5tYXRjaCgvW2EtejAtOS5fJSstXStAW2EtejAtOS4tXStcXC5bYS16XXsyLH0vaSk7XHJcbiAgcmV0dXJuIG0gPyBtWzBdIDogdW5kZWZpbmVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHRyYWN0UGhvbmUodGV4dDogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICBjb25zdCBtID0gdGV4dC5tYXRjaCgvKFxcK1xcZHsxLDN9W1xccy4tXT8pPygwfFxcKz9cXGR7MSwzfSk/W1xccy4tXT8oXFxkW1xccy4tXT8pezgsMTJ9Lyk7XHJcbiAgcmV0dXJuIG0gPyBtWzBdIDogdW5kZWZpbmVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHRyYWN0TGlua3ModGV4dDogc3RyaW5nKTogQ2xlYW5MaW5rIHtcclxuICBjb25zdCBsaW5rczogQ2xlYW5MaW5rID0ge307XHJcbiAgY29uc3QgbGlua2VkaW4gPSB0ZXh0Lm1hdGNoKC9odHRwcz86XFwvXFwvKFtcXHcuLV0qbGlua2VkaW5cXC5jb21cXC9bXFx3XFwtXy9dKykvaSk7XHJcbiAgY29uc3QgZ2l0aHViID0gdGV4dC5tYXRjaCgvaHR0cHM/OlxcL1xcLyhbXFx3Li1dKmdpdGh1YlxcLmNvbVxcL1tcXHdcXC1fL10rKS9pKTtcclxuICBjb25zdCBwb3J0Zm9saW8gPSB0ZXh0Lm1hdGNoKC9odHRwcz86XFwvXFwvW1xcdy4tXStcXC5bYS16XXsyLH0oPzpcXC9bXFx3XFwtXy9dKik/L2kpO1xyXG4gIGlmIChsaW5rZWRpbikgbGlua3MubGlua2VkaW4gPSBsaW5rZWRpblswXTtcclxuICBpZiAoZ2l0aHViKSBsaW5rcy5naXRodWIgPSBnaXRodWJbMF07XHJcbiAgLy8gQXZvaWQgb3ZlcndyaXRpbmcgd2l0aCBMaW5rZWRJbi9HaXRIdWJcclxuICBpZiAocG9ydGZvbGlvICYmICFsaW5rcy5saW5rZWRpbiAmJiAhbGlua3MuZ2l0aHViKSBsaW5rcy5wb3J0Zm9saW8gPSBwb3J0Zm9saW9bMF07XHJcbiAgcmV0dXJuIGxpbmtzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwcm9iYWJsZUZ1bGxOYW1lKGZpcnN0TGluZXM6IHN0cmluZ1tdKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAvLyBUYWtlIGZpcnN0IDEtMyBsaW5lcywgcGljayB0aGUgbG9uZ2VzdCBsaW5lIHdpdGggMi01IGNhcGl0YWxpemVkIHdvcmRzXHJcbiAgY29uc3QgY2FuZGlkYXRlcyA9IGZpcnN0TGluZXMuc2xpY2UoMCwgMyk7XHJcbiAgZm9yIChjb25zdCBsaW5lIG9mIGNhbmRpZGF0ZXMpIHtcclxuICAgIGNvbnN0IHdvcmRzID0gbGluZS50cmltKCkuc3BsaXQoL1xccysvKTtcclxuICAgIGNvbnN0IGNhcFdvcmRzID0gd29yZHMuZmlsdGVyKHcgPT4gL15bQS1aw4DDgsOEw4fDicOIw4rDi8OPw47DlMOWw5nDm8OcxbhdW1xccHtMfSctXSskL3UudGVzdCh3KSk7XHJcbiAgICBpZiAoY2FwV29yZHMubGVuZ3RoID49IDIgJiYgY2FwV29yZHMubGVuZ3RoIDw9IDUpIHtcclxuICAgICAgcmV0dXJuIGNhcFdvcmRzLmpvaW4oJyAnKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuZnVuY3Rpb24gc3BsaXRTZWN0aW9ucyh0ZXh0OiBzdHJpbmcpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcclxuICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xcbicpO1xyXG4gIGNvbnN0IGluZGljZXM6IHsga2V5OiBzdHJpbmc7IGlkeDogbnVtYmVyIH1bXSA9IFtdO1xyXG4gIGNvbnN0IGFsbEhlYWRpbmdzID0gQXJyYXkuZnJvbShuZXcgU2V0KEhFQURJTkdTLmZyKSk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgbCA9IGxpbmVzW2ldLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYgKCFsKSBjb250aW51ZTtcclxuICAgIGZvciAoY29uc3QgaCBvZiBhbGxIZWFkaW5ncykge1xyXG4gICAgICBpZiAobCA9PT0gaCB8fCBsLnN0YXJ0c1dpdGgoaCArICcgJykpIHtcclxuICAgICAgICBpbmRpY2VzLnB1c2goeyBrZXk6IGgsIGlkeDogaSB9KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBpbmRpY2VzLnNvcnQoKGEsIGIpID0+IGEuaWR4IC0gYi5pZHgpO1xyXG4gIGNvbnN0IHJlc3VsdDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xyXG4gIGlmIChpbmRpY2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmVzdWx0WydfX3Jvb3RfXyddID0gdGV4dDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG4gIC8vIEhlYWRlciBibG9ja1xyXG4gIGNvbnN0IGhlYWRlclN0YXJ0ID0gMDtcclxuICBjb25zdCBoZWFkZXJFbmQgPSBpbmRpY2VzWzBdLmlkeDtcclxuICByZXN1bHRbJ19faGVhZGVyX18nXSA9IGxpbmVzLnNsaWNlKGhlYWRlclN0YXJ0LCBoZWFkZXJFbmQpLmpvaW4oJ1xcbicpO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaW5kaWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3Qgc3RhcnQgPSBpbmRpY2VzW2ldLmlkeCArIDE7XHJcbiAgICBjb25zdCBlbmQgPSBpICsgMSA8IGluZGljZXMubGVuZ3RoID8gaW5kaWNlc1tpICsgMV0uaWR4IDogbGluZXMubGVuZ3RoO1xyXG4gICAgcmVzdWx0W2luZGljZXNbaV0ua2V5XSA9IGxpbmVzLnNsaWNlKHN0YXJ0LCBlbmQpLmpvaW4oJ1xcbicpLnRyaW0oKTtcclxuICB9XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gZXh0cmFjdEJ1bGxldHMoYmxvY2s6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICBjb25zdCBsaW5lcyA9IGJsb2NrLnNwbGl0KCdcXG4nKTtcclxuICBjb25zdCBidWxsZXRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGZvciAoY29uc3QgbCBvZiBsaW5lcykge1xyXG4gICAgY29uc3QgcyA9IGwudHJpbSgpLnJlcGxhY2UoL15bLeKAosK34oCj4oGDXVxccyovLCAnJyk7XHJcbiAgICBpZiAoIXMpIGNvbnRpbnVlO1xyXG4gICAgaWYgKC9eWy3igKLCt+KAo+KBg10vLnRlc3QobC50cmltKCkpIHx8IHMubGVuZ3RoID4gMTIpIHtcclxuICAgICAgYnVsbGV0cy5wdXNoKHMpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyBEZWR1cGxpY2F0ZVxyXG4gIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQoYnVsbGV0cykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZUV4cGVyaWVuY2VTZWN0aW9uKGJsb2NrOiBzdHJpbmcpOiBDbGVhbkV4cGVyaWVuY2VbXSB7XHJcbiAgY29uc3QgaXRlbXM6IENsZWFuRXhwZXJpZW5jZVtdID0gW107XHJcbiAgaWYgKCFibG9jay50cmltKCkpIHJldHVybiBpdGVtcztcclxuICAvLyBTcGxpdCBieSBkb3VibGUgbmV3bGluZXMgYXMgcm91Z2ggYmxvY2tzXHJcbiAgY29uc3QgcGFydHMgPSBibG9jay5zcGxpdCgvXFxuXFxzKlxcbisvKTtcclxuICBmb3IgKGNvbnN0IHAgb2YgcGFydHMpIHtcclxuICAgIGNvbnN0IGxpbmVzID0gcC5zcGxpdCgnXFxuJykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihCb29sZWFuKTtcclxuICAgIGlmIChsaW5lcy5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xyXG4gICAgY29uc3QgaGVhZCA9IGxpbmVzWzBdO1xyXG4gICAgLy8gZGF0ZXNcclxuICAgIGNvbnN0IGRhdGVSZWdleCA9IC8oXFxkezJ9XFwvXFxkezR9fFxcZHs0fS1cXGR7Mn18XFxkezR9KVxccyooPzrigJN8LXx0b3xhdXxcXC8pXFxzKihQcmVzZW50fFByw6lzZW50fFxcZHsyfVxcL1xcZHs0fXxcXGR7NH0tXFxkezJ9fFxcZHs0fSkvaTtcclxuICAgIGNvbnN0IG0gPSBwLm1hdGNoKGRhdGVSZWdleCk7XHJcbiAgICBsZXQgc3RhcnREYXRlUmF3OiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcbiAgICBsZXQgZW5kRGF0ZVJhdzogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gICAgaWYgKG0pIHtcclxuICAgICAgc3RhcnREYXRlUmF3ID0gbVsxXTtcclxuICAgICAgZW5kRGF0ZVJhdyA9IG1bMl07XHJcbiAgICB9XHJcbiAgICAvLyBjb21wYW55ICsgdGl0bGUgaGV1cmlzdGljc1xyXG4gICAgbGV0IGNvbXBhbnk6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuICAgIGxldCB0aXRsZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gICAgY29uc3QgcGlwZVNwbGl0ID0gaGVhZC5zcGxpdCgnfCcpLm1hcChzID0+IHMudHJpbSgpKTtcclxuICAgIGlmIChwaXBlU3BsaXQubGVuZ3RoID49IDIpIHtcclxuICAgICAgdGl0bGUgPSBwaXBlU3BsaXRbMF07XHJcbiAgICAgIGNvbXBhbnkgPSBwaXBlU3BsaXRbMV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBUcnkgdXBwZXJjYXNlIHRva2VuIGFzIGNvbXBhbnlcclxuICAgICAgY29uc3QgdXAgPSBoZWFkLm1hdGNoKC9bQS1aw4DDgsOEw4fDicOIw4rDi8OPw47DlMOWw5nDm8OcxbhdW0EtWsOAw4LDhMOHw4nDiMOKw4vDj8OOw5TDlsOZw5vDnMW4XFwtICcmXSsvZyk7XHJcbiAgICAgIGlmICh1cCAmJiB1cFswXS5sZW5ndGggPj0gMykgY29tcGFueSA9IHVwWzBdLnRyaW0oKTtcclxuICAgICAgdGl0bGUgPSBoZWFkO1xyXG4gICAgfVxyXG4gICAgLy8gbG9jYXRpb25cclxuICAgIGxldCBsb2NhdGlvbjogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gICAgY29uc3QgbG9jTWF0Y2ggPSBwLm1hdGNoKC9cXGIoUGFyaXN8RnJhbmNlfE1hcm9jfE1vcm9jY298UmFiYXR8Q291cmJldm9pZXxCb2lzXFwtQ29sb21iZXN8U3RyYXNib3VyZylcXGIvaSk7XHJcbiAgICBpZiAobG9jTWF0Y2gpIGxvY2F0aW9uID0gbG9jTWF0Y2hbMF07XHJcblxyXG4gICAgY29uc3QgYnVsbGV0cyA9IGV4dHJhY3RCdWxsZXRzKHApO1xyXG4gICAgaWYgKGJ1bGxldHMubGVuZ3RoID09PSAwKSBidWxsZXRzLnB1c2goaGVhZCk7XHJcblxyXG4gICAgaXRlbXMucHVzaCh7IGNvbXBhbnksIHRpdGxlLCBsb2NhdGlvbiwgc3RhcnREYXRlUmF3LCBlbmREYXRlUmF3LCBkYXRlc1JhdzogbT8uWzBdLCBidWxsZXRzLCByYXc6IHAgfSk7XHJcbiAgfVxyXG4gIHJldHVybiBpdGVtcztcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VFZHVjYXRpb25TZWN0aW9uKGJsb2NrOiBzdHJpbmcpOiBDbGVhbkVkdWNhdGlvbltdIHtcclxuICBjb25zdCBpdGVtczogQ2xlYW5FZHVjYXRpb25bXSA9IFtdO1xyXG4gIGlmICghYmxvY2sudHJpbSgpKSByZXR1cm4gaXRlbXM7XHJcbiAgY29uc3QgcGFydHMgPSBibG9jay5zcGxpdCgvXFxuXFxzKlxcbisvKTtcclxuICBmb3IgKGNvbnN0IHAgb2YgcGFydHMpIHtcclxuICAgIGNvbnN0IHNjaG9vbE1hdGNoID0gcC5tYXRjaCgvKFVuaXZlcnNpdMOpfFVuaXZlcnNpdHl8w4ljb2xlfEVjb2xlfEx5Y8OpZXxTY2hvb2wpXFxzW15cXG4sfF0qL2kpO1xyXG4gICAgY29uc3Qgc2Nob29sID0gc2Nob29sTWF0Y2g/LlswXT8udHJpbSgpO1xyXG4gICAgY29uc3QgZGVncmVlTWF0Y2ggPSBwLm1hdGNoKC8oQWN0dWFpcmV8TWFzdGVyfExpY2VuY2V8QmFjaGVsb3J8RFVBU3xDUEdFfE1QfEVuZ2luZWVyfERpcGxbb8O0XW1lKVxcc1teXFxuLHxdKi9pKTtcclxuICAgIGNvbnN0IGRlZ3JlZSA9IGRlZ3JlZU1hdGNoPy5bMF0/LnRyaW0oKTtcclxuICAgIGNvbnN0IGRhdGVzID0gKHAubWF0Y2goL1xcYihcXGR7NH0pKD86XFxzKlvigJMtXVxccyooXFxkezR9KSk/XFxiLykgfHwgW10pWzBdO1xyXG4gICAgY29uc3QgbG9jID0gKHAubWF0Y2goL1xcYihQYXJpc3xGcmFuY2V8TWFyb2N8UmFiYXR8Q291cmJldm9pZXxCb2lzXFwtQ29sb21iZXN8U3RyYXNib3VyZylcXGIvaSkgfHwgW10pWzBdO1xyXG4gICAgaXRlbXMucHVzaCh7IHNjaG9vbCwgZGVncmVlLCBkYXRlcywgbG9jYXRpb246IGxvYywgcmF3OiBwIH0pO1xyXG4gIH1cclxuICByZXR1cm4gaXRlbXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlU2tpbGxzKGJsb2NrOiBzdHJpbmcpOiBDbGVhblNraWxscyB7XHJcbiAgY29uc3QgbGluZXMgPSBibG9jay5zcGxpdCgnXFxuJykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihCb29sZWFuKTtcclxuICBjb25zdCByZXM6IENsZWFuU2tpbGxzID0ge307XHJcbiAgY29uc3QgcHVzaEFsbCA9IChhcnI/OiBzdHJpbmdbXSkgPT4gKGFyciAmJiBhcnIubGVuZ3RoID8gYXJyIDogdW5kZWZpbmVkKTtcclxuICBjb25zdCBmbGF0OiBzdHJpbmdbXSA9IFtdO1xyXG4gIGZvciAoY29uc3QgbCBvZiBsaW5lcykge1xyXG4gICAgY29uc3QgcGFydHMgPSBsLnNwbGl0KC9bOnxcXC1dLykubWFwKHMgPT4gcy50cmltKCkpO1xyXG4gICAgY29uc3QgaXRlbXMgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXS5zcGxpdCgvWzss4oCiXS8pLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7XHJcbiAgICBmbGF0LnB1c2goLi4uaXRlbXMpO1xyXG4gIH1cclxuICAvLyBuYWl2ZSBjYXRlZ29yaXphdGlvblxyXG4gIGNvbnN0IGxhbmd1YWdlczogc3RyaW5nW10gPSBbXTtcclxuICBjb25zdCBmcmFtZXdvcmtzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGNvbnN0IHRvb2xzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGZvciAoY29uc3QgaXQgb2YgZmxhdCkge1xyXG4gICAgaWYgKC9eKHB5dGhvbnxyfHNhc3xzcWx8ZXhjZWx8dmJhfHR5cGVzY3JpcHR8amF2YXNjcmlwdHxqYXZhfGNcXCtcXCt8YyMpJC9pLnRlc3QoaXQpKSBsYW5ndWFnZXMucHVzaChpdCk7XHJcbiAgICBlbHNlIGlmICgvXihyZWFjdHxub2RlXFwuanN8cHl0b3JjaHx0ZW5zb3JmbG93fHNjaWtpdFxcLWxlYXJufHhnYm9vc3R8bGlnaHRnYm18cHJvcGhldCkkL2kudGVzdChpdCkpIGZyYW1ld29ya3MucHVzaChpdCk7XHJcbiAgICBlbHNlIHRvb2xzLnB1c2goaXQpO1xyXG4gIH1cclxuICByZXMubGFuZ3VhZ2VzID0gcHVzaEFsbChsYW5ndWFnZXMpO1xyXG4gIHJlcy5mcmFtZXdvcmtzID0gcHVzaEFsbChmcmFtZXdvcmtzKTtcclxuICByZXMudG9vbHMgPSBwdXNoQWxsKHRvb2xzKTtcclxuICBpZiAoIXJlcy5sYW5ndWFnZXMgJiYgIXJlcy5mcmFtZXdvcmtzICYmICFyZXMudG9vbHMpIHJlcy5vdGhlciA9IHB1c2hBbGwoZmxhdCk7XHJcbiAgcmV0dXJuIHJlcztcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VMYW5ndWFnZXMoYmxvY2s6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICBjb25zdCBsaW5lcyA9IGJsb2NrLnNwbGl0KCdcXG4nKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pO1xyXG4gIGNvbnN0IG91dDogc3RyaW5nW10gPSBbXTtcclxuICBmb3IgKGNvbnN0IGwgb2YgbGluZXMpIHtcclxuICAgIGNvbnN0IHBhcnRzID0gbC5zcGxpdCgvWzvigKIsXS8pLm1hcChzID0+IHMudHJpbSgpKTtcclxuICAgIG91dC5wdXNoKC4uLnBhcnRzKTtcclxuICB9XHJcbiAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldChvdXQpKS5maWx0ZXIoQm9vbGVhbik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlQ2VydGlmaWNhdGlvbnMoYmxvY2s6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICByZXR1cm4gZXh0cmFjdEJ1bGxldHMoYmxvY2spO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdG9DbGVhblJlc3VtZShyYXdUZXh0OiBzdHJpbmcpOiBDbGVhblJlc3VtZSB7XHJcbiAgY29uc3QgdDAgPSBub3JtYWxpemVUZXh0KHJhd1RleHQpO1xyXG4gIC8vIFJlbW92ZSBwYWdpbmF0aW9uIGxpa2UgXCIxIC8gMlwiXHJcbiAgY29uc3QgdCA9IHQwLnJlcGxhY2UoL1xcblxccypcXGQrXFxzKlxcL1xccypcXGQrXFxzKlxcbi9nLCAnXFxuJyk7XHJcbiAgY29uc3QgbGFuZ3VhZ2UgPSBkZXRlY3RMYW5nRnJvbVRleHQodCk7XHJcbiAgY29uc3Qgc2VjdGlvbnMgPSBzcGxpdFNlY3Rpb25zKHQpO1xyXG5cclxuICBjb25zdCBoZWFkZXJCbG9jayA9IHNlY3Rpb25zWydfX2hlYWRlcl9fJ10gfHwgJyc7XHJcbiAgY29uc3QgZmlyc3RMaW5lcyA9IGhlYWRlckJsb2NrLnNwbGl0KCdcXG4nKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pO1xyXG4gIGNvbnN0IGhlYWRlcjogQ2xlYW5IZWFkZXIgPSB7XHJcbiAgICBmdWxsTmFtZTogcHJvYmFibGVGdWxsTmFtZShmaXJzdExpbmVzKSxcclxuICAgIGVtYWlsOiBleHRyYWN0RW1haWwodCksXHJcbiAgICBwaG9uZTogZXh0cmFjdFBob25lKHQpLFxyXG4gICAgbGlua3M6IGV4dHJhY3RMaW5rcyh0KSxcclxuICAgIGxvY2F0aW9uOiB1bmRlZmluZWQsXHJcbiAgfTtcclxuXHJcbiAgLy8gU3VtbWFyeSBjYW5kaWRhdGVzXHJcbiAgbGV0IHN1bW1hcnk6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuICBmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXMoc2VjdGlvbnMpKSB7XHJcbiAgICBpZiAoay5pbmNsdWRlcygncHJvZmlsJykgfHwgay5pbmNsdWRlcygncsOpc3Vtw6knKSB8fCBrLmluY2x1ZGVzKCdyZXN1bWUnKSB8fCBrLmluY2x1ZGVzKCdzdW1tYXJ5JykpIHtcclxuICAgICAgY29uc3QgcyA9IHNlY3Rpb25zW2tdO1xyXG4gICAgICBpZiAocyAmJiBzLmxlbmd0aCA+IDIwKSB7IHN1bW1hcnkgPSBzLnRyaW0oKTsgYnJlYWs7IH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IGV4cEtleSA9IE9iamVjdC5rZXlzKHNlY3Rpb25zKS5maW5kKGsgPT4gay5pbmNsdWRlcygnZXhwJykpO1xyXG4gIGNvbnN0IGV4cGVyaWVuY2UgPSBleHBLZXkgPyBwYXJzZUV4cGVyaWVuY2VTZWN0aW9uKHNlY3Rpb25zW2V4cEtleV0pIDogdW5kZWZpbmVkO1xyXG5cclxuICBjb25zdCBlZHVLZXkgPSBPYmplY3Qua2V5cyhzZWN0aW9ucykuZmluZChrID0+IGsuaW5jbHVkZXMoJ2Zvcm1hdGlvbicpIHx8IGsuaW5jbHVkZXMoJ8OpZHVjYXRpb24nKSB8fCBrLmluY2x1ZGVzKCdlZHVjYXRpb24nKSk7XHJcbiAgY29uc3QgZWR1Y2F0aW9uID0gZWR1S2V5ID8gcGFyc2VFZHVjYXRpb25TZWN0aW9uKHNlY3Rpb25zW2VkdUtleV0pIDogdW5kZWZpbmVkO1xyXG5cclxuICBjb25zdCBza2lsbHNLZXkgPSBPYmplY3Qua2V5cyhzZWN0aW9ucykuZmluZChrID0+IGsuaW5jbHVkZXMoJ2NvbXDDqXRlbmNlcycpIHx8IGsuaW5jbHVkZXMoJ3NraWxscycpKTtcclxuICBjb25zdCBza2lsbHMgPSBza2lsbHNLZXkgPyBwYXJzZVNraWxscyhzZWN0aW9uc1tza2lsbHNLZXldKSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgY29uc3QgbGFuZ3VhZ2VzS2V5ID0gT2JqZWN0LmtleXMoc2VjdGlvbnMpLmZpbmQoayA9PiBrLmluY2x1ZGVzKCdsYW5ndWVzJykgfHwgay5pbmNsdWRlcygnbGFuZ3VhZ2VzJykpO1xyXG4gIGNvbnN0IGxhbmd1YWdlcyA9IGxhbmd1YWdlc0tleSA/IHBhcnNlTGFuZ3VhZ2VzKHNlY3Rpb25zW2xhbmd1YWdlc0tleV0pIDogdW5kZWZpbmVkO1xyXG5cclxuICBjb25zdCBjZXJ0S2V5ID0gT2JqZWN0LmtleXMoc2VjdGlvbnMpLmZpbmQoayA9PiBrLmluY2x1ZGVzKCdjZXJ0aWZpY2F0aW9ucycpKTtcclxuICBjb25zdCBjZXJ0aWZpY2F0aW9ucyA9IGNlcnRLZXkgPyBwYXJzZUNlcnRpZmljYXRpb25zKHNlY3Rpb25zW2NlcnRLZXldKSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgY29uc3Qgd2FybmluZ3M6IHN0cmluZ1tdID0gW107XHJcbiAgaWYgKCFoZWFkZXIuZnVsbE5hbWUpIHdhcm5pbmdzLnB1c2goJ05vbSBjb21wbGV0IG5vbiBkw6l0ZWN0w6kgYXZlYyBjZXJ0aXR1ZGUuJyk7XHJcbiAgaWYgKCFleHBlcmllbmNlIHx8IGV4cGVyaWVuY2UubGVuZ3RoID09PSAwKSB3YXJuaW5ncy5wdXNoKCdBdWN1bmUgZXhww6lyaWVuY2UgZMOpdGVjdMOpZS4nKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIG1ldGFkYXRhOiB7IGxhbmd1YWdlLCBzb3VyY2VPcmRlclByZXNlcnZlZDogdHJ1ZSwgd2FybmluZ3M6IHdhcm5pbmdzLmxlbmd0aCA/IHdhcm5pbmdzIDogdW5kZWZpbmVkIH0sXHJcbiAgICBoZWFkZXIsXHJcbiAgICBzdW1tYXJ5LFxyXG4gICAgZXhwZXJpZW5jZSxcclxuICAgIGVkdWNhdGlvbixcclxuICAgIHNraWxscyxcclxuICAgIGxhbmd1YWdlcyxcclxuICAgIGNlcnRpZmljYXRpb25zLFxyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIm5vcm1hbGl6ZVRleHQiLCJIRUFESU5HUyIsImZyIiwiZGV0ZWN0TGFuZ0Zyb21UZXh0IiwidGV4dCIsInQiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJ0ZXN0IiwibGFuZ3MiLCJlbiIsImVzIiwiaXQiLCJkZSIsInB0IiwibmwiLCJ0ciIsImJlc3QiLCJiZXN0U2NvcmUiLCJjb2RlIiwid29yZHMiLCJPYmplY3QiLCJlbnRyaWVzIiwic2NvcmUiLCJyZWR1Y2UiLCJhY2MiLCJ3IiwiaW5jbHVkZXMiLCJleHRyYWN0RW1haWwiLCJtIiwibWF0Y2giLCJ1bmRlZmluZWQiLCJleHRyYWN0UGhvbmUiLCJleHRyYWN0TGlua3MiLCJsaW5rcyIsImxpbmtlZGluIiwiZ2l0aHViIiwicG9ydGZvbGlvIiwicHJvYmFibGVGdWxsTmFtZSIsImZpcnN0TGluZXMiLCJjYW5kaWRhdGVzIiwic2xpY2UiLCJsaW5lIiwic3BsaXQiLCJjYXBXb3JkcyIsImZpbHRlciIsImxlbmd0aCIsImpvaW4iLCJzcGxpdFNlY3Rpb25zIiwibGluZXMiLCJpbmRpY2VzIiwiYWxsSGVhZGluZ3MiLCJBcnJheSIsImZyb20iLCJTZXQiLCJpIiwibCIsImgiLCJzdGFydHNXaXRoIiwicHVzaCIsImtleSIsImlkeCIsInNvcnQiLCJhIiwiYiIsInJlc3VsdCIsImhlYWRlclN0YXJ0IiwiaGVhZGVyRW5kIiwic3RhcnQiLCJlbmQiLCJleHRyYWN0QnVsbGV0cyIsImJsb2NrIiwiYnVsbGV0cyIsInMiLCJyZXBsYWNlIiwicGFyc2VFeHBlcmllbmNlU2VjdGlvbiIsIml0ZW1zIiwicGFydHMiLCJwIiwibWFwIiwiQm9vbGVhbiIsImhlYWQiLCJkYXRlUmVnZXgiLCJzdGFydERhdGVSYXciLCJlbmREYXRlUmF3IiwiY29tcGFueSIsInRpdGxlIiwicGlwZVNwbGl0IiwidXAiLCJsb2NhdGlvbiIsImxvY01hdGNoIiwiZGF0ZXNSYXciLCJyYXciLCJwYXJzZUVkdWNhdGlvblNlY3Rpb24iLCJzY2hvb2xNYXRjaCIsInNjaG9vbCIsImRlZ3JlZU1hdGNoIiwiZGVncmVlIiwiZGF0ZXMiLCJsb2MiLCJwYXJzZVNraWxscyIsInJlcyIsInB1c2hBbGwiLCJhcnIiLCJmbGF0IiwibGFuZ3VhZ2VzIiwiZnJhbWV3b3JrcyIsInRvb2xzIiwib3RoZXIiLCJwYXJzZUxhbmd1YWdlcyIsIm91dCIsInBhcnNlQ2VydGlmaWNhdGlvbnMiLCJ0b0NsZWFuUmVzdW1lIiwicmF3VGV4dCIsInQwIiwibGFuZ3VhZ2UiLCJzZWN0aW9ucyIsImhlYWRlckJsb2NrIiwiaGVhZGVyIiwiZnVsbE5hbWUiLCJlbWFpbCIsInBob25lIiwic3VtbWFyeSIsImsiLCJrZXlzIiwiZXhwS2V5IiwiZmluZCIsImV4cGVyaWVuY2UiLCJlZHVLZXkiLCJlZHVjYXRpb24iLCJza2lsbHNLZXkiLCJza2lsbHMiLCJsYW5ndWFnZXNLZXkiLCJjZXJ0S2V5IiwiY2VydGlmaWNhdGlvbnMiLCJ3YXJuaW5ncyIsIm1ldGFkYXRhIiwic291cmNlT3JkZXJQcmVzZXJ2ZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/clean.ts\n");

/***/ }),

/***/ "(rsc)/./lib/diff.ts":
/*!*********************!*\
  !*** ./lib/diff.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildNarrativeFromDiff: () => (/* binding */ buildNarrativeFromDiff),\n/* harmony export */   computeResumeDiff: () => (/* binding */ computeResumeDiff)\n/* harmony export */ });\nfunction norm(s) {\n    return String(s || \"\").replace(/[\\s\\u00A0]+/g, \" \").trim().toLowerCase();\n}\nfunction expSig(e) {\n    const c = norm(e?.company);\n    const t = norm(e?.title);\n    const sd = norm(e?.startDate || e?.startDateRaw);\n    const ed = norm(e?.endDate || e?.endDateRaw);\n    return [\n        c,\n        t,\n        sd,\n        ed\n    ].join(\"|\");\n}\nfunction indexMapBySig(list) {\n    const m = new Map();\n    list.forEach((e, i)=>m.set(expSig(e), i));\n    return m;\n}\nfunction arrayDiff(before = [], after = []) {\n    const bSet = new Set(before.map(norm));\n    const aSet = new Set(after.map(norm));\n    const added = after.filter((x)=>!bSet.has(norm(x)));\n    const removed = before.filter((x)=>!aSet.has(norm(x)));\n    return {\n        added,\n        removed\n    };\n}\nfunction computeResumeDiff(before, after) {\n    const diff = {\n        decisions: {\n            keptExperiences: [],\n            removedExperiences: [],\n            addedExperiences: [],\n            bulletEdits: []\n        },\n        fieldsChanged: {}\n    };\n    const bexp = Array.isArray(before?.experience) ? before.experience : [];\n    const aexp = Array.isArray(after?.experience) ? after.experience : [];\n    const bMap = indexMapBySig(bexp);\n    const aMap = indexMapBySig(aexp);\n    // kept/removed/added\n    bexp.forEach((e, bi)=>{\n        const sig = expSig(e);\n        if (aMap.has(sig)) diff.decisions.keptExperiences.push(bi);\n        else diff.decisions.removedExperiences.push(bi);\n    });\n    aexp.forEach((e, ai)=>{\n        const sig = expSig(e);\n        if (!bMap.has(sig)) diff.decisions.addedExperiences.push(ai);\n    });\n    // bullet edits for kept items (compare by signature)\n    bexp.forEach((e, bi)=>{\n        const sig = expSig(e);\n        const ai = aMap.get(sig);\n        if (ai == null) return;\n        const beforeBullets = Array.isArray(e?.bullets) ? e.bullets : [];\n        const afterBullets = Array.isArray(aexp[ai]?.bullets) ? aexp[ai].bullets : [];\n        if (norm(beforeBullets.join(\"\\n\")) !== norm(afterBullets.join(\"\\n\"))) {\n            diff.decisions.bulletEdits.push({\n                sourceIndex: bi,\n                before: beforeBullets.join(\"\\n\"),\n                after: afterBullets.join(\"\\n\")\n            });\n        }\n    });\n    // header changes\n    const headerFields = [\n        \"fullName\",\n        \"email\",\n        \"phone\",\n        \"location\"\n    ];\n    diff.fieldsChanged.header = headerFields.map((k)=>({\n            field: k,\n            before: before?.header?.[k],\n            after: after?.header?.[k]\n        })).filter((x)=>norm(x.before) !== norm(x.after));\n    // summary change\n    if (norm(before?.summary) !== norm(after?.summary)) {\n        diff.fieldsChanged.summary = {\n            before: before?.summary || \"\",\n            after: after?.summary || \"\"\n        };\n    }\n    // skills diffs\n    const cats = [\n        \"languages\",\n        \"frameworks\",\n        \"tools\",\n        \"other\"\n    ];\n    diff.fieldsChanged.skills = cats.map((cat)=>({\n            cat,\n            ...arrayDiff(before?.skills?.[cat] || [], after?.skills?.[cat] || [])\n        })).filter((x)=>x.added.length || x.removed.length);\n    // languages (human)\n    const langDiff = arrayDiff(before?.languages || [], after?.languages || []);\n    if (langDiff.added.length || langDiff.removed.length) diff.fieldsChanged.languages = langDiff;\n    // education diff (names only to keep it simple)\n    const bedu = (before?.education || []).map((e)=>norm(e?.school));\n    const aedu = (after?.education || []).map((e)=>norm(e?.school));\n    const eduDiff = arrayDiff(bedu, aedu);\n    if (eduDiff.added.length || eduDiff.removed.length) diff.fieldsChanged.education = eduDiff;\n    return diff;\n}\nfunction buildNarrativeFromDiff(diff, languageDetectedInResume) {\n    const kept = diff.decisions.keptExperiences.length;\n    const removed = diff.decisions.removedExperiences.length;\n    const added = diff.decisions.addedExperiences.length;\n    const bullets = diff.decisions.bulletEdits.length;\n    const headerCh = diff.fieldsChanged.header?.length || 0;\n    const skillsCh = diff.fieldsChanged.skills?.length || 0;\n    const lines = [];\n    lines.push(\"Your resume was tailored to the job while keeping structure and reverse‑chronological order.\");\n    lines.push(`Experiences: ${kept} kept${removed ? `, ${removed} removed` : \"\"}${added ? `, ${added} added` : \"\"}.`);\n    if (bullets) lines.push(`${bullets} role(s) had bullets rewritten for terminology alignment.`);\n    if (headerCh) lines.push(\"Header: some fields were harmonized (e.g., location/contact).\");\n    if (skillsCh) lines.push(\"Skills: regrouped, deduplicated, and prioritized by job relevance.\");\n    return lines.join(\"\\n\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzBCLE1BQU07SUFDakQsTUFBTVcsV0FBVzFDLEtBQUtNLGFBQWEsQ0FBQ2tCLE1BQU0sRUFBRU8sVUFBVTtJQUN0RCxNQUFNWSxXQUFXM0MsS0FBS00sYUFBYSxDQUFDdUIsTUFBTSxFQUFFRSxVQUFVO0lBRXRELE1BQU1hLFFBQWtCLEVBQUU7SUFDMUJBLE1BQU01QixJQUFJLENBQUM7SUFDWDRCLE1BQU01QixJQUFJLENBQUMsQ0FBQyxhQUFhLEVBQUV5QixLQUFLLEtBQUssRUFBRTNDLFVBQVUsQ0FBQyxFQUFFLEVBQUVBLFFBQVEsUUFBUSxDQUFDLEdBQUcsR0FBRyxFQUFFSixRQUFRLENBQUMsRUFBRSxFQUFFQSxNQUFNLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQ2pILElBQUkwQixTQUFTd0IsTUFBTTVCLElBQUksQ0FBQyxDQUFDLEVBQUVJLFFBQVEseURBQXlELENBQUM7SUFDN0YsSUFBSXNCLFVBQVVFLE1BQU01QixJQUFJLENBQUM7SUFDekIsSUFBSTJCLFVBQVVDLE1BQU01QixJQUFJLENBQUM7SUFFekIsT0FBTzRCLE1BQU1qRSxJQUFJLENBQUM7QUFDcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFsY3YtbGl0ZS1qc29uLy4vbGliL2RpZmYudHM/MGEyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdHlwZSBCdWxsZXRFZGl0ID0geyBzb3VyY2VJbmRleDogbnVtYmVyIHwgbnVsbDsgYmVmb3JlOiBzdHJpbmc7IGFmdGVyOiBzdHJpbmcgfTtcclxuXHJcbmZ1bmN0aW9uIG5vcm0oczogYW55KTogc3RyaW5nIHtcclxuICByZXR1cm4gU3RyaW5nKHMgfHwgJycpXHJcbiAgICAucmVwbGFjZSgvW1xcc1xcdTAwQTBdKy9nLCAnICcpXHJcbiAgICAudHJpbSgpXHJcbiAgICAudG9Mb3dlckNhc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZXhwU2lnKGU6IGFueSk6IHN0cmluZyB7XHJcbiAgY29uc3QgYyA9IG5vcm0oZT8uY29tcGFueSk7XHJcbiAgY29uc3QgdCA9IG5vcm0oZT8udGl0bGUpO1xyXG4gIGNvbnN0IHNkID0gbm9ybShlPy5zdGFydERhdGUgfHwgZT8uc3RhcnREYXRlUmF3KTtcclxuICBjb25zdCBlZCA9IG5vcm0oZT8uZW5kRGF0ZSB8fCBlPy5lbmREYXRlUmF3KTtcclxuICByZXR1cm4gW2MsIHQsIHNkLCBlZF0uam9pbignfCcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbmRleE1hcEJ5U2lnKGxpc3Q6IGFueVtdKTogTWFwPHN0cmluZywgbnVtYmVyPiB7XHJcbiAgY29uc3QgbSA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcbiAgbGlzdC5mb3JFYWNoKChlLCBpKSA9PiBtLnNldChleHBTaWcoZSksIGkpKTtcclxuICByZXR1cm4gbTtcclxufVxyXG5cclxuZnVuY3Rpb24gYXJyYXlEaWZmKGJlZm9yZTogc3RyaW5nW10gPSBbXSwgYWZ0ZXI6IHN0cmluZ1tdID0gW10pIHtcclxuICBjb25zdCBiU2V0ID0gbmV3IFNldChiZWZvcmUubWFwKG5vcm0pKTtcclxuICBjb25zdCBhU2V0ID0gbmV3IFNldChhZnRlci5tYXAobm9ybSkpO1xyXG4gIGNvbnN0IGFkZGVkID0gYWZ0ZXIuZmlsdGVyKHggPT4gIWJTZXQuaGFzKG5vcm0oeCkpKTtcclxuICBjb25zdCByZW1vdmVkID0gYmVmb3JlLmZpbHRlcih4ID0+ICFhU2V0Lmhhcyhub3JtKHgpKSk7XHJcbiAgcmV0dXJuIHsgYWRkZWQsIHJlbW92ZWQgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVSZXN1bWVEaWZmKGJlZm9yZTogYW55LCBhZnRlcjogYW55KSB7XHJcbiAgY29uc3QgZGlmZjogYW55ID0geyBkZWNpc2lvbnM6IHsga2VwdEV4cGVyaWVuY2VzOiBbXSBhcyBudW1iZXJbXSwgcmVtb3ZlZEV4cGVyaWVuY2VzOiBbXSBhcyBudW1iZXJbXSwgYWRkZWRFeHBlcmllbmNlczogW10gYXMgbnVtYmVyW10sIGJ1bGxldEVkaXRzOiBbXSBhcyBCdWxsZXRFZGl0W10gfSwgZmllbGRzQ2hhbmdlZDoge30gYXMgYW55IH07XHJcbiAgY29uc3QgYmV4cCA9IEFycmF5LmlzQXJyYXkoYmVmb3JlPy5leHBlcmllbmNlKSA/IGJlZm9yZS5leHBlcmllbmNlIDogW107XHJcbiAgY29uc3QgYWV4cCA9IEFycmF5LmlzQXJyYXkoYWZ0ZXI/LmV4cGVyaWVuY2UpID8gYWZ0ZXIuZXhwZXJpZW5jZSA6IFtdO1xyXG5cclxuICBjb25zdCBiTWFwID0gaW5kZXhNYXBCeVNpZyhiZXhwKTtcclxuICBjb25zdCBhTWFwID0gaW5kZXhNYXBCeVNpZyhhZXhwKTtcclxuXHJcbiAgLy8ga2VwdC9yZW1vdmVkL2FkZGVkXHJcbiAgYmV4cC5mb3JFYWNoKChlLCBiaSkgPT4ge1xyXG4gICAgY29uc3Qgc2lnID0gZXhwU2lnKGUpO1xyXG4gICAgaWYgKGFNYXAuaGFzKHNpZykpIGRpZmYuZGVjaXNpb25zLmtlcHRFeHBlcmllbmNlcy5wdXNoKGJpKTtcclxuICAgIGVsc2UgZGlmZi5kZWNpc2lvbnMucmVtb3ZlZEV4cGVyaWVuY2VzLnB1c2goYmkpO1xyXG4gIH0pO1xyXG4gIGFleHAuZm9yRWFjaCgoZSwgYWkpID0+IHtcclxuICAgIGNvbnN0IHNpZyA9IGV4cFNpZyhlKTtcclxuICAgIGlmICghYk1hcC5oYXMoc2lnKSkgZGlmZi5kZWNpc2lvbnMuYWRkZWRFeHBlcmllbmNlcy5wdXNoKGFpKTtcclxuICB9KTtcclxuXHJcbiAgLy8gYnVsbGV0IGVkaXRzIGZvciBrZXB0IGl0ZW1zIChjb21wYXJlIGJ5IHNpZ25hdHVyZSlcclxuICBiZXhwLmZvckVhY2goKGUsIGJpKSA9PiB7XHJcbiAgICBjb25zdCBzaWcgPSBleHBTaWcoZSk7XHJcbiAgICBjb25zdCBhaSA9IGFNYXAuZ2V0KHNpZyk7XHJcbiAgICBpZiAoYWkgPT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgY29uc3QgYmVmb3JlQnVsbGV0czogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KGU/LmJ1bGxldHMpID8gZS5idWxsZXRzIDogW107XHJcbiAgICBjb25zdCBhZnRlckJ1bGxldHM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShhZXhwW2FpXT8uYnVsbGV0cykgPyBhZXhwW2FpXS5idWxsZXRzIDogW107XHJcbiAgICBpZiAobm9ybShiZWZvcmVCdWxsZXRzLmpvaW4oJ1xcbicpKSAhPT0gbm9ybShhZnRlckJ1bGxldHMuam9pbignXFxuJykpKSB7XHJcbiAgICAgIGRpZmYuZGVjaXNpb25zLmJ1bGxldEVkaXRzLnB1c2goeyBzb3VyY2VJbmRleDogYmksIGJlZm9yZTogYmVmb3JlQnVsbGV0cy5qb2luKCdcXG4nKSwgYWZ0ZXI6IGFmdGVyQnVsbGV0cy5qb2luKCdcXG4nKSB9KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8gaGVhZGVyIGNoYW5nZXNcclxuICBjb25zdCBoZWFkZXJGaWVsZHMgPSBbJ2Z1bGxOYW1lJywgJ2VtYWlsJywgJ3Bob25lJywgJ2xvY2F0aW9uJ107XHJcbiAgZGlmZi5maWVsZHNDaGFuZ2VkLmhlYWRlciA9IGhlYWRlckZpZWxkc1xyXG4gICAgLm1hcChrID0+ICh7IGZpZWxkOiBrLCBiZWZvcmU6IGJlZm9yZT8uaGVhZGVyPy5ba10sIGFmdGVyOiBhZnRlcj8uaGVhZGVyPy5ba10gfSkpXHJcbiAgICAuZmlsdGVyKHggPT4gbm9ybSh4LmJlZm9yZSkgIT09IG5vcm0oeC5hZnRlcikpO1xyXG5cclxuICAvLyBzdW1tYXJ5IGNoYW5nZVxyXG4gIGlmIChub3JtKGJlZm9yZT8uc3VtbWFyeSkgIT09IG5vcm0oYWZ0ZXI/LnN1bW1hcnkpKSB7XHJcbiAgICBkaWZmLmZpZWxkc0NoYW5nZWQuc3VtbWFyeSA9IHsgYmVmb3JlOiBiZWZvcmU/LnN1bW1hcnkgfHwgJycsIGFmdGVyOiBhZnRlcj8uc3VtbWFyeSB8fCAnJyB9O1xyXG4gIH1cclxuXHJcbiAgLy8gc2tpbGxzIGRpZmZzXHJcbiAgY29uc3QgY2F0cyA9IFsnbGFuZ3VhZ2VzJywgJ2ZyYW1ld29ya3MnLCAndG9vbHMnLCAnb3RoZXInXTtcclxuICBkaWZmLmZpZWxkc0NoYW5nZWQuc2tpbGxzID0gY2F0cy5tYXAoY2F0ID0+ICh7XHJcbiAgICBjYXQsXHJcbiAgICAuLi5hcnJheURpZmYoYmVmb3JlPy5za2lsbHM/LltjYXRdIHx8IFtdLCBhZnRlcj8uc2tpbGxzPy5bY2F0XSB8fCBbXSlcclxuICB9KSkuZmlsdGVyKHggPT4geC5hZGRlZC5sZW5ndGggfHwgeC5yZW1vdmVkLmxlbmd0aCk7XHJcblxyXG4gIC8vIGxhbmd1YWdlcyAoaHVtYW4pXHJcbiAgY29uc3QgbGFuZ0RpZmYgPSBhcnJheURpZmYoYmVmb3JlPy5sYW5ndWFnZXMgfHwgW10sIGFmdGVyPy5sYW5ndWFnZXMgfHwgW10pO1xyXG4gIGlmIChsYW5nRGlmZi5hZGRlZC5sZW5ndGggfHwgbGFuZ0RpZmYucmVtb3ZlZC5sZW5ndGgpIGRpZmYuZmllbGRzQ2hhbmdlZC5sYW5ndWFnZXMgPSBsYW5nRGlmZjtcclxuXHJcbiAgLy8gZWR1Y2F0aW9uIGRpZmYgKG5hbWVzIG9ubHkgdG8ga2VlcCBpdCBzaW1wbGUpXHJcbiAgY29uc3QgYmVkdSA9IChiZWZvcmU/LmVkdWNhdGlvbiB8fCBbXSkubWFwKChlOiBhbnkpID0+IG5vcm0oZT8uc2Nob29sKSk7XHJcbiAgY29uc3QgYWVkdSA9IChhZnRlcj8uZWR1Y2F0aW9uIHx8IFtdKS5tYXAoKGU6IGFueSkgPT4gbm9ybShlPy5zY2hvb2wpKTtcclxuICBjb25zdCBlZHVEaWZmID0gYXJyYXlEaWZmKGJlZHUsIGFlZHUpO1xyXG4gIGlmIChlZHVEaWZmLmFkZGVkLmxlbmd0aCB8fCBlZHVEaWZmLnJlbW92ZWQubGVuZ3RoKSBkaWZmLmZpZWxkc0NoYW5nZWQuZWR1Y2F0aW9uID0gZWR1RGlmZjtcclxuXHJcbiAgcmV0dXJuIGRpZmY7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBidWlsZE5hcnJhdGl2ZUZyb21EaWZmKGRpZmY6IGFueSwgbGFuZ3VhZ2VEZXRlY3RlZEluUmVzdW1lOiBzdHJpbmcpIHtcclxuICBjb25zdCBrZXB0ID0gZGlmZi5kZWNpc2lvbnMua2VwdEV4cGVyaWVuY2VzLmxlbmd0aDtcclxuICBjb25zdCByZW1vdmVkID0gZGlmZi5kZWNpc2lvbnMucmVtb3ZlZEV4cGVyaWVuY2VzLmxlbmd0aDtcclxuICBjb25zdCBhZGRlZCA9IGRpZmYuZGVjaXNpb25zLmFkZGVkRXhwZXJpZW5jZXMubGVuZ3RoO1xyXG4gIGNvbnN0IGJ1bGxldHMgPSBkaWZmLmRlY2lzaW9ucy5idWxsZXRFZGl0cy5sZW5ndGg7XHJcbiAgY29uc3QgaGVhZGVyQ2ggPSBkaWZmLmZpZWxkc0NoYW5nZWQuaGVhZGVyPy5sZW5ndGggfHwgMDtcclxuICBjb25zdCBza2lsbHNDaCA9IGRpZmYuZmllbGRzQ2hhbmdlZC5za2lsbHM/Lmxlbmd0aCB8fCAwO1xyXG5cclxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcclxuICBsaW5lcy5wdXNoKCdZb3VyIHJlc3VtZSB3YXMgdGFpbG9yZWQgdG8gdGhlIGpvYiB3aGlsZSBrZWVwaW5nIHN0cnVjdHVyZSBhbmQgcmV2ZXJzZeKAkWNocm9ub2xvZ2ljYWwgb3JkZXIuJyk7XHJcbiAgbGluZXMucHVzaChgRXhwZXJpZW5jZXM6ICR7a2VwdH0ga2VwdCR7cmVtb3ZlZCA/IGAsICR7cmVtb3ZlZH0gcmVtb3ZlZGAgOiAnJ30ke2FkZGVkID8gYCwgJHthZGRlZH0gYWRkZWRgIDogJyd9LmApO1xyXG4gIGlmIChidWxsZXRzKSBsaW5lcy5wdXNoKGAke2J1bGxldHN9IHJvbGUocykgaGFkIGJ1bGxldHMgcmV3cml0dGVuIGZvciB0ZXJtaW5vbG9neSBhbGlnbm1lbnQuYCk7XHJcbiAgaWYgKGhlYWRlckNoKSBsaW5lcy5wdXNoKCdIZWFkZXI6IHNvbWUgZmllbGRzIHdlcmUgaGFybW9uaXplZCAoZS5nLiwgbG9jYXRpb24vY29udGFjdCkuJyk7XHJcbiAgaWYgKHNraWxsc0NoKSBsaW5lcy5wdXNoKCdTa2lsbHM6IHJlZ3JvdXBlZCwgZGVkdXBsaWNhdGVkLCBhbmQgcHJpb3JpdGl6ZWQgYnkgam9iIHJlbGV2YW5jZS4nKTtcclxuXHJcbiAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJub3JtIiwicyIsIlN0cmluZyIsInJlcGxhY2UiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJleHBTaWciLCJlIiwiYyIsImNvbXBhbnkiLCJ0IiwidGl0bGUiLCJzZCIsInN0YXJ0RGF0ZSIsInN0YXJ0RGF0ZVJhdyIsImVkIiwiZW5kRGF0ZSIsImVuZERhdGVSYXciLCJqb2luIiwiaW5kZXhNYXBCeVNpZyIsImxpc3QiLCJtIiwiTWFwIiwiZm9yRWFjaCIsImkiLCJzZXQiLCJhcnJheURpZmYiLCJiZWZvcmUiLCJhZnRlciIsImJTZXQiLCJTZXQiLCJtYXAiLCJhU2V0IiwiYWRkZWQiLCJmaWx0ZXIiLCJ4IiwiaGFzIiwicmVtb3ZlZCIsImNvbXB1dGVSZXN1bWVEaWZmIiwiZGlmZiIsImRlY2lzaW9ucyIsImtlcHRFeHBlcmllbmNlcyIsInJlbW92ZWRFeHBlcmllbmNlcyIsImFkZGVkRXhwZXJpZW5jZXMiLCJidWxsZXRFZGl0cyIsImZpZWxkc0NoYW5nZWQiLCJiZXhwIiwiQXJyYXkiLCJpc0FycmF5IiwiZXhwZXJpZW5jZSIsImFleHAiLCJiTWFwIiwiYU1hcCIsImJpIiwic2lnIiwicHVzaCIsImFpIiwiZ2V0IiwiYmVmb3JlQnVsbGV0cyIsImJ1bGxldHMiLCJhZnRlckJ1bGxldHMiLCJzb3VyY2VJbmRleCIsImhlYWRlckZpZWxkcyIsImhlYWRlciIsImsiLCJmaWVsZCIsInN1bW1hcnkiLCJjYXRzIiwic2tpbGxzIiwiY2F0IiwibGVuZ3RoIiwibGFuZ0RpZmYiLCJsYW5ndWFnZXMiLCJiZWR1IiwiZWR1Y2F0aW9uIiwic2Nob29sIiwiYWVkdSIsImVkdURpZmYiLCJidWlsZE5hcnJhdGl2ZUZyb21EaWZmIiwibGFuZ3VhZ2VEZXRlY3RlZEluUmVzdW1lIiwia2VwdCIsImhlYWRlckNoIiwic2tpbGxzQ2giLCJsaW5lcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/diff.ts\n");

/***/ }),

/***/ "(rsc)/./lib/parse.ts":
/*!**********************!*\
  !*** ./lib/parse.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractTextFromImagesWithVision: () => (/* binding */ extractTextFromImagesWithVision),\n/* harmony export */   normalizeText: () => (/* binding */ normalizeText)\n/* harmony export */ });\n/* harmony import */ var _config_models__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/models */ \"(rsc)/./config/models.ts\");\n/**\r\n * Extraction helpers for CV text\r\n * - extractTextFromImagesWithVision: uses OpenAI Vision on image data URLs\r\n * - normalizeText: minimal normalization for consistent downstream processing\r\n */ \n/**\r\n * Uses Vision model to extract text from an array of image data URLs (png/jpeg/webp/gif)\r\n * Provider is OpenRouter if enabled, else OpenAI.\r\n * @param imagesDataUrls Array of data URLs like `data:image/png;base64,...`\r\n */ async function extractTextFromImagesWithVision(imagesDataUrls) {\n    if (!imagesDataUrls || imagesDataUrls.length === 0) {\n        throw new Error(\"Aucune image fournie pour l'extraction\");\n    }\n    try {\n        const OpenAI = (await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/formdata-node@4.4.1\"), __webpack_require__.e(\"vendor-chunks/openai@4.104.0_zod@3.25.76\"), __webpack_require__.e(\"vendor-chunks/form-data-encoder@1.7.2\"), __webpack_require__.e(\"vendor-chunks/whatwg-url@5.0.0\"), __webpack_require__.e(\"vendor-chunks/agentkeepalive@4.6.0\"), __webpack_require__.e(\"vendor-chunks/tr46@0.0.3\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill@4.0.0-beta.3\"), __webpack_require__.e(\"vendor-chunks/node-fetch@2.7.0\"), __webpack_require__.e(\"vendor-chunks/webidl-conversions@3.0.1\"), __webpack_require__.e(\"vendor-chunks/ms@2.1.3\"), __webpack_require__.e(\"vendor-chunks/humanize-ms@1.2.1\"), __webpack_require__.e(\"vendor-chunks/event-target-shim@5.0.1\"), __webpack_require__.e(\"vendor-chunks/abort-controller@3.0.0\")]).then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/.pnpm/openai@4.104.0_zod@3.25.76/node_modules/openai/index.mjs\"))).default;\n        const apiKey = process.env.OPENROUTER_KEY_VISION;\n        if (!apiKey) throw new Error(\"OPENROUTER_KEY_VISION missing\");\n        const model = (0,_config_models__WEBPACK_IMPORTED_MODULE_0__.getConfiguredModel)(\"vision\") || \"gpt-4o-mini\";\n        const openaiVision = new OpenAI({\n            apiKey,\n            baseURL: \"https://openrouter.ai/api/v1\",\n            defaultHeaders: {\n                \"HTTP-Referer\": process.env.OPENROUTER_HTTP_REFERER || \"http://localhost:3000\",\n                \"X-Title\": process.env.OPENROUTER_APP_TITLE || \"QuickCV\"\n            }\n        });\n        // Prompt spécialisé pour l'extraction de CV\n        const visionPrompt = `Tu es un expert en extraction de données de CV.\\n\\nAnalyse ces images de CV et extrait TOUT le texte qu'elles contiennent de manière structurée et lisible.\\n\\nINSTRUCTIONS :\\n1. Extrait TOUT le texte visible de toutes les pages\\n2. Préserve la structure logique (sections, listes, etc.)\\n3. Organise le contenu de manière cohérente\\n4. Corrige les erreurs OCR évidentes\\n5. Sépare clairement les différentes sections\\n6. Combine le contenu de toutes les pages en un seul texte cohérent\\n\\nSTRUCTURE ATTENDUE :\\n- Informations personnelles (nom, contact, liens)\\n- Résumé/Objectif professionnel (si présent)\\n- Expériences professionnelles (chronologique)\\n- Formation/Éducation\\n- Compétences techniques\\n- Projets (si présents)\\n- Autres sections pertinentes\\n\\nRetourne UNIQUEMENT le texte extrait, bien structuré et lisible.`;\n        // Préparer le contenu pour Vision\n        const imageContents = imagesDataUrls.map((dataUrl)=>({\n                type: \"image_url\",\n                image_url: {\n                    url: dataUrl,\n                    detail: \"high\"\n                }\n            }));\n        const response = await openaiVision.chat.completions.create({\n            model,\n            messages: [\n                {\n                    role: \"user\",\n                    content: [\n                        {\n                            type: \"text\",\n                            text: visionPrompt\n                        },\n                        ...imageContents\n                    ]\n                }\n            ],\n            max_tokens: 4000,\n            temperature: 0.1\n        });\n        const extractedText = response.choices[0]?.message?.content ?? \"\";\n        if (!extractedText.trim()) {\n            throw new Error(\"VISION_NO_TEXT\");\n        }\n        return {\n            text: normalizeText(extractedText),\n            usage: response?.usage,\n            model\n        };\n    } catch (error) {\n        const msg = error instanceof Error ? error.message : String(error);\n        if (msg === \"VISION_NO_TEXT\") {\n            throw new Error(\"Impossible d'extraire du texte avec Vision (aucun contenu d\\xe9tect\\xe9).\");\n        }\n        if (msg?.includes(\"OPENROUTER_KEY_VISION missing\")) {\n            throw new Error(\"Cl\\xe9 API OpenRouter Vision manquante.\");\n        }\n        if (msg?.toLowerCase().includes(\"image\") && msg.toLowerCase().includes(\"not\")) {\n            // Typical error when model isn't multimodal on OpenRouter\n            throw new Error(\"Le mod\\xe8le Vision s\\xe9lectionn\\xe9 ne supporte pas les images (multimodal). Choisissez un mod\\xe8le multimodal ou d\\xe9sactivez OpenRouter pour Vision.\");\n        }\n        if (msg?.includes(\"unsupported image\")) {\n            throw new Error(\"Format d'image non support\\xe9 par Vision. Utilisez PNG/JPEG/WebP/GIF.\");\n        }\n        throw new Error(`Erreur Vision: ${msg}`);\n    }\n}\n/**\r\n * Normalise un texte brut : puces, espaces, sauts de ligne\r\n */ function normalizeText(text) {\n    let t = text || \"\";\n    // Puces → tirets\n    t = t.replace(/[•·‣⁃]/g, \"-\");\n    // Retours à la ligne Windows → \\n\n    t = t.replace(/\\r\\n?/g, \"\\n\");\n    // Espaces multiples → un espace\n    t = t.replace(/[ \\t]{2,}/g, \" \");\n    // Sauts de ligne > 2 → 2\n    t = t.replace(/\\n{3,}/g, \"\\n\\n\");\n    return t.trim();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcGFyc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7Q0FJQyxHQUVvRDtBQUVyRDs7OztDQUlDLEdBQ00sZUFBZUMsZ0NBQWdDQyxjQUF3QjtJQUM1RSxJQUFJLENBQUNBLGtCQUFrQkEsZUFBZUMsTUFBTSxLQUFLLEdBQUc7UUFDbEQsTUFBTSxJQUFJQyxNQUFNO0lBQ2xCO0lBRUEsSUFBSTtRQUNGLE1BQU1DLFNBQVMsQ0FBQyxNQUFNLDI4QkFBZSxFQUFHQyxPQUFPO1FBQy9DLE1BQU1DLFNBQVNDLFFBQVFDLEdBQUcsQ0FBQ0MscUJBQXFCO1FBQ2hELElBQUksQ0FBQ0gsUUFBUSxNQUFNLElBQUlILE1BQU07UUFDN0IsTUFBTU8sUUFBUVgsa0VBQWtCQSxDQUFDLGFBQWE7UUFDOUMsTUFBTVksZUFBZSxJQUFJUCxPQUFPO1lBQzlCRTtZQUNBTSxTQUFTO1lBQ1RDLGdCQUFnQjtnQkFDZCxnQkFBZ0JOLFFBQVFDLEdBQUcsQ0FBQ00sdUJBQXVCLElBQUk7Z0JBQ3ZELFdBQVdQLFFBQVFDLEdBQUcsQ0FBQ08sb0JBQW9CLElBQUk7WUFDakQ7UUFDRjtRQUVBLDRDQUE0QztRQUM1QyxNQUFNQyxlQUFlLENBQUMsMnpCQUEyekIsQ0FBQztRQUVsMUIsa0NBQWtDO1FBQ2xDLE1BQU1DLGdCQUFnQmhCLGVBQWVpQixHQUFHLENBQUMsQ0FBQ0MsVUFBYTtnQkFDckRDLE1BQU07Z0JBQ05DLFdBQVc7b0JBQUVDLEtBQUtIO29CQUFTSSxRQUFRO2dCQUFnQjtZQUNyRDtRQUVBLE1BQU1DLFdBQVcsTUFBTWIsYUFBYWMsSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQztZQUMxRGpCO1lBQ0FrQixVQUFVO2dCQUNSO29CQUNFQyxNQUFNO29CQUNOQyxTQUFTO3dCQUNQOzRCQUFFVixNQUFNOzRCQUFRVyxNQUFNZjt3QkFBYTsyQkFDaENDO3FCQUNKO2dCQUNIO2FBQ0Q7WUFDRGUsWUFBWTtZQUNaQyxhQUFhO1FBQ2Y7UUFFQSxNQUFNQyxnQkFBZ0JWLFNBQVNXLE9BQU8sQ0FBQyxFQUFFLEVBQUVDLFNBQVNOLFdBQVc7UUFDL0QsSUFBSSxDQUFDSSxjQUFjRyxJQUFJLElBQUk7WUFDekIsTUFBTSxJQUFJbEMsTUFBTTtRQUNsQjtRQUNBLE9BQU87WUFBRTRCLE1BQU1PLGNBQWNKO1lBQWdCSyxPQUFRZixVQUFrQmU7WUFBTzdCO1FBQU07SUFDdEYsRUFBRSxPQUFPOEIsT0FBTztRQUNkLE1BQU1DLE1BQU1ELGlCQUFpQnJDLFFBQVFxQyxNQUFNSixPQUFPLEdBQUdNLE9BQU9GO1FBQzVELElBQUlDLFFBQVEsa0JBQWtCO1lBQzVCLE1BQU0sSUFBSXRDLE1BQU07UUFDbEI7UUFDQSxJQUFJc0MsS0FBS0UsU0FBUyxrQ0FBa0M7WUFDbEQsTUFBTSxJQUFJeEMsTUFBTTtRQUNsQjtRQUNBLElBQUlzQyxLQUFLRyxjQUFjRCxTQUFTLFlBQVlGLElBQUlHLFdBQVcsR0FBR0QsUUFBUSxDQUFDLFFBQVE7WUFDN0UsMERBQTBEO1lBQzFELE1BQU0sSUFBSXhDLE1BQU07UUFDbEI7UUFDQSxJQUFJc0MsS0FBS0UsU0FBUyxzQkFBc0I7WUFDdEMsTUFBTSxJQUFJeEMsTUFBTTtRQUNsQjtRQUNBLE1BQU0sSUFBSUEsTUFBTSxDQUFDLGVBQWUsRUFBRXNDLElBQUksQ0FBQztJQUN6QztBQUNGO0FBRUE7O0NBRUMsR0FDTSxTQUFTSCxjQUFjUCxJQUFZO0lBQ3hDLElBQUljLElBQUlkLFFBQVE7SUFDaEIsaUJBQWlCO0lBQ2pCYyxJQUFJQSxFQUFFQyxPQUFPLENBQUMsV0FBVztJQUN6QixrQ0FBa0M7SUFDbENELElBQUlBLEVBQUVDLE9BQU8sQ0FBQyxVQUFVO0lBQ3hCLGdDQUFnQztJQUNoQ0QsSUFBSUEsRUFBRUMsT0FBTyxDQUFDLGNBQWM7SUFDNUIseUJBQXlCO0lBQ3pCRCxJQUFJQSxFQUFFQyxPQUFPLENBQUMsV0FBVztJQUN6QixPQUFPRCxFQUFFUixJQUFJO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFsY3YtbGl0ZS1qc29uLy4vbGliL3BhcnNlLnRzPzNkMjUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEV4dHJhY3Rpb24gaGVscGVycyBmb3IgQ1YgdGV4dFxyXG4gKiAtIGV4dHJhY3RUZXh0RnJvbUltYWdlc1dpdGhWaXNpb246IHVzZXMgT3BlbkFJIFZpc2lvbiBvbiBpbWFnZSBkYXRhIFVSTHNcclxuICogLSBub3JtYWxpemVUZXh0OiBtaW5pbWFsIG5vcm1hbGl6YXRpb24gZm9yIGNvbnNpc3RlbnQgZG93bnN0cmVhbSBwcm9jZXNzaW5nXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgZ2V0Q29uZmlndXJlZE1vZGVsIH0gZnJvbSAnQC9jb25maWcvbW9kZWxzJztcclxuXHJcbi8qKlxyXG4gKiBVc2VzIFZpc2lvbiBtb2RlbCB0byBleHRyYWN0IHRleHQgZnJvbSBhbiBhcnJheSBvZiBpbWFnZSBkYXRhIFVSTHMgKHBuZy9qcGVnL3dlYnAvZ2lmKVxyXG4gKiBQcm92aWRlciBpcyBPcGVuUm91dGVyIGlmIGVuYWJsZWQsIGVsc2UgT3BlbkFJLlxyXG4gKiBAcGFyYW0gaW1hZ2VzRGF0YVVybHMgQXJyYXkgb2YgZGF0YSBVUkxzIGxpa2UgYGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwuLi5gXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdFRleHRGcm9tSW1hZ2VzV2l0aFZpc2lvbihpbWFnZXNEYXRhVXJsczogc3RyaW5nW10pOiBQcm9taXNlPHsgdGV4dDogc3RyaW5nOyB1c2FnZT86IGFueTsgbW9kZWw6IHN0cmluZyB9PiB7XHJcbiAgaWYgKCFpbWFnZXNEYXRhVXJscyB8fCBpbWFnZXNEYXRhVXJscy5sZW5ndGggPT09IDApIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignQXVjdW5lIGltYWdlIGZvdXJuaWUgcG91ciBsXFwnZXh0cmFjdGlvbicpO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IE9wZW5BSSA9IChhd2FpdCBpbXBvcnQoJ29wZW5haScpKS5kZWZhdWx0O1xyXG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9LRVlfVklTSU9OO1xyXG4gICAgaWYgKCFhcGlLZXkpIHRocm93IG5ldyBFcnJvcignT1BFTlJPVVRFUl9LRVlfVklTSU9OIG1pc3NpbmcnKTtcclxuICAgIGNvbnN0IG1vZGVsID0gZ2V0Q29uZmlndXJlZE1vZGVsKCd2aXNpb24nKSB8fCAnZ3B0LTRvLW1pbmknO1xyXG4gICAgY29uc3Qgb3BlbmFpVmlzaW9uID0gbmV3IE9wZW5BSSh7XHJcbiAgICAgIGFwaUtleSxcclxuICAgICAgYmFzZVVSTDogJ2h0dHBzOi8vb3BlbnJvdXRlci5haS9hcGkvdjEnLFxyXG4gICAgICBkZWZhdWx0SGVhZGVyczoge1xyXG4gICAgICAgICdIVFRQLVJlZmVyZXInOiBwcm9jZXNzLmVudi5PUEVOUk9VVEVSX0hUVFBfUkVGRVJFUiB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJyxcclxuICAgICAgICAnWC1UaXRsZSc6IHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfQVBQX1RJVExFIHx8ICdRdWlja0NWJyxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFByb21wdCBzcMOpY2lhbGlzw6kgcG91ciBsJ2V4dHJhY3Rpb24gZGUgQ1ZcclxuICAgIGNvbnN0IHZpc2lvblByb21wdCA9IGBUdSBlcyB1biBleHBlcnQgZW4gZXh0cmFjdGlvbiBkZSBkb25uw6llcyBkZSBDVi5cXG5cXG5BbmFseXNlIGNlcyBpbWFnZXMgZGUgQ1YgZXQgZXh0cmFpdCBUT1VUIGxlIHRleHRlIHF1J2VsbGVzIGNvbnRpZW5uZW50IGRlIG1hbmnDqHJlIHN0cnVjdHVyw6llIGV0IGxpc2libGUuXFxuXFxuSU5TVFJVQ1RJT05TIDpcXG4xLiBFeHRyYWl0IFRPVVQgbGUgdGV4dGUgdmlzaWJsZSBkZSB0b3V0ZXMgbGVzIHBhZ2VzXFxuMi4gUHLDqXNlcnZlIGxhIHN0cnVjdHVyZSBsb2dpcXVlIChzZWN0aW9ucywgbGlzdGVzLCBldGMuKVxcbjMuIE9yZ2FuaXNlIGxlIGNvbnRlbnUgZGUgbWFuacOocmUgY29ow6lyZW50ZVxcbjQuIENvcnJpZ2UgbGVzIGVycmV1cnMgT0NSIMOpdmlkZW50ZXNcXG41LiBTw6lwYXJlIGNsYWlyZW1lbnQgbGVzIGRpZmbDqXJlbnRlcyBzZWN0aW9uc1xcbjYuIENvbWJpbmUgbGUgY29udGVudSBkZSB0b3V0ZXMgbGVzIHBhZ2VzIGVuIHVuIHNldWwgdGV4dGUgY29ow6lyZW50XFxuXFxuU1RSVUNUVVJFIEFUVEVORFVFIDpcXG4tIEluZm9ybWF0aW9ucyBwZXJzb25uZWxsZXMgKG5vbSwgY29udGFjdCwgbGllbnMpXFxuLSBSw6lzdW3DqS9PYmplY3RpZiBwcm9mZXNzaW9ubmVsIChzaSBwcsOpc2VudClcXG4tIEV4cMOpcmllbmNlcyBwcm9mZXNzaW9ubmVsbGVzIChjaHJvbm9sb2dpcXVlKVxcbi0gRm9ybWF0aW9uL8OJZHVjYXRpb25cXG4tIENvbXDDqXRlbmNlcyB0ZWNobmlxdWVzXFxuLSBQcm9qZXRzIChzaSBwcsOpc2VudHMpXFxuLSBBdXRyZXMgc2VjdGlvbnMgcGVydGluZW50ZXNcXG5cXG5SZXRvdXJuZSBVTklRVUVNRU5UIGxlIHRleHRlIGV4dHJhaXQsIGJpZW4gc3RydWN0dXLDqSBldCBsaXNpYmxlLmA7XHJcblxyXG4gICAgLy8gUHLDqXBhcmVyIGxlIGNvbnRlbnUgcG91ciBWaXNpb25cclxuICAgIGNvbnN0IGltYWdlQ29udGVudHMgPSBpbWFnZXNEYXRhVXJscy5tYXAoKGRhdGFVcmwpID0+ICh7XHJcbiAgICAgIHR5cGU6ICdpbWFnZV91cmwnIGFzIGNvbnN0LFxyXG4gICAgICBpbWFnZV91cmw6IHsgdXJsOiBkYXRhVXJsLCBkZXRhaWw6ICdoaWdoJyBhcyBjb25zdCB9LFxyXG4gICAgfSkpO1xyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpVmlzaW9uLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcclxuICAgICAgbW9kZWwsXHJcbiAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcm9sZTogJ3VzZXInLFxyXG4gICAgICAgICAgY29udGVudDogW1xyXG4gICAgICAgICAgICB7IHR5cGU6ICd0ZXh0JywgdGV4dDogdmlzaW9uUHJvbXB0IH0sXHJcbiAgICAgICAgICAgIC4uLmltYWdlQ29udGVudHMsXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF0sXHJcbiAgICAgIG1heF90b2tlbnM6IDQwMDAsXHJcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjEsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBleHRyYWN0ZWRUZXh0ID0gcmVzcG9uc2UuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCA/PyAnJztcclxuICAgIGlmICghZXh0cmFjdGVkVGV4dC50cmltKCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdWSVNJT05fTk9fVEVYVCcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgdGV4dDogbm9ybWFsaXplVGV4dChleHRyYWN0ZWRUZXh0KSwgdXNhZ2U6IChyZXNwb25zZSBhcyBhbnkpPy51c2FnZSwgbW9kZWwgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc3QgbXNnID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xyXG4gICAgaWYgKG1zZyA9PT0gJ1ZJU0lPTl9OT19URVhUJykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ltcG9zc2libGUgZFxcJ2V4dHJhaXJlIGR1IHRleHRlIGF2ZWMgVmlzaW9uIChhdWN1biBjb250ZW51IGTDqXRlY3TDqSkuJyk7XHJcbiAgICB9XHJcbiAgICBpZiAobXNnPy5pbmNsdWRlcygnT1BFTlJPVVRFUl9LRVlfVklTSU9OIG1pc3NpbmcnKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nsw6kgQVBJIE9wZW5Sb3V0ZXIgVmlzaW9uIG1hbnF1YW50ZS4nKTtcclxuICAgIH1cclxuICAgIGlmIChtc2c/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2ltYWdlJykgJiYgbXNnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ25vdCcpKSB7XHJcbiAgICAgIC8vIFR5cGljYWwgZXJyb3Igd2hlbiBtb2RlbCBpc24ndCBtdWx0aW1vZGFsIG9uIE9wZW5Sb3V0ZXJcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdMZSBtb2TDqGxlIFZpc2lvbiBzw6lsZWN0aW9ubsOpIG5lIHN1cHBvcnRlIHBhcyBsZXMgaW1hZ2VzIChtdWx0aW1vZGFsKS4gQ2hvaXNpc3NleiB1biBtb2TDqGxlIG11bHRpbW9kYWwgb3UgZMOpc2FjdGl2ZXogT3BlblJvdXRlciBwb3VyIFZpc2lvbi4nKTtcclxuICAgIH1cclxuICAgIGlmIChtc2c/LmluY2x1ZGVzKCd1bnN1cHBvcnRlZCBpbWFnZScpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybWF0IGRcXCdpbWFnZSBub24gc3VwcG9ydMOpIHBhciBWaXNpb24uIFV0aWxpc2V6IFBORy9KUEVHL1dlYlAvR0lGLicpO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBFcnJldXIgVmlzaW9uOiAke21zZ31gKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBOb3JtYWxpc2UgdW4gdGV4dGUgYnJ1dCA6IHB1Y2VzLCBlc3BhY2VzLCBzYXV0cyBkZSBsaWduZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVRleHQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICBsZXQgdCA9IHRleHQgfHwgJyc7XHJcbiAgLy8gUHVjZXMg4oaSIHRpcmV0c1xyXG4gIHQgPSB0LnJlcGxhY2UoL1vigKLCt+KAo+KBg10vZywgJy0nKTtcclxuICAvLyBSZXRvdXJzIMOgIGxhIGxpZ25lIFdpbmRvd3Mg4oaSIFxcblxyXG4gIHQgPSB0LnJlcGxhY2UoL1xcclxcbj8vZywgJ1xcbicpO1xyXG4gIC8vIEVzcGFjZXMgbXVsdGlwbGVzIOKGkiB1biBlc3BhY2VcclxuICB0ID0gdC5yZXBsYWNlKC9bIFxcdF17Mix9L2csICcgJyk7XHJcbiAgLy8gU2F1dHMgZGUgbGlnbmUgPiAyIOKGkiAyXHJcbiAgdCA9IHQucmVwbGFjZSgvXFxuezMsfS9nLCAnXFxuXFxuJyk7XHJcbiAgcmV0dXJuIHQudHJpbSgpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJnZXRDb25maWd1cmVkTW9kZWwiLCJleHRyYWN0VGV4dEZyb21JbWFnZXNXaXRoVmlzaW9uIiwiaW1hZ2VzRGF0YVVybHMiLCJsZW5ndGgiLCJFcnJvciIsIk9wZW5BSSIsImRlZmF1bHQiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTlJPVVRFUl9LRVlfVklTSU9OIiwibW9kZWwiLCJvcGVuYWlWaXNpb24iLCJiYXNlVVJMIiwiZGVmYXVsdEhlYWRlcnMiLCJPUEVOUk9VVEVSX0hUVFBfUkVGRVJFUiIsIk9QRU5ST1VURVJfQVBQX1RJVExFIiwidmlzaW9uUHJvbXB0IiwiaW1hZ2VDb250ZW50cyIsIm1hcCIsImRhdGFVcmwiLCJ0eXBlIiwiaW1hZ2VfdXJsIiwidXJsIiwiZGV0YWlsIiwicmVzcG9uc2UiLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidGV4dCIsIm1heF90b2tlbnMiLCJ0ZW1wZXJhdHVyZSIsImV4dHJhY3RlZFRleHQiLCJjaG9pY2VzIiwibWVzc2FnZSIsInRyaW0iLCJub3JtYWxpemVUZXh0IiwidXNhZ2UiLCJlcnJvciIsIm1zZyIsIlN0cmluZyIsImluY2x1ZGVzIiwidG9Mb3dlckNhc2UiLCJ0IiwicmVwbGFjZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/parse.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prompt.ts":
/*!***********************!*\
  !*** ./lib/prompt.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SYSTEM_PROMPT: () => (/* binding */ SYSTEM_PROMPT)\n/* harmony export */ });\nconst SYSTEM_PROMPT = `Tu es un \"CV Tailor & HR Arbiter\" expert. Ton rôle est d'adapter un CV à une offre d'emploi en produisant un JSON structuré strict.\r\n\r\n## ENTRÉES\r\n- cv_text: Texte brut extrait d'un CV PDF\r\n- jd_text: Description de poste (Job Description)\r\n\r\n## SORTIE\r\nUN OBJET JSON STRICT conforme au schéma ResumeJSON. Rien d'autre dans ta réponse.\r\n\r\n## RÈGLES STRICTES\r\n\r\n### 1. AUCUNE INVENTION\r\n- Ne jamais inventer de nouvelles compétences, dates, chiffres, ou expériences\r\n- Seules les reformulations et corrections orthographiques sont autorisées\r\n- Utilise uniquement les informations présentes dans cv_text\r\n\r\n### 2. ORDRE DES EXPÉRIENCES\r\n- **CONSERVER ABSOLUMENT** l'ordre d'origine des expériences tel qu'il apparaît dans cv_text\r\n- Tu peux réorganiser les bullets à l'intérieur d'une expérience\r\n- Tu peux supprimer des expériences ou bullets faibles/non pertinents\r\n- Mais tu ne dois JAMAIS permuter l'ordre relatif des expériences conservées\r\n- Définir metadata.sourceOrderPreserved = true\r\n\r\n### 3. OPTIMISATION ATS\r\n- Utiliser des verbes d'action forts\r\n- Incorporer la terminologie précise de jd_text\r\n- Intégrer des mots-clés de jd_text UNIQUEMENT s'ils sont déjà présents dans cv_text\r\n- Pas de keyword stuffing inventé\r\n\r\n### 4. CONTRAINTES DE LONGUEUR\r\n- Maximum 2-5 bullets par expérience\r\n- Maximum 6 expériences au total\r\n- Summary ≤ 600 caractères\r\n- Projects et skills concis et pertinents\r\n\r\n### 5. LANGUE ET QUALITÉ\r\n- Utiliser STRICTEMENT la langue d'origine du CV (ne JAMAIS traduire vers la langue de la JD ou une autre)\r\n- Rédaction claire et professionnelle\r\n- Corriger l'orthographe et la grammaire\r\n- Terminologie précise et cohérente\r\n\r\n### 6. MÉTADONNÉES ET WARNINGS\r\n- Toujours définir metadata.sourceOrderPreserved = true\r\n- Lister dans metadata.warnings tout élément supprimé pour respecter les contraintes\r\n- Indiquer la langue du CV (détectée depuis cv_text ou conservée telle quelle si fournie)\r\n\r\n### 7. VALIDATION STRICTE\r\n- Respecter exactement le format des dates: \"YYYY-MM\" ou \"Present\"\r\n- Valider les emails et URLs\r\n- Respecter les limites min/max de tous les champs\r\n\r\n## EXEMPLE DE STRUCTURE ATTENDUE\r\n{\r\n  \"metadata\": {\r\n    \"language\": \"fr\",\r\n    \"sourceOrderPreserved\": true,\r\n    \"warnings\": [\"Suppression de 2 expériences anciennes non pertinentes\"]\r\n  },\r\n  \"header\": {\r\n    \"fullName\": \"Jean Dupont\",\r\n    \"email\": \"jean.dupont@email.com\",\r\n    \"phone\": \"+33 6 12 34 56 78\",\r\n    \"links\": {\r\n      \"linkedin\": \"https://linkedin.com/in/jeandupont\"\r\n    }\r\n  },\r\n  \"summary\": \"Développeur Full-Stack avec 5 ans d'expérience...\",\r\n  \"experience\": [\r\n    {\r\n      \"company\": \"TechCorp\",\r\n      \"title\": \"Développeur Senior\",\r\n      \"location\": \"Paris\",\r\n      \"startDate\": \"2022-01\",\r\n      \"endDate\": \"Present\",\r\n      \"bullets\": [\r\n        \"Développement d'applications React avec TypeScript\",\r\n        \"Optimisation des performances backend Node.js\"\r\n      ]\r\n    }\r\n  ],\r\n  \"education\": [\r\n    {\r\n      \"school\": \"École d'Ingénieurs\",\r\n      \"degree\": \"Master Informatique\",\r\n      \"location\": \"Paris\",\r\n      \"dates\": \"2018-2020\"\r\n    }\r\n  ],\r\n  \"skills\": {\r\n    \"languages\": [\"JavaScript\", \"Python\"],\r\n    \"frameworks\": [\"React\", \"Node.js\"],\r\n    \"tools\": [\"Git\", \"Docker\"]\r\n  }\r\n}\r\n\r\nRéponds UNIQUEMENT avec le JSON valide, sans texte d'accompagnement.`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJvbXB0LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQSxnQkFBZ0IsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0VBK0ZzQyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFsY3YtbGl0ZS1qc29uLy4vbGliL3Byb21wdC50cz9jOTk5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBTWVNURU1fUFJPTVBUID0gYFR1IGVzIHVuIFwiQ1YgVGFpbG9yICYgSFIgQXJiaXRlclwiIGV4cGVydC4gVG9uIHLDtGxlIGVzdCBkJ2FkYXB0ZXIgdW4gQ1Ygw6AgdW5lIG9mZnJlIGQnZW1wbG9pIGVuIHByb2R1aXNhbnQgdW4gSlNPTiBzdHJ1Y3R1csOpIHN0cmljdC5cclxuXHJcbiMjIEVOVFLDiUVTXHJcbi0gY3ZfdGV4dDogVGV4dGUgYnJ1dCBleHRyYWl0IGQndW4gQ1YgUERGXHJcbi0gamRfdGV4dDogRGVzY3JpcHRpb24gZGUgcG9zdGUgKEpvYiBEZXNjcmlwdGlvbilcclxuXHJcbiMjIFNPUlRJRVxyXG5VTiBPQkpFVCBKU09OIFNUUklDVCBjb25mb3JtZSBhdSBzY2jDqW1hIFJlc3VtZUpTT04uIFJpZW4gZCdhdXRyZSBkYW5zIHRhIHLDqXBvbnNlLlxyXG5cclxuIyMgUsOIR0xFUyBTVFJJQ1RFU1xyXG5cclxuIyMjIDEuIEFVQ1VORSBJTlZFTlRJT05cclxuLSBOZSBqYW1haXMgaW52ZW50ZXIgZGUgbm91dmVsbGVzIGNvbXDDqXRlbmNlcywgZGF0ZXMsIGNoaWZmcmVzLCBvdSBleHDDqXJpZW5jZXNcclxuLSBTZXVsZXMgbGVzIHJlZm9ybXVsYXRpb25zIGV0IGNvcnJlY3Rpb25zIG9ydGhvZ3JhcGhpcXVlcyBzb250IGF1dG9yaXPDqWVzXHJcbi0gVXRpbGlzZSB1bmlxdWVtZW50IGxlcyBpbmZvcm1hdGlvbnMgcHLDqXNlbnRlcyBkYW5zIGN2X3RleHRcclxuXHJcbiMjIyAyLiBPUkRSRSBERVMgRVhQw4lSSUVOQ0VTXHJcbi0gKipDT05TRVJWRVIgQUJTT0xVTUVOVCoqIGwnb3JkcmUgZCdvcmlnaW5lIGRlcyBleHDDqXJpZW5jZXMgdGVsIHF1J2lsIGFwcGFyYcOudCBkYW5zIGN2X3RleHRcclxuLSBUdSBwZXV4IHLDqW9yZ2FuaXNlciBsZXMgYnVsbGV0cyDDoCBsJ2ludMOpcmlldXIgZCd1bmUgZXhww6lyaWVuY2VcclxuLSBUdSBwZXV4IHN1cHByaW1lciBkZXMgZXhww6lyaWVuY2VzIG91IGJ1bGxldHMgZmFpYmxlcy9ub24gcGVydGluZW50c1xyXG4tIE1haXMgdHUgbmUgZG9pcyBKQU1BSVMgcGVybXV0ZXIgbCdvcmRyZSByZWxhdGlmIGRlcyBleHDDqXJpZW5jZXMgY29uc2VydsOpZXNcclxuLSBEw6lmaW5pciBtZXRhZGF0YS5zb3VyY2VPcmRlclByZXNlcnZlZCA9IHRydWVcclxuXHJcbiMjIyAzLiBPUFRJTUlTQVRJT04gQVRTXHJcbi0gVXRpbGlzZXIgZGVzIHZlcmJlcyBkJ2FjdGlvbiBmb3J0c1xyXG4tIEluY29ycG9yZXIgbGEgdGVybWlub2xvZ2llIHByw6ljaXNlIGRlIGpkX3RleHRcclxuLSBJbnTDqWdyZXIgZGVzIG1vdHMtY2zDqXMgZGUgamRfdGV4dCBVTklRVUVNRU5UIHMnaWxzIHNvbnQgZMOpasOgIHByw6lzZW50cyBkYW5zIGN2X3RleHRcclxuLSBQYXMgZGUga2V5d29yZCBzdHVmZmluZyBpbnZlbnTDqVxyXG5cclxuIyMjIDQuIENPTlRSQUlOVEVTIERFIExPTkdVRVVSXHJcbi0gTWF4aW11bSAyLTUgYnVsbGV0cyBwYXIgZXhww6lyaWVuY2VcclxuLSBNYXhpbXVtIDYgZXhww6lyaWVuY2VzIGF1IHRvdGFsXHJcbi0gU3VtbWFyeSDiiaQgNjAwIGNhcmFjdMOocmVzXHJcbi0gUHJvamVjdHMgZXQgc2tpbGxzIGNvbmNpcyBldCBwZXJ0aW5lbnRzXHJcblxyXG4jIyMgNS4gTEFOR1VFIEVUIFFVQUxJVMOJXHJcbi0gVXRpbGlzZXIgU1RSSUNURU1FTlQgbGEgbGFuZ3VlIGQnb3JpZ2luZSBkdSBDViAobmUgSkFNQUlTIHRyYWR1aXJlIHZlcnMgbGEgbGFuZ3VlIGRlIGxhIEpEIG91IHVuZSBhdXRyZSlcclxuLSBSw6lkYWN0aW9uIGNsYWlyZSBldCBwcm9mZXNzaW9ubmVsbGVcclxuLSBDb3JyaWdlciBsJ29ydGhvZ3JhcGhlIGV0IGxhIGdyYW1tYWlyZVxyXG4tIFRlcm1pbm9sb2dpZSBwcsOpY2lzZSBldCBjb2jDqXJlbnRlXHJcblxyXG4jIyMgNi4gTcOJVEFET05Ow4lFUyBFVCBXQVJOSU5HU1xyXG4tIFRvdWpvdXJzIGTDqWZpbmlyIG1ldGFkYXRhLnNvdXJjZU9yZGVyUHJlc2VydmVkID0gdHJ1ZVxyXG4tIExpc3RlciBkYW5zIG1ldGFkYXRhLndhcm5pbmdzIHRvdXQgw6lsw6ltZW50IHN1cHByaW3DqSBwb3VyIHJlc3BlY3RlciBsZXMgY29udHJhaW50ZXNcclxuLSBJbmRpcXVlciBsYSBsYW5ndWUgZHUgQ1YgKGTDqXRlY3TDqWUgZGVwdWlzIGN2X3RleHQgb3UgY29uc2VydsOpZSB0ZWxsZSBxdWVsbGUgc2kgZm91cm5pZSlcclxuXHJcbiMjIyA3LiBWQUxJREFUSU9OIFNUUklDVEVcclxuLSBSZXNwZWN0ZXIgZXhhY3RlbWVudCBsZSBmb3JtYXQgZGVzIGRhdGVzOiBcIllZWVktTU1cIiBvdSBcIlByZXNlbnRcIlxyXG4tIFZhbGlkZXIgbGVzIGVtYWlscyBldCBVUkxzXHJcbi0gUmVzcGVjdGVyIGxlcyBsaW1pdGVzIG1pbi9tYXggZGUgdG91cyBsZXMgY2hhbXBzXHJcblxyXG4jIyBFWEVNUExFIERFIFNUUlVDVFVSRSBBVFRFTkRVRVxyXG57XHJcbiAgXCJtZXRhZGF0YVwiOiB7XHJcbiAgICBcImxhbmd1YWdlXCI6IFwiZnJcIixcclxuICAgIFwic291cmNlT3JkZXJQcmVzZXJ2ZWRcIjogdHJ1ZSxcclxuICAgIFwid2FybmluZ3NcIjogW1wiU3VwcHJlc3Npb24gZGUgMiBleHDDqXJpZW5jZXMgYW5jaWVubmVzIG5vbiBwZXJ0aW5lbnRlc1wiXVxyXG4gIH0sXHJcbiAgXCJoZWFkZXJcIjoge1xyXG4gICAgXCJmdWxsTmFtZVwiOiBcIkplYW4gRHVwb250XCIsXHJcbiAgICBcImVtYWlsXCI6IFwiamVhbi5kdXBvbnRAZW1haWwuY29tXCIsXHJcbiAgICBcInBob25lXCI6IFwiKzMzIDYgMTIgMzQgNTYgNzhcIixcclxuICAgIFwibGlua3NcIjoge1xyXG4gICAgICBcImxpbmtlZGluXCI6IFwiaHR0cHM6Ly9saW5rZWRpbi5jb20vaW4vamVhbmR1cG9udFwiXHJcbiAgICB9XHJcbiAgfSxcclxuICBcInN1bW1hcnlcIjogXCJEw6l2ZWxvcHBldXIgRnVsbC1TdGFjayBhdmVjIDUgYW5zIGQnZXhww6lyaWVuY2UuLi5cIixcclxuICBcImV4cGVyaWVuY2VcIjogW1xyXG4gICAge1xyXG4gICAgICBcImNvbXBhbnlcIjogXCJUZWNoQ29ycFwiLFxyXG4gICAgICBcInRpdGxlXCI6IFwiRMOpdmVsb3BwZXVyIFNlbmlvclwiLFxyXG4gICAgICBcImxvY2F0aW9uXCI6IFwiUGFyaXNcIixcclxuICAgICAgXCJzdGFydERhdGVcIjogXCIyMDIyLTAxXCIsXHJcbiAgICAgIFwiZW5kRGF0ZVwiOiBcIlByZXNlbnRcIixcclxuICAgICAgXCJidWxsZXRzXCI6IFtcclxuICAgICAgICBcIkTDqXZlbG9wcGVtZW50IGQnYXBwbGljYXRpb25zIFJlYWN0IGF2ZWMgVHlwZVNjcmlwdFwiLFxyXG4gICAgICAgIFwiT3B0aW1pc2F0aW9uIGRlcyBwZXJmb3JtYW5jZXMgYmFja2VuZCBOb2RlLmpzXCJcclxuICAgICAgXVxyXG4gICAgfVxyXG4gIF0sXHJcbiAgXCJlZHVjYXRpb25cIjogW1xyXG4gICAge1xyXG4gICAgICBcInNjaG9vbFwiOiBcIsOJY29sZSBkJ0luZ8OpbmlldXJzXCIsXHJcbiAgICAgIFwiZGVncmVlXCI6IFwiTWFzdGVyIEluZm9ybWF0aXF1ZVwiLFxyXG4gICAgICBcImxvY2F0aW9uXCI6IFwiUGFyaXNcIixcclxuICAgICAgXCJkYXRlc1wiOiBcIjIwMTgtMjAyMFwiXHJcbiAgICB9XHJcbiAgXSxcclxuICBcInNraWxsc1wiOiB7XHJcbiAgICBcImxhbmd1YWdlc1wiOiBbXCJKYXZhU2NyaXB0XCIsIFwiUHl0aG9uXCJdLFxyXG4gICAgXCJmcmFtZXdvcmtzXCI6IFtcIlJlYWN0XCIsIFwiTm9kZS5qc1wiXSxcclxuICAgIFwidG9vbHNcIjogW1wiR2l0XCIsIFwiRG9ja2VyXCJdXHJcbiAgfVxyXG59XHJcblxyXG5Sw6lwb25kcyBVTklRVUVNRU5UIGF2ZWMgbGUgSlNPTiB2YWxpZGUsIHNhbnMgdGV4dGUgZCdhY2NvbXBhZ25lbWVudC5gO1xyXG4iXSwibmFtZXMiOlsiU1lTVEVNX1BST01QVCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/prompt.ts\n");

/***/ }),

/***/ "(rsc)/./lib/sanitize.ts":
/*!*************************!*\
  !*** ./lib/sanitize.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sanitizeResumeForSchema: () => (/* binding */ sanitizeResumeForSchema)\n/* harmony export */ });\n/* harmony import */ var _lib_parse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/parse */ \"(rsc)/./lib/parse.ts\");\n\nfunction detectLangFromText(text) {\n    const t = (text || \"\").toLowerCase();\n    if (!t.trim()) return \"unknown\";\n    // Script-based quick checks\n    if (/[\\u0600-\\u06FF]/.test(text)) return \"ar\"; // Arabic\n    if (/[\\u4E00-\\u9FFF]/.test(text)) return \"zh\"; // CJK Unified Ideographs\n    if (/[\\u3040-\\u30FF]/.test(text)) return \"ja\"; // Hiragana/Katakana\n    if (/[\\uAC00-\\uD7AF]/.test(text)) return \"ko\"; // Hangul\n    // Latin-based heuristics via stopwords\n    const langs = {\n        fr: [\n            \" le \",\n            \" la \",\n            \" les \",\n            \" de \",\n            \" des \",\n            \" et \",\n            \" \\xe0 \",\n            \" ou \",\n            \" exp\\xe9rience \",\n            \"comp\\xe9tence\",\n            \"profil\"\n        ],\n        en: [\n            \" the \",\n            \" and \",\n            \" to \",\n            \" or \",\n            \" experience \",\n            \" skills \",\n            \" profile \",\n            \" developer \",\n            \" engineer \"\n        ],\n        es: [\n            \" el \",\n            \" la \",\n            \" los \",\n            \" las \",\n            \" de \",\n            \" y \",\n            \" para \",\n            \" experiencia \",\n            \" perfil \",\n            \" desarrollador \"\n        ],\n        it: [\n            \" il \",\n            \" la \",\n            \" lo \",\n            \" le \",\n            \" di \",\n            \" e \",\n            \" per \",\n            \" esperienza \",\n            \" profilo \",\n            \" sviluppatore \"\n        ],\n        de: [\n            \" der \",\n            \" die \",\n            \" das \",\n            \" und \",\n            \" f\\xfcr \",\n            \" erfahrung \",\n            \" profil \",\n            \" entwickler \"\n        ],\n        pt: [\n            \" o \",\n            \" a \",\n            \" os \",\n            \" as \",\n            \" de \",\n            \" e \",\n            \" para \",\n            \" experi\\xeancia \",\n            \" perfil \",\n            \" desenvolvedor \"\n        ],\n        nl: [\n            \" de \",\n            \" het \",\n            \" en \",\n            \" voor \",\n            \" ervaring \",\n            \" profiel \",\n            \" ontwikkelaar \"\n        ],\n        tr: [\n            \" ve \",\n            \" i\\xe7in \",\n            \" deneyim \",\n            \" profil \",\n            \" geliştirici \",\n            \" m\\xfchendis \"\n        ]\n    };\n    let best = \"unknown\";\n    let bestScore = 0;\n    for (const [code, words] of Object.entries(langs)){\n        const score = words.reduce((acc, w)=>acc + (t.includes(w) ? 1 : 0), 0);\n        if (score > bestScore) {\n            bestScore = score;\n            best = code;\n        }\n    }\n    return best;\n}\nfunction normalizeLang(val, text) {\n    const v = String(val || \"\").toLowerCase();\n    // Preserve explicit labels/codes if present\n    const directMap = {\n        fr: \"fr\",\n        français: \"fr\",\n        french: \"fr\",\n        en: \"en\",\n        anglais: \"en\",\n        english: \"en\",\n        es: \"es\",\n        espagnol: \"es\",\n        spanish: \"es\",\n        it: \"it\",\n        italien: \"it\",\n        italian: \"it\",\n        de: \"de\",\n        allemand: \"de\",\n        german: \"de\",\n        pt: \"pt\",\n        portugais: \"pt\",\n        portuguese: \"pt\",\n        português: \"pt\",\n        nl: \"nl\",\n        néerlandais: \"nl\",\n        dutch: \"nl\",\n        tr: \"tr\",\n        turc: \"tr\",\n        turkish: \"tr\",\n        ar: \"ar\",\n        arabe: \"ar\",\n        arabic: \"ar\",\n        zh: \"zh\",\n        chinois: \"zh\",\n        chinese: \"zh\",\n        ja: \"ja\",\n        japonais: \"ja\",\n        japanese: \"ja\",\n        ko: \"ko\",\n        coréen: \"ko\",\n        korean: \"ko\"\n    };\n    if (directMap[v]) return directMap[v];\n    // Fallback: detect from provided text (use CV text)\n    return detectLangFromText(text);\n}\nfunction pad2(n) {\n    return n < 10 ? `0${n}` : `${n}`;\n}\nfunction normDate(input) {\n    if (!input) return undefined;\n    const s = String(input).trim();\n    if (!s) return undefined;\n    const present = /^(present|présent|now)$/i;\n    if (present.test(s)) return \"Present\";\n    // Try YYYY-MM\n    let m = s.match(/^(\\d{4})[-\\/](\\d{1,2})$/);\n    if (m) {\n        const y = Number(m[1]);\n        const mm = pad2(Math.max(1, Math.min(12, Number(m[2]))));\n        return `${y}-${mm}`;\n    }\n    // Try MM/YYYY or DD/MM/YYYY\n    m = s.match(/^(\\d{1,2})\\/(\\d{4})$/);\n    if (m) {\n        const y = Number(m[2]);\n        const mm = pad2(Math.max(1, Math.min(12, Number(m[1]))));\n        return `${y}-${mm}`;\n    }\n    m = s.match(/^(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})$/);\n    if (m) {\n        const y = Number(m[3]);\n        const mm = pad2(Math.max(1, Math.min(12, Number(m[2]))));\n        return `${y}-${mm}`;\n    }\n    // Try YYYY only\n    m = s.match(/^(\\d{4})$/);\n    if (m) {\n        const y = Number(m[1]);\n        return `${y}-01`;\n    }\n    return undefined;\n}\nfunction cleanUrl(u) {\n    if (!u) return undefined;\n    let s = String(u).trim();\n    if (!s) return undefined;\n    if (!/^https?:\\/\\//i.test(s)) s = \"https://\" + s;\n    try {\n        const url = new URL(s);\n        return url.toString();\n    } catch  {\n        return undefined;\n    }\n}\nfunction guessFullName(cvText, email) {\n    const t = (0,_lib_parse__WEBPACK_IMPORTED_MODULE_0__.normalizeText)(cvText || \"\");\n    const lines = t.split(\"\\n\").map((s)=>s.trim()).filter(Boolean).slice(0, 6);\n    // Look for a line with 2..5 capitalized words\n    for (const ln of lines){\n        const words = ln.split(/\\s+/);\n        const caps = words.filter((w)=>/^(?:[A-ZÀÂÄÇÉÈÊËÏÎÔÖÙÛÜŸ][\\p{L}'-]+)$/u.test(w));\n        if (caps.length >= 2 && caps.length <= 5) return caps.join(\" \");\n    }\n    // Try from email local-part (firstname.lastname)\n    if (email && /@/.test(email)) {\n        const local = email.split(\"@\")[0];\n        const parts = local.split(/[._-]+/).filter(Boolean).slice(0, 3);\n        if (parts.length >= 1) {\n            const name = parts.map((p)=>p.charAt(0).toUpperCase() + p.slice(1)).join(\" \");\n            return name;\n        }\n    }\n    return undefined;\n}\nfunction sanitizeResumeForSchema(input, opts) {\n    const src = typeof input === \"object\" && input ? JSON.parse(JSON.stringify(input)) : {};\n    // metadata\n    src.metadata = src.metadata || {};\n    src.metadata.language = normalizeLang(src.metadata.language, opts.cvText);\n    if (src.metadata.sourceOrderPreserved !== true) src.metadata.sourceOrderPreserved = true;\n    if (typeof src.metadata.warnings !== \"undefined\") {\n        if (Array.isArray(src.metadata.warnings)) {\n            src.metadata.warnings = src.metadata.warnings.map((w)=>String(w || \"\").trim()).filter((w)=>w);\n            if (src.metadata.warnings.length === 0) delete src.metadata.warnings;\n        } else {\n            delete src.metadata.warnings;\n        }\n    }\n    // header\n    src.header = src.header || {};\n    // email\n    if (src.header.email && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(src.header.email)) delete src.header.email;\n    // phone: trim\n    if (src.header.phone) src.header.phone = String(src.header.phone).trim();\n    // links\n    if (src.header.links) {\n        const l = src.header.links;\n        if (l.linkedin) l.linkedin = cleanUrl(l.linkedin);\n        if (l.github) l.github = cleanUrl(l.github);\n        if (l.portfolio) l.portfolio = cleanUrl(l.portfolio);\n        Object.keys(l).forEach((k)=>{\n            if (!l[k]) delete l[k];\n        });\n        if (Object.keys(l).length === 0) delete src.header.links;\n    }\n    // fullName best-effort\n    if (!src.header.fullName || !String(src.header.fullName).trim()) {\n        const best = guessFullName(opts.cvText, src.header.email);\n        if (best) src.header.fullName = best;\n    }\n    if (!src.header.fullName || !String(src.header.fullName).trim()) {\n        // Safe neutral fallback to satisfy schema without language bias\n        src.header.fullName = \"—\";\n    }\n    // summary clamp\n    if (typeof src.summary !== \"undefined\") {\n        const s = String(src.summary || \"\").trim();\n        src.summary = s.length > 600 ? s.slice(0, 600) : s;\n        if (!src.summary) delete src.summary; // remove empty summary\n    }\n    // experience clamp + normalize\n    if (Array.isArray(src.experience)) {\n        src.experience = src.experience.slice(0, 6).map((e)=>{\n            const out = {\n                ...e\n            };\n            // synonym mapping\n            const pick = (...cands)=>cands.find((v)=>typeof v === \"string\" && String(v).trim()) || undefined;\n            out.company = pick(out.company, out.company_name, out.employer, out.org, out.organization, out.organisation);\n            out.title = pick(out.title, out.position, out.role);\n            out.location = pick(out.location, out.city, out.place);\n            out.startDate = pick(out.startDate, out.start, out.from, out.startDateRaw);\n            out.endDate = pick(out.endDate, out.end, out.to, out.endDateRaw);\n            if ((!out.startDate || !out.endDate) && (out.datesRaw || out.dates || out.period || out.years)) {\n                const s = String(out.datesRaw || out.dates || out.period || out.years || \"\").trim();\n                const m = s.match(/(present|présent|\\d{1,2}\\/\\d{4}|\\d{4}-\\d{2}|\\d{4})/gi);\n                if (m && m.length) {\n                    const a = m[0];\n                    const b = m[1];\n                    if (!out.startDate && a) {\n                        const sd = /present|présent/i.test(a) ? undefined : normDate(a);\n                        if (sd) out.startDate = sd;\n                    }\n                    if (!out.endDate && b) {\n                        if (/present|présent/i.test(b)) out.endDate = \"Present\";\n                        else {\n                            const ed = normDate(b);\n                            if (ed) out.endDate = ed;\n                        }\n                    }\n                }\n            }\n            let bullets = out.bullets ?? out.achievements ?? out.responsibilities ?? out.tasks;\n            if (!Array.isArray(bullets) && typeof bullets === \"string\") bullets = [\n                bullets\n            ];\n            if (Array.isArray(bullets)) out.bullets = bullets;\n            // dates\n            if (out.startDate) {\n                const sd = normDate(out.startDate);\n                if (sd) out.startDate = sd;\n                else delete out.startDate;\n            }\n            if (out.endDate) {\n                const ed = normDate(out.endDate);\n                if (ed) out.endDate = ed;\n                else delete out.endDate;\n            }\n            // required strings with safe placeholders\n            out.company = String(out.company || \"\").trim() || \"—\";\n            out.title = String(out.title || \"\").trim() || \"—\";\n            // bullets\n            if (Array.isArray(out.bullets)) {\n                out.bullets = out.bullets.map((b)=>String(b || \"\").trim()).filter((b)=>b).slice(0, 5);\n            } else {\n                out.bullets = [];\n            }\n            if (!Array.isArray(out.bullets) || out.bullets.length === 0) {\n                out.bullets = [\n                    \"—\"\n                ];\n            }\n            return out;\n        });\n    }\n    {\n        const now = new Date();\n        const todayYM = now.getFullYear() * 12 + (now.getMonth() + 1);\n        let anyFuture = false;\n        if (Array.isArray(src.experience)) {\n            for (const e of src.experience){\n                const chk = (d)=>{\n                    if (!d || d === \"Present\") return false;\n                    const m = String(d).match(/^(\\d{4})-(\\d{2})$/);\n                    if (!m) return false;\n                    const ym = parseInt(m[1], 10) * 12 + parseInt(m[2], 10);\n                    return ym > todayYM;\n                };\n                if (chk(e.startDate) || chk(e.endDate)) {\n                    anyFuture = true;\n                    break;\n                }\n            }\n        }\n        if (src.metadata && Array.isArray(src.metadata.warnings)) {\n            src.metadata.warnings = src.metadata.warnings.filter((w)=>{\n                const s = String(w || \"\").toLowerCase();\n                const mentionsFuture = s.includes(\"future\") || s.includes(\"futur\") || s.includes(\"post\\0E9rie\") || s.includes(\"post\\0E9rieures\") || s.includes(\"post\") && s.includes(\"date\");\n                if (!mentionsFuture) return true;\n                return anyFuture;\n            });\n            if (src.metadata.warnings.length === 0) delete src.metadata.warnings;\n        }\n    }\n    // education clamp\n    if (!Array.isArray(src.education)) {\n        src.education = [];\n    } else {\n        src.education = src.education.slice(0, 3).map((e)=>{\n            const out = {\n                ...e\n            };\n            // synonym mapping\n            const pick = (...cands)=>cands.find((v)=>typeof v === \"string\" && String(v).trim()) || undefined;\n            out.school = pick(out.school, out.institution, out.university, out.college, out.school_name);\n            out.degree = pick(out.degree, out.diploma);\n            out.location = pick(out.location, out.city);\n            out.dates = pick(out.dates, out.period, out.years);\n            return out;\n        }).filter((e)=>String(e?.school || \"\").trim().length > 0);\n    }\n    // projects cleanup (optional): keep only valid, otherwise drop entirely\n    if (Array.isArray(src.projects)) {\n        const proj = src.projects.slice(0, 4).map((p)=>{\n            const name = String(p?.name || \"\").trim();\n            if (!name) return null;\n            const out = {\n                name\n            };\n            if (Array.isArray(p?.bullets)) {\n                out.bullets = p.bullets.map((b)=>String(b || \"\").trim()).filter((b)=>b).slice(0, 4);\n            } else {\n                out.bullets = [\n                    \"—\"\n                ];\n            }\n            if (!out.bullets.length) out.bullets = [\n                \"—\"\n            ];\n            if (p?.dates) out.dates = String(p.dates);\n            return out;\n        }).filter(Boolean);\n        if (proj.length) src.projects = proj;\n        else delete src.projects;\n    } else if (src.projects) {\n        delete src.projects;\n    }\n    // skills cleanup & coercion\n    if (Array.isArray(src.skills)) {\n        // Coerce array of strings into tools\n        const arr = src.skills.map((x)=>String(x || \"\").trim()).filter((x)=>x);\n        src.skills = arr.length ? {\n            tools: arr\n        } : undefined;\n    }\n    if (typeof src.skills === \"string\") {\n        const v = String(src.skills).trim();\n        src.skills = v ? {\n            tools: [\n                v\n            ]\n        } : undefined;\n    }\n    if (src.skills && typeof src.skills === \"object\") {\n        const s = src.skills;\n        [\n            \"languages\",\n            \"frameworks\",\n            \"tools\",\n            \"other\"\n        ].forEach((k)=>{\n            if (Array.isArray(s[k])) {\n                s[k] = s[k].map((x)=>String(x || \"\").trim()).filter((x)=>x);\n            } else if (typeof s[k] === \"string\") {\n                const v = String(s[k]).trim();\n                s[k] = v ? [\n                    v\n                ] : undefined;\n            } else if (s[k] != null) {\n                // drop non-array non-string values\n                delete s[k];\n            }\n        });\n        if (!Object.keys(s).some((k)=>Array.isArray(s[k]) && s[k].length)) delete src.skills;\n    }\n    // Ensure at least one experience item exists\n    if (!Array.isArray(src.experience) || src.experience.length === 0) {\n        src.experience = [\n            {\n                company: \"—\",\n                title: \"—\",\n                bullets: [\n                    \"—\"\n                ]\n            }\n        ];\n    }\n    // strip unknown root keys not present in ResumeJSON\n    const allowedRoot = new Set([\n        \"metadata\",\n        \"header\",\n        \"summary\",\n        \"experience\",\n        \"projects\",\n        \"education\",\n        \"skills\",\n        \"languages\",\n        \"certifications\",\n        \"interests\",\n        \"otherSections\"\n    ]);\n    Object.keys(src).forEach((k)=>{\n        if (!allowedRoot.has(k)) delete src[k];\n    });\n    return src;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TyxDQUFDVCxJQUFJc0IsVUFBVSxLQUFLdEIsSUFBSXNCLFVBQVUsQ0FBQ2hDLE1BQU0sS0FBSyxHQUFHO1FBQ2pFVSxJQUFJc0IsVUFBVSxHQUFHO1lBQUM7Z0JBQUVNLFNBQVM7Z0JBQUtNLE9BQU87Z0JBQUtzQixTQUFTO29CQUFDO2lCQUFJO1lBQUM7U0FBRTtJQUNqRTtJQUVBLG9EQUFvRDtJQUNwRCxNQUFNOEIsY0FBYyxJQUFJQyxJQUFJO1FBQUM7UUFBWTtRQUFVO1FBQVc7UUFBYztRQUFZO1FBQWE7UUFBVTtRQUFhO1FBQWtCO1FBQWE7S0FBZ0I7SUFDM0t6SyxPQUFPbUcsSUFBSSxDQUFDakIsS0FBS2tCLE9BQU8sQ0FBQyxDQUFDQztRQUFRLElBQUksQ0FBQ21FLFlBQVlFLEdBQUcsQ0FBQ3JFLElBQUksT0FBT25CLEdBQUcsQ0FBQ21CLEVBQUU7SUFBRTtJQUUxRSxPQUFPbkI7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL3JlYWxjdi1saXRlLWpzb24vLi9saWIvc2FuaXRpemUudHM/OWExZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBub3JtYWxpemVUZXh0IH0gZnJvbSAnQC9saWIvcGFyc2UnO1xuXG5mdW5jdGlvbiBkZXRlY3RMYW5nRnJvbVRleHQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgdCA9ICh0ZXh0IHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xuICBpZiAoIXQudHJpbSgpKSByZXR1cm4gJ3Vua25vd24nO1xuICAvLyBTY3JpcHQtYmFzZWQgcXVpY2sgY2hlY2tzXG4gIGlmICgvW1xcdTA2MDAtXFx1MDZGRl0vLnRlc3QodGV4dCkpIHJldHVybiAnYXInOyAgICAgICAvLyBBcmFiaWNcbiAgaWYgKC9bXFx1NEUwMC1cXHU5RkZGXS8udGVzdCh0ZXh0KSkgcmV0dXJuICd6aCc7ICAgICAgIC8vIENKSyBVbmlmaWVkIElkZW9ncmFwaHNcbiAgaWYgKC9bXFx1MzA0MC1cXHUzMEZGXS8udGVzdCh0ZXh0KSkgcmV0dXJuICdqYSc7ICAgICAgIC8vIEhpcmFnYW5hL0thdGFrYW5hXG4gIGlmICgvW1xcdUFDMDAtXFx1RDdBRl0vLnRlc3QodGV4dCkpIHJldHVybiAna28nOyAgICAgICAvLyBIYW5ndWxcbiAgLy8gTGF0aW4tYmFzZWQgaGV1cmlzdGljcyB2aWEgc3RvcHdvcmRzXG4gIGNvbnN0IGxhbmdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XG4gICAgZnI6IFsnIGxlICcsICcgbGEgJywgJyBsZXMgJywgJyBkZSAnLCAnIGRlcyAnLCAnIGV0ICcsICcgw6AgJywgJyBvdSAnLCAnIGV4cMOpcmllbmNlICcsICdjb21ww6l0ZW5jZScsICdwcm9maWwnXSxcbiAgICBlbjogWycgdGhlICcsICcgYW5kICcsICcgdG8gJywgJyBvciAnLCAnIGV4cGVyaWVuY2UgJywgJyBza2lsbHMgJywgJyBwcm9maWxlICcsICcgZGV2ZWxvcGVyICcsICcgZW5naW5lZXIgJ10sXG4gICAgZXM6IFsnIGVsICcsICcgbGEgJywgJyBsb3MgJywgJyBsYXMgJywgJyBkZSAnLCAnIHkgJywgJyBwYXJhICcsICcgZXhwZXJpZW5jaWEgJywgJyBwZXJmaWwgJywgJyBkZXNhcnJvbGxhZG9yICddLFxuICAgIGl0OiBbJyBpbCAnLCAnIGxhICcsICcgbG8gJywgJyBsZSAnLCAnIGRpICcsICcgZSAnLCAnIHBlciAnLCAnIGVzcGVyaWVuemEgJywgJyBwcm9maWxvICcsICcgc3ZpbHVwcGF0b3JlICddLFxuICAgIGRlOiBbJyBkZXIgJywgJyBkaWUgJywgJyBkYXMgJywgJyB1bmQgJywgJyBmw7xyICcsICcgZXJmYWhydW5nICcsICcgcHJvZmlsICcsICcgZW50d2lja2xlciAnXSxcbiAgICBwdDogWycgbyAnLCAnIGEgJywgJyBvcyAnLCAnIGFzICcsICcgZGUgJywgJyBlICcsICcgcGFyYSAnLCAnIGV4cGVyacOqbmNpYSAnLCAnIHBlcmZpbCAnLCAnIGRlc2Vudm9sdmVkb3IgJ10sXG4gICAgbmw6IFsnIGRlICcsICcgaGV0ICcsICcgZW4gJywgJyB2b29yICcsICcgZXJ2YXJpbmcgJywgJyBwcm9maWVsICcsICcgb250d2lra2VsYWFyICddLFxuICAgIHRyOiBbJyB2ZSAnLCAnIGnDp2luICcsICcgZGVuZXlpbSAnLCAnIHByb2ZpbCAnLCAnIGdlbGnFn3RpcmljaSAnLCAnIG3DvGhlbmRpcyAnXSxcbiAgfTtcbiAgbGV0IGJlc3QgPSAndW5rbm93bic7XG4gIGxldCBiZXN0U2NvcmUgPSAwO1xuICBmb3IgKGNvbnN0IFtjb2RlLCB3b3Jkc10gb2YgT2JqZWN0LmVudHJpZXMobGFuZ3MpKSB7XG4gICAgY29uc3Qgc2NvcmUgPSB3b3Jkcy5yZWR1Y2UoKGFjYywgdykgPT4gYWNjICsgKHQuaW5jbHVkZXModykgPyAxIDogMCksIDApO1xuICAgIGlmIChzY29yZSA+IGJlc3RTY29yZSkgeyBiZXN0U2NvcmUgPSBzY29yZTsgYmVzdCA9IGNvZGU7IH1cbiAgfVxuICByZXR1cm4gYmVzdDtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplTGFuZyh2YWw6IGFueSwgdGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgdiA9IFN0cmluZyh2YWwgfHwgJycpLnRvTG93ZXJDYXNlKCk7XG4gIC8vIFByZXNlcnZlIGV4cGxpY2l0IGxhYmVscy9jb2RlcyBpZiBwcmVzZW50XG4gIGNvbnN0IGRpcmVjdE1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICBmcjogJ2ZyJywgZnJhbsOnYWlzOiAnZnInLCBmcmVuY2g6ICdmcicsXG4gICAgZW46ICdlbicsIGFuZ2xhaXM6ICdlbicsIGVuZ2xpc2g6ICdlbicsXG4gICAgZXM6ICdlcycsIGVzcGFnbm9sOiAnZXMnLCBzcGFuaXNoOiAnZXMnLFxuICAgIGl0OiAnaXQnLCBpdGFsaWVuOiAnaXQnLCBpdGFsaWFuOiAnaXQnLFxuICAgIGRlOiAnZGUnLCBhbGxlbWFuZDogJ2RlJywgZ2VybWFuOiAnZGUnLFxuICAgIHB0OiAncHQnLCBwb3J0dWdhaXM6ICdwdCcsIHBvcnR1Z3Vlc2U6ICdwdCcsIHBvcnR1Z3XDqnM6ICdwdCcsXG4gICAgbmw6ICdubCcsIG7DqWVybGFuZGFpczogJ25sJywgZHV0Y2g6ICdubCcsXG4gICAgdHI6ICd0cicsIHR1cmM6ICd0cicsIHR1cmtpc2g6ICd0cicsXG4gICAgYXI6ICdhcicsIGFyYWJlOiAnYXInLCBhcmFiaWM6ICdhcicsXG4gICAgemg6ICd6aCcsIGNoaW5vaXM6ICd6aCcsIGNoaW5lc2U6ICd6aCcsXG4gICAgamE6ICdqYScsIGphcG9uYWlzOiAnamEnLCBqYXBhbmVzZTogJ2phJyxcbiAgICBrbzogJ2tvJywgY29yw6llbjogJ2tvJywga29yZWFuOiAna28nLFxuICB9O1xuICBpZiAoZGlyZWN0TWFwW3ZdKSByZXR1cm4gZGlyZWN0TWFwW3ZdO1xuICAvLyBGYWxsYmFjazogZGV0ZWN0IGZyb20gcHJvdmlkZWQgdGV4dCAodXNlIENWIHRleHQpXG4gIHJldHVybiBkZXRlY3RMYW5nRnJvbVRleHQodGV4dCk7XG59XG5cbmZ1bmN0aW9uIHBhZDIobjogbnVtYmVyKTogc3RyaW5nIHsgcmV0dXJuIG4gPCAxMCA/IGAwJHtufWAgOiBgJHtufWA7IH1cblxuZnVuY3Rpb24gbm9ybURhdGUoaW5wdXQ6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGlmICghaW5wdXQpIHJldHVybiB1bmRlZmluZWQ7XG4gIGNvbnN0IHMgPSBTdHJpbmcoaW5wdXQpLnRyaW0oKTtcbiAgaWYgKCFzKSByZXR1cm4gdW5kZWZpbmVkO1xuICBjb25zdCBwcmVzZW50ID0gL14ocHJlc2VudHxwcsOpc2VudHxub3cpJC9pO1xuICBpZiAocHJlc2VudC50ZXN0KHMpKSByZXR1cm4gJ1ByZXNlbnQnO1xuICAvLyBUcnkgWVlZWS1NTVxuICBsZXQgbSA9IHMubWF0Y2goL14oXFxkezR9KVstXFwvXShcXGR7MSwyfSkkLyk7XG4gIGlmIChtKSB7XG4gICAgY29uc3QgeSA9IE51bWJlcihtWzFdKTtcbiAgICBjb25zdCBtbSA9IHBhZDIoTWF0aC5tYXgoMSwgTWF0aC5taW4oMTIsIE51bWJlcihtWzJdKSkpKTtcbiAgICByZXR1cm4gYCR7eX0tJHttbX1gO1xuICB9XG4gIC8vIFRyeSBNTS9ZWVlZIG9yIEREL01NL1lZWVlcbiAgbSA9IHMubWF0Y2goL14oXFxkezEsMn0pXFwvKFxcZHs0fSkkLyk7XG4gIGlmIChtKSB7XG4gICAgY29uc3QgeSA9IE51bWJlcihtWzJdKTtcbiAgICBjb25zdCBtbSA9IHBhZDIoTWF0aC5tYXgoMSwgTWF0aC5taW4oMTIsIE51bWJlcihtWzFdKSkpKTtcbiAgICByZXR1cm4gYCR7eX0tJHttbX1gO1xuICB9XG4gIG0gPSBzLm1hdGNoKC9eKFxcZHsxLDJ9KVxcLyhcXGR7MSwyfSlcXC8oXFxkezR9KSQvKTtcbiAgaWYgKG0pIHtcbiAgICBjb25zdCB5ID0gTnVtYmVyKG1bM10pO1xuICAgIGNvbnN0IG1tID0gcGFkMihNYXRoLm1heCgxLCBNYXRoLm1pbigxMiwgTnVtYmVyKG1bMl0pKSkpO1xuICAgIHJldHVybiBgJHt5fS0ke21tfWA7XG4gIH1cbiAgLy8gVHJ5IFlZWVkgb25seVxuICBtID0gcy5tYXRjaCgvXihcXGR7NH0pJC8pO1xuICBpZiAobSkge1xuICAgIGNvbnN0IHkgPSBOdW1iZXIobVsxXSk7XG4gICAgcmV0dXJuIGAke3l9LTAxYDtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBjbGVhblVybCh1OiBhbnkpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBpZiAoIXUpIHJldHVybiB1bmRlZmluZWQ7XG4gIGxldCBzID0gU3RyaW5nKHUpLnRyaW0oKTtcbiAgaWYgKCFzKSByZXR1cm4gdW5kZWZpbmVkO1xuICBpZiAoIS9eaHR0cHM/OlxcL1xcLy9pLnRlc3QocykpIHMgPSAnaHR0cHM6Ly8nICsgcztcbiAgdHJ5IHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHMpO1xuICAgIHJldHVybiB1cmwudG9TdHJpbmcoKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG5mdW5jdGlvbiBndWVzc0Z1bGxOYW1lKGN2VGV4dDogc3RyaW5nLCBlbWFpbD86IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHQgPSBub3JtYWxpemVUZXh0KGN2VGV4dCB8fCAnJyk7XG4gIGNvbnN0IGxpbmVzID0gdC5zcGxpdCgnXFxuJykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihCb29sZWFuKS5zbGljZSgwLCA2KTtcbiAgLy8gTG9vayBmb3IgYSBsaW5lIHdpdGggMi4uNSBjYXBpdGFsaXplZCB3b3Jkc1xuICBmb3IgKGNvbnN0IGxuIG9mIGxpbmVzKSB7XG4gICAgY29uc3Qgd29yZHMgPSBsbi5zcGxpdCgvXFxzKy8pO1xuICAgIGNvbnN0IGNhcHMgPSB3b3Jkcy5maWx0ZXIodyA9PiAvXig/OltBLVrDgMOCw4TDh8OJw4jDisOLw4/DjsOUw5bDmcObw5zFuF1bXFxwe0x9Jy1dKykkL3UudGVzdCh3KSk7XG4gICAgaWYgKGNhcHMubGVuZ3RoID49IDIgJiYgY2Fwcy5sZW5ndGggPD0gNSkgcmV0dXJuIGNhcHMuam9pbignICcpO1xuICB9XG4gIC8vIFRyeSBmcm9tIGVtYWlsIGxvY2FsLXBhcnQgKGZpcnN0bmFtZS5sYXN0bmFtZSlcbiAgaWYgKGVtYWlsICYmIC9ALy50ZXN0KGVtYWlsKSkge1xuICAgIGNvbnN0IGxvY2FsID0gZW1haWwuc3BsaXQoJ0AnKVswXTtcbiAgICBjb25zdCBwYXJ0cyA9IGxvY2FsLnNwbGl0KC9bLl8tXSsvKS5maWx0ZXIoQm9vbGVhbikuc2xpY2UoMCwgMyk7XG4gICAgaWYgKHBhcnRzLmxlbmd0aCA+PSAxKSB7XG4gICAgICBjb25zdCBuYW1lID0gcGFydHMubWFwKHAgPT4gcC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHAuc2xpY2UoMSkpLmpvaW4oJyAnKTtcbiAgICAgIHJldHVybiBuYW1lO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVSZXN1bWVGb3JTY2hlbWEoaW5wdXQ6IGFueSwgb3B0czogeyBjdlRleHQ6IHN0cmluZzsgamRUZXh0OiBzdHJpbmcgfSk6IGFueSB7XG4gIGNvbnN0IHNyYyA9IHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiYgaW5wdXQgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGlucHV0KSkgOiB7fTtcbiAgLy8gbWV0YWRhdGFcbiAgc3JjLm1ldGFkYXRhID0gc3JjLm1ldGFkYXRhIHx8IHt9O1xuICBzcmMubWV0YWRhdGEubGFuZ3VhZ2UgPSBub3JtYWxpemVMYW5nKHNyYy5tZXRhZGF0YS5sYW5ndWFnZSwgb3B0cy5jdlRleHQpO1xuICBpZiAoc3JjLm1ldGFkYXRhLnNvdXJjZU9yZGVyUHJlc2VydmVkICE9PSB0cnVlKSBzcmMubWV0YWRhdGEuc291cmNlT3JkZXJQcmVzZXJ2ZWQgPSB0cnVlO1xuICBpZiAodHlwZW9mIHNyYy5tZXRhZGF0YS53YXJuaW5ncyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzcmMubWV0YWRhdGEud2FybmluZ3MpKSB7XG4gICAgICBzcmMubWV0YWRhdGEud2FybmluZ3MgPSBzcmMubWV0YWRhdGEud2FybmluZ3MubWFwKCh3OiBhbnkpID0+IFN0cmluZyh3IHx8ICcnKS50cmltKCkpLmZpbHRlcigodzogc3RyaW5nKSA9PiB3KTtcbiAgICAgIGlmIChzcmMubWV0YWRhdGEud2FybmluZ3MubGVuZ3RoID09PSAwKSBkZWxldGUgc3JjLm1ldGFkYXRhLndhcm5pbmdzO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgc3JjLm1ldGFkYXRhLndhcm5pbmdzO1xuICAgIH1cbiAgfVxuXG4gIC8vIGhlYWRlclxuICBzcmMuaGVhZGVyID0gc3JjLmhlYWRlciB8fCB7fTtcbiAgLy8gZW1haWxcbiAgaWYgKHNyYy5oZWFkZXIuZW1haWwgJiYgIS9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvLnRlc3Qoc3JjLmhlYWRlci5lbWFpbCkpIGRlbGV0ZSBzcmMuaGVhZGVyLmVtYWlsO1xuICAvLyBwaG9uZTogdHJpbVxuICBpZiAoc3JjLmhlYWRlci5waG9uZSkgc3JjLmhlYWRlci5waG9uZSA9IFN0cmluZyhzcmMuaGVhZGVyLnBob25lKS50cmltKCk7XG4gIC8vIGxpbmtzXG4gIGlmIChzcmMuaGVhZGVyLmxpbmtzKSB7XG4gICAgY29uc3QgbCA9IHNyYy5oZWFkZXIubGlua3M7XG4gICAgaWYgKGwubGlua2VkaW4pIGwubGlua2VkaW4gPSBjbGVhblVybChsLmxpbmtlZGluKTtcbiAgICBpZiAobC5naXRodWIpIGwuZ2l0aHViID0gY2xlYW5VcmwobC5naXRodWIpO1xuICAgIGlmIChsLnBvcnRmb2xpbykgbC5wb3J0Zm9saW8gPSBjbGVhblVybChsLnBvcnRmb2xpbyk7XG4gICAgT2JqZWN0LmtleXMobCkuZm9yRWFjaChrID0+IHsgaWYgKCFsW2tdKSBkZWxldGUgbFtrXTsgfSk7XG4gICAgaWYgKE9iamVjdC5rZXlzKGwpLmxlbmd0aCA9PT0gMCkgZGVsZXRlIHNyYy5oZWFkZXIubGlua3M7XG4gIH1cbiAgLy8gZnVsbE5hbWUgYmVzdC1lZmZvcnRcbiAgaWYgKCFzcmMuaGVhZGVyLmZ1bGxOYW1lIHx8ICFTdHJpbmcoc3JjLmhlYWRlci5mdWxsTmFtZSkudHJpbSgpKSB7XG4gICAgY29uc3QgYmVzdCA9IGd1ZXNzRnVsbE5hbWUob3B0cy5jdlRleHQsIHNyYy5oZWFkZXIuZW1haWwpO1xuICAgIGlmIChiZXN0KSBzcmMuaGVhZGVyLmZ1bGxOYW1lID0gYmVzdDtcbiAgfVxuICBpZiAoIXNyYy5oZWFkZXIuZnVsbE5hbWUgfHwgIVN0cmluZyhzcmMuaGVhZGVyLmZ1bGxOYW1lKS50cmltKCkpIHtcbiAgICAvLyBTYWZlIG5ldXRyYWwgZmFsbGJhY2sgdG8gc2F0aXNmeSBzY2hlbWEgd2l0aG91dCBsYW5ndWFnZSBiaWFzXG4gICAgc3JjLmhlYWRlci5mdWxsTmFtZSA9ICfigJQnO1xuICB9XG5cbiAgLy8gc3VtbWFyeSBjbGFtcFxuICBpZiAodHlwZW9mIHNyYy5zdW1tYXJ5ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnN0IHMgPSBTdHJpbmcoc3JjLnN1bW1hcnkgfHwgJycpLnRyaW0oKTtcbiAgICBzcmMuc3VtbWFyeSA9IHMubGVuZ3RoID4gNjAwID8gcy5zbGljZSgwLCA2MDApIDogcztcbiAgICBpZiAoIXNyYy5zdW1tYXJ5KSBkZWxldGUgc3JjLnN1bW1hcnk7IC8vIHJlbW92ZSBlbXB0eSBzdW1tYXJ5XG4gIH1cblxuICAvLyBleHBlcmllbmNlIGNsYW1wICsgbm9ybWFsaXplXG4gIGlmIChBcnJheS5pc0FycmF5KHNyYy5leHBlcmllbmNlKSkge1xuICAgIHNyYy5leHBlcmllbmNlID0gc3JjLmV4cGVyaWVuY2Uuc2xpY2UoMCwgNikubWFwKChlOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG91dDogYW55ID0geyAuLi5lIH07XG4gICAgICAvLyBzeW5vbnltIG1hcHBpbmdcbiAgICAgIGNvbnN0IHBpY2sgPSAoLi4uY2FuZHM6IGFueVtdKSA9PiBjYW5kcy5maW5kKCh2KSA9PiB0eXBlb2YgdiA9PT0gJ3N0cmluZycgJiYgU3RyaW5nKHYpLnRyaW0oKSkgfHwgdW5kZWZpbmVkO1xuICAgICAgb3V0LmNvbXBhbnkgPSBwaWNrKG91dC5jb21wYW55LCBvdXQuY29tcGFueV9uYW1lLCBvdXQuZW1wbG95ZXIsIG91dC5vcmcsIG91dC5vcmdhbml6YXRpb24sIG91dC5vcmdhbmlzYXRpb24pO1xuICAgICAgb3V0LnRpdGxlID0gcGljayhvdXQudGl0bGUsIG91dC5wb3NpdGlvbiwgb3V0LnJvbGUpO1xuICAgICAgb3V0LmxvY2F0aW9uID0gcGljayhvdXQubG9jYXRpb24sIG91dC5jaXR5LCBvdXQucGxhY2UpO1xuICAgICAgb3V0LnN0YXJ0RGF0ZSA9IHBpY2sob3V0LnN0YXJ0RGF0ZSwgb3V0LnN0YXJ0LCBvdXQuZnJvbSwgb3V0LnN0YXJ0RGF0ZVJhdyk7XG4gICAgICBvdXQuZW5kRGF0ZSA9IHBpY2sob3V0LmVuZERhdGUsIG91dC5lbmQsIG91dC50bywgb3V0LmVuZERhdGVSYXcpO1xuICAgICAgaWYgKCghb3V0LnN0YXJ0RGF0ZSB8fCAhb3V0LmVuZERhdGUpICYmIChvdXQuZGF0ZXNSYXcgfHwgb3V0LmRhdGVzIHx8IG91dC5wZXJpb2QgfHwgb3V0LnllYXJzKSkge1xuICAgICAgICBjb25zdCBzID0gU3RyaW5nKG91dC5kYXRlc1JhdyB8fCBvdXQuZGF0ZXMgfHwgb3V0LnBlcmlvZCB8fCBvdXQueWVhcnMgfHwgJycpLnRyaW0oKTtcbiAgICAgICAgY29uc3QgbSA9IHMubWF0Y2goLyhwcmVzZW50fHByw6lzZW50fFxcZHsxLDJ9XFwvXFxkezR9fFxcZHs0fS1cXGR7Mn18XFxkezR9KS9naSk7XG4gICAgICAgIGlmIChtICYmIG0ubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgYSA9IG1bMF07XG4gICAgICAgICAgY29uc3QgYiA9IG1bMV07XG4gICAgICAgICAgaWYgKCFvdXQuc3RhcnREYXRlICYmIGEpIHtcbiAgICAgICAgICAgIGNvbnN0IHNkID0gL3ByZXNlbnR8cHLDqXNlbnQvaS50ZXN0KGEpID8gdW5kZWZpbmVkIDogbm9ybURhdGUoYSk7XG4gICAgICAgICAgICBpZiAoc2QpIG91dC5zdGFydERhdGUgPSBzZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFvdXQuZW5kRGF0ZSAmJiBiKSB7XG4gICAgICAgICAgICBpZiAoL3ByZXNlbnR8cHLDqXNlbnQvaS50ZXN0KGIpKSBvdXQuZW5kRGF0ZSA9ICdQcmVzZW50JztcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBlZCA9IG5vcm1EYXRlKGIpO1xuICAgICAgICAgICAgICBpZiAoZWQpIG91dC5lbmREYXRlID0gZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgYnVsbGV0cyA9IG91dC5idWxsZXRzID8/IG91dC5hY2hpZXZlbWVudHMgPz8gb3V0LnJlc3BvbnNpYmlsaXRpZXMgPz8gb3V0LnRhc2tzO1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGJ1bGxldHMpICYmIHR5cGVvZiBidWxsZXRzID09PSAnc3RyaW5nJykgYnVsbGV0cyA9IFtidWxsZXRzXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGJ1bGxldHMpKSBvdXQuYnVsbGV0cyA9IGJ1bGxldHM7XG4gICAgICAvLyBkYXRlc1xuICAgICAgaWYgKG91dC5zdGFydERhdGUpIHtcbiAgICAgICAgY29uc3Qgc2QgPSBub3JtRGF0ZShvdXQuc3RhcnREYXRlKTtcbiAgICAgICAgaWYgKHNkKSBvdXQuc3RhcnREYXRlID0gc2Q7IGVsc2UgZGVsZXRlIG91dC5zdGFydERhdGU7XG4gICAgICB9XG4gICAgICBpZiAob3V0LmVuZERhdGUpIHtcbiAgICAgICAgY29uc3QgZWQgPSBub3JtRGF0ZShvdXQuZW5kRGF0ZSk7XG4gICAgICAgIGlmIChlZCkgb3V0LmVuZERhdGUgPSBlZDsgZWxzZSBkZWxldGUgb3V0LmVuZERhdGU7XG4gICAgICB9XG4gICAgICAvLyByZXF1aXJlZCBzdHJpbmdzIHdpdGggc2FmZSBwbGFjZWhvbGRlcnNcbiAgICAgIG91dC5jb21wYW55ID0gU3RyaW5nKG91dC5jb21wYW55IHx8ICcnKS50cmltKCkgfHwgJ+KAlCc7XG4gICAgICBvdXQudGl0bGUgPSBTdHJpbmcob3V0LnRpdGxlIHx8ICcnKS50cmltKCkgfHwgJ+KAlCc7XG4gICAgICAvLyBidWxsZXRzXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShvdXQuYnVsbGV0cykpIHtcbiAgICAgICAgb3V0LmJ1bGxldHMgPSBvdXQuYnVsbGV0cy5tYXAoKGI6IGFueSkgPT4gU3RyaW5nKGIgfHwgJycpLnRyaW0oKSkuZmlsdGVyKChiOiBzdHJpbmcpID0+IGIpLnNsaWNlKDAsIDUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0LmJ1bGxldHMgPSBbXTtcbiAgICAgIH1cbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShvdXQuYnVsbGV0cykgfHwgb3V0LmJ1bGxldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIG91dC5idWxsZXRzID0gWyfigJQnXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXQ7XG4gICAgfSk7XG4gIH1cblxuICB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCB0b2RheVlNID0gbm93LmdldEZ1bGxZZWFyKCkgKiAxMiArIChub3cuZ2V0TW9udGgoKSArIDEpO1xuICAgIGxldCBhbnlGdXR1cmUgPSBmYWxzZTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzcmMuZXhwZXJpZW5jZSkpIHtcbiAgICAgIGZvciAoY29uc3QgZSBvZiBzcmMuZXhwZXJpZW5jZSkge1xuICAgICAgICBjb25zdCBjaGsgPSAoZDogYW55KSA9PiB7XG4gICAgICAgICAgaWYgKCFkIHx8IGQgPT09ICdQcmVzZW50JykgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIGNvbnN0IG0gPSBTdHJpbmcoZCkubWF0Y2goL14oXFxkezR9KS0oXFxkezJ9KSQvKTtcbiAgICAgICAgICBpZiAoIW0pIHJldHVybiBmYWxzZTtcbiAgICAgICAgICBjb25zdCB5bSA9IHBhcnNlSW50KG1bMV0sIDEwKSAqIDEyICsgcGFyc2VJbnQobVsyXSwgMTApO1xuICAgICAgICAgIHJldHVybiB5bSA+IHRvZGF5WU07XG4gICAgICAgIH07XG4gICAgICAgIGlmIChjaGsoZS5zdGFydERhdGUpIHx8IGNoayhlLmVuZERhdGUpKSB7IGFueUZ1dHVyZSA9IHRydWU7IGJyZWFrOyB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzcmMubWV0YWRhdGEgJiYgQXJyYXkuaXNBcnJheShzcmMubWV0YWRhdGEud2FybmluZ3MpKSB7XG4gICAgICBzcmMubWV0YWRhdGEud2FybmluZ3MgPSBzcmMubWV0YWRhdGEud2FybmluZ3MuZmlsdGVyKCh3OiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgcyA9IFN0cmluZyh3IHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBtZW50aW9uc0Z1dHVyZSA9IHMuaW5jbHVkZXMoJ2Z1dHVyZScpIHx8IHMuaW5jbHVkZXMoJ2Z1dHVyJykgfHwgcy5pbmNsdWRlcygncG9zdFx1MDAwMEU5cmllJykgfHwgcy5pbmNsdWRlcygncG9zdFx1MDAwMEU5cmlldXJlcycpIHx8IHMuaW5jbHVkZXMoJ3Bvc3QnKSAmJiBzLmluY2x1ZGVzKCdkYXRlJyk7XG4gICAgICAgIGlmICghbWVudGlvbnNGdXR1cmUpIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gYW55RnV0dXJlO1xuICAgICAgfSk7XG4gICAgICBpZiAoc3JjLm1ldGFkYXRhLndhcm5pbmdzLmxlbmd0aCA9PT0gMCkgZGVsZXRlIHNyYy5tZXRhZGF0YS53YXJuaW5ncztcbiAgICB9XG4gIH1cblxuICAvLyBlZHVjYXRpb24gY2xhbXBcbiAgaWYgKCFBcnJheS5pc0FycmF5KHNyYy5lZHVjYXRpb24pKSB7XG4gICAgc3JjLmVkdWNhdGlvbiA9IFtdO1xuICB9IGVsc2Uge1xuICAgIHNyYy5lZHVjYXRpb24gPSBzcmMuZWR1Y2F0aW9uXG4gICAgICAuc2xpY2UoMCwgMylcbiAgICAgIC5tYXAoKGU6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBvdXQ6IGFueSA9IHsgLi4uZSB9O1xuICAgICAgICAvLyBzeW5vbnltIG1hcHBpbmdcbiAgICAgICAgY29uc3QgcGljayA9ICguLi5jYW5kczogYW55W10pID0+IGNhbmRzLmZpbmQoKHYpID0+IHR5cGVvZiB2ID09PSAnc3RyaW5nJyAmJiBTdHJpbmcodikudHJpbSgpKSB8fCB1bmRlZmluZWQ7XG4gICAgICAgIG91dC5zY2hvb2wgPSBwaWNrKG91dC5zY2hvb2wsIG91dC5pbnN0aXR1dGlvbiwgb3V0LnVuaXZlcnNpdHksIG91dC5jb2xsZWdlLCBvdXQuc2Nob29sX25hbWUpO1xuICAgICAgICBvdXQuZGVncmVlID0gcGljayhvdXQuZGVncmVlLCBvdXQuZGlwbG9tYSk7XG4gICAgICAgIG91dC5sb2NhdGlvbiA9IHBpY2sob3V0LmxvY2F0aW9uLCBvdXQuY2l0eSk7XG4gICAgICAgIG91dC5kYXRlcyA9IHBpY2sob3V0LmRhdGVzLCBvdXQucGVyaW9kLCBvdXQueWVhcnMpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgfSlcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gU3RyaW5nKGU/LnNjaG9vbCB8fCAnJykudHJpbSgpLmxlbmd0aCA+IDApO1xuICB9XG5cbiAgLy8gcHJvamVjdHMgY2xlYW51cCAob3B0aW9uYWwpOiBrZWVwIG9ubHkgdmFsaWQsIG90aGVyd2lzZSBkcm9wIGVudGlyZWx5XG4gIGlmIChBcnJheS5pc0FycmF5KHNyYy5wcm9qZWN0cykpIHtcbiAgICBjb25zdCBwcm9qID0gc3JjLnByb2plY3RzXG4gICAgICAuc2xpY2UoMCwgNClcbiAgICAgIC5tYXAoKHA6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBuYW1lID0gU3RyaW5nKHA/Lm5hbWUgfHwgJycpLnRyaW0oKTtcbiAgICAgICAgaWYgKCFuYW1lKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3Qgb3V0OiBhbnkgPSB7IG5hbWUgfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocD8uYnVsbGV0cykpIHtcbiAgICAgICAgICBvdXQuYnVsbGV0cyA9IHAuYnVsbGV0cy5tYXAoKGI6IGFueSkgPT4gU3RyaW5nKGIgfHwgJycpLnRyaW0oKSkuZmlsdGVyKChiOiBzdHJpbmcpID0+IGIpLnNsaWNlKDAsIDQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dC5idWxsZXRzID0gWyfigJQnXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW91dC5idWxsZXRzLmxlbmd0aCkgb3V0LmJ1bGxldHMgPSBbJ+KAlCddO1xuICAgICAgICBpZiAocD8uZGF0ZXMpIG91dC5kYXRlcyA9IFN0cmluZyhwLmRhdGVzKTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgIGlmIChwcm9qLmxlbmd0aCkgc3JjLnByb2plY3RzID0gcHJvajsgZWxzZSBkZWxldGUgc3JjLnByb2plY3RzO1xuICB9IGVsc2UgaWYgKHNyYy5wcm9qZWN0cykge1xuICAgIGRlbGV0ZSBzcmMucHJvamVjdHM7XG4gIH1cblxuICAvLyBza2lsbHMgY2xlYW51cCAmIGNvZXJjaW9uXG4gIGlmIChBcnJheS5pc0FycmF5KHNyYy5za2lsbHMpKSB7XG4gICAgLy8gQ29lcmNlIGFycmF5IG9mIHN0cmluZ3MgaW50byB0b29sc1xuICAgIGNvbnN0IGFyciA9IHNyYy5za2lsbHMubWFwKCh4OiBhbnkpID0+IFN0cmluZyh4IHx8ICcnKS50cmltKCkpLmZpbHRlcigoeDogc3RyaW5nKSA9PiB4KTtcbiAgICBzcmMuc2tpbGxzID0gYXJyLmxlbmd0aCA/IHsgdG9vbHM6IGFyciB9IDogdW5kZWZpbmVkO1xuICB9XG4gIGlmICh0eXBlb2Ygc3JjLnNraWxscyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCB2ID0gU3RyaW5nKHNyYy5za2lsbHMpLnRyaW0oKTtcbiAgICBzcmMuc2tpbGxzID0gdiA/IHsgdG9vbHM6IFt2XSB9IDogdW5kZWZpbmVkO1xuICB9XG4gIGlmIChzcmMuc2tpbGxzICYmIHR5cGVvZiBzcmMuc2tpbGxzID09PSAnb2JqZWN0Jykge1xuICAgIGNvbnN0IHMgPSBzcmMuc2tpbGxzO1xuICAgIFsnbGFuZ3VhZ2VzJywgJ2ZyYW1ld29ya3MnLCAndG9vbHMnLCAnb3RoZXInXS5mb3JFYWNoKChrKSA9PiB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzW2tdKSkge1xuICAgICAgICBzW2tdID0gc1trXS5tYXAoKHg6IGFueSkgPT4gU3RyaW5nKHggfHwgJycpLnRyaW0oKSkuZmlsdGVyKCh4OiBzdHJpbmcpID0+IHgpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc1trXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc3QgdiA9IFN0cmluZyhzW2tdKS50cmltKCk7XG4gICAgICAgIHNba10gPSB2ID8gW3ZdIDogdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIGlmIChzW2tdICE9IG51bGwpIHtcbiAgICAgICAgLy8gZHJvcCBub24tYXJyYXkgbm9uLXN0cmluZyB2YWx1ZXNcbiAgICAgICAgZGVsZXRlIHNba107XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCFPYmplY3Qua2V5cyhzKS5zb21lKGsgPT4gQXJyYXkuaXNBcnJheShzW2tdKSAmJiBzW2tdLmxlbmd0aCkpIGRlbGV0ZSBzcmMuc2tpbGxzO1xuICB9XG5cbiAgLy8gRW5zdXJlIGF0IGxlYXN0IG9uZSBleHBlcmllbmNlIGl0ZW0gZXhpc3RzXG4gIGlmICghQXJyYXkuaXNBcnJheShzcmMuZXhwZXJpZW5jZSkgfHwgc3JjLmV4cGVyaWVuY2UubGVuZ3RoID09PSAwKSB7XG4gICAgc3JjLmV4cGVyaWVuY2UgPSBbeyBjb21wYW55OiAn4oCUJywgdGl0bGU6ICfigJQnLCBidWxsZXRzOiBbJ+KAlCddIH1dO1xuICB9XG5cbiAgLy8gc3RyaXAgdW5rbm93biByb290IGtleXMgbm90IHByZXNlbnQgaW4gUmVzdW1lSlNPTlxuICBjb25zdCBhbGxvd2VkUm9vdCA9IG5ldyBTZXQoWydtZXRhZGF0YScsICdoZWFkZXInLCAnc3VtbWFyeScsICdleHBlcmllbmNlJywgJ3Byb2plY3RzJywgJ2VkdWNhdGlvbicsICdza2lsbHMnLCAnbGFuZ3VhZ2VzJywgJ2NlcnRpZmljYXRpb25zJywgJ2ludGVyZXN0cycsICdvdGhlclNlY3Rpb25zJ10pO1xuICBPYmplY3Qua2V5cyhzcmMpLmZvckVhY2goKGspID0+IHsgaWYgKCFhbGxvd2VkUm9vdC5oYXMoaykpIGRlbGV0ZSBzcmNba107IH0pO1xuXG4gIHJldHVybiBzcmM7XG59XG4iXSwibmFtZXMiOlsibm9ybWFsaXplVGV4dCIsImRldGVjdExhbmdGcm9tVGV4dCIsInRleHQiLCJ0IiwidG9Mb3dlckNhc2UiLCJ0cmltIiwidGVzdCIsImxhbmdzIiwiZnIiLCJlbiIsImVzIiwiaXQiLCJkZSIsInB0IiwibmwiLCJ0ciIsImJlc3QiLCJiZXN0U2NvcmUiLCJjb2RlIiwid29yZHMiLCJPYmplY3QiLCJlbnRyaWVzIiwic2NvcmUiLCJyZWR1Y2UiLCJhY2MiLCJ3IiwiaW5jbHVkZXMiLCJub3JtYWxpemVMYW5nIiwidmFsIiwidiIsIlN0cmluZyIsImRpcmVjdE1hcCIsImZyYW7Dp2FpcyIsImZyZW5jaCIsImFuZ2xhaXMiLCJlbmdsaXNoIiwiZXNwYWdub2wiLCJzcGFuaXNoIiwiaXRhbGllbiIsIml0YWxpYW4iLCJhbGxlbWFuZCIsImdlcm1hbiIsInBvcnR1Z2FpcyIsInBvcnR1Z3Vlc2UiLCJwb3J0dWd1w6pzIiwibsOpZXJsYW5kYWlzIiwiZHV0Y2giLCJ0dXJjIiwidHVya2lzaCIsImFyIiwiYXJhYmUiLCJhcmFiaWMiLCJ6aCIsImNoaW5vaXMiLCJjaGluZXNlIiwiamEiLCJqYXBvbmFpcyIsImphcGFuZXNlIiwia28iLCJjb3LDqWVuIiwia29yZWFuIiwicGFkMiIsIm4iLCJub3JtRGF0ZSIsImlucHV0IiwidW5kZWZpbmVkIiwicyIsInByZXNlbnQiLCJtIiwibWF0Y2giLCJ5IiwiTnVtYmVyIiwibW0iLCJNYXRoIiwibWF4IiwibWluIiwiY2xlYW5VcmwiLCJ1IiwidXJsIiwiVVJMIiwidG9TdHJpbmciLCJndWVzc0Z1bGxOYW1lIiwiY3ZUZXh0IiwiZW1haWwiLCJsaW5lcyIsInNwbGl0IiwibWFwIiwiZmlsdGVyIiwiQm9vbGVhbiIsInNsaWNlIiwibG4iLCJjYXBzIiwibGVuZ3RoIiwiam9pbiIsImxvY2FsIiwicGFydHMiLCJuYW1lIiwicCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2FuaXRpemVSZXN1bWVGb3JTY2hlbWEiLCJvcHRzIiwic3JjIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwibWV0YWRhdGEiLCJsYW5ndWFnZSIsInNvdXJjZU9yZGVyUHJlc2VydmVkIiwid2FybmluZ3MiLCJBcnJheSIsImlzQXJyYXkiLCJoZWFkZXIiLCJwaG9uZSIsImxpbmtzIiwibCIsImxpbmtlZGluIiwiZ2l0aHViIiwicG9ydGZvbGlvIiwia2V5cyIsImZvckVhY2giLCJrIiwiZnVsbE5hbWUiLCJzdW1tYXJ5IiwiZXhwZXJpZW5jZSIsImUiLCJvdXQiLCJwaWNrIiwiY2FuZHMiLCJmaW5kIiwiY29tcGFueSIsImNvbXBhbnlfbmFtZSIsImVtcGxveWVyIiwib3JnIiwib3JnYW5pemF0aW9uIiwib3JnYW5pc2F0aW9uIiwidGl0bGUiLCJwb3NpdGlvbiIsInJvbGUiLCJsb2NhdGlvbiIsImNpdHkiLCJwbGFjZSIsInN0YXJ0RGF0ZSIsInN0YXJ0IiwiZnJvbSIsInN0YXJ0RGF0ZVJhdyIsImVuZERhdGUiLCJlbmQiLCJ0byIsImVuZERhdGVSYXciLCJkYXRlc1JhdyIsImRhdGVzIiwicGVyaW9kIiwieWVhcnMiLCJhIiwiYiIsInNkIiwiZWQiLCJidWxsZXRzIiwiYWNoaWV2ZW1lbnRzIiwicmVzcG9uc2liaWxpdGllcyIsInRhc2tzIiwibm93IiwiRGF0ZSIsInRvZGF5WU0iLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiYW55RnV0dXJlIiwiY2hrIiwiZCIsInltIiwicGFyc2VJbnQiLCJtZW50aW9uc0Z1dHVyZSIsImVkdWNhdGlvbiIsInNjaG9vbCIsImluc3RpdHV0aW9uIiwidW5pdmVyc2l0eSIsImNvbGxlZ2UiLCJzY2hvb2xfbmFtZSIsImRlZ3JlZSIsImRpcGxvbWEiLCJwcm9qZWN0cyIsInByb2oiLCJza2lsbHMiLCJhcnIiLCJ4IiwidG9vbHMiLCJzb21lIiwiYWxsb3dlZFJvb3QiLCJTZXQiLCJoYXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/sanitize.ts\n");

/***/ }),

/***/ "(rsc)/./lib/schema.ts":
/*!***********************!*\
  !*** ./lib/schema.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ResumeJSON: () => (/* binding */ ResumeJSON)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js\");\n\n// Regex pour les dates au format YYYY-MM\nconst dateRegex = /^\\d{4}-\\d{2}$/;\n// Schéma pour les métadonnées\nconst MetadataSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    // Accept any language code or label to support multi-language CVs (e.g., 'fr','en','es','it','de','pt','nl','tr','ar','zh','ja','ko', etc.)\n    language: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(2).max(32),\n    sourceOrderPreserved: zod__WEBPACK_IMPORTED_MODULE_0__.boolean(),\n    warnings: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n});\n// Schéma pour les liens\nconst LinksSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    linkedin: zod__WEBPACK_IMPORTED_MODULE_0__.string().url().optional(),\n    github: zod__WEBPACK_IMPORTED_MODULE_0__.string().url().optional(),\n    portfolio: zod__WEBPACK_IMPORTED_MODULE_0__.string().url().optional()\n});\n// Schéma pour l'en-tête\nconst HeaderSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    fullName: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n    email: zod__WEBPACK_IMPORTED_MODULE_0__.string().email().optional(),\n    phone: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    links: LinksSchema.optional()\n});\n// Schéma pour une expérience professionnelle\nconst ExperienceSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    company: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n    title: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n    location: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    startDate: zod__WEBPACK_IMPORTED_MODULE_0__.string().regex(dateRegex).optional(),\n    endDate: zod__WEBPACK_IMPORTED_MODULE_0__.union([\n        zod__WEBPACK_IMPORTED_MODULE_0__.string().regex(dateRegex),\n        zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"Present\")\n    ]).optional(),\n    bullets: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1)).min(1).max(5)\n});\n// Schéma pour un projet\nconst ProjectSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n    dates: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    bullets: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1)).min(1).max(4)\n});\n// Schéma pour l'éducation\nconst EducationSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    school: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n    degree: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    location: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    dates: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\n// Schéma pour les compétences\nconst SkillsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    languages: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n    frameworks: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n    tools: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n    other: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n});\n// Schéma principal ResumeJSON\nconst ResumeJSON = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    metadata: MetadataSchema,\n    header: HeaderSchema,\n    summary: zod__WEBPACK_IMPORTED_MODULE_0__.string().max(600).optional(),\n    experience: zod__WEBPACK_IMPORTED_MODULE_0__.array(ExperienceSchema).min(1).max(6),\n    projects: zod__WEBPACK_IMPORTED_MODULE_0__.array(ProjectSchema).optional(),\n    education: zod__WEBPACK_IMPORTED_MODULE_0__.array(EducationSchema).max(8),\n    skills: SkillsSchema.optional(),\n    languages: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n    interests: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n    otherSections: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n        title: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n        items: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1)).min(1)\n    })).optional()\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akQwQyxVQUFVakQsc0NBQU8sQ0FBQ2lDLGVBQWVyQixRQUFRO0lBQ3pDc0MsV0FBV2xELHNDQUFPLENBQUNvQyxpQkFBaUI3QixHQUFHLENBQUM7SUFDeEM0QyxRQUFRWixhQUFhM0IsUUFBUTtJQUM3QjRCLFdBQVd4QyxzQ0FBTyxDQUFDQSx1Q0FBUSxJQUFJWSxRQUFRO0lBQ3ZDd0MsV0FBV3BELHNDQUFPLENBQUNBLHVDQUFRLElBQUlZLFFBQVE7SUFDdkN5QyxlQUFlckQsc0NBQ1AsQ0FDSkEsdUNBQVEsQ0FBQztRQUNQeUIsT0FBT3pCLHVDQUFRLEdBQUdNLEdBQUcsQ0FBQztRQUN0QmdELE9BQU90RCxzQ0FBTyxDQUFDQSx1Q0FBUSxHQUFHTSxHQUFHLENBQUMsSUFBSUEsR0FBRyxDQUFDO0lBQ3hDLElBRURNLFFBQVE7QUFDYixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVhbGN2LWxpdGUtanNvbi8uL2xpYi9zY2hlbWEudHM/NzFhMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcclxuXHJcbi8vIFJlZ2V4IHBvdXIgbGVzIGRhdGVzIGF1IGZvcm1hdCBZWVlZLU1NXHJcbmNvbnN0IGRhdGVSZWdleCA9IC9eXFxkezR9LVxcZHsyfSQvO1xyXG5cclxuLy8gU2Now6ltYSBwb3VyIGxlcyBtw6l0YWRvbm7DqWVzXHJcbmNvbnN0IE1ldGFkYXRhU2NoZW1hID0gei5vYmplY3Qoe1xyXG4gIC8vIEFjY2VwdCBhbnkgbGFuZ3VhZ2UgY29kZSBvciBsYWJlbCB0byBzdXBwb3J0IG11bHRpLWxhbmd1YWdlIENWcyAoZS5nLiwgJ2ZyJywnZW4nLCdlcycsJ2l0JywnZGUnLCdwdCcsJ25sJywndHInLCdhcicsJ3poJywnamEnLCdrbycsIGV0Yy4pXHJcbiAgbGFuZ3VhZ2U6IHouc3RyaW5nKCkubWluKDIpLm1heCgzMiksXHJcbiAgc291cmNlT3JkZXJQcmVzZXJ2ZWQ6IHouYm9vbGVhbigpLFxyXG4gIHdhcm5pbmdzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXHJcbn0pO1xyXG5cclxuLy8gU2Now6ltYSBwb3VyIGxlcyBsaWVuc1xyXG5jb25zdCBMaW5rc1NjaGVtYSA9IHoub2JqZWN0KHtcclxuICBsaW5rZWRpbjogei5zdHJpbmcoKS51cmwoKS5vcHRpb25hbCgpLFxyXG4gIGdpdGh1Yjogei5zdHJpbmcoKS51cmwoKS5vcHRpb25hbCgpLFxyXG4gIHBvcnRmb2xpbzogei5zdHJpbmcoKS51cmwoKS5vcHRpb25hbCgpLFxyXG59KTtcclxuXHJcbi8vIFNjaMOpbWEgcG91ciBsJ2VuLXTDqnRlXHJcbmNvbnN0IEhlYWRlclNjaGVtYSA9IHoub2JqZWN0KHtcclxuICBmdWxsTmFtZTogei5zdHJpbmcoKS5taW4oMSksXHJcbiAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoKS5vcHRpb25hbCgpLFxyXG4gIHBob25lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgbGlua3M6IExpbmtzU2NoZW1hLm9wdGlvbmFsKCksXHJcbn0pO1xyXG5cclxuLy8gU2Now6ltYSBwb3VyIHVuZSBleHDDqXJpZW5jZSBwcm9mZXNzaW9ubmVsbGVcclxuY29uc3QgRXhwZXJpZW5jZVNjaGVtYSA9IHoub2JqZWN0KHtcclxuICBjb21wYW55OiB6LnN0cmluZygpLm1pbigxKSxcclxuICB0aXRsZTogei5zdHJpbmcoKS5taW4oMSksXHJcbiAgbG9jYXRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBzdGFydERhdGU6IHouc3RyaW5nKCkucmVnZXgoZGF0ZVJlZ2V4KS5vcHRpb25hbCgpLFxyXG4gIGVuZERhdGU6IHoudW5pb24oW1xyXG4gICAgei5zdHJpbmcoKS5yZWdleChkYXRlUmVnZXgpLFxyXG4gICAgei5saXRlcmFsKCdQcmVzZW50JylcclxuICBdKS5vcHRpb25hbCgpLFxyXG4gIGJ1bGxldHM6IHouYXJyYXkoei5zdHJpbmcoKS5taW4oMSkpLm1pbigxKS5tYXgoNSksXHJcbn0pO1xyXG5cclxuLy8gU2Now6ltYSBwb3VyIHVuIHByb2pldFxyXG5jb25zdCBQcm9qZWN0U2NoZW1hID0gei5vYmplY3Qoe1xyXG4gIG5hbWU6IHouc3RyaW5nKCkubWluKDEpLFxyXG4gIGRhdGVzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgYnVsbGV0czogei5hcnJheSh6LnN0cmluZygpLm1pbigxKSkubWluKDEpLm1heCg0KSxcclxufSk7XHJcblxyXG4vLyBTY2jDqW1hIHBvdXIgbCfDqWR1Y2F0aW9uXHJcbmNvbnN0IEVkdWNhdGlvblNjaGVtYSA9IHoub2JqZWN0KHtcclxuICBzY2hvb2w6IHouc3RyaW5nKCkubWluKDEpLFxyXG4gIGRlZ3JlZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gIGxvY2F0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgZGF0ZXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxufSk7XHJcblxyXG4vLyBTY2jDqW1hIHBvdXIgbGVzIGNvbXDDqXRlbmNlc1xyXG5jb25zdCBTa2lsbHNTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgbGFuZ3VhZ2VzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXHJcbiAgZnJhbWV3b3Jrczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLFxyXG4gIHRvb2xzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXHJcbiAgb3RoZXI6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcclxufSk7XHJcblxyXG4vLyBTY2jDqW1hIHByaW5jaXBhbCBSZXN1bWVKU09OXHJcbmV4cG9ydCBjb25zdCBSZXN1bWVKU09OID0gei5vYmplY3Qoe1xyXG4gIG1ldGFkYXRhOiBNZXRhZGF0YVNjaGVtYSxcclxuICBoZWFkZXI6IEhlYWRlclNjaGVtYSxcclxuICBzdW1tYXJ5OiB6LnN0cmluZygpLm1heCg2MDApLm9wdGlvbmFsKCksXHJcbiAgZXhwZXJpZW5jZTogei5hcnJheShFeHBlcmllbmNlU2NoZW1hKS5taW4oMSkubWF4KDYpLFxyXG4gIHByb2plY3RzOiB6LmFycmF5KFByb2plY3RTY2hlbWEpLm9wdGlvbmFsKCksXHJcbiAgZWR1Y2F0aW9uOiB6LmFycmF5KEVkdWNhdGlvblNjaGVtYSkubWF4KDgpLFxyXG4gIHNraWxsczogU2tpbGxzU2NoZW1hLm9wdGlvbmFsKCksXHJcbiAgbGFuZ3VhZ2VzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXHJcbiAgaW50ZXJlc3RzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXHJcbiAgb3RoZXJTZWN0aW9uczogelxyXG4gICAgLmFycmF5KFxyXG4gICAgICB6Lm9iamVjdCh7XHJcbiAgICAgICAgdGl0bGU6IHouc3RyaW5nKCkubWluKDEpLFxyXG4gICAgICAgIGl0ZW1zOiB6LmFycmF5KHouc3RyaW5nKCkubWluKDEpKS5taW4oMSksXHJcbiAgICAgIH0pXHJcbiAgICApXHJcbiAgICAub3B0aW9uYWwoKSxcclxufSk7XHJcblxyXG4vLyBUeXBlIFR5cGVTY3JpcHQgaW5mw6lyw6lcclxuZXhwb3J0IHR5cGUgVFJlc3VtZUpTT04gPSB6LmluZmVyPHR5cGVvZiBSZXN1bWVKU09OPjtcclxuIl0sIm5hbWVzIjpbInoiLCJkYXRlUmVnZXgiLCJNZXRhZGF0YVNjaGVtYSIsIm9iamVjdCIsImxhbmd1YWdlIiwic3RyaW5nIiwibWluIiwibWF4Iiwic291cmNlT3JkZXJQcmVzZXJ2ZWQiLCJib29sZWFuIiwid2FybmluZ3MiLCJhcnJheSIsIm9wdGlvbmFsIiwiTGlua3NTY2hlbWEiLCJsaW5rZWRpbiIsInVybCIsImdpdGh1YiIsInBvcnRmb2xpbyIsIkhlYWRlclNjaGVtYSIsImZ1bGxOYW1lIiwiZW1haWwiLCJwaG9uZSIsImxpbmtzIiwiRXhwZXJpZW5jZVNjaGVtYSIsImNvbXBhbnkiLCJ0aXRsZSIsImxvY2F0aW9uIiwic3RhcnREYXRlIiwicmVnZXgiLCJlbmREYXRlIiwidW5pb24iLCJsaXRlcmFsIiwiYnVsbGV0cyIsIlByb2plY3RTY2hlbWEiLCJuYW1lIiwiZGF0ZXMiLCJFZHVjYXRpb25TY2hlbWEiLCJzY2hvb2wiLCJkZWdyZWUiLCJTa2lsbHNTY2hlbWEiLCJsYW5ndWFnZXMiLCJmcmFtZXdvcmtzIiwidG9vbHMiLCJvdGhlciIsIlJlc3VtZUpTT04iLCJtZXRhZGF0YSIsImhlYWRlciIsInN1bW1hcnkiLCJleHBlcmllbmNlIiwicHJvamVjdHMiLCJlZHVjYXRpb24iLCJza2lsbHMiLCJpbnRlcmVzdHMiLCJvdGhlclNlY3Rpb25zIiwiaXRlbXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/schema.ts\n");

/***/ }),

/***/ "(rsc)/./lib/structure_ai.ts":
/*!*****************************!*\
  !*** ./lib/structure_ai.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   structureCvTextWithAI: () => (/* binding */ structureCvTextWithAI)\n/* harmony export */ });\n/* harmony import */ var _lib_parse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/parse */ \"(rsc)/./lib/parse.ts\");\n/* harmony import */ var _config_models__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/config/models */ \"(rsc)/./config/models.ts\");\n\n\n/**\r\n * Structure raw CV text into a clean JSON using OpenAI (third key: OPENAI_API_KEY_PDF_TO_JSON)\r\n * No invention, preserve original order of experiences.\r\n */ async function structureCvTextWithAI(cvText) {\n    const OpenAI = (await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/formdata-node@4.4.1\"), __webpack_require__.e(\"vendor-chunks/openai@4.104.0_zod@3.25.76\"), __webpack_require__.e(\"vendor-chunks/form-data-encoder@1.7.2\"), __webpack_require__.e(\"vendor-chunks/whatwg-url@5.0.0\"), __webpack_require__.e(\"vendor-chunks/agentkeepalive@4.6.0\"), __webpack_require__.e(\"vendor-chunks/tr46@0.0.3\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill@4.0.0-beta.3\"), __webpack_require__.e(\"vendor-chunks/node-fetch@2.7.0\"), __webpack_require__.e(\"vendor-chunks/webidl-conversions@3.0.1\"), __webpack_require__.e(\"vendor-chunks/ms@2.1.3\"), __webpack_require__.e(\"vendor-chunks/humanize-ms@1.2.1\"), __webpack_require__.e(\"vendor-chunks/event-target-shim@5.0.1\"), __webpack_require__.e(\"vendor-chunks/abort-controller@3.0.0\")]).then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/.pnpm/openai@4.104.0_zod@3.25.76/node_modules/openai/index.mjs\"))).default;\n    const apiKey = process.env.OPENROUTER_KEY_PDF_TO_JSON;\n    if (!apiKey) throw new Error(\"OPENROUTER_KEY_PDF_TO_JSON missing\");\n    const openai = new OpenAI({\n        apiKey,\n        baseURL: \"https://openrouter.ai/api/v1\",\n        defaultHeaders: {\n            \"HTTP-Referer\": process.env.OPENROUTER_HTTP_REFERER || \"http://localhost:3000\",\n            \"X-Title\": process.env.OPENROUTER_APP_TITLE || \"QuickCV\"\n        }\n    });\n    const model = (0,_config_models__WEBPACK_IMPORTED_MODULE_1__.getConfiguredModel)(\"pdf\") || \"gpt-4o-mini\";\n    const cleaned = (0,_lib_parse__WEBPACK_IMPORTED_MODULE_0__.normalizeText)(cvText);\n    const todayISO = new Date().toISOString().split(\"T\")[0];\n    const system = [\n        'Tu es un parseur de CV. Ta sortie est un JSON \"CV structur\\xe9 (propre)\" sans invention,',\n        \"construit EXCLUSIVEMENT \\xe0 partir du texte fourni. Pr\\xe9serve l'ordre des exp\\xe9riences.\",\n        \"N'ajoute aucune information absente. Utilise la langue d'entr\\xe9e.\",\n        `Contexte temporel: la date d'aujourd'hui est ${todayISO}. Si le texte indique un poste en cours, utilise endDate:\"Present\".`,\n        `Ne marque PAS comme \"futur\" une date antérieure à ${todayISO}. N'invente pas de dates ou de périodes.`\n    ].join(\" \");\n    const schemaInstruction = [\n        \"Sch\\xe9ma attendu (cl\\xe9s facultatives quand non trouv\\xe9es). EXHAUSTIVIT\\xc9 OBLIGATOIRE: ne rien omettre; si une section ne correspond pas au sch\\xe9ma, la placer dans otherSections.\",\n        \"{\",\n        '  \"metadata\": { \"language\": string, \"sourceOrderPreserved\": true, \"warnings\": string[]? },',\n        '  \"header\": { \"fullName\"?: string, \"email\"?: string, \"phone\"?: string, \"location\"?: string,',\n        '              \"links\"?: { \"linkedin\"?: string, \"github\"?: string, \"portfolio\"?: string } },',\n        '  \"summary\"?: string,',\n        '  \"experience\"?: [ { \"company\"?: string, \"title\"?: string, \"location\"?: string,',\n        '                    \"startDateRaw\"?: string, \"endDateRaw\"?: string, \"datesRaw\"?: string,',\n        '                    \"bullets\"?: string[] } ],',\n        '  \"education\"?: [ { \"school\"?: string, \"degree\"?: string, \"location\"?: string, \"dates\"?: string } ],',\n        '  \"projects\"?: [ { \"name\"?: string, \"bullets\"?: string[] } ],',\n        '  \"skills\"?: { \"languages\"?: string[], \"frameworks\"?: string[], \"tools\"?: string[], \"other\"?: string[] },',\n        '  \"languages\"?: string[],  // langues parl\\xe9es (humaines) ex: Fran\\xe7ais, Anglais, Arabe',\n        '  \"interests\"?: string[],  // ex: Musique, Football, Th\\xe9\\xe2tre',\n        '  \"certifications\"?: string[],',\n        '  \"otherSections\"?: Array<{ title: string; items: string[] }>',\n        \"}\",\n        \"\",\n        \"- Ne JAMAIS inventer de donn\\xe9es. Laisse les champs manquants absents.\",\n        \"- Respecte scrupuleusement l'ordre des exp\\xe9riences tel qu'il appara\\xeet.\",\n        \"- Ajoute dans metadata.warnings les incertitudes/donn\\xe9es ambigu\\xebs.\",\n        '- N\\'OMETS AUCUNE SECTION DU CV: si une rubrique ne correspond pas exactement (ex: Centres d\\'int\\xe9r\\xeat, B\\xe9n\\xe9volat, Publications, R\\xe9f\\xe9rences), utilise \"interests\" (pour centres d\\'int\\xe9r\\xeat) ou \"otherSections\" avec {title, items}.',\n        '- Les langues parl\\xe9es (humaines) doivent aller dans \"languages\" (racine). Les langages de programmation vont dans skills.languages.'\n    ].join(\"\\n\");\n    const user = [\n        \"Texte brut du CV \\xe0 structurer en JSON propre (ne renvoie que l'objet JSON) :\",\n        \"---\",\n        cleaned,\n        \"---\",\n        schemaInstruction\n    ].join(\"\\n\");\n    const completion = await openai.chat.completions.create({\n        model,\n        messages: [\n            {\n                role: \"system\",\n                content: system\n            },\n            {\n                role: \"user\",\n                content: user\n            }\n        ],\n        temperature: 0.0,\n        max_tokens: 2000\n    });\n    const content = completion.choices[0]?.message?.content;\n    if (!content) throw new Error(\"Empty AI response for structuring\");\n    // Robust JSON salvage\n    const preClean = (t)=>t.replace(/\\uFEFF/g, \"\").replace(/\\u200B/g, \"\").replace(/```json/gi, \"```\").replace(/```/g, \"\").replace(/[\\u201C\\u201D]/g, '\"').replace(/[\\u2018\\u2019]/g, \"'\").replace(/\\/\\*[\\s\\S]*?\\*\\//g, \"\").replace(/(^|[\\r\\n])\\s*\\/\\/.*(?=\\r?\\n|$)/g, \"$1\").replace(/,\\s*([}\\]])/g, \"$1\");\n    const extractBalanced = (t)=>{\n        const txt = preClean(t);\n        const firstObj = txt.indexOf(\"{\");\n        const firstArr = txt.indexOf(\"[\");\n        let start = -1;\n        let open = \"\";\n        let close = \"\";\n        if (firstObj >= 0 && (firstArr < 0 || firstObj < firstArr)) {\n            start = firstObj;\n            open = \"{\";\n            close = \"}\";\n        } else if (firstArr >= 0) {\n            start = firstArr;\n            open = \"[\";\n            close = \"]\";\n        } else return null;\n        let depth = 0;\n        let inStr = false;\n        let esc = false;\n        for(let i = start; i < txt.length; i++){\n            const ch = txt[i];\n            if (inStr) {\n                if (esc) esc = false;\n                else if (ch === \"\\\\\") esc = true;\n                else if (ch === '\"') inStr = false;\n                continue;\n            }\n            if (ch === '\"') {\n                inStr = true;\n                continue;\n            }\n            if (ch === open) depth++;\n            else if (ch === close) {\n                depth--;\n                if (depth === 0) return txt.slice(start, i + 1);\n            }\n        }\n        return null;\n    };\n    const tryParse = (t)=>{\n        const a = preClean(t);\n        try {\n            return JSON.parse(a);\n        } catch  {}\n        const b = extractBalanced(a);\n        if (b) {\n            const bb = preClean(b);\n            try {\n                return JSON.parse(bb);\n            } catch  {}\n        }\n        const first = Math.min(...[\n            a.indexOf(\"{\"),\n            a.indexOf(\"[\")\n        ].filter((n)=>n >= 0));\n        const last = Math.max(a.lastIndexOf(\"}\"), a.lastIndexOf(\"]\"));\n        if (first >= 0 && last > first) {\n            const slice = preClean(a.slice(first, last + 1));\n            try {\n                return JSON.parse(slice);\n            } catch  {}\n        }\n        throw new Error(\"Invalid JSON from structuring AI\");\n    };\n    let parsed = tryParse(content);\n    // minimal sanity\n    if (!parsed || typeof parsed !== \"object\" || !parsed.metadata) {\n        throw new Error(\"Structuring output incomplete\");\n    }\n    return {\n        structured: parsed,\n        usage: completion?.usage,\n        model\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJO2dCQUFFLE9BQU9ULEtBQUtDLEtBQUssQ0FBQ0o7WUFBUSxFQUFFLE9BQU0sQ0FBQztRQUMzQztRQUNBLE1BQU0sSUFBSTVDLE1BQU07SUFDbEI7SUFFQSxJQUFJMkQsU0FBY2QsU0FBU3ZCO0lBQzNCLGlCQUFpQjtJQUNqQixJQUFJLENBQUNxQyxVQUFVLE9BQU9BLFdBQVcsWUFBWSxDQUFDQSxPQUFPQyxRQUFRLEVBQUU7UUFDN0QsTUFBTSxJQUFJNUQsTUFBTTtJQUNsQjtJQUNBLE9BQU87UUFBRTZELFlBQVlGO1FBQVFHLE9BQVE5QyxZQUFvQjhDO1FBQU94RDtJQUFNO0FBQ3hFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVhbGN2LWxpdGUtanNvbi8uL2xpYi9zdHJ1Y3R1cmVfYWkudHM/MzExNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBub3JtYWxpemVUZXh0IH0gZnJvbSAnQC9saWIvcGFyc2UnO1xyXG5pbXBvcnQgeyBnZXRDb25maWd1cmVkTW9kZWwgfSBmcm9tICdAL2NvbmZpZy9tb2RlbHMnO1xyXG5cclxuLyoqXHJcbiAqIFN0cnVjdHVyZSByYXcgQ1YgdGV4dCBpbnRvIGEgY2xlYW4gSlNPTiB1c2luZyBPcGVuQUkgKHRoaXJkIGtleTogT1BFTkFJX0FQSV9LRVlfUERGX1RPX0pTT04pXHJcbiAqIE5vIGludmVudGlvbiwgcHJlc2VydmUgb3JpZ2luYWwgb3JkZXIgb2YgZXhwZXJpZW5jZXMuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RydWN0dXJlQ3ZUZXh0V2l0aEFJKGN2VGV4dDogc3RyaW5nKTogUHJvbWlzZTx7IHN0cnVjdHVyZWQ6IGFueTsgdXNhZ2U/OiBhbnk7IG1vZGVsOiBzdHJpbmcgfT4ge1xyXG4gIGNvbnN0IE9wZW5BSSA9IChhd2FpdCBpbXBvcnQoJ29wZW5haScpKS5kZWZhdWx0O1xyXG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfS0VZX1BERl9UT19KU09OO1xyXG4gIGlmICghYXBpS2V5KSB0aHJvdyBuZXcgRXJyb3IoJ09QRU5ST1VURVJfS0VZX1BERl9UT19KU09OIG1pc3NpbmcnKTtcclxuICBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcclxuICAgIGFwaUtleSxcclxuICAgIGJhc2VVUkw6ICdodHRwczovL29wZW5yb3V0ZXIuYWkvYXBpL3YxJyxcclxuICAgIGRlZmF1bHRIZWFkZXJzOiB7XHJcbiAgICAgICdIVFRQLVJlZmVyZXInOiBwcm9jZXNzLmVudi5PUEVOUk9VVEVSX0hUVFBfUkVGRVJFUiB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJyxcclxuICAgICAgJ1gtVGl0bGUnOiBwcm9jZXNzLmVudi5PUEVOUk9VVEVSX0FQUF9USVRMRSB8fCAnUXVpY2tDVicsXHJcbiAgICB9LFxyXG4gIH0pO1xyXG4gIGNvbnN0IG1vZGVsID0gZ2V0Q29uZmlndXJlZE1vZGVsKCdwZGYnKSB8fCAnZ3B0LTRvLW1pbmknO1xyXG4gIGNvbnN0IGNsZWFuZWQgPSBub3JtYWxpemVUZXh0KGN2VGV4dCk7XHJcbiAgY29uc3QgdG9kYXlJU08gPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuXHJcbiAgY29uc3Qgc3lzdGVtID0gW1xyXG4gICAgJ1R1IGVzIHVuIHBhcnNldXIgZGUgQ1YuIFRhIHNvcnRpZSBlc3QgdW4gSlNPTiBcIkNWIHN0cnVjdHVyw6kgKHByb3ByZSlcIiBzYW5zIGludmVudGlvbiwnLFxyXG4gICAgJ2NvbnN0cnVpdCBFWENMVVNJVkVNRU5UIMOgIHBhcnRpciBkdSB0ZXh0ZSBmb3VybmkuIFByw6lzZXJ2ZSBsXFwnb3JkcmUgZGVzIGV4cMOpcmllbmNlcy4nLFxyXG4gICAgJ05cXCdham91dGUgYXVjdW5lIGluZm9ybWF0aW9uIGFic2VudGUuIFV0aWxpc2UgbGEgbGFuZ3VlIGRcXCdlbnRyw6llLicsXHJcbiAgICBgQ29udGV4dGUgdGVtcG9yZWw6IGxhIGRhdGUgZCdhdWpvdXJkJ2h1aSBlc3QgJHt0b2RheUlTT30uIFNpIGxlIHRleHRlIGluZGlxdWUgdW4gcG9zdGUgZW4gY291cnMsIHV0aWxpc2UgZW5kRGF0ZTpcIlByZXNlbnRcIi5gLFxyXG4gICAgYE5lIG1hcnF1ZSBQQVMgY29tbWUgXCJmdXR1clwiIHVuZSBkYXRlIGFudMOpcmlldXJlIMOgICR7dG9kYXlJU099LiBOJ2ludmVudGUgcGFzIGRlIGRhdGVzIG91IGRlIHDDqXJpb2Rlcy5gLFxyXG4gIF0uam9pbignICcpO1xyXG5cclxuICBjb25zdCBzY2hlbWFJbnN0cnVjdGlvbiA9IFtcclxuICAgICdTY2jDqW1hIGF0dGVuZHUgKGNsw6lzIGZhY3VsdGF0aXZlcyBxdWFuZCBub24gdHJvdXbDqWVzKS4gRVhIQVVTVElWSVTDiSBPQkxJR0FUT0lSRTogbmUgcmllbiBvbWV0dHJlOyBzaSB1bmUgc2VjdGlvbiBuZSBjb3JyZXNwb25kIHBhcyBhdSBzY2jDqW1hLCBsYSBwbGFjZXIgZGFucyBvdGhlclNlY3Rpb25zLicsXHJcbiAgICAneycsXHJcbiAgICAnICBcIm1ldGFkYXRhXCI6IHsgXCJsYW5ndWFnZVwiOiBzdHJpbmcsIFwic291cmNlT3JkZXJQcmVzZXJ2ZWRcIjogdHJ1ZSwgXCJ3YXJuaW5nc1wiOiBzdHJpbmdbXT8gfSwnLFxyXG4gICAgJyAgXCJoZWFkZXJcIjogeyBcImZ1bGxOYW1lXCI/OiBzdHJpbmcsIFwiZW1haWxcIj86IHN0cmluZywgXCJwaG9uZVwiPzogc3RyaW5nLCBcImxvY2F0aW9uXCI/OiBzdHJpbmcsJyxcclxuICAgICcgICAgICAgICAgICAgIFwibGlua3NcIj86IHsgXCJsaW5rZWRpblwiPzogc3RyaW5nLCBcImdpdGh1YlwiPzogc3RyaW5nLCBcInBvcnRmb2xpb1wiPzogc3RyaW5nIH0gfSwnLFxyXG4gICAgJyAgXCJzdW1tYXJ5XCI/OiBzdHJpbmcsJyxcclxuICAgICcgIFwiZXhwZXJpZW5jZVwiPzogWyB7IFwiY29tcGFueVwiPzogc3RyaW5nLCBcInRpdGxlXCI/OiBzdHJpbmcsIFwibG9jYXRpb25cIj86IHN0cmluZywnLFxyXG4gICAgJyAgICAgICAgICAgICAgICAgICAgXCJzdGFydERhdGVSYXdcIj86IHN0cmluZywgXCJlbmREYXRlUmF3XCI/OiBzdHJpbmcsIFwiZGF0ZXNSYXdcIj86IHN0cmluZywnLFxyXG4gICAgJyAgICAgICAgICAgICAgICAgICAgXCJidWxsZXRzXCI/OiBzdHJpbmdbXSB9IF0sJyxcclxuICAgICcgIFwiZWR1Y2F0aW9uXCI/OiBbIHsgXCJzY2hvb2xcIj86IHN0cmluZywgXCJkZWdyZWVcIj86IHN0cmluZywgXCJsb2NhdGlvblwiPzogc3RyaW5nLCBcImRhdGVzXCI/OiBzdHJpbmcgfSBdLCcsXHJcbiAgICAnICBcInByb2plY3RzXCI/OiBbIHsgXCJuYW1lXCI/OiBzdHJpbmcsIFwiYnVsbGV0c1wiPzogc3RyaW5nW10gfSBdLCcsXHJcbiAgICAnICBcInNraWxsc1wiPzogeyBcImxhbmd1YWdlc1wiPzogc3RyaW5nW10sIFwiZnJhbWV3b3Jrc1wiPzogc3RyaW5nW10sIFwidG9vbHNcIj86IHN0cmluZ1tdLCBcIm90aGVyXCI/OiBzdHJpbmdbXSB9LCcsXHJcbiAgICAnICBcImxhbmd1YWdlc1wiPzogc3RyaW5nW10sICAvLyBsYW5ndWVzIHBhcmzDqWVzIChodW1haW5lcykgZXg6IEZyYW7Dp2FpcywgQW5nbGFpcywgQXJhYmUnLFxyXG4gICAgJyAgXCJpbnRlcmVzdHNcIj86IHN0cmluZ1tdLCAgLy8gZXg6IE11c2lxdWUsIEZvb3RiYWxsLCBUaMOpw6J0cmUnLFxyXG4gICAgJyAgXCJjZXJ0aWZpY2F0aW9uc1wiPzogc3RyaW5nW10sJyxcclxuICAgICcgIFwib3RoZXJTZWN0aW9uc1wiPzogQXJyYXk8eyB0aXRsZTogc3RyaW5nOyBpdGVtczogc3RyaW5nW10gfT4nLFxyXG4gICAgJ30nLFxyXG4gICAgJycsXHJcbiAgICAnLSBOZSBKQU1BSVMgaW52ZW50ZXIgZGUgZG9ubsOpZXMuIExhaXNzZSBsZXMgY2hhbXBzIG1hbnF1YW50cyBhYnNlbnRzLicsXHJcbiAgICAnLSBSZXNwZWN0ZSBzY3J1cHVsZXVzZW1lbnQgbFxcJ29yZHJlIGRlcyBleHDDqXJpZW5jZXMgdGVsIHF1XFwnaWwgYXBwYXJhw650LicsXHJcbiAgICAnLSBBam91dGUgZGFucyBtZXRhZGF0YS53YXJuaW5ncyBsZXMgaW5jZXJ0aXR1ZGVzL2Rvbm7DqWVzIGFtYmlndcOrcy4nLFxyXG4gICAgJy0gTlxcJ09NRVRTIEFVQ1VORSBTRUNUSU9OIERVIENWOiBzaSB1bmUgcnVicmlxdWUgbmUgY29ycmVzcG9uZCBwYXMgZXhhY3RlbWVudCAoZXg6IENlbnRyZXMgZFxcJ2ludMOpcsOqdCwgQsOpbsOpdm9sYXQsIFB1YmxpY2F0aW9ucywgUsOpZsOpcmVuY2VzKSwgdXRpbGlzZSBcImludGVyZXN0c1wiIChwb3VyIGNlbnRyZXMgZFxcJ2ludMOpcsOqdCkgb3UgXCJvdGhlclNlY3Rpb25zXCIgYXZlYyB7dGl0bGUsIGl0ZW1zfS4nLFxyXG4gICAgJy0gTGVzIGxhbmd1ZXMgcGFybMOpZXMgKGh1bWFpbmVzKSBkb2l2ZW50IGFsbGVyIGRhbnMgXCJsYW5ndWFnZXNcIiAocmFjaW5lKS4gTGVzIGxhbmdhZ2VzIGRlIHByb2dyYW1tYXRpb24gdm9udCBkYW5zIHNraWxscy5sYW5ndWFnZXMuJyxcclxuICBdLmpvaW4oJ1xcbicpO1xyXG5cclxuICBjb25zdCB1c2VyID0gW1xyXG4gICAgJ1RleHRlIGJydXQgZHUgQ1Ygw6Agc3RydWN0dXJlciBlbiBKU09OIHByb3ByZSAobmUgcmVudm9pZSBxdWUgbFxcJ29iamV0IEpTT04pIDonLFxyXG4gICAgJy0tLScsXHJcbiAgICBjbGVhbmVkLFxyXG4gICAgJy0tLScsXHJcbiAgICBzY2hlbWFJbnN0cnVjdGlvbixcclxuICBdLmpvaW4oJ1xcbicpO1xyXG5cclxuICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcclxuICAgIG1vZGVsLFxyXG4gICAgbWVzc2FnZXM6IFtcclxuICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogc3lzdGVtIH0sXHJcbiAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiB1c2VyIH0sXHJcbiAgICBdLFxyXG4gICAgdGVtcGVyYXR1cmU6IDAuMCxcclxuICAgIG1heF90b2tlbnM6IDIwMDAsXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGNvbnRlbnQgPSBjb21wbGV0aW9uLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnQ7XHJcbiAgaWYgKCFjb250ZW50KSB0aHJvdyBuZXcgRXJyb3IoJ0VtcHR5IEFJIHJlc3BvbnNlIGZvciBzdHJ1Y3R1cmluZycpO1xyXG4gIC8vIFJvYnVzdCBKU09OIHNhbHZhZ2VcclxuICBjb25zdCBwcmVDbGVhbiA9ICh0OiBzdHJpbmcpID0+IHRcclxuICAgIC5yZXBsYWNlKC9cXHVGRUZGL2csICcnKVxyXG4gICAgLnJlcGxhY2UoL1xcdTIwMEIvZywgJycpXHJcbiAgICAucmVwbGFjZSgvYGBganNvbi9naSwgJ2BgYCcpXHJcbiAgICAucmVwbGFjZSgvYGBgL2csICcnKVxyXG4gICAgLnJlcGxhY2UoL1tcXHUyMDFDXFx1MjAxRF0vZywgJ1wiJylcclxuICAgIC5yZXBsYWNlKC9bXFx1MjAxOFxcdTIwMTldL2csIFwiJ1wiKVxyXG4gICAgLnJlcGxhY2UoL1xcL1xcKltcXHNcXFNdKj9cXCpcXC8vZywgJycpXHJcbiAgICAucmVwbGFjZSgvKF58W1xcclxcbl0pXFxzKlxcL1xcLy4qKD89XFxyP1xcbnwkKS9nLCAnJDEnKVxyXG4gICAgLnJlcGxhY2UoLyxcXHMqKFt9XFxdXSkvZywgJyQxJyk7XHJcblxyXG4gIGNvbnN0IGV4dHJhY3RCYWxhbmNlZCA9ICh0OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsID0+IHtcclxuICAgIGNvbnN0IHR4dCA9IHByZUNsZWFuKHQpO1xyXG4gICAgY29uc3QgZmlyc3RPYmogPSB0eHQuaW5kZXhPZigneycpO1xyXG4gICAgY29uc3QgZmlyc3RBcnIgPSB0eHQuaW5kZXhPZignWycpO1xyXG4gICAgbGV0IHN0YXJ0ID0gLTE7IGxldCBvcGVuID0gJyc7IGxldCBjbG9zZSA9ICcnO1xyXG4gICAgaWYgKGZpcnN0T2JqID49IDAgJiYgKGZpcnN0QXJyIDwgMCB8fCBmaXJzdE9iaiA8IGZpcnN0QXJyKSkgeyBzdGFydCA9IGZpcnN0T2JqOyBvcGVuID0gJ3snOyBjbG9zZSA9ICd9JzsgfVxyXG4gICAgZWxzZSBpZiAoZmlyc3RBcnIgPj0gMCkgeyBzdGFydCA9IGZpcnN0QXJyOyBvcGVuID0gJ1snOyBjbG9zZSA9ICddJzsgfVxyXG4gICAgZWxzZSByZXR1cm4gbnVsbDtcclxuICAgIGxldCBkZXB0aCA9IDA7IGxldCBpblN0ciA9IGZhbHNlOyBsZXQgZXNjID0gZmFsc2U7XHJcbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCB0eHQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgY2ggPSB0eHRbaV07XHJcbiAgICAgIGlmIChpblN0cikge1xyXG4gICAgICAgIGlmIChlc2MpIGVzYyA9IGZhbHNlOyBlbHNlIGlmIChjaCA9PT0gJ1xcXFwnKSBlc2MgPSB0cnVlOyBlbHNlIGlmIChjaCA9PT0gJ1wiJykgaW5TdHIgPSBmYWxzZTtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY2ggPT09ICdcIicpIHsgaW5TdHIgPSB0cnVlOyBjb250aW51ZTsgfVxyXG4gICAgICBpZiAoY2ggPT09IG9wZW4pIGRlcHRoKys7XHJcbiAgICAgIGVsc2UgaWYgKGNoID09PSBjbG9zZSkge1xyXG4gICAgICAgIGRlcHRoLS07XHJcbiAgICAgICAgaWYgKGRlcHRoID09PSAwKSByZXR1cm4gdHh0LnNsaWNlKHN0YXJ0LCBpICsgMSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHRyeVBhcnNlID0gKHQ6IHN0cmluZyk6IGFueSA9PiB7XHJcbiAgICBjb25zdCBhID0gcHJlQ2xlYW4odCk7XHJcbiAgICB0cnkgeyByZXR1cm4gSlNPTi5wYXJzZShhKTsgfSBjYXRjaCB7fVxyXG4gICAgY29uc3QgYiA9IGV4dHJhY3RCYWxhbmNlZChhKTtcclxuICAgIGlmIChiKSB7XHJcbiAgICAgIGNvbnN0IGJiID0gcHJlQ2xlYW4oYik7XHJcbiAgICAgIHRyeSB7IHJldHVybiBKU09OLnBhcnNlKGJiKTsgfSBjYXRjaCB7fVxyXG4gICAgfVxyXG4gICAgY29uc3QgZmlyc3QgPSBNYXRoLm1pbiguLi5bYS5pbmRleE9mKCd7JyksIGEuaW5kZXhPZignWycpXS5maWx0ZXIobiA9PiBuID49IDApKTtcclxuICAgIGNvbnN0IGxhc3QgPSBNYXRoLm1heChhLmxhc3RJbmRleE9mKCd9JyksIGEubGFzdEluZGV4T2YoJ10nKSk7XHJcbiAgICBpZiAoZmlyc3QgPj0gMCAmJiBsYXN0ID4gZmlyc3QpIHtcclxuICAgICAgY29uc3Qgc2xpY2UgPSBwcmVDbGVhbihhLnNsaWNlKGZpcnN0LCBsYXN0ICsgMSkpO1xyXG4gICAgICB0cnkgeyByZXR1cm4gSlNPTi5wYXJzZShzbGljZSk7IH0gY2F0Y2gge31cclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBKU09OIGZyb20gc3RydWN0dXJpbmcgQUknKTtcclxuICB9O1xyXG5cclxuICBsZXQgcGFyc2VkOiBhbnkgPSB0cnlQYXJzZShjb250ZW50KTtcclxuICAvLyBtaW5pbWFsIHNhbml0eVxyXG4gIGlmICghcGFyc2VkIHx8IHR5cGVvZiBwYXJzZWQgIT09ICdvYmplY3QnIHx8ICFwYXJzZWQubWV0YWRhdGEpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignU3RydWN0dXJpbmcgb3V0cHV0IGluY29tcGxldGUnKTtcclxuICB9XHJcbiAgcmV0dXJuIHsgc3RydWN0dXJlZDogcGFyc2VkLCB1c2FnZTogKGNvbXBsZXRpb24gYXMgYW55KT8udXNhZ2UsIG1vZGVsIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIm5vcm1hbGl6ZVRleHQiLCJnZXRDb25maWd1cmVkTW9kZWwiLCJzdHJ1Y3R1cmVDdlRleHRXaXRoQUkiLCJjdlRleHQiLCJPcGVuQUkiLCJkZWZhdWx0IiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5ST1VURVJfS0VZX1BERl9UT19KU09OIiwiRXJyb3IiLCJvcGVuYWkiLCJiYXNlVVJMIiwiZGVmYXVsdEhlYWRlcnMiLCJPUEVOUk9VVEVSX0hUVFBfUkVGRVJFUiIsIk9QRU5ST1VURVJfQVBQX1RJVExFIiwibW9kZWwiLCJjbGVhbmVkIiwidG9kYXlJU08iLCJEYXRlIiwidG9JU09TdHJpbmciLCJzcGxpdCIsInN5c3RlbSIsImpvaW4iLCJzY2hlbWFJbnN0cnVjdGlvbiIsInVzZXIiLCJjb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRlbXBlcmF0dXJlIiwibWF4X3Rva2VucyIsImNob2ljZXMiLCJtZXNzYWdlIiwicHJlQ2xlYW4iLCJ0IiwicmVwbGFjZSIsImV4dHJhY3RCYWxhbmNlZCIsInR4dCIsImZpcnN0T2JqIiwiaW5kZXhPZiIsImZpcnN0QXJyIiwic3RhcnQiLCJvcGVuIiwiY2xvc2UiLCJkZXB0aCIsImluU3RyIiwiZXNjIiwiaSIsImxlbmd0aCIsImNoIiwic2xpY2UiLCJ0cnlQYXJzZSIsImEiLCJKU09OIiwicGFyc2UiLCJiIiwiYmIiLCJmaXJzdCIsIk1hdGgiLCJtaW4iLCJmaWx0ZXIiLCJuIiwibGFzdCIsIm1heCIsImxhc3RJbmRleE9mIiwicGFyc2VkIiwibWV0YWRhdGEiLCJzdHJ1Y3R1cmVkIiwidXNhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/structure_ai.ts\n");

/***/ }),

/***/ "(rsc)/./src/hr/actionVerbs.ts":
/*!*******************************!*\
  !*** ./src/hr/actionVerbs.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ACTION_VERB_CATEGORIES: () => (/* binding */ ACTION_VERB_CATEGORIES),\n/* harmony export */   VERB_BANK: () => (/* binding */ VERB_BANK),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   filterForATS: () => (/* binding */ filterForATS),\n/* harmony export */   getVerbs: () => (/* binding */ getVerbs),\n/* harmony export */   suggestVerbsForIntent: () => (/* binding */ suggestVerbsForIntent)\n/* harmony export */ });\n// src/hr/actionVerbs.ts\n// Curated action verbs for resumes/CVs, grouped by recommended categories.\n// Inspired by Zety's \"350+ Action Words for Resume & Job Application\" (2025-10-07).\n// Keep this list concise and ATS-friendly; avoid rare/archaic forms.\nconst ACTION_VERB_CATEGORIES = [\n    \"teamwork\",\n    \"leadership\",\n    \"responsibility\",\n    \"communication\",\n    \"achievement\",\n    \"workedOn\",\n    \"improved\",\n    \"research\",\n    \"creativity\",\n    \"management\",\n    \"assist\",\n    \"utilize\"\n];\n// NOTE: Curated subset (practical, non-redundant). Additions should be common,\n// unambiguous, and easy to translate/localize.\nconst VERB_BANK = {\n    teamwork: [\n        \"Collaborated\",\n        \"Coordinated\",\n        \"Partnered\",\n        \"Contributed\",\n        \"Supported\",\n        \"Facilitated\",\n        \"Fostered\",\n        \"Joined\",\n        \"United\",\n        \"Encouraged\"\n    ],\n    leadership: [\n        \"Led\",\n        \"Chaired\",\n        \"Directed\",\n        \"Guided\",\n        \"Mentored\",\n        \"Spearheaded\",\n        \"Orchestrated\",\n        \"Delegated\",\n        \"Supervised\",\n        \"Mobilized\",\n        \"Inspired\",\n        \"Pioneered\"\n    ],\n    responsibility: [\n        // “Responsible for …” -> prefer specific actions:\n        \"Owned\",\n        \"Administered\",\n        \"Executed\",\n        \"Implemented\",\n        \"Oversaw\",\n        \"Coordinated\",\n        \"Handled\",\n        \"Delivered\",\n        \"Maintained\"\n    ],\n    communication: [\n        \"Presented\",\n        \"Briefed\",\n        \"Negotiated\",\n        \"Articulated\",\n        \"Documented\",\n        \"Moderated\",\n        \"Liaised\",\n        \"Advocated\",\n        \"Reported\",\n        \"Influenced\"\n    ],\n    achievement: [\n        \"Achieved\",\n        \"Exceeded\",\n        \"Surpassed\",\n        \"Delivered\",\n        \"Secured\",\n        \"Outperformed\",\n        \"Completed\",\n        \"Attained\",\n        \"Realized\"\n    ],\n    workedOn: [\n        \"Built\",\n        \"Created\",\n        \"Developed\",\n        \"Engineered\",\n        \"Produced\",\n        \"Implemented\",\n        \"Deployed\",\n        \"Configured\",\n        \"Tested\",\n        \"Launched\"\n    ],\n    improved: [\n        \"Improved\",\n        \"Enhanced\",\n        \"Optimized\",\n        \"Refined\",\n        \"Streamlined\",\n        \"Elevated\",\n        \"Strengthened\",\n        \"Expanded\",\n        \"Reduced\",\n        \"Accelerated\"\n    ],\n    research: [\n        \"Researched\",\n        \"Investigated\",\n        \"Analyzed\",\n        \"Assessed\",\n        \"Evaluated\",\n        \"Synthesized\",\n        \"Benchmarked\",\n        \"Explored\",\n        \"Validated\"\n    ],\n    creativity: [\n        \"Designed\",\n        \"Drafted\",\n        \"Conceptualized\",\n        \"Ideated\",\n        \"Prototyped\",\n        \"Innovated\",\n        \"Composed\",\n        \"Authored\",\n        \"Devised\"\n    ],\n    management: [\n        // Alternatives to repeating “Managed”\n        \"Directed\",\n        \"Led\",\n        \"Oversaw\",\n        \"Administered\",\n        \"Coordinated\",\n        \"Supervised\",\n        \"Governed\",\n        \"Steered\",\n        \"Organized\",\n        \"Allocated\"\n    ],\n    assist: [\n        // Alternatives to repeating “Assisted”\n        \"Supported\",\n        \"Aided\",\n        \"Facilitated\",\n        \"Guided\",\n        \"Coached\",\n        \"Encouraged\",\n        \"Expedited\",\n        \"Reinforced\",\n        \"Served\",\n        \"Sustained\"\n    ],\n    utilize: [\n        // Alternatives to “Utilized”\n        \"Applied\",\n        \"Employed\",\n        \"Implemented\",\n        \"Leveraged\",\n        \"Deployed\",\n        \"Operated\",\n        \"Executed\",\n        \"Mobilized\",\n        \"Put to use\",\n        \"Optimized\"\n    ]\n};\n// ---------- Helpers ----------\n/**\r\n * Returns a de-duplicated, alphabetized list of verbs for the given categories.\r\n * @example getVerbs([\"leadership\",\"management\"]) \r\n */ function getVerbs(categories) {\n    const bag = new Set();\n    for (const c of categories){\n        (VERB_BANK[c] ?? []).forEach((v)=>bag.add(v));\n    }\n    return Array.from(bag).sort((a, b)=>a.localeCompare(b));\n}\n/**\r\n * Suggest a compact set of verbs for a common intent (bullet rewriting).\r\n * E.g., “lead a project” -> leadership+management; “improve process” -> improved.\r\n */ function suggestVerbsForIntent(intent) {\n    const map = {\n        lead: [\n            \"leadership\",\n            \"management\"\n        ],\n        deliver: [\n            \"achievement\",\n            \"responsibility\"\n        ],\n        improve: [\n            \"improved\",\n            \"management\"\n        ],\n        collaborate: [\n            \"teamwork\",\n            \"communication\"\n        ],\n        research: [\n            \"research\"\n        ],\n        create: [\n            \"workedOn\",\n            \"creativity\"\n        ],\n        communicate: [\n            \"communication\",\n            \"leadership\"\n        ]\n    };\n    return getVerbs(map[intent] ?? []);\n}\n/**\r\n * Filters out verbs that are too generic for ATS (optional guardrail).\r\n * Keep concise, high-signal verbs; drop vague/stretch words if provided.\r\n */ function filterForATS(verbs) {\n    const blacklist = new Set([\n        \"Worked\",\n        \"Helped\",\n        \"Used\",\n        \"Handled stuff\" // example of vague phrasing to avoid\n    ]);\n    return verbs.filter((v)=>!blacklist.has(v));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    ACTION_VERB_CATEGORIES,\n    VERB_BANK,\n    getVerbs,\n    suggestVerbsForIntent,\n    filterForATS\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxNQUFNLENBQUNwQixDQUFBQSxJQUFLLENBQUNtQixVQUFVRSxHQUFHLENBQUNyQjtBQUMxQztBQUVBLGlFQUFlO0lBQ2JwQjtJQUNBQztJQUNBYTtJQUNBYztJQUNBUztBQUNGLENBQUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3JlYWxjdi1saXRlLWpzb24vLi9zcmMvaHIvYWN0aW9uVmVyYnMudHM/MzM5MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvaHIvYWN0aW9uVmVyYnMudHNcclxuLy8gQ3VyYXRlZCBhY3Rpb24gdmVyYnMgZm9yIHJlc3VtZXMvQ1ZzLCBncm91cGVkIGJ5IHJlY29tbWVuZGVkIGNhdGVnb3JpZXMuXHJcbi8vIEluc3BpcmVkIGJ5IFpldHkncyBcIjM1MCsgQWN0aW9uIFdvcmRzIGZvciBSZXN1bWUgJiBKb2IgQXBwbGljYXRpb25cIiAoMjAyNS0xMC0wNykuXHJcbi8vIEtlZXAgdGhpcyBsaXN0IGNvbmNpc2UgYW5kIEFUUy1mcmllbmRseTsgYXZvaWQgcmFyZS9hcmNoYWljIGZvcm1zLlxyXG5cclxuZXhwb3J0IHR5cGUgQWN0aW9uVmVyYkNhdGVnb3J5ID1cclxuICB8IFwidGVhbXdvcmtcIlxyXG4gIHwgXCJsZWFkZXJzaGlwXCJcclxuICB8IFwicmVzcG9uc2liaWxpdHlcIlxyXG4gIHwgXCJjb21tdW5pY2F0aW9uXCJcclxuICB8IFwiYWNoaWV2ZW1lbnRcIlxyXG4gIHwgXCJ3b3JrZWRPblwiXHJcbiAgfCBcImltcHJvdmVkXCJcclxuICB8IFwicmVzZWFyY2hcIlxyXG4gIHwgXCJjcmVhdGl2aXR5XCJcclxuICB8IFwibWFuYWdlbWVudFwiXHJcbiAgfCBcImFzc2lzdFwiXHJcbiAgfCBcInV0aWxpemVcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBBQ1RJT05fVkVSQl9DQVRFR09SSUVTOiBBY3Rpb25WZXJiQ2F0ZWdvcnlbXSA9IFtcclxuICBcInRlYW13b3JrXCIsXHJcbiAgXCJsZWFkZXJzaGlwXCIsXHJcbiAgXCJyZXNwb25zaWJpbGl0eVwiLFxyXG4gIFwiY29tbXVuaWNhdGlvblwiLFxyXG4gIFwiYWNoaWV2ZW1lbnRcIixcclxuICBcIndvcmtlZE9uXCIsXHJcbiAgXCJpbXByb3ZlZFwiLFxyXG4gIFwicmVzZWFyY2hcIixcclxuICBcImNyZWF0aXZpdHlcIixcclxuICBcIm1hbmFnZW1lbnRcIixcclxuICBcImFzc2lzdFwiLFxyXG4gIFwidXRpbGl6ZVwiLFxyXG5dO1xyXG5cclxudHlwZSBWZXJiQmFuayA9IFJlY29yZDxBY3Rpb25WZXJiQ2F0ZWdvcnksIHJlYWRvbmx5IHN0cmluZ1tdPjtcclxuXHJcbi8vIE5PVEU6IEN1cmF0ZWQgc3Vic2V0IChwcmFjdGljYWwsIG5vbi1yZWR1bmRhbnQpLiBBZGRpdGlvbnMgc2hvdWxkIGJlIGNvbW1vbixcclxuIC8vIHVuYW1iaWd1b3VzLCBhbmQgZWFzeSB0byB0cmFuc2xhdGUvbG9jYWxpemUuXHJcbmV4cG9ydCBjb25zdCBWRVJCX0JBTks6IFZlcmJCYW5rID0ge1xyXG4gIHRlYW13b3JrOiBbXHJcbiAgICBcIkNvbGxhYm9yYXRlZFwiLFxyXG4gICAgXCJDb29yZGluYXRlZFwiLFxyXG4gICAgXCJQYXJ0bmVyZWRcIixcclxuICAgIFwiQ29udHJpYnV0ZWRcIixcclxuICAgIFwiU3VwcG9ydGVkXCIsXHJcbiAgICBcIkZhY2lsaXRhdGVkXCIsXHJcbiAgICBcIkZvc3RlcmVkXCIsXHJcbiAgICBcIkpvaW5lZFwiLFxyXG4gICAgXCJVbml0ZWRcIixcclxuICAgIFwiRW5jb3VyYWdlZFwiLFxyXG4gIF0gYXMgY29uc3QsXHJcblxyXG4gIGxlYWRlcnNoaXA6IFtcclxuICAgIFwiTGVkXCIsXHJcbiAgICBcIkNoYWlyZWRcIixcclxuICAgIFwiRGlyZWN0ZWRcIixcclxuICAgIFwiR3VpZGVkXCIsXHJcbiAgICBcIk1lbnRvcmVkXCIsXHJcbiAgICBcIlNwZWFyaGVhZGVkXCIsXHJcbiAgICBcIk9yY2hlc3RyYXRlZFwiLFxyXG4gICAgXCJEZWxlZ2F0ZWRcIixcclxuICAgIFwiU3VwZXJ2aXNlZFwiLFxyXG4gICAgXCJNb2JpbGl6ZWRcIixcclxuICAgIFwiSW5zcGlyZWRcIixcclxuICAgIFwiUGlvbmVlcmVkXCIsXHJcbiAgXSBhcyBjb25zdCxcclxuXHJcbiAgcmVzcG9uc2liaWxpdHk6IFtcclxuICAgIC8vIOKAnFJlc3BvbnNpYmxlIGZvciDigKbigJ0gLT4gcHJlZmVyIHNwZWNpZmljIGFjdGlvbnM6XHJcbiAgICBcIk93bmVkXCIsXHJcbiAgICBcIkFkbWluaXN0ZXJlZFwiLFxyXG4gICAgXCJFeGVjdXRlZFwiLFxyXG4gICAgXCJJbXBsZW1lbnRlZFwiLFxyXG4gICAgXCJPdmVyc2F3XCIsXHJcbiAgICBcIkNvb3JkaW5hdGVkXCIsXHJcbiAgICBcIkhhbmRsZWRcIixcclxuICAgIFwiRGVsaXZlcmVkXCIsXHJcbiAgICBcIk1haW50YWluZWRcIixcclxuICBdIGFzIGNvbnN0LFxyXG5cclxuICBjb21tdW5pY2F0aW9uOiBbXHJcbiAgICBcIlByZXNlbnRlZFwiLFxyXG4gICAgXCJCcmllZmVkXCIsXHJcbiAgICBcIk5lZ290aWF0ZWRcIixcclxuICAgIFwiQXJ0aWN1bGF0ZWRcIixcclxuICAgIFwiRG9jdW1lbnRlZFwiLFxyXG4gICAgXCJNb2RlcmF0ZWRcIixcclxuICAgIFwiTGlhaXNlZFwiLFxyXG4gICAgXCJBZHZvY2F0ZWRcIixcclxuICAgIFwiUmVwb3J0ZWRcIixcclxuICAgIFwiSW5mbHVlbmNlZFwiLFxyXG4gIF0gYXMgY29uc3QsXHJcblxyXG4gIGFjaGlldmVtZW50OiBbXHJcbiAgICBcIkFjaGlldmVkXCIsXHJcbiAgICBcIkV4Y2VlZGVkXCIsXHJcbiAgICBcIlN1cnBhc3NlZFwiLFxyXG4gICAgXCJEZWxpdmVyZWRcIixcclxuICAgIFwiU2VjdXJlZFwiLFxyXG4gICAgXCJPdXRwZXJmb3JtZWRcIixcclxuICAgIFwiQ29tcGxldGVkXCIsXHJcbiAgICBcIkF0dGFpbmVkXCIsXHJcbiAgICBcIlJlYWxpemVkXCIsXHJcbiAgXSBhcyBjb25zdCxcclxuXHJcbiAgd29ya2VkT246IFtcclxuICAgIFwiQnVpbHRcIixcclxuICAgIFwiQ3JlYXRlZFwiLFxyXG4gICAgXCJEZXZlbG9wZWRcIixcclxuICAgIFwiRW5naW5lZXJlZFwiLFxyXG4gICAgXCJQcm9kdWNlZFwiLFxyXG4gICAgXCJJbXBsZW1lbnRlZFwiLFxyXG4gICAgXCJEZXBsb3llZFwiLFxyXG4gICAgXCJDb25maWd1cmVkXCIsXHJcbiAgICBcIlRlc3RlZFwiLFxyXG4gICAgXCJMYXVuY2hlZFwiLFxyXG4gIF0gYXMgY29uc3QsXHJcblxyXG4gIGltcHJvdmVkOiBbXHJcbiAgICBcIkltcHJvdmVkXCIsXHJcbiAgICBcIkVuaGFuY2VkXCIsXHJcbiAgICBcIk9wdGltaXplZFwiLFxyXG4gICAgXCJSZWZpbmVkXCIsXHJcbiAgICBcIlN0cmVhbWxpbmVkXCIsXHJcbiAgICBcIkVsZXZhdGVkXCIsXHJcbiAgICBcIlN0cmVuZ3RoZW5lZFwiLFxyXG4gICAgXCJFeHBhbmRlZFwiLFxyXG4gICAgXCJSZWR1Y2VkXCIsXHJcbiAgICBcIkFjY2VsZXJhdGVkXCIsXHJcbiAgXSBhcyBjb25zdCxcclxuXHJcbiAgcmVzZWFyY2g6IFtcclxuICAgIFwiUmVzZWFyY2hlZFwiLFxyXG4gICAgXCJJbnZlc3RpZ2F0ZWRcIixcclxuICAgIFwiQW5hbHl6ZWRcIixcclxuICAgIFwiQXNzZXNzZWRcIixcclxuICAgIFwiRXZhbHVhdGVkXCIsXHJcbiAgICBcIlN5bnRoZXNpemVkXCIsXHJcbiAgICBcIkJlbmNobWFya2VkXCIsXHJcbiAgICBcIkV4cGxvcmVkXCIsXHJcbiAgICBcIlZhbGlkYXRlZFwiLFxyXG4gIF0gYXMgY29uc3QsXHJcblxyXG4gIGNyZWF0aXZpdHk6IFtcclxuICAgIFwiRGVzaWduZWRcIixcclxuICAgIFwiRHJhZnRlZFwiLFxyXG4gICAgXCJDb25jZXB0dWFsaXplZFwiLFxyXG4gICAgXCJJZGVhdGVkXCIsXHJcbiAgICBcIlByb3RvdHlwZWRcIixcclxuICAgIFwiSW5ub3ZhdGVkXCIsXHJcbiAgICBcIkNvbXBvc2VkXCIsXHJcbiAgICBcIkF1dGhvcmVkXCIsXHJcbiAgICBcIkRldmlzZWRcIixcclxuICBdIGFzIGNvbnN0LFxyXG5cclxuICBtYW5hZ2VtZW50OiBbXHJcbiAgICAvLyBBbHRlcm5hdGl2ZXMgdG8gcmVwZWF0aW5nIOKAnE1hbmFnZWTigJ1cclxuICAgIFwiRGlyZWN0ZWRcIixcclxuICAgIFwiTGVkXCIsXHJcbiAgICBcIk92ZXJzYXdcIixcclxuICAgIFwiQWRtaW5pc3RlcmVkXCIsXHJcbiAgICBcIkNvb3JkaW5hdGVkXCIsXHJcbiAgICBcIlN1cGVydmlzZWRcIixcclxuICAgIFwiR292ZXJuZWRcIixcclxuICAgIFwiU3RlZXJlZFwiLFxyXG4gICAgXCJPcmdhbml6ZWRcIixcclxuICAgIFwiQWxsb2NhdGVkXCIsXHJcbiAgXSBhcyBjb25zdCxcclxuXHJcbiAgYXNzaXN0OiBbXHJcbiAgICAvLyBBbHRlcm5hdGl2ZXMgdG8gcmVwZWF0aW5nIOKAnEFzc2lzdGVk4oCdXHJcbiAgICBcIlN1cHBvcnRlZFwiLFxyXG4gICAgXCJBaWRlZFwiLFxyXG4gICAgXCJGYWNpbGl0YXRlZFwiLFxyXG4gICAgXCJHdWlkZWRcIixcclxuICAgIFwiQ29hY2hlZFwiLFxyXG4gICAgXCJFbmNvdXJhZ2VkXCIsXHJcbiAgICBcIkV4cGVkaXRlZFwiLFxyXG4gICAgXCJSZWluZm9yY2VkXCIsXHJcbiAgICBcIlNlcnZlZFwiLFxyXG4gICAgXCJTdXN0YWluZWRcIixcclxuICBdIGFzIGNvbnN0LFxyXG5cclxuICB1dGlsaXplOiBbXHJcbiAgICAvLyBBbHRlcm5hdGl2ZXMgdG8g4oCcVXRpbGl6ZWTigJ1cclxuICAgIFwiQXBwbGllZFwiLFxyXG4gICAgXCJFbXBsb3llZFwiLFxyXG4gICAgXCJJbXBsZW1lbnRlZFwiLFxyXG4gICAgXCJMZXZlcmFnZWRcIixcclxuICAgIFwiRGVwbG95ZWRcIixcclxuICAgIFwiT3BlcmF0ZWRcIixcclxuICAgIFwiRXhlY3V0ZWRcIixcclxuICAgIFwiTW9iaWxpemVkXCIsXHJcbiAgICBcIlB1dCB0byB1c2VcIixcclxuICAgIFwiT3B0aW1pemVkXCIsXHJcbiAgXSBhcyBjb25zdCxcclxufTtcclxuXHJcbi8vIC0tLS0tLS0tLS0gSGVscGVycyAtLS0tLS0tLS0tXHJcblxyXG4vKipcclxuICogUmV0dXJucyBhIGRlLWR1cGxpY2F0ZWQsIGFscGhhYmV0aXplZCBsaXN0IG9mIHZlcmJzIGZvciB0aGUgZ2l2ZW4gY2F0ZWdvcmllcy5cclxuICogQGV4YW1wbGUgZ2V0VmVyYnMoW1wibGVhZGVyc2hpcFwiLFwibWFuYWdlbWVudFwiXSkgXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmVyYnMoY2F0ZWdvcmllczogQWN0aW9uVmVyYkNhdGVnb3J5W10pOiBzdHJpbmdbXSB7XHJcbiAgY29uc3QgYmFnID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgZm9yIChjb25zdCBjIG9mIGNhdGVnb3JpZXMpIHtcclxuICAgIChWRVJCX0JBTktbY10gPz8gW10pLmZvckVhY2godiA9PiBiYWcuYWRkKHYpKTtcclxuICB9XHJcbiAgcmV0dXJuIEFycmF5LmZyb20oYmFnKS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpO1xyXG59XHJcblxyXG4vKipcclxuICogU3VnZ2VzdCBhIGNvbXBhY3Qgc2V0IG9mIHZlcmJzIGZvciBhIGNvbW1vbiBpbnRlbnQgKGJ1bGxldCByZXdyaXRpbmcpLlxyXG4gKiBFLmcuLCDigJxsZWFkIGEgcHJvamVjdOKAnSAtPiBsZWFkZXJzaGlwK21hbmFnZW1lbnQ7IOKAnGltcHJvdmUgcHJvY2Vzc+KAnSAtPiBpbXByb3ZlZC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzdWdnZXN0VmVyYnNGb3JJbnRlbnQoaW50ZW50OlxyXG4gIHwgXCJsZWFkXCJcclxuICB8IFwiZGVsaXZlclwiXHJcbiAgfCBcImltcHJvdmVcIlxyXG4gIHwgXCJjb2xsYWJvcmF0ZVwiXHJcbiAgfCBcInJlc2VhcmNoXCJcclxuICB8IFwiY3JlYXRlXCJcclxuICB8IFwiY29tbXVuaWNhdGVcIlxyXG4pOiBzdHJpbmdbXSB7XHJcbiAgY29uc3QgbWFwOiBSZWNvcmQ8c3RyaW5nLCBBY3Rpb25WZXJiQ2F0ZWdvcnlbXT4gPSB7XHJcbiAgICBsZWFkOiBbXCJsZWFkZXJzaGlwXCIsIFwibWFuYWdlbWVudFwiXSxcclxuICAgIGRlbGl2ZXI6IFtcImFjaGlldmVtZW50XCIsIFwicmVzcG9uc2liaWxpdHlcIl0sXHJcbiAgICBpbXByb3ZlOiBbXCJpbXByb3ZlZFwiLCBcIm1hbmFnZW1lbnRcIl0sXHJcbiAgICBjb2xsYWJvcmF0ZTogW1widGVhbXdvcmtcIiwgXCJjb21tdW5pY2F0aW9uXCJdLFxyXG4gICAgcmVzZWFyY2g6IFtcInJlc2VhcmNoXCJdLFxyXG4gICAgY3JlYXRlOiBbXCJ3b3JrZWRPblwiLCBcImNyZWF0aXZpdHlcIl0sXHJcbiAgICBjb21tdW5pY2F0ZTogW1wiY29tbXVuaWNhdGlvblwiLCBcImxlYWRlcnNoaXBcIl0sXHJcbiAgfTtcclxuICByZXR1cm4gZ2V0VmVyYnMobWFwW2ludGVudF0gPz8gW10pO1xyXG59XHJcblxyXG4vKipcclxuICogRmlsdGVycyBvdXQgdmVyYnMgdGhhdCBhcmUgdG9vIGdlbmVyaWMgZm9yIEFUUyAob3B0aW9uYWwgZ3VhcmRyYWlsKS5cclxuICogS2VlcCBjb25jaXNlLCBoaWdoLXNpZ25hbCB2ZXJiczsgZHJvcCB2YWd1ZS9zdHJldGNoIHdvcmRzIGlmIHByb3ZpZGVkLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckZvckFUUyh2ZXJiczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XHJcbiAgY29uc3QgYmxhY2tsaXN0ID0gbmV3IFNldChbXHJcbiAgICBcIldvcmtlZFwiLFxyXG4gICAgXCJIZWxwZWRcIiwgICAgICAvLyB1c2Ug4oCcU3VwcG9ydGVkL0Fzc2lzdGVk4oCdIHZhcmlhbnRzIHdpdGggY29udGV4dFxyXG4gICAgXCJVc2VkXCIsICAgICAgICAvLyBwcmVmZXIg4oCcQXBwbGllZC9MZXZlcmFnZWQvSW1wbGVtZW50ZWTigJ1cclxuICAgIFwiSGFuZGxlZCBzdHVmZlwiLy8gZXhhbXBsZSBvZiB2YWd1ZSBwaHJhc2luZyB0byBhdm9pZFxyXG4gIF0pO1xyXG4gIHJldHVybiB2ZXJicy5maWx0ZXIodiA9PiAhYmxhY2tsaXN0Lmhhcyh2KSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBBQ1RJT05fVkVSQl9DQVRFR09SSUVTLFxyXG4gIFZFUkJfQkFOSyxcclxuICBnZXRWZXJicyxcclxuICBzdWdnZXN0VmVyYnNGb3JJbnRlbnQsXHJcbiAgZmlsdGVyRm9yQVRTLFxyXG59O1xyXG4iXSwibmFtZXMiOlsiQUNUSU9OX1ZFUkJfQ0FURUdPUklFUyIsIlZFUkJfQkFOSyIsInRlYW13b3JrIiwibGVhZGVyc2hpcCIsInJlc3BvbnNpYmlsaXR5IiwiY29tbXVuaWNhdGlvbiIsImFjaGlldmVtZW50Iiwid29ya2VkT24iLCJpbXByb3ZlZCIsInJlc2VhcmNoIiwiY3JlYXRpdml0eSIsIm1hbmFnZW1lbnQiLCJhc3Npc3QiLCJ1dGlsaXplIiwiZ2V0VmVyYnMiLCJjYXRlZ29yaWVzIiwiYmFnIiwiU2V0IiwiYyIsImZvckVhY2giLCJ2IiwiYWRkIiwiQXJyYXkiLCJmcm9tIiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsInN1Z2dlc3RWZXJic0ZvckludGVudCIsImludGVudCIsIm1hcCIsImxlYWQiLCJkZWxpdmVyIiwiaW1wcm92ZSIsImNvbGxhYm9yYXRlIiwiY3JlYXRlIiwiY29tbXVuaWNhdGUiLCJmaWx0ZXJGb3JBVFMiLCJ2ZXJicyIsImJsYWNrbGlzdCIsImZpbHRlciIsImhhcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/hr/actionVerbs.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/zod@3.25.76"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadapt%2Froute&page=%2Fapi%2Fadapt%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadapt%2Froute.ts&appDir=C%3A%5CTest%5CAIservice-infcv%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CTest%5CAIservice-infcv&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();